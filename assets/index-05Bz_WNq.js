import{t as or,c as cr,r as d,j as e,V as Lt,R as Ot,a as ts,A as Ft,C as $t,b as zt,T as qt,D as Bt,P as dr,d as Ut,e as b,S as mr,f as Gt,g as hr,h as ur,i as Vt,k as xr,l as pr,m as Gs,X as st,n as Ht,L as Wt,o as Kt,p as tt,q as Yt,s as Jt,I as Zt,u as gr,v as fr,w as Xt,x as Qt,F as ea,y as sa,z as jr,B as ta,E as vr,G as aa,H as ra,J as na,K as ia,M as yr,N as la,O as Nr,Q as oa,U as ca,W as br,Y as wr,Z as da,_ as Sr,$ as ma,a0 as _r,a1 as ha,a2 as ua,a3 as kr,a4 as Pr,a5 as xa,a6 as Me,a7 as Cr,a8 as pa,a9 as Vs,aa as Hs,ab as ft,ac as jt,ad as us,ae as vt,af as Ir,ag as Ar,ah as ga,ai as fa,aj as yt,ak as ja,al as va,am as ya,an as Rr,ao as Er,ap as Mr,aq as Na,ar as ba,as as wa,at as Tr,au as de,av as Dr,aw as Lr,ax as os,ay as Or,az as at,aA as Fr,aB as ws,aC as $r,aD as Sa,aE as _a,aF as Ke,aG as He,aH as Qe,aI as Nt,aJ as ka,aK as Ws,aL as $e,aM as Pa,aN as Ss,aO as zr,aP as qr,aQ as Br,aR as Ks,aS as es,aT as Ca,aU as Ur,aV as Gr,aW as Vr,aX as We,aY as Oe,aZ as Is,a_ as Ye,a$ as Je,b0 as Ze,b1 as Fe,b2 as hs,b3 as Hr,b4 as Wr,b5 as rt,b6 as Fs,b7 as Kr,b8 as Yr,b9 as Jr,ba as bt,bb as wt,bc as Zr,bd as Xr,be as _s,bf as As,bg as Qr,bh as Ia,bi as en,bj as Aa,bk as sn,bl as Ra,bm as tn,bn as Ea,bo as an,bp as Ma,bq as rn,br as Ta,bs as Da,bt as nn,bu as ln,bv as La,bw as on,bx as cn,by as St,bz as dn,bA as Oa,bB as mn,bC as hn,bD as un,bE as xn,bF as pn,bG as gn,bH as fn,bI as jn,bJ as Fa,bK as vn,bL as yn,bM as Nn,bN as bn,bO as wn,bP as Sn,bQ as _n,bR as kn,bS as Pn,bT as Cn,bU as se,bV as In,bW as An,bX as Rn,bY as En,bZ as Mn,b_ as Tn,b$ as Dn}from"./vendor-BgshIRT9.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function I(...s){return or(cr(s))}function $(s){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}function ks(s){return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"long",year:"numeric"}).format(new Date(s))}function $a(s){return new Intl.NumberFormat("en-GB").format(s)}const Ln=dr,za=d.forwardRef(({className:s,...a},t)=>e.jsx(Lt,{ref:t,className:I("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));za.displayName=Lt.displayName;const On=ts("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),qa=d.forwardRef(({className:s,variant:a,...t},r)=>e.jsx(Ot,{ref:r,className:I(On({variant:a}),s),...t}));qa.displayName=Ot.displayName;const Fn=d.forwardRef(({className:s,...a},t)=>e.jsx(Ft,{ref:t,className:I("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a}));Fn.displayName=Ft.displayName;const Ba=d.forwardRef(({className:s,...a},t)=>e.jsx($t,{ref:t,className:I("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:e.jsx(zt,{className:"h-4 w-4"})}));Ba.displayName=$t.displayName;const Ua=d.forwardRef(({className:s,...a},t)=>e.jsx(qt,{ref:t,className:I("text-sm font-semibold [&+div]:text-xs",s),...a}));Ua.displayName=qt.displayName;const Ga=d.forwardRef(({className:s,...a},t)=>e.jsx(Bt,{ref:t,className:I("text-sm opacity-90",s),...a}));Ga.displayName=Bt.displayName;const $n=1,zn=1e6;let $s=0;function qn(){return $s=($s+1)%Number.MAX_SAFE_INTEGER,$s.toString()}const zs=new Map,_t=s=>{if(zs.has(s))return;const a=setTimeout(()=>{zs.delete(s),cs({type:"REMOVE_TOAST",toastId:s})},zn);zs.set(s,a)},Bn=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,$n)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?_t(t):s.toasts.forEach(r=>{_t(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},Ps=[];let Cs={toasts:[]};function cs(s){Cs=Bn(Cs,s),Ps.forEach(a=>{a(Cs)})}function Un({...s}){const a=qn(),t=n=>cs({type:"UPDATE_TOAST",toast:{...n,id:a}}),r=()=>cs({type:"DISMISS_TOAST",toastId:a});return cs({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:n=>{n||r()}}}),{id:a,dismiss:r,update:t}}function be(){const[s,a]=d.useState(Cs);return d.useEffect(()=>(Ps.push(a),()=>{const t=Ps.indexOf(a);t>-1&&Ps.splice(t,1)}),[s]),{...s,toast:Un,dismiss:t=>cs({type:"DISMISS_TOAST",toastId:t})}}function Gn(){const{toasts:s}=be();return e.jsxs(Ln,{children:[s.map(function({id:a,title:t,description:r,action:n,...l}){return e.jsxs(qa,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(Ua,{children:t}),r&&e.jsx(Ga,{children:r})]}),n,e.jsx(Ba,{})]},a)}),e.jsx(za,{})]})}const Vn="https://zcuapuvvygahkzljuhyg.supabase.co",Hn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdWFwdXZ2eWdhaGt6bGp1aHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MTQwMzcsImV4cCI6MjA1MzQ5MDAzN30.GIhphzkznmDXgrUApGW479uHHluqDWqy_9cfG5sU5Xc",ge=Ut(Vn,Hn),Va=d.createContext({user:null,session:null,profile:null,isLoading:!0,signOut:async()=>{},refreshSession:async()=>{}}),qs=async s=>{try{const{data:a,error:t}=await ge.from("profiles").select("*").eq("id",s).single();return t?(console.error("Error fetching profile:",t),null):(console.log("Fetched profile data:",a),a)}catch(a){return console.error("Error in fetchProfile:",a),null}},Ha=({children:s})=>{const[a,t]=d.useState(null),[r,n]=d.useState(null),[l,i]=d.useState(null),[g,h]=d.useState(!0),y=async()=>{var p,k;try{h(!0),console.log("Refreshing session...");const{data:j,error:D}=await ge.auth.getSession();if(D)throw D;if(console.log("Session data:",j),n(j.session),t(((p=j.session)==null?void 0:p.user)||null),(k=j.session)!=null&&k.user){const C=await qs(j.session.user.id);i(C)}else i(null)}catch(j){console.error("Error refreshing session:",j),t(null),i(null),n(null)}finally{h(!1)}},u=async()=>{try{h(!0);const{error:p}=await ge.auth.signOut();if(p)throw p;t(null),i(null),n(null)}catch(p){console.error("Error signing out:",p)}finally{h(!1)}};d.useEffect(()=>{const k=(async()=>{var D,C;h(!0),console.log("Initializing auth...");try{const{data:f,error:m}=await ge.auth.getSession();if(m)throw m;if(console.log("Initial session data:",f),n(f.session),t(((D=f.session)==null?void 0:D.user)||null),(C=f.session)!=null&&C.user){const w=await qs(f.session.user.id);i(w)}}catch(f){console.error("Error initializing auth:",f)}finally{h(!1)}const{data:j}=ge.auth.onAuthStateChange(async(f,m)=>{if(console.log("Auth state changed:",f,m),n(m),t((m==null?void 0:m.user)||null),m!=null&&m.user){const w=await qs(m.user.id);i(w)}else i(null)});return()=>{j.subscription.unsubscribe()}})();return()=>{k.then(j=>j&&j())}},[]);const x={user:a,session:r,profile:l,isLoading:g,signOut:u,refreshSession:y};return b.createElement(Va.Provider,{value:x},s)};function ee(){return d.useContext(Va)}function Wn({className:s}){return e.jsx("div",{className:I("flex items-center justify-center",s),children:e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})})}function Kn(){return null}const Yn=ts("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=d.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...n},l)=>{const i=r?mr:"button";return e.jsx(i,{className:I(Yn({variant:a,size:t,className:s})),ref:l,...n})});P.displayName="Button";const ds=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Gt,{ref:r,className:I("relative overflow-hidden",s),...t,children:[e.jsx(hr,{className:"h-full w-full rounded-[inherit]",children:a}),e.jsx(Wa,{}),e.jsx(ur,{})]}));ds.displayName=Gt.displayName;const Wa=d.forwardRef(({className:s,orientation:a="vertical",...t},r)=>e.jsx(Vt,{ref:r,orientation:a,className:I("flex touch-none select-none transition-colors",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...t,children:e.jsx(xr,{className:"relative flex-1 rounded-full bg-border"})}));Wa.displayName=Vt.displayName;function Jn({isOpen:s,onClose:a,children:t}){return e.jsx(pr,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(Gs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm lg:hidden",onClick:a,style:{width:"100vw"}}),e.jsxs(Gs.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:20,stiffness:300},className:I("fixed inset-y-0 right-0 z-50 w-full max-w-xs bg-white shadow-2xl lg:hidden","flex flex-col"),children:[e.jsxs("div",{className:"flex h-16 items-center justify-between border-b px-6",children:[e.jsx("a",{href:"/",className:"hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://i.postimg.cc/GpdY6N74/my-1920-x-1080-px-1.png",alt:"MyVGE",className:"h-8"})}),e.jsx(P,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full hover:bg-muted",onClick:r=>{r.stopPropagation(),a()},children:e.jsx(st,{className:"h-5 w-5"})})]}),e.jsx(ds,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col p-6 pb-16",children:[e.jsx("div",{className:"flex-1",children:t}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Â© ",new Date().getFullYear()," MyVGE. All rights reserved."]})})]})})]})]})})}const Ka=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ht,{ref:r,className:I("relative z-10 flex max-w-max flex-1 items-center justify-center",s),...t,children:[a,e.jsx(Ja,{})]}));Ka.displayName=Ht.displayName;const Ya=d.forwardRef(({className:s,...a},t)=>e.jsx(Wt,{ref:t,className:I("group flex flex-1 list-none items-center justify-center space-x-1",s),...a}));Ya.displayName=Wt.displayName;const ls=fr,Zn=ts("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),Ys=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Kt,{ref:r,className:I(Zn(),"group",s),...t,children:[a," ",e.jsx(tt,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));Ys.displayName=Kt.displayName;const Js=d.forwardRef(({className:s,...a},t)=>e.jsx(Yt,{ref:t,className:I("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",s),...a}));Js.displayName=Yt.displayName;const ys=gr,Ja=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{className:I("absolute left-0 top-full flex justify-center"),children:e.jsx(Jt,{className:I("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",s),ref:t,...a})}));Ja.displayName=Jt.displayName;const Xn=d.forwardRef(({className:s,...a},t)=>e.jsx(Zt,{ref:t,className:I("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",s),...a,children:e.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));Xn.displayName=Zt.displayName;const ze=d.forwardRef(({className:s,...a},t)=>e.jsx(Xt,{ref:t,className:I("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));ze.displayName=Xt.displayName;const qe=d.forwardRef(({className:s,...a},t)=>e.jsx(Qt,{ref:t,className:I("aspect-square h-full w-full",s),...a}));qe.displayName=Qt.displayName;const Be=d.forwardRef(({className:s,...a},t)=>e.jsx(ea,{ref:t,className:I("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a}));Be.displayName=ea.displayName;const Qn=br,ei=wr,si=d.forwardRef(({className:s,inset:a,children:t,...r},n)=>e.jsxs(sa,{ref:n,className:I("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...r,children:[t,e.jsx(jr,{className:"ml-auto h-4 w-4"})]}));si.displayName=sa.displayName;const ti=d.forwardRef(({className:s,...a},t)=>e.jsx(ta,{ref:t,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));ti.displayName=ta.displayName;const Za=d.forwardRef(({className:s,sideOffset:a=4,...t},r)=>e.jsx(vr,{children:e.jsx(aa,{ref:r,sideOffset:a,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t})}));Za.displayName=aa.displayName;const Xe=d.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(ra,{ref:r,className:I("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...t}));Xe.displayName=ra.displayName;const ai=d.forwardRef(({className:s,children:a,checked:t,...r},n)=>e.jsxs(na,{ref:n,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ia,{children:e.jsx(yr,{className:"h-4 w-4"})})}),a]}));ai.displayName=na.displayName;const ri=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(la,{ref:r,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ia,{children:e.jsx(Nr,{className:"h-4 w-4 fill-current"})})}),a]}));ri.displayName=la.displayName;const ni=d.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(oa,{ref:r,className:I("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...t}));ni.displayName=oa.displayName;const Zs=d.forwardRef(({className:s,...a},t)=>e.jsx(ca,{ref:t,className:I("-mx-1 my-1 h-px bg-muted",s),...a}));Zs.displayName=ca.displayName;const Ee=kr,ii=Pr,li=Sr,Xa=d.forwardRef(({className:s,...a},t)=>e.jsx(da,{ref:t,className:I("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Xa.displayName=da.displayName;const _e=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(li,{children:[e.jsx(Xa,{}),e.jsxs(ma,{ref:r,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(_r,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_e.displayName=ma.displayName;const ke=({className:s,...a})=>e.jsx("div",{className:I("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});ke.displayName="DialogHeader";const nt=({className:s,...a})=>e.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});nt.displayName="DialogFooter";const Pe=d.forwardRef(({className:s,...a},t)=>e.jsx(ha,{ref:t,className:I("text-lg font-semibold leading-none tracking-tight",s),...a}));Pe.displayName=ha.displayName;const ss=d.forwardRef(({className:s,...a},t)=>e.jsx(ua,{ref:t,className:I("text-sm text-muted-foreground",s),...a}));ss.displayName=ua.displayName;const K=d.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:I("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));K.displayName="Input";const oi=ts("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=d.forwardRef(({className:s,...a},t)=>e.jsx(xa,{ref:t,className:I(oi(),s),...a}));X.displayName=xa.displayName;function ci({isOpen:s,onClose:a,onSuccess:t}){const[r,n]=d.useState(""),[l,i]=d.useState(""),[g,h]=d.useState(!1),{toast:y}=be(),u=async x=>{x.preventDefault(),h(!0);try{console.log("Attempting login with:",r);const{data:p,error:k}=await ge.auth.signInWithPassword({email:r,password:l});if(k)throw console.error("Supabase auth error:",k),k;console.log("Login successful:",p),y({title:"Success",description:"You have successfully logged in."}),a(),setTimeout(()=>{t&&t(),window.location.href=window.location.pathname},300)}catch(p){console.error("Login error:",p),y({variant:"destructive",title:"Login failed",description:p.message||"Please check your credentials and try again."})}finally{h(!1)}};return e.jsx(Ee,{open:s,onOpenChange:a,children:e.jsxs(_e,{className:"sm:max-w-[425px]",children:[e.jsxs(ke,{children:[e.jsx(Pe,{children:"Login"}),e.jsx(ss,{children:"Enter your credentials to access your account."})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(X,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",type:"email",value:r,onChange:x=>n(x.target.value),placeholder:"your.email@example.com",autoComplete:"email",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(X,{htmlFor:"password",children:"Password"}),e.jsx(K,{id:"password",type:"password",value:l,onChange:x=>i(x.target.value),autoComplete:"current-password",required:!0})]})]}),e.jsx(nt,{children:e.jsx(P,{type:"submit",disabled:g,children:g?"Logging in...":"Login"})})]})]})})}const di=[{title:"Investment Deals",href:"/deals",icon:"ðŸ’¼",requiresAuth:!0},{title:"Listings",href:"/listings",icon:"ðŸ ",requiresAuth:!1},{title:"Market",items:[{title:"Market Trends",href:"/trends",description:"Stay updated with the latest real estate market trends",requiresAuth:!0},{title:"Market Insights",href:"/insights",description:"Deep dive into property market analytics",requiresAuth:!0},{title:"Research & Reports",href:"/research",description:"Access expert analysis and reports",requiresAuth:!1}],icon:"ðŸ“Š"},{title:"Services",items:[{title:"Property Management",href:"/property-management",description:"Let us take care of your property",requiresAuth:!0},{title:"Investment Opportunities",href:"/investment-opportunities",description:"Discover tailored investment strategies",requiresAuth:!0},{title:"Calculators",href:"/calculators",description:"Calculate your property investment",requiresAuth:!1}],icon:"ðŸ "},{title:"Messages",href:"/messages",icon:"ðŸ’¬",requiresAuth:!0},{title:"Pricing",href:"/pricing",icon:"ðŸ’Ž",requiresAuth:!1},{title:"Support",href:"/help",icon:"â“",requiresAuth:!1},{title:"About Us",href:"/about-us",icon:"â„¹ï¸",requiresAuth:!1}];function xs({isAuthenticated:s=!1,onSignIn:a,onSignUp:t,userProfile:r={},onSignOut:n}){var w,T;const[l,i]=b.useState(!1),[g,h]=b.useState(!1),[y,u]=b.useState(!1),x=Me(),p=ee(),k=s||!!p.user,j=r&&Object.keys(r).length>0?r:p.profile,D=n||p.signOut;b.useEffect(()=>{const A=()=>{h(window.scrollY>20)};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]);const C=A=>{A.preventDefault(),u(!0)},f=async()=>{console.log("Sign out button clicked");try{await D(),window.location.href="/"}catch(A){console.error("Error signing out:",A)}},m=b.forwardRef(({className:A,title:z,children:E,...F},o)=>e.jsx("li",{children:e.jsx(ys,{asChild:!0,children:e.jsxs("a",{ref:o,className:I("block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",A??""),...F,children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:z}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:E})]})})}));return m.displayName="ListItem",e.jsxs(e.Fragment,{children:[e.jsx("header",{className:I("fixed top-0 left-0 right-0 z-50 transition-all duration-300",g?"py-2":"py-4"),children:e.jsx("div",{className:"px-4 mx-auto max-w-7xl",children:e.jsx("div",{className:I("rounded-full bg-white border transition-all duration-300",g?"shadow-md border-gray-200/50 backdrop-blur-md bg-white/90":"shadow-sm border-transparent"),children:e.jsxs("div",{className:"h-16 px-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("a",{href:"/",className:"hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://i.postimg.cc/GpdY6N74/my-1920-x-1080-px-1.png",alt:"MyVGE",className:"h-8"})}),e.jsx(Ka,{className:"hidden lg:flex",children:e.jsxs(Ya,{className:"gap-2",children:[e.jsxs(ls,{children:[e.jsx(Ys,{className:I("text-sm font-medium rounded-full px-4","bg-transparent hover:bg-gray-100 transition-colors","data-[state=open]:bg-gray-100"),children:"Market"}),e.jsx(Js,{children:e.jsxs("ul",{className:"w-[400px] gap-3 p-4 rounded-2xl",children:[k?e.jsxs(e.Fragment,{children:[e.jsx(m,{href:"/trends",title:"Market Trends",children:"Stay updated with the latest real estate market trends."}),e.jsx(m,{href:"/insights",title:"Market Insights",children:"Deep dive into property market analytics and forecasts."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{href:"#",onClick:C,title:"Market Trends",children:"Sign in to access market trends."}),e.jsx(m,{href:"#",onClick:C,title:"Market Insights",children:"Sign in to access market insights."})]}),e.jsx(m,{href:"/research",title:"Research & Reports",children:"Access expert analysis and reports."})]})})]}),e.jsx(ls,{children:e.jsx(ys,{className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/deals",children:"Deals"})}),e.jsx(ls,{children:e.jsx(ys,{className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/listings",children:"Listings"})}),e.jsxs(ls,{children:[e.jsx(Ys,{className:I("text-sm font-medium rounded-full px-4","bg-transparent hover:bg-gray-100 transition-colors","data-[state=open]:bg-gray-100"),children:"Services"}),e.jsx(Js,{children:e.jsxs("ul",{className:"w-[400px] gap-3 p-4 rounded-2xl",children:[e.jsx(m,{href:"/property-management",title:"Property Management",children:"Let us take care of your property."}),e.jsx(m,{href:"/investment-opportunities",title:"Investment Opportunities",children:"Discover tailored investment strategies."}),e.jsx(m,{href:"/calculators",title:"Calculators",children:"Calculate different aspects of your property investment."})]})})]}),e.jsx(ls,{children:e.jsx(ys,{className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/pricing",children:"Pricing"})})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{variant:"ghost",className:"lg:hidden p-2",onClick:()=>i(!0),children:e.jsx(Cr,{className:"h-6 w-6"})}),e.jsxs("nav",{className:"hidden lg:flex items-center gap-2 mr-4",children:[e.jsx("a",{href:"/help",className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),children:"Support"}),e.jsx("a",{href:"/about-us",className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),children:"About Us"})]}),e.jsxs(P,{variant:"ghost",className:"hidden md:flex bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500 rounded-full border border-emerald-500/20 shadow-lg hover:shadow-emerald-500/20 transition-all duration-300",onClick:()=>x("/pricing"),children:[e.jsx(pa,{className:"mr-2 h-4 w-4"}),"Upgrade"]}),k?e.jsxs(Qn,{children:[e.jsx(ei,{asChild:!0,children:e.jsx(P,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:e.jsxs(ze,{className:"h-10 w-10",children:[e.jsx(qe,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent((j==null?void 0:j.full_name)||"")}&background=random`,alt:(j==null?void 0:j.full_name)||"User avatar"}),e.jsx(Be,{className:"bg-primary/10",children:((w=j==null?void 0:j.full_name)==null?void 0:w.split(" ").filter(Boolean).map(A=>A[0]).slice(0,2).join("").toUpperCase())||"U"})]})})}),e.jsxs(Za,{className:"w-56 mt-2 bg-white border border-gray-200 rounded-2xl shadow-lg",align:"end",forceMount:!0,children:[e.jsxs(Xe,{className:"flex-col items-start",children:[e.jsx("div",{className:"font-medium",children:j==null?void 0:j.full_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:j==null?void 0:j.email})]}),e.jsx(Zs,{}),e.jsxs(Xe,{onClick:()=>x("/dashboard"),children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(Xe,{onClick:()=>x("/account"),children:[e.jsx(jt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Account Settings"})]}),e.jsxs(Xe,{onClick:()=>x("/messages"),children:[e.jsx(us,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Messages"})]}),e.jsx(Zs,{}),e.jsxs(Xe,{className:"text-red-500 focus:text-red-500",onClick:f,children:[e.jsx(vt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log Out"})]})]})]}):e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsxs(P,{variant:"ghost",onClick:C,className:"rounded-full hover:bg-gray-100",children:[e.jsx(Vs,{className:"mr-2 h-4 w-4"}),"Sign In"]}),e.jsxs(P,{onClick:()=>t==null?void 0:t(),className:"rounded-full bg-black text-white hover:bg-gray-800",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Sign Up"]})]})]})]})})})}),e.jsx(Jn,{isOpen:l,onClose:()=>i(!1),children:e.jsxs("nav",{className:"space-y-6",children:[k&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 px-2",children:[e.jsxs(ze,{className:"h-10 w-10",children:[e.jsx(qe,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent((j==null?void 0:j.full_name)||"")}&background=random`,alt:(j==null?void 0:j.full_name)||"User avatar"}),e.jsx(Be,{className:"bg-primary/10",children:((T=j==null?void 0:j.full_name)==null?void 0:T.split(" ").filter(Boolean).map(A=>A[0]).slice(0,2).join("").toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm font-medium leading-none truncate",children:j==null?void 0:j.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:j==null?void 0:j.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(P,{variant:"outline",className:"justify-center rounded-full",onClick:()=>{x("/dashboard"),i(!1)},children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs(P,{variant:"outline",className:"justify-center rounded-full",onClick:()=>{x("/account"),i(!1)},children:[e.jsx(jt,{className:"mr-2 h-4 w-4"}),"Account"]})]}),e.jsx("div",{className:"border-b border-border"})]}),di.map((A,z)=>{var E;return e.jsx("div",{className:"space-y-3",children:A.href?e.jsxs("a",{href:!A.requiresAuth||k?A.href:"#",className:"flex items-center space-x-3 text-lg font-medium hover:text-primary transition-colors",onClick:C,children:[e.jsx("span",{className:"text-xl",children:A.icon}),e.jsx("span",{children:A.title})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-3 text-lg font-medium",children:[e.jsx("span",{className:"text-xl",children:A.icon}),e.jsx("span",{children:A.title})]}),e.jsx("div",{className:"space-y-3 pl-9",children:(E=A.items)==null?void 0:E.map((F,o)=>e.jsxs("a",{href:F.href,className:"block text-base text-muted-foreground hover:text-primary transition-colors",onClick:C,children:[F.title,F.requiresAuth&&!k&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Sign in required)"})]},o))})]})},z)}),k?e.jsx("div",{className:"pt-6",children:e.jsxs(P,{variant:"outline",className:"w-full justify-center rounded-full text-red-500 hover:text-red-600 hover:bg-red-50",onClick:f,children:[e.jsx(vt,{className:"mr-2 h-4 w-4"}),"Log Out"]})}):e.jsxs("div",{className:"space-y-4 pt-6",children:[e.jsxs(P,{variant:"outline",className:"w-full justify-center rounded-full",onClick:C,children:[e.jsx(Vs,{className:"mr-2 h-4 w-4"}),"Sign In"]}),e.jsxs(P,{className:"w-full justify-center rounded-full bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500",onClick:()=>{t==null||t(),i(!1)},children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Sign Up"]})]})]})}),e.jsx(ci,{isOpen:y,onClose:()=>u(!1),onSuccess:()=>{u(!1),window.location.reload()}})]})}const mi=({text:s="",className:a="",delay:t=100,animationFrom:r={opacity:0,transform:"translate3d(0,40px,0)"},animationTo:n={opacity:1,transform:"translate3d(0,0,0)"},easing:l=u=>u,threshold:i=.1,rootMargin:g="-100px",textAlign:h="center",onLetterAnimationComplete:y})=>{const u=s.split(" ").map(f=>f.split("")),x=u.flat(),[p,k]=d.useState(!1),j=d.useRef(null),D=d.useRef(0);d.useEffect(()=>{const f=new IntersectionObserver(([m])=>{m.isIntersecting&&(k(!0),j.current&&f.unobserve(j.current))},{threshold:i,rootMargin:g});return j.current&&f.observe(j.current),()=>f.disconnect()},[i,g]);const C=Ir(x.length,x.map((f,m)=>({from:r,to:p?async w=>{await w(n),D.current+=1,D.current===x.length&&y&&y()}:r,delay:m*t,config:{easing:l}})));return e.jsx("p",{ref:j,className:`split-parent overflow-hidden inline ${a}`,style:{textAlign:h,whiteSpace:"normal",wordWrap:"break-word"},children:u.map((f,m)=>e.jsxs("span",{style:{display:"inline-block",whiteSpace:"nowrap"},children:[f.map((w,T)=>{const A=u.slice(0,m).reduce((z,E)=>z+E.length,0)+T;return e.jsx(Ar.span,{style:C[A],className:"inline-block transform transition-opacity will-change-transform",children:w},A)}),e.jsx("span",{style:{display:"inline-block",width:"0.3em"},children:"Â "})]},m))})},hi=`#version 300 es
in vec2 position;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}
`,ui=`#version 300 es
precision highp float;

uniform float uTime;
uniform float uAmplitude;
uniform vec3 uColorStops[3];
uniform vec2 uResolution;
uniform float uBlend;

out vec4 fragColor;

vec3 permute(vec3 x) {
  return mod(((x * 34.0) + 1.0) * x, 289.0);
}

float snoise(vec2 v){
  const vec4 C = vec4(
      0.211324865405187, 0.366025403784439,
      -0.577350269189626, 0.024390243902439
  );
  vec2 i  = floor(v + dot(v, C.yy));
  vec2 x0 = v - i + dot(i, C.xx);
  vec2 i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;
  i = mod(i, 289.0);

  vec3 p = permute(
      permute(i.y + vec3(0.0, i1.y, 1.0))
    + i.x + vec3(0.0, i1.x, 1.0)
  );

  vec3 m = max(
      0.5 - vec3(
          dot(x0, x0),
          dot(x12.xy, x12.xy),
          dot(x12.zw, x12.zw)
      ), 
      0.0
  );
  m = m * m;
  m = m * m;

  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;
  m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);

  vec3 g;
  g.x  = a0.x  * x0.x  + h.x  * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

struct ColorStop {
  vec3 color;
  float position;
};

#define COLOR_RAMP(colors, factor, finalColor) {                int index = 0;                                              for (int i = 0; i < 2; i++) {                                    ColorStop currentColor = colors[i];                         bool isInBetween = currentColor.position <= factor;         index = int(mix(float(index), float(i), float(isInBetween)));   }                                                           ColorStop currentColor = colors[index];                     ColorStop nextColor = colors[index + 1];                    float range = nextColor.position - currentColor.position;   float lerpFactor = (factor - currentColor.position) / range;   finalColor = mix(currentColor.color, nextColor.color, lerpFactor); }

void main() {
  vec2 uv = gl_FragCoord.xy / uResolution;
  
  ColorStop colors[3];
  colors[0] = ColorStop(uColorStops[0], 0.0);
  colors[1] = ColorStop(uColorStops[1], 0.5);
  colors[2] = ColorStop(uColorStops[2], 1.0);
  
  vec3 rampColor;
  COLOR_RAMP(colors, uv.x, rampColor);
  
  float height = snoise(vec2(uv.x * 2.0 + uTime * 0.1, uTime * 0.25)) * 0.5 * uAmplitude;
  height = exp(height);
  height = (uv.y * 2.0 - height + 0.2);
  float intensity = 0.6 * height;
  
  float midPoint = 0.20;
  float auroraAlpha = smoothstep(midPoint - uBlend * 0.5, midPoint + uBlend * 0.5, intensity);
  
  vec3 auroraColor = intensity * rampColor;
  
  fragColor = vec4(auroraColor * auroraAlpha, auroraAlpha);
}
`,xi=s=>{const{colorStops:a=["#00d8ff","#7cff67","#00d8ff"],amplitude:t=1,blend:r=.5}=s,n=d.useRef(s);n.current=s;const l=d.useRef(null);return d.useEffect(()=>{const i=l.current;if(!i)return;const g=new ga({alpha:!0,premultipliedAlpha:!0,antialias:!0}),h=g.gl;h.clearColor(0,0,0,0),h.enable(h.BLEND),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA),h.canvas.style.backgroundColor="transparent";let y;function u(){if(!i)return;const C=i.offsetWidth,f=i.offsetHeight;g.setSize(C,f),y&&(y.uniforms.uResolution.value=[C,f])}window.addEventListener("resize",u);const x=new fa(h);x.attributes.uv&&delete x.attributes.uv;const p=a.map(C=>{const f=new yt(C);return[f.r,f.g,f.b]});y=new ja(h,{vertex:hi,fragment:ui,uniforms:{uTime:{value:0},uAmplitude:{value:t},uColorStops:{value:p},uResolution:{value:[i.offsetWidth,i.offsetHeight]},uBlend:{value:r}}});const k=new va(h,{geometry:x,program:y});i.appendChild(h.canvas);let j=0;const D=C=>{j=requestAnimationFrame(D);const{time:f=C*.01,speed:m=1}=n.current;if(y){y.uniforms.uTime.value=f*m*.1,y.uniforms.uAmplitude.value=n.current.amplitude??1,y.uniforms.uBlend.value=n.current.blend??r;const w=n.current.colorStops??a;y.uniforms.uColorStops.value=w.map(T=>{const A=new yt(T);return[A.r,A.g,A.b]}),g.render({scene:k})}};return j=requestAnimationFrame(D),u(),()=>{var C;cancelAnimationFrame(j),window.removeEventListener("resize",u),i&&h.canvas.parentNode===i&&i.removeChild(h.canvas),(C=h.getExtension("WEBGL_lose_context"))==null||C.loseContext()}},[t]),e.jsx("div",{ref:l,className:"w-full h-full"})},we=({onSearch:s=()=>{},title:a="Find Your Next Investment Property",subtitle:t="Search through our curated selection of properties",showSearch:r=!0,showStats:n=!0,height:l="h-[500px]",image:i})=>{const[g,h]=b.useState(""),y=x=>{x.preventDefault(),s(g)},u=()=>{console.log("Hero text animation completed!")};return e.jsxs("div",{className:`relative w-full ${l} bg-gray-900 overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(xi,{colorStops:["#004F39","#FEFACA","#151513"],blend:.6,amplitude:1.2,speed:.3}),e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center text-center py-16 pt-24 animate-fade-in-up",children:[e.jsx(mi,{text:a,className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4",delay:50,animationFrom:{opacity:0,transform:"translate3d(0,50px,0)"},animationTo:{opacity:1,transform:"translate3d(0,0,0)"},easing:x=>1-Math.pow(1-x,3),threshold:.2,rootMargin:"-50px",onLetterAnimationComplete:u}),e.jsx("p",{className:"text-lg sm:text-xl text-gray-200 mb-6 sm:mb-8 max-w-3xl mx-auto",children:t}),r&&e.jsx("form",{onSubmit:y,className:"w-full max-w-2xl animate-fade-in-up",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{type:"text",placeholder:"Enter an address, neighbourhood, city, or postcode",value:g,onChange:x=>h(x.target.value),className:"w-full h-12 sm:h-14 pl-5 pr-14 text-base sm:text-lg bg-white/90 backdrop-blur-sm text-black border-2 border-transparent focus:border-primary"}),e.jsx(P,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-2 top-1/2 -translate-y-1/2 hover:bg-transparent",children:e.jsx(ya,{className:"w-6 h-6 text-gray-500 hover:text-primary transition-colors"})})]})})]})]})},O=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("rounded-xl border bg-card text-card-foreground shadow",s),...a}));O.displayName="Card";const Y=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex flex-col space-y-1.5 p-6",s),...a}));Y.displayName="CardHeader";const Ne=d.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:I("font-semibold leading-none tracking-tight",s),...a}));Ne.displayName="CardTitle";const Xs=d.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:I("text-sm text-muted-foreground",s),...a}));Xs.displayName="CardDescription";const U=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("p-6 pt-0",s),...a}));U.displayName="CardContent";const Es=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex items-center p-6 pt-0",s),...a}));Es.displayName="CardFooter";const pi=ts("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"bg-green-500/10 text-green-500 hover:bg-green-500/20",warning:"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20",premium:"bg-gradient-to-r from-amber-500 to-amber-600 text-white hover:from-amber-600 hover:to-amber-700"}},defaultVariants:{variant:"default"}});function ce({className:s,variant:a,...t}){return e.jsx("div",{className:I(pi({variant:a}),s),...t})}function Rs({id:s,address:a,price:t,squareFootage:r,bedrooms:n,bathrooms:l,isPremium:i=!1,propertyType:g="residential",description:h,createdAt:y,author:u,original_price:x,roi_percentage:p,investment_term:k,deal_type:j,isSubscriber:D=!1,type:C="listing",isDeal:f=!1,images:m=[],onClick:w,onMessageAuthor:T,currentUser:A,userProfile:z}){const E=!!A,[F,o]=b.useState(!1),S=J=>{J.stopPropagation(),o(!F)},M=J=>{J.stopPropagation(),console.log("Share property:",s)},L=J=>{J.stopPropagation(),u&&T&&T(u.id)},G=m&&m.length>0?m[0]:`https://source.unsplash.com/random/800x600?property,house&sig=${s}`;return e.jsxs(O,{className:"overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:w,children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-muted",children:[e.jsx("img",{src:G,alt:a,className:"object-cover w-full h-full",loading:"lazy"}),i&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(ce,{variant:"secondary",className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Featured"})}),f&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(ce,{variant:"secondary",className:"bg-emerald-500 text-white hover:bg-emerald-600",children:"Investment Deal"})}),p&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(ce,{className:"bg-emerald-500 text-white",children:[p,"% ROI"]})})]}),e.jsxs(Y,{className:"p-4 pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:$(t)}),x&&e.jsx("div",{className:"text-sm text-muted-foreground line-through",children:$(x)})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a})]}),e.jsxs(U,{className:"p-4 pt-2",children:[(n||l||r)&&e.jsxs("div",{className:"flex justify-between mb-3 text-sm",children:[n!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:n})," ",e.jsx("span",{className:"text-muted-foreground",children:n===1?"Bed":"Beds"})]}),l!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:l})," ",e.jsx("span",{className:"text-muted-foreground",children:l===1?"Bath":"Baths"})]}),r!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:$a(r)})," ",e.jsx("span",{className:"text-muted-foreground",children:"sq ft"})]})]}),k&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Investment Term: "}),e.jsx("span",{className:"text-sm font-medium",children:k})]}),j&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Deal Type: "}),e.jsx("span",{className:"text-sm font-medium",children:j})]}),h&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:h}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:ks(y)}),e.jsxs("div",{className:"flex space-x-1",children:[E&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:S,children:e.jsx(Rr,{className:`h-4 w-4 ${F?"fill-red-500 text-red-500":""}`})}),u&&e.jsx(P,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:L,children:e.jsx(us,{className:"h-4 w-4"})})]}),e.jsx(P,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:M,children:e.jsx(Er,{className:"h-4 w-4"})})]})]})]})]})}const gi="https://zcuapuvvygahkzljuhyg.supabase.co",Qa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdWFwdXZ2eWdhaGt6bGp1aHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MTQwMzcsImV4cCI6MjA1MzQ5MDAzN30.GIhphzkznmDXgrUApGW479uHHluqDWqy_9cfG5sU5Xc";console.log("Supabase Anon Key:",Qa);const W=Ut(gi,Qa,{auth:{persistSession:!0,storage:window.localStorage,storageKey:"supabase.auth.token",autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"}}),fi={BASIC:{name:"Basic",price:"Â£9.99",priceId:"price_1QnikACOhalwhG2QDocCWbQj",features:["Basic property search","Save up to 5 properties","Basic market trends","Email support"]},PRO:{name:"Pro",price:"Â£19.99",priceId:"price_1QnikPCOhalwhG2QVYfxwG5D",features:["Advanced property search","Save unlimited properties","Detailed market analysis","Premium property insights","Priority support"]},PREMIUM:{name:"Premium",price:"Â£49.99",priceId:"price_1QnikjCOhalwhG2QUgRtMAco",features:["All Pro features","AI-powered market predictions","Portfolio analytics","Investment ROI calculator","Dedicated account manager","24/7 phone support"]}};async function er(s,a){try{const t=await fetch("https://clever-chaplygin6-vbfae.dev.tempolabs.ai/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:s,userId:a})}),{sessionId:r}=await t.json(),n=await Mr(void 0);n&&await n.redirectToCheckout({sessionId:r})}catch(t){throw console.error("Error creating checkout session:",t),t}}function it({isOpen:s,onClose:a,defaultMode:t="signin"}){const[r,n]=b.useState(t);b.useEffect(()=>{n(t)},[t]);const[l,i]=b.useState(!1),[g,h]=b.useState(!1),{signIn:y,signUp:u,signInWithGoogle:x}=ee(),{toast:p}=be(),[k,j]=b.useState({email:"",password:"",firstName:"",lastName:""}),D=async C=>{C.preventDefault(),i(!0);try{if(r==="signin")await y(k.email,k.password)&&(p({title:"Welcome back!",description:"You have successfully signed in."}),setTimeout(()=>a(),500));else{const f=await u(k.email,k.password,k.firstName,k.lastName),m=localStorage.getItem("pending_subscription_price_id");m&&f&&"id"in f?(localStorage.removeItem("pending_subscription_price_id"),await er(m,f.id)):(h(!0),p({title:"Welcome to MyVGE Alpha!",description:"Thank you for joining us during our alpha testing phase."}))}}catch(f){p({title:"Error",description:f.message||"An error occurred",variant:"destructive"})}finally{i(!1)}};return g?e.jsx(Ee,{open:s,onOpenChange:a,children:e.jsxs(_e,{className:"sm:max-w-[425px]",children:[e.jsxs(ke,{children:[e.jsx(Pe,{children:"Welcome to MyVGE Alpha!"}),e.jsxs(ss,{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-primary",children:"Thank you for joining MyVGE during our alpha testing phase!"}),e.jsx("p",{children:"We've sent a confirmation email to your inbox. Please click the verification link to activate your account and start exploring MyVGE."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Note: You must confirm your email before signing in. Please check your spam folder if you don't see the email."}),e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"As an alpha tester, your feedback is invaluable to us. We're excited to have you on board and look forward to your insights as we continue to improve the platform."})})]})]}),e.jsx("div",{className:"flex flex-col space-y-4 pt-4",children:e.jsx(P,{onClick:()=>{h(!1),a()},children:"Close"})})]})}):e.jsx(Ee,{open:s,onOpenChange:a,children:e.jsxs(_e,{className:"sm:max-w-[425px]",children:[e.jsxs(ke,{children:[e.jsx(Pe,{children:r==="signin"?"Sign In":"Create Account"}),e.jsx(ss,{children:r==="signin"?"Welcome back! Please sign in to continue.":"Join MyVGE and start exploring properties."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4 pt-4",children:[r==="signup"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"firstName",children:"First Name"}),e.jsx(K,{id:"firstName",value:k.firstName,onChange:C=>j(f=>({...f,firstName:C.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"lastName",children:"Last Name"}),e.jsx(K,{id:"lastName",value:k.lastName,onChange:C=>j(f=>({...f,lastName:C.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",type:"email",value:k.email,onChange:C=>j(f=>({...f,email:C.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"password",children:"Password"}),e.jsx(K,{id:"password",type:"password",value:k.password,onChange:C=>j(f=>({...f,password:C.target.value})),required:!0})]}),e.jsxs("div",{className:"flex flex-col space-y-4 pt-4",children:[e.jsx(P,{type:"submit",disabled:l,children:l?"Loading...":r==="signin"?"Sign In":"Create Account"}),e.jsx(P,{type:"button",variant:"link",onClick:()=>x(),disabled:l,children:"Sign In with Google"}),e.jsx(P,{type:"button",variant:"link",onClick:()=>n(r==="signin"?"signup":"signin"),children:r==="signin"?"Don't have an account? Sign up":"Already have an account? Sign in"})]})]})]})})}const Ge=Tr,Ve=d.forwardRef(({className:s,...a},t)=>e.jsx(Na,{ref:t,className:I("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a}));Ve.displayName=Na.displayName;const me=d.forwardRef(({className:s,...a},t)=>e.jsx(ba,{ref:t,className:I("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a}));me.displayName=ba.displayName;const re=d.forwardRef(({className:s,...a},t)=>e.jsx(wa,{ref:t,className:I("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));re.displayName=wa.displayName;function sr({isOpen:s,onClose:a,currentUser:t,userProfile:r}){const n=Me(),l=i=>{console.log(`Subscribing to ${i} tier`),n(`/checkout?tier=${i}`),a()};return e.jsx(Ee,{open:s,onOpenChange:a,children:e.jsxs(_e,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(ke,{children:e.jsx(Pe,{className:"text-2xl",children:"Upgrade Your Experience"})}),e.jsxs(Ge,{defaultValue:"monthly",className:"mt-4",children:[e.jsxs(Ve,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(me,{value:"monthly",children:"Monthly"}),e.jsxs(me,{value:"yearly",children:["Yearly ",e.jsx("span",{className:"ml-2 text-emerald-500",children:"Save 20%"})]})]}),e.jsx(re,{value:"monthly",children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 mt-4",children:[e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Basic"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Essential property insights for casual investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"Â£9.99"}),e.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Basic property data"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"5 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Limited market insights"})]})]}),e.jsx(P,{className:"w-full",onClick:()=>l("basic"),children:(r==null?void 0:r.subscription_tier)==="basic"?"Current Plan":"Subscribe"})]}),e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden bg-gradient-to-b from-blue-50 to-white dark:from-blue-950 dark:to-background",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white px-3 py-1 text-xs font-medium rounded-bl-lg",children:"POPULAR"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Pro"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Advanced tools for serious property investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"Â£29.99"}),e.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:e.jsx("span",{className:"font-medium",children:"Everything in Basic"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Detailed investment metrics"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"50 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Full market insights access"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Priority customer support"})]})]}),e.jsx(P,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>l("pro"),children:(r==null?void 0:r.subscription_tier)==="pro"?"Current Plan":"Subscribe"})]})]})}),e.jsx(re,{value:"yearly",children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 mt-4",children:[e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100 px-3 py-1 text-xs font-medium transform rotate-12",children:"SAVE 20%"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Basic Annual"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Essential property insights for casual investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"Â£95.90"}),e.jsx("span",{className:"text-muted-foreground",children:"/year"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Equivalent to Â£7.99/month"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Basic property data"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"5 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Limited market insights"})]})]}),e.jsx(P,{className:"w-full",onClick:()=>l("basic-annual"),children:(r==null?void 0:r.subscription_tier)==="basic"&&(r==null?void 0:r.subscription_status)==="yearly"?"Current Plan":"Subscribe"})]}),e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden bg-gradient-to-b from-blue-50 to-white dark:from-blue-950 dark:to-background",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white px-3 py-1 text-xs font-medium rounded-bl-lg",children:"BEST VALUE"}),e.jsx("div",{className:"absolute -top-1 -right-12 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100 px-3 py-1 text-xs font-medium transform rotate-12",children:"SAVE 20%"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Pro Annual"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Advanced tools for serious property investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"Â£287.90"}),e.jsx("span",{className:"text-muted-foreground",children:"/year"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Equivalent to Â£23.99/month"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:e.jsx("span",{className:"font-medium",children:"Everything in Basic"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Detailed investment metrics"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"50 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Full market insights access"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Priority customer support"})]})]}),e.jsx(P,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>l("pro-annual"),children:(r==null?void 0:r.subscription_tier)==="pro"&&(r==null?void 0:r.subscription_status)==="yearly"?"Current Plan":"Subscribe"})]})]})})]}),e.jsx(nt,{className:"mt-6",children:e.jsx(P,{variant:"outline",onClick:a,children:"Cancel"})})]})})}function tr({isOpen:s,onClose:a,receiverId:t,dealId:r,deal:n,currentUser:l,userProfile:i}){const[g,h]=d.useState([]),[y,u]=d.useState(""),[x,p]=d.useState(!1),k=d.useRef(null),j=d.useRef(null),D=()=>{var w;(w=k.current)==null||w.scrollIntoView({behavior:"smooth"})};d.useEffect(()=>{if(s){const w=[{id:"1",text:r?`Hi, I'm interested in your property deal '${n==null?void 0:n.title}'. Could you tell me more about the ROI calculations?`:"Hi, I'm interested in learning more about your services.",createdAt:new Date(Date.now()-1728e5),sender:l==null?void 0:l.id,receiver:t},{id:"2",text:r?"Hello! Thanks for your interest. The ROI is calculated based on the projected rental income minus expenses, divided by the total investment. Would you like me to break down the specific numbers for this property?":"Hello! Thanks for reaching out. How can I help you today?",createdAt:new Date(Date.now()-864e5),sender:t,receiver:l==null?void 0:l.id}];h(w),setTimeout(D,100)}},[s,l,t,r,n]);const C=()=>{y.trim()&&(p(!0),setTimeout(()=>{const w={id:Math.random().toString(),text:y,createdAt:new Date,sender:l==null?void 0:l.id,receiver:t};h([...g,w]),u(""),p(!1),setTimeout(D,100)},500))},f=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),C())},m=()=>{var w;(w=j.current)==null||w.click()};return e.jsx(Ee,{open:s,onOpenChange:a,children:e.jsxs(_e,{className:"sm:max-w-[500px] h-[600px] max-h-[80vh] flex flex-col p-0 gap-0",children:[e.jsx(ke,{className:"px-4 py-2 border-b",children:e.jsxs(Pe,{className:"flex items-center gap-2",children:[e.jsxs(ze,{className:"h-8 w-8",children:[e.jsx(qe,{src:"https://ui-avatars.com/api/?name=Admin&background=random",alt:"Admin"}),e.jsx(Be,{children:"AD"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"Admin"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Customer Support"})]})]})}),n&&e.jsxs("div",{className:"p-3 bg-muted/30 border-b flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:n.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ce,{variant:"outline",className:"text-xs",children:n.property_type}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Â£",n.price.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[g.map(w=>e.jsx("div",{className:`flex ${w.sender===(l==null?void 0:l.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${w.sender===(l==null?void 0:l.id)?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:w.text}),e.jsx("p",{className:`text-xs mt-1 ${w.sender===(l==null?void 0:l.id)?"text-primary-foreground/70":"text-muted-foreground"}`,children:Dr(new Date(w.createdAt),"MMM d, h:mm a")})]})},w.id)),e.jsx("div",{ref:k})]}),e.jsx("div",{className:"p-3 border-t",children:e.jsxs("form",{onSubmit:w=>{w.preventDefault(),C()},className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:j,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),e.jsx(P,{type:"button",size:"icon",variant:"ghost",onClick:m,children:e.jsx(Lr,{className:"h-5 w-5"})}),e.jsx(K,{placeholder:"Type your message...",value:y,onChange:w=>u(w.target.value),onKeyDown:f,className:"flex-1"}),e.jsx(P,{type:"submit",size:"icon",disabled:!y.trim()||x,children:e.jsx(os,{className:"h-5 w-5"})})]})})]})})}function ji(){const[s,a]=b.useState("");return b.useEffect(()=>{fetch("https://uselessfacts.jsph.pl/api/v2/facts/random?language=en").then(t=>t.json()).then(t=>a(t.text)).catch(t=>console.error("Error fetching random fact:",t))},[]),s?e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[e.jsx(Or,{className:"w-4 h-4"}),e.jsx("p",{children:s})]}):null}function lt(){return e.jsx("footer",{className:"bg-gray-900 text-white py-8 sm:py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Us"}),e.jsx("p",{className:"text-gray-400",children:"Your trusted source for property search and market analysis."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"/terms",className:"hover:text-white",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"/privacy",className:"hover:text-white",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"/disclaimer",className:"hover:text-white",children:"Legal Disclaimer"})}),e.jsx("li",{children:e.jsx("a",{href:"/gdpr",className:"hover:text-white",children:"GDPR Compliance"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:"info@myvge.com"}),e.jsx("li",{children:"Lytchett House, 13 Freeland Park, Poole, Dorset, England, BH16 6FA"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Compliance"}),e.jsx("ul",{className:"space-y-2 text-gray-400",children:e.jsx("li",{children:"Company No: 15271126"})})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-800 space-y-4",children:[e.jsx(ji,{}),e.jsxs("div",{className:"text-center text-gray-400 space-y-2",children:[e.jsx("p",{className:"text-xs",children:"MyVGE is registered in England and Wales. Registered office: Lytchett House, 13 Freeland Park, Poole, Dorset, England, BH16 6FA. Company No: 15271126"}),e.jsx("p",{className:"text-xs",children:"The information on this website is for general information purposes only and does not constitute financial advice."}),e.jsxs("p",{children:["Â© ",new Date().getFullYear()," MyVGE. All rights reserved."]})]})]})]})})}const vi=ts("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ot=d.forwardRef(({className:s,variant:a,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:I(vi({variant:a}),s),...t}));ot.displayName="Alert";const ar=d.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:I("mb-1 font-medium leading-none tracking-tight",s),...a}));ar.displayName="AlertTitle";const ct=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("text-sm [&_p]:leading-relaxed",s),...a}));ct.displayName="AlertDescription";function rr(){return e.jsxs(ot,{className:"bg-muted/50 border-muted-foreground/20",children:[e.jsx(at,{className:"h-4 w-4"}),e.jsx(ct,{className:"text-xs text-muted-foreground",children:"The information provided on this website is for general informational purposes only and should not be considered as financial or investment advice. Property investments carry risks and values can go down as well as up. Always seek professional advice before making investment decisions."})]})}async function kt(s,a){try{const t=(s-1)*a;console.log("Production URL:","https://zcuapuvvygahkzljuhyg.supabase.co"),console.log("Fetching properties with params:",{page:s,perPage:a,start:t});const{data:r,error:n}=await ge.from("properties").select(`
        id,
        title,
        description,
        location,
        price,
        beds,
        baths,
        sqft,
        image_url,
        is_featured,
        created_at,
        updated_at
      `).eq("is_featured",!0).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase response:",{data:r,error:n}),n)throw console.error("Supabase error:",n),n;if(!r||r.length===0)return console.log("No properties found"),[];const l=r.map(i=>({id:i.id||"",title:i.title||"",description:i.description||"",location:i.location||"",price:Number(i.price)||0,beds:Number(i.beds)||0,baths:Number(i.baths)||0,sqft:Number(i.sqft)||0,image_url:i.image_url||"",is_featured:!!i.is_featured,created_at:i.created_at||new Date().toISOString(),updated_at:i.updated_at||new Date().toISOString()}));return console.log("Mapped properties:",l),l}catch(t){return console.error("Error in getFeaturedProperties:",t),[]}}async function yi(s){try{const{data:a,error:t}=await ge.from("properties").select(`
        id,
        title,
        location,
        price,
        sqft,
        beds,
        baths,
        description,
        image_url,
        is_featured,
        created_at,
        updated_at
      `).or(`
        location.ilike.%${s}%,
        description.ilike.%${s}%,
        title.ilike.%${s}%
      `).order("created_at",{ascending:!1});if(t)throw t;return a||[]}catch(a){return console.error("Error searching properties:",a),[]}}async function Ni(s){const{data:a,error:t}=await ge.from("saved_properties").select(`
      *,
      property:properties(*)
    `).eq("user_id",s);if(t)throw t;return a}async function bi(s,a){try{const t=(s-1)*a;console.log("Fetching deals with params:",{page:s,perPage:a,start:t});const{data:r,error:n}=await ge.from("deals").select(`
        id,
        title,
        description,
        location,
        price,
        roi_percentage,
        investment_term,
        property_type,
        deal_type,
        image_url,
        created_at,
        updated_at
      `).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase deals response:",{data:r,error:n}),n)throw console.error("Supabase error:",n),n;if(!r||r.length===0)return console.log("No deals found"),[];const l=r.map(i=>({id:i.id||"",title:i.title||"",description:i.description||"",location:i.location||"",price:Number(i.price)||0,roi_percentage:Number(i.roi_percentage)||0,investment_term:i.investment_term||"",property_type:i.property_type||"",deal_type:i.deal_type||"",image_url:i.image_url||"",created_at:i.created_at||new Date().toISOString(),updated_at:i.updated_at||new Date().toISOString()}));return console.log("Mapped deals:",l),l}catch(t){return console.error("Error in getDeals:",t),[]}}const wi=(s=6)=>Fr({queryKey:["deals"],queryFn:({pageParam:a=1})=>bi(a,s),getNextPageParam:(a,t)=>a.length===s?t.length+1:void 0,staleTime:5*60*1e3,cacheTime:30*60*1e3}),Ns=({children:s,direction:a="left",pauseOnHover:t=!1,reverse:r=!1,fade:n=!1,className:l,vertical:i=!1})=>e.jsxs("div",{className:I("group flex gap-4 overflow-hidden",i?"flex-col":"flex-row",l),children:[e.jsx("div",{className:I("flex min-w-full shrink-0 animate-marquee items-center justify-around gap-4",i?"flex-col":"flex-row",t&&"group-hover:[animation-play-state:paused]",r&&"animate-marquee-reverse"),children:s}),e.jsx("div",{className:I("flex min-w-full shrink-0 animate-marquee items-center justify-around gap-4",i?"flex-col":"flex-row",t&&"group-hover:[animation-play-state:paused]",r&&"animate-marquee-reverse"),children:s})]}),Si=({baseColor:s=[.1,.1,.1],speed:a=.2,amplitude:t=.5,frequencyX:r=3,frequencyY:n=2,interactive:l=!0,...i})=>{const g=d.useRef(null);return d.useEffect(()=>{if(!g.current)return;const h=g.current,y=new ga({antialias:!0}),u=y.gl;u.clearColor(1,1,1,1);const x=`
      attribute vec2 position;
      attribute vec2 uv;
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = vec4(position, 0.0, 1.0);
      }
    `,p=`
      precision highp float;
      uniform float uTime;
      uniform vec3 uResolution;
      uniform vec3 uBaseColor;
      uniform float uAmplitude;
      uniform float uFrequencyX;
      uniform float uFrequencyY;
      uniform vec2 uMouse;
      varying vec2 vUv;

      vec4 renderImage(vec2 uvCoord) {
          vec2 fragCoord = uvCoord * uResolution.xy;
          vec2 uv = (2.0 * fragCoord - uResolution.xy) / min(uResolution.x, uResolution.y);

          for (float i = 1.0; i < 10.0; i++){
              uv.x += uAmplitude / i * cos(i * uFrequencyX * uv.y + uTime + uMouse.x * 3.14159);
              uv.y += uAmplitude / i * cos(i * uFrequencyY * uv.x + uTime + uMouse.y * 3.14159);
          }

          vec2 diff = (uvCoord - uMouse);
          float dist = length(diff);
          float falloff = exp(-dist * 20.0);
          float ripple = sin(10.0 * dist - uTime * 2.0) * 0.03;
          uv += (diff / (dist + 0.0001)) * ripple * falloff;

          vec3 color = uBaseColor / abs(sin(uTime - uv.y - uv.x));
          return vec4(color, 1.0);
      }

      void main() {
          vec4 col = vec4(0.0);
          int samples = 0;
          for (int i = -1; i <= 1; i++){
              for (int j = -1; j <= 1; j++){
                  vec2 offset = vec2(float(i), float(j)) * (1.0 / min(uResolution.x, uResolution.y));
                  col += renderImage(vUv + offset);
                  samples++;
              }
          }
          gl_FragColor = col / float(samples);
      }
    `,k=new fa(u),j=new ja(u,{vertex:x,fragment:p,uniforms:{uTime:{value:0},uResolution:{value:new Float32Array([u.canvas.width,u.canvas.height,u.canvas.width/u.canvas.height])},uBaseColor:{value:new Float32Array(s)},uAmplitude:{value:t},uFrequencyX:{value:r},uFrequencyY:{value:n},uMouse:{value:new Float32Array([0,0])}}}),D=new va(u,{geometry:k,program:j});function C(){y.setSize(h.offsetWidth*1,h.offsetHeight*1);const z=j.uniforms.uResolution.value;z[0]=u.canvas.width,z[1]=u.canvas.height,z[2]=u.canvas.width/u.canvas.height}window.addEventListener("resize",C),C();function f(A){const z=h.getBoundingClientRect(),E=(A.clientX-z.left)/z.width,F=1-(A.clientY-z.top)/z.height,o=j.uniforms.uMouse.value;o[0]=E,o[1]=F}function m(A){if(A.touches.length>0){const z=A.touches[0],E=h.getBoundingClientRect(),F=(z.clientX-E.left)/E.width,o=1-(z.clientY-E.top)/E.height,S=j.uniforms.uMouse.value;S[0]=F,S[1]=o}}l&&(h.addEventListener("mousemove",f),h.addEventListener("touchmove",m));let w;function T(A){w=requestAnimationFrame(T),j.uniforms.uTime.value=A*.001*a,y.render({scene:D})}return w=requestAnimationFrame(T),h.appendChild(u.canvas),()=>{var A;cancelAnimationFrame(w),window.removeEventListener("resize",C),l&&(h.removeEventListener("mousemove",f),h.removeEventListener("touchmove",m)),u.canvas.parentElement&&u.canvas.parentElement.removeChild(u.canvas),(A=u.getExtension("WEBGL_lose_context"))==null||A.loseContext()}},[s,a,t,r,n,l]),e.jsx("div",{ref:g,className:"w-full h-full",...i})};function _i({isOpen:s,onClose:a,property:t,currentUser:r,userProfile:n}){var A,z;const l=!!r,i=(n==null?void 0:n.subscription_tier)==="pro";if(!t)return null;const g=t.price?$(Number(t.price)):"Price on application";let h=t.location||t.address||"Address not available",y=t.postcode||((z=(A=t.location)==null?void 0:A.match(/[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}/i))==null?void 0:z[0])||"";const u=t.property_type||"Residential",x=t.beds||t.bedrooms||0,p=t.baths||t.bathrooms||0,k=t.square_footage||t.sqft||0,j=t.tenure||"Freehold",D=t.description||"No description available",f=(t.sale_history||[]).filter(E=>E&&E.sale_price&&!isNaN(Number(E.sale_price))).sort((E,F)=>new Date(F.sale_date).getTime()-new Date(E.sale_date).getTime());let m=0;if(f.length>1){const E=Number(f[0].sale_price),F=Number(f[f.length-1].sale_price);m=(E-F)/F*100}const T=((E,F,o,S)=>{const M=E*(1-F/100),L=o/100/12,G=S*12,J=M*L*Math.pow(1+L,G)/(Math.pow(1+L,G)-1);return{monthlyPayment:J,totalInterest:J*G-M,totalCost:J*G}})(Number(t.price)||0,20,4.5,25);return e.jsx(Ee,{open:s,onOpenChange:a,children:e.jsxs(_e,{className:"max-w-4xl max-h-[90vh] overflow-y-auto p-0",children:[e.jsxs("div",{className:"relative h-72 overflow-hidden",children:[e.jsx("img",{src:t.image_url||`https://source.unsplash.com/random/1200x600?property,house&sig=${t.id}`,alt:h,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[e.jsx(ce,{className:"bg-primary text-white",children:u}),t.status&&e.jsx(ce,{variant:"secondary",children:t.status})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs(ke,{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Pe,{className:"text-2xl font-bold",children:g}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{variant:"outline",size:"sm",className:"text-sm",onClick:E=>E.stopPropagation(),children:"Save"}),e.jsx(P,{variant:"outline",size:"sm",className:"text-sm",onClick:E=>E.stopPropagation(),children:"Share"})]})]}),e.jsx(ss,{className:"text-base font-medium text-foreground mt-1",children:h})]}),e.jsxs(Ge,{defaultValue:"details",className:"mt-6",children:[e.jsxs(Ve,{className:"grid grid-cols-3 mb-6",children:[e.jsx(me,{value:"details",children:"Property Details"}),e.jsx(me,{value:"investment",children:"Investment Metrics"}),e.jsx(me,{value:"history",children:"History & Area"})]}),e.jsxs(re,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx(ws,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[x," Bedrooms"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx($r,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[p," Bathrooms"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx(Sa,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[$a(k)," sq ft"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx(_a,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:j})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Location"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",h]}),y&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Postcode:"})," ",y]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(at,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Description"]}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:D})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(He,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Property Documents"]}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsx("p",{className:"text-sm mb-2",children:l&&i?e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-primary underline cursor-pointer",children:"Energy Performance Certificate (EPC)"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-primary underline cursor-pointer",children:"Floor Plan"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-primary underline cursor-pointer",children:"Property Brochure"})]})]}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"Upgrade to PRO to access property documents"}),e.jsx(P,{className:"text-sm",size:"sm",children:"Upgrade Now"})]})})})]})]}),e.jsxs(re,{value:"investment",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Qe,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Investment Metrics"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Estimated Monthly Rent"}),e.jsx("span",{className:"font-medium",children:$(t.estimated_rent||t.price*.004)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Rental Yield"}),e.jsxs("span",{className:"font-medium",children:[t.rental_yield?t.rental_yield.toFixed(2):(t.price*.004*12/t.price*100).toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Estimated ROI (5yr)"}),e.jsxs("span",{className:"font-medium",children:[t.roi?t.roi.toFixed(2):(t.price*.25/t.price*100).toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Price per sq ft"}),e.jsx("span",{className:"font-medium",children:k>0?$(t.price/k):"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Nt,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Area Insights"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Area Price"}),e.jsx("span",{className:"font-medium",children:$(t.area_avg_price||t.price*1.1)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Price vs. Area Average"}),e.jsx("div",{className:"flex items-center",children:t.price<(t.area_avg_price||t.price*1.1)?e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-green-500 font-medium",children:[(((t.area_avg_price||t.price*1.1)-t.price)/(t.area_avg_price||t.price*1.1)*100).toFixed(1),"% below"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ws,{className:"h-4 w-4 text-amber-500 mr-1"}),e.jsxs("span",{className:"text-amber-500 font-medium",children:[((t.price-(t.area_avg_price||t.price*.9))/(t.area_avg_price||t.price*.9)*100).toFixed(1),"% above"]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"12-month Price Trend"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ws,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-500 font-medium",children:"+4.2%"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Qe,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Mortgage Calculator"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Property Price"}),e.jsx("p",{className:"text-lg font-medium",children:$(Number(t.price)||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Monthly Payment"}),e.jsx("p",{className:"text-lg font-medium",children:$(T.monthlyPayment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Total Interest"}),e.jsx("p",{className:"text-lg font-medium",children:$(T.totalInterest)})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Based on 20% down payment, 4.5% interest rate, 25-year term"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Qe,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Cash Flow Analysis"]}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Monthly Rental Income"}),e.jsx("span",{className:"font-medium",children:$(t.estimated_rent||t.price*.004)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Mortgage Payment"}),e.jsxs("span",{className:"font-medium text-red-500",children:["-",$(T.monthlyPayment)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Est. Maintenance (10%)"}),e.jsxs("span",{className:"font-medium text-red-500",children:["-",$((t.estimated_rent||t.price*.004)*.1)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Est. Management (5%)"}),e.jsxs("span",{className:"font-medium text-red-500",children:["-",$((t.estimated_rent||t.price*.004)*.05)]})]}),e.jsxs("div",{className:"border-t pt-2 mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Monthly Cash Flow"}),e.jsx("span",{className:"font-medium",children:$((t.estimated_rent||t.price*.004)-T.monthlyPayment-(t.estimated_rent||t.price*.004)*.15)})]})]})})]})]}),e.jsxs(re,{value:"history",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx($e,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Sale History"]}),f.length>0?e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"mb-4",children:[m!==0&&e.jsxs("div",{className:"mb-3 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Total price growth: "}),e.jsxs("span",{className:m>=0?"text-green-500":"text-red-500",children:[m>=0?"+":"",m.toFixed(2),"%"]})]}),e.jsx("div",{className:"relative h-24 mt-6 mb-2",children:f.map((E,F)=>{const o=Math.max(...f.map(G=>Number(G.sale_price))),S=Number(E.sale_price)/o*100,M=100/f.length,L=F*M;return e.jsx("div",{className:"absolute bottom-0 bg-primary hover:bg-primary/80 rounded-t transition-all cursor-pointer group",style:{height:`${S}%`,width:`${M-5}%`,left:`${L}%`},title:`${ks(E.sale_date)}: ${$(Number(E.sale_price))}`,children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-10 left-1/2 transform -translate-x-1/2 bg-background border p-2 rounded text-xs whitespace-nowrap z-10",children:[ks(E.sale_date),": ",$(Number(E.sale_price))]})},F)})})]}),e.jsx("div",{className:"space-y-3",children:f.map((E,F)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:ks(E.sale_date)})]}),e.jsx("span",{className:"font-medium",children:$(Number(E.sale_price))})]},F))})]}):e.jsx("div",{className:"bg-muted rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No sale history available"})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Nt,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Neighborhood Information"]}),l&&i?e.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Local Schools"}),e.jsx(ce,{variant:"outline",children:"Good"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Transport Links"}),e.jsx(ce,{variant:"outline",children:"Excellent"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Local Amenities"}),e.jsx(ce,{variant:"outline",children:"Good"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Crime Rate"}),e.jsx(ce,{variant:"outline",children:"Low"})]}),e.jsx("div",{className:"mt-2 pt-2 border-t",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"This property is located in a well-established residential area with good local schools and excellent transport links. The neighborhood has seen steady property value growth over the past 5 years."})})]}):e.jsxs("div",{className:"bg-muted rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"Upgrade to PRO to access detailed neighborhood information"}),e.jsx(P,{className:"text-sm",size:"sm",children:"Upgrade Now"})]})]})]})]})]})]})})}function Qs({size:s="md",className:a}){const t={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return e.jsx("div",{className:I("animate-spin rounded-full border-2 border-current border-t-transparent",t[s],a)})}const Ue=[{name:"Savills",username:"@savills",body:"Leading the way in property investment and market analysis.",img:"https://avatar.vercel.sh/savills"},{name:"Knight Frank",username:"@knightfrank",body:"Exceptional platform for property investment insights.",img:"https://avatar.vercel.sh/knightfrank"},{name:"JLL",username:"@jll",body:"Revolutionary approach to property investment analytics.",img:"https://avatar.vercel.sh/jll"}],ki=Ue.slice(0,Ue.length/2),Pi=Ue.slice(Ue.length/2),Ci=Ue.slice(0,Ue.length/2),Ii=Ue.slice(Ue.length/2),bs=({img:s,name:a,username:t,body:r})=>e.jsxs("figure",{className:I("relative h-full w-36 cursor-pointer overflow-hidden rounded-xl border p-4","border-gray-950/[.1] bg-gray-950/[.01] hover:bg-gray-950/[.05]","dark:border-gray-50/[.1] dark:bg-gray-50/[.10] dark:hover:bg-gray-50/[.15]"),children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx("img",{className:"rounded-full",width:"32",height:"32",alt:"",src:s}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("figcaption",{className:"text-sm font-medium dark:text-white",children:a}),e.jsx("p",{className:"text-xs font-medium dark:text-white/40",children:t})]})]}),e.jsx("blockquote",{className:"mt-2 text-sm",children:r})]}),Ai=()=>{var R;const{user:s,profile:a,signOut:t}=ee(),[r,n]=b.useState(!0),[l,i]=b.useState([]),[g,h]=b.useState(!1),[y,u]=b.useState(!1),[x,p]=b.useState(!1),[k,j]=b.useState("signin"),[D,C]=b.useState(!1),[f]=b.useState(),[m,w]=b.useState(1),[T,A]=b.useState(!0),z=6,[E,F]=b.useState(!0),[o,S]=b.useState(!1),[M,L]=b.useState(null),[G,J]=b.useState(!1),ne=b.useRef(null),ie=b.useRef(!1),{data:V,isLoading:le}=wi(),ue=async(_=1,H=!1)=>{if(!ie.current){ie.current=!0;try{H?S(!0):F(!0),console.log("Fetching page:",_);const Z=await kt(_,z);console.log("Received properties:",Z),i(_===1?Z:oe=>[...oe,...Z]),A(Z.length===z),w(_),n(!1)}catch(Z){console.error("Error loading properties:",Z)}finally{F(!1),S(!1),ie.current=!1}}};b.useEffect(()=>{r&&ue(1,!1)},[r]),b.useEffect(()=>{if(!ne.current||r||g)return;const _=new IntersectionObserver(H=>{H[0].isIntersecting&&T&&!ie.current&&ue(m+1,!0)},{rootMargin:"200px",threshold:.1});return _.observe(ne.current),()=>_.disconnect()},[T,m,r,g]);const je=async _=>{if(!_.trim()){i([]),h(!1),w(1),A(!0),F(!0);try{const H=await kt(1,z);i(H),A(H.length===z)}catch(H){console.error("Error loading properties:",H)}finally{F(!1)}return}h(!0),i([]);try{const Z=(await yi(_)).map(oe=>({id:oe.id,title:oe.title,location:oe.location,price:oe.price,sqft:oe.sqft,beds:oe.beds,baths:oe.baths,description:oe.description,image_url:oe.image_url,is_featured:oe.is_featured,created_at:oe.created_at,updated_at:oe.updated_at}));i(Z),A(!1),w(1)}catch(H){console.error("Error searching properties:",H),i([])}finally{h(!1)}},ve=E,Ce=l&&l.length>0;return console.log("Render state:",{isLoading:E,searchResultsLength:l==null?void 0:l.length,showLoading:ve,showProperties:Ce}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(xs,{isAuthenticated:!!s,userProfile:a||void 0,onSignIn:()=>{j("signin"),u(!0)},onSignUp:()=>{j("signup"),u(!0)},onSignOut:async()=>{try{await t(),window.location.href="/"}catch(_){console.error("Error signing out:",_)}}}),e.jsxs("main",{children:[e.jsx(we,{onSearch:je}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:g?"Search Results":"Featured Properties"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:ve?Array(3).fill(0).map((_,H)=>e.jsx("div",{className:"w-full h-[420px] bg-muted rounded-lg animate-pulse"},H)):Ce?l.map(_=>e.jsx("div",{onClick:()=>{L(_),J(!0)},className:"cursor-pointer hover:opacity-90 transition-opacity",children:e.jsx(Rs,{id:_.id,address:_.location||"Location not available",price:Number(_.price)||0,squareFootage:Number(_.sqft)||0,bedrooms:Number(_.beds)||0,bathrooms:Number(_.baths)||0,isPremium:!!_.is_featured,propertyType:"residential",description:_.description||"",createdAt:_.created_at||new Date().toISOString(),images:_.image_url?[_.image_url]:[],currentUser:s,userProfile:a})},_.id||Math.random().toString())):e.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:"No properties found"})}),T&&!E&&!g&&e.jsx("div",{ref:ne,className:"h-24 flex items-center justify-center my-8",children:o?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Qs,{}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading more properties..."})]}):e.jsx("div",{className:"h-8"})})]})}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Investment Deals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:le?Array(3).fill(0).map((_,H)=>e.jsx("div",{className:"w-full h-[420px] bg-muted rounded-lg animate-pulse"},H)):(R=V==null?void 0:V.pages)!=null&&R[0]&&Array.isArray(V.pages[0])?V.pages[0].map(_=>e.jsx(Rs,{id:_.id,address:_.location,price:_.price,description:_.description,propertyType:_.property_type,createdAt:_.created_at,images:[_.image_url],isDeal:!0,roi_percentage:_.roi_percentage,investment_term:_.investment_term,deal_type:_.deal_type,isPremium:!0,currentUser:s,userProfile:a},_.id)):e.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:"No investment deals available"})})]})}),e.jsxs("section",{className:"w-full py-12 bg-background",children:[e.jsx("div",{className:"container mx-auto text-center mb-8",children:e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Trusted by Industry Leaders"})}),e.jsxs("div",{className:"relative flex h-96 w-full flex-row items-center justify-center gap-4 overflow-hidden [perspective:300px]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-4",style:{transform:"translateX(-100px) translateY(0px) translateZ(-100px) rotateX(20deg) rotateY(-10deg) rotateZ(20deg)"},children:[e.jsx(Ns,{pauseOnHover:!0,vertical:!0,className:"[--duration:20s]",children:ki.map(_=>e.jsx(bs,{..._},_.username))}),e.jsx(Ns,{reverse:!0,pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:Pi.map(_=>e.jsx(bs,{..._},_.username))}),e.jsx(Ns,{reverse:!0,pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:Ci.map(_=>e.jsx(bs,{..._},_.username))}),e.jsx(Ns,{pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:Ii.map(_=>e.jsx(bs,{..._},_.username))})]}),e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-1/4 bg-gradient-to-b from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-1/4 bg-gradient-to-t from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 w-1/4 bg-gradient-to-r from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/4 bg-gradient-to-l from-background"})]})]}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:e.jsx("div",{className:"mb-8",children:e.jsx(rr,{})})})}),(!a||a.subscription_tier==="free")&&e.jsx("div",{className:"w-full bg-background py-16",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:e.jsxs("div",{className:"relative w-full rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx(Si,{baseColor:[.1,.1,.1],speed:1,amplitude:.6,interactive:!0})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[8px]"}),e.jsxs("div",{className:"relative z-10 text-center py-12 px-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"Unlock Premium Property Insights"}),e.jsx("p",{className:"text-lg text-gray-300 mb-8 max-w-2xl mx-auto",children:"Get access to detailed property analysis, market comparisons, and investment metrics to make informed decisions."}),e.jsx("button",{onClick:()=>p(!0),className:"px-8 py-3 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Upgrade Now"})]})]})})})]}),e.jsx(lt,{}),e.jsx(it,{isOpen:y,onClose:()=>u(!1),defaultMode:k}),e.jsx(sr,{isOpen:x,onClose:()=>p(!1),currentUser:s,userProfile:a}),e.jsx(tr,{isOpen:D,onClose:()=>C(!1),receiverId:f,currentUser:s,userProfile:a}),e.jsx(_i,{isOpen:G,onClose:()=>{J(!1),setTimeout(()=>L(null),300)},property:M,currentUser:s,userProfile:a})]})};function he({children:s}){const{user:a,profile:t,signOut:r,isLoading:n}=ee(),[l,i]=b.useState(!1),[g,h]=b.useState("signin");return e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(xs,{isAuthenticated:!!a,userProfile:t,onSignIn:()=>window.location.href="/login",onSignUp:()=>window.location.href="/signup",onSignOut:r}),e.jsx("main",{className:"flex-1",children:s}),e.jsx(lt,{}),e.jsx(it,{isOpen:l,onClose:()=>i(!1),defaultMode:g})]})}function Ri(){const[s,a]=d.useState(null),[t,r]=d.useState(!0);return d.useEffect(()=>{const l=async()=>{try{const y=(await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"What is the current Bitcoin price in GBP? Return ONLY the number, no text or currency symbols."}]}]})})).json()).candidates[0].content.parts[0].text,u=parseFloat(y.replace(/[^0-9.]/g,""));isNaN(u)||(a(u),r(!1))}catch(g){console.error("Error fetching Bitcoin price:",g)}};l();const i=setInterval(l,6e4);return()=>clearInterval(i)},[]),{btcPrice:s,loading:t,convertGBPtoBTC:l=>s?l/s:null}}function Ei({amount:s}){const{loading:a,convertGBPtoBTC:t}=Ri(),r=t(s);return a?e.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):r?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Pa,{className:"h-4 w-4 text-[#F7931A]"}),r.toFixed(2)]}):null}async function Mi(s,a){var t;try{console.log("Starting profile update for user:",s),console.log("Updates to apply:",a);const{data:r,error:n}=await W.from("profiles").select("role").eq("id",(t=(await W.auth.getUser()).data.user)==null?void 0:t.id);if(n)throw console.error("Admin check error:",n),n;if(!(r!=null&&r.length)||r[0].role!=="admin")throw new Error("Unauthorized: Only admins can update user profiles");const{data:l,error:i}=await W.from("profiles").select("*").eq("id",s);if(i)throw console.error("User verification error:",i),i;if(!(l!=null&&l.length))throw new Error("User not found");console.log("Existing user:",l[0]);const g={...a,updated_at:new Date().toISOString()};console.log("Applying updates:",g);const{data:h,error:y}=await W.from("profiles").update(g).eq("id",s).select();if(y)throw console.error("Profile update error:",y),y;if(!(h!=null&&h.length))throw console.error("No data returned from update"),new Error("Update failed - no data returned");if(console.log("Profile updated successfully:",h[0]),a.role)try{await W.auth.admin.updateUserById(s,{user_metadata:{role:a.role}}),console.log("Auth metadata updated for role change")}catch(u){console.warn("Failed to update auth metadata (non-critical):",u)}return h[0]}catch(r){throw console.error("Error in updateUserProfile:",r),r}}async function Pt(){try{const{data:s,error:a}=await W.from("profiles").select(`
        *,
        subscription_tier,
        subscription_status,
        role
      `).order("created_at",{ascending:!1});if(a)throw console.error("Profiles fetch error:",a),a;return s?s.map(t=>({...t,role:t.role||"user",subscription_tier:t.subscription_tier||"free",subscription_status:t.subscription_status||"active"})):[]}catch(s){throw console.error("Error fetching users:",s),s}}async function Ti(s,a){try{console.log("Importing properties:",{count:s.length,userId:a});const{data:t,error:r}=await W.from("properties").insert(s.map(n=>({...n,added_by_user_id:a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})));if(r)throw console.error("Supabase error:",r),r;return console.log("Import successful:",t),t}catch(t){throw console.error("Error importing properties:",t),t}}const dt=d.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{className:I("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a}));dt.displayName="Textarea";function Di({children:s}){const[a,t]=d.useState(!1),[r,n]=d.useState(!0);d.useEffect(()=>{l()},[]);const l=()=>{n(!0);try{const i=ee();t(!0)}catch(i){console.error("Auth context not available:",i),t(!1)}finally{n(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):a?e.jsx(e.Fragment,{children:s}):e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsxs("div",{className:"text-center max-w-md p-6 border rounded-lg bg-muted/50",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to access authentication. This may be due to a temporary issue or your session has expired."}),e.jsxs(P,{variant:"outline",onClick:()=>{window.location.reload()},className:"inline-flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4"})," Refresh Page"]})]})})}function Li(){const[s,a]=d.useState(!1),[t,r]=d.useState(""),[n,l]=d.useState(!1),[i,g]=d.useState(!1),[h,y]=d.useState([]),[u,x]=d.useState(new Set),[p,k]=d.useState(1),[j,D]=d.useState(1),[C,f]=d.useState(0),[m,w]=d.useState(null),[T,A]=d.useState(""),[z,E]=d.useState(!1),[F,o]=d.useState("idle"),[S,M]=d.useState(""),{user:L}=ee(),{toast:G}=be();d.useEffect(()=>{s||(y([]),x(new Set),k(1),D(1),f(0),r(""))},[s]);const J=async()=>{if(!(!(L!=null&&L.id)||u.size===0))try{g(!0);const V=h.filter(le=>u.has(le.id));await Ti(V,L.id),G({title:"Success",description:`Imported ${u.size} properties successfully`}),a(!1)}catch{G({variant:"destructive",title:"Error",description:"Failed to import properties. Please try again."})}finally{g(!1)}},ne=V=>{V.target.files&&V.target.files.length>0&&(w(V.target.files[0]),A(""))},ie=V=>{A(V.target.value),w(null)};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Property Importer"}),e.jsx("p",{className:"text-muted-foreground",children:"Import properties from external sources by uploading a JSON file or pasting JSON data."})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(Ne,{children:"Upload JSON File"}),e.jsx(Xs,{children:"Import properties from a JSON file"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center hover:bg-muted/50 transition-colors",children:[e.jsx(zr,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop a JSON file here, or click to browse"}),e.jsx(K,{type:"file",accept:".json",onChange:ne,className:"hidden",id:"file-upload"}),e.jsx(X,{htmlFor:"file-upload",className:"cursor-pointer",children:e.jsx(P,{variant:"outline",type:"button",children:"Browse Files"})})]}),m&&e.jsxs("div",{className:"bg-muted p-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Selected file:"}),e.jsxs("p",{className:"text-muted-foreground",children:[m.name," (",Math.round(m.size/1024)," KB)"]})]})]})})]}),e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(Ne,{children:"Paste JSON Data"}),e.jsx(Xs,{children:"Paste your JSON data directly"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(dt,{placeholder:'{"properties": [{"address": "123 Main St", "price": 250000, ...}]}',rows:8,value:T,onChange:ie,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JSON must be properly formatted and contain property data."})]})})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(P,{onClick:J,disabled:z||!m&&!T,className:"px-8",children:z?"Importing...":"Import Properties"})}),F!=="idle"&&e.jsxs(ot,{variant:F==="success"?"default":"destructive",className:"mt-6",children:[F==="success"?e.jsx(qr,{className:"h-4 w-4"}):e.jsx(Br,{className:"h-4 w-4"}),e.jsx(ar,{children:F==="success"?"Import Successful":"Import Failed"}),e.jsx(ct,{children:S})]}),e.jsxs(O,{className:"mt-8",children:[e.jsx(Y,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5"}),"Import Format Guidelines"]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your JSON data should follow this structure:"}),e.jsx("pre",{className:"bg-muted p-4 rounded-md text-xs overflow-auto",children:`{
  "properties": [
    {
      "address": "123 Main Street, London, E1 6AN",
      "price": 450000,
      "type": "flat",
      "bedrooms": 2,
      "bathrooms": 1,
      "size_sqft": 750,
      "description": "A spacious 2 bedroom flat...",
      "images": ["image1.jpg", "image2.jpg"]
    },
    {
      // Additional properties...
    }
  ]
}`}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You can also import a simple array of property objects."})]})})]})]})}function Oi(){return e.jsx(Di,{children:e.jsx(Li,{})})}function Fi(){const{user:s,profile:a}=ee(),t=Me(),[r,n]=b.useState([]),[l,i]=b.useState([]),[g,h]=b.useState([]),[y,u]=b.useState({totalProperties:0,totalValue:0,averagePrice:0,totalProfit:0,monthlyIncome:0}),[x,p]=b.useState(!0),[k,j]=b.useState(null),D=b.useCallback(async()=>{if(!(!s||(a==null?void 0:a.role)!=="admin"))try{const m=await Pt();h(m)}catch(m){console.error("Error loading users:",m),j("Failed to load users")}finally{p(!1)}},[s,a]),C=async(m,w)=>{try{p(!0),console.log("Attempting to update user:",m),console.log("Updates:",w);const T=await Mi(m,w);console.log("Update successful:",T);const A=await Pt();h(A),alert("User updated successfully")}catch(T){console.error("Error updating user:",T),alert(T.message||"Failed to update user. Please check console for details.")}finally{p(!1)}},f=b.useCallback(async()=>{if(s)try{const[m,{data:w}]=await Promise.all([Ni(s.id),W.from("properties").select(`*,
            assigned_user:profiles!properties_assigned_user_id_fkey(full_name, email),
            author:profiles!properties_created_by_fkey(full_name, email)`).eq("created_by",s.id)]);i(w||[]),n(m);const T=(w||[]).length+m.length,A=[...w||[],...m].reduce((o,S)=>o+(S.price||0),0),z=A/(T||1),E=[...w||[],...m].reduce((o,S)=>o+(S.potential_profit||0),0),F=[...w||[],...m].reduce((o,S)=>o+(S.monthly_income||0),0);u({totalProperties:T,totalValue:A,averagePrice:z,totalProfit:E,monthlyIncome:F})}catch(m){console.error("Error loading properties:",m)}},[s]);return b.useEffect(()=>{if(!s){t("/");return}f(),D()},[s,t,f,D]),s?e.jsx(he,{children:e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx(Oi,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portfolio Value"}),e.jsx(Qe,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["Â£",y.totalValue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[y.totalProperties," properties"]})]})}),e.jsx(O,{children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Average Price"}),e.jsx(Ks,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["Â£",y.averagePrice.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Per property"})]})}),e.jsx(O,{children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Profit"}),e.jsx(es,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["Â£",y.totalProfit.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Estimated profit"})]})}),e.jsx(O,{children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"BTC Value"}),e.jsx(Pa,{className:"w-5 h-5 text-[#F7931A]"})]}),e.jsx(Ei,{amount:y.totalValue}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Portfolio in BTC"})]})})]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Ca,{className:"w-5 h-5"})," User Management"]})}),k&&e.jsx("div",{className:"text-red-500 mb-4",children:k}),x?e.jsx("div",{children:"Loading..."}):e.jsx("div",{className:"grid gap-4",children:g.map(m=>e.jsx("div",{className:"border p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:m.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:m.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:m.role,onChange:w=>C(m.id,{role:w.target.value}),className:"border rounded p-1",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("select",{value:m.subscription_tier,onChange:w=>C(m.id,{subscription_tier:w.target.value}),className:"border rounded p-1",children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"premium",children:"Premium"})]})]})]})},m.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Ur,{className:"w-5 h-5"})," Saved Properties"]}),e.jsx("div",{className:"space-y-4",children:r.map(m=>e.jsx(Rs,{...m.property,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},m.property.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5"})," Added Properties"]}),e.jsx("div",{className:"space-y-4",children:l.map(m=>e.jsx(Rs,{...m,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},m.id))})]})]})]})})}):(t("/"),null)}function $i({onSubscribe:s}){const{profile:a}=ee(),t=(a==null?void 0:a.subscription_tier)||"free";return e.jsx("div",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Choose Your Plan"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Select the perfect plan for your property investment journey"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:Object.entries(fi).map(([r,n])=>e.jsxs(O,{className:`relative ${r==="PRO"?"border-primary shadow-lg scale-105 bg-gradient-to-r from-emerald-400/10 to-cyan-400/10":""}`,children:[r==="PRO"&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-emerald-400 to-cyan-400 text-white px-4 py-1 rounded-full text-sm font-medium border border-emerald-500/20 shadow-lg",children:"Most Popular"}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold",children:n.name}),r==="PREMIUM"&&e.jsx(pa,{className:"h-6 w-6 text-yellow-500"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-4xl font-bold",children:n.price}),e.jsx("span",{className:"text-gray-600 ml-2",children:"/month"})]})]}),e.jsx(U,{children:e.jsx("ul",{className:"space-y-3",children:n.features.map((l,i)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(de,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsx("span",{children:l})]},i))})}),e.jsx(Es,{children:e.jsx(P,{className:"w-full",variant:r==="PRO"?"default":"outline",onClick:()=>s(n.priceId),disabled:t===r.toLowerCase(),children:t===r.toLowerCase()?"Current Plan":"Subscribe"})})]},r))})]})})}function zi(){const{user:s,profile:a,signOut:t}=ee(),{toast:r}=be(),[n,l]=b.useState(!1),[i,g]=b.useState("signin"),h=async y=>{if(!s){localStorage.setItem("pending_subscription_price_id",y),g("signup"),l(!0);return}try{await er(y,s.id)}catch{r({title:"Error",description:"Failed to start subscription process. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(xs,{isAuthenticated:!!s,userProfile:a||void 0,onSignIn:()=>{g("signin"),l(!0)},onSignUp:()=>{g("signup"),l(!0)},onSignOut:async()=>{try{await t(),window.location.href="/"}catch(y){console.error("Error signing out:",y)}}}),e.jsx(we,{title:"Choose Your Perfect Plan",subtitle:"Select the perfect subscription plan to unlock premium features and detailed property insights",backgroundImage:"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsxs("main",{children:[e.jsx($i,{onSubscribe:h}),e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"max-w-4xl mx-auto prose dark:prose-invert mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Investment Plans for Every Property Investor"}),e.jsx("p",{children:"Choose from our range of subscription plans designed to meet the needs of property investors at every level. From market analysis to detailed property insights, our plans provide the tools you need to make informed investment decisions."}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Plan Benefits"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Access to comprehensive property market data and analytics"}),e.jsx("li",{children:"Real-time market insights and trend analysis"}),e.jsx("li",{children:"Advanced property search and filtering capabilities"}),e.jsx("li",{children:"Investment calculators and ROI projections"}),e.jsx("li",{children:"Portfolio tracking and management tools"})]}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Why Subscribe?"}),e.jsx("p",{children:"Our subscription plans give you access to premium features and insights that help you stay ahead in the property market. From basic market analysis to advanced AI-powered predictions, we provide the tools you need to make successful property investments."}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Money-Back Guarantee"}),e.jsx("p",{children:"We're confident in the value our platform provides. If you're not satisfied with your subscription within the first 30 days, we'll provide a full refund, no questions asked."})]}),e.jsx(rr,{})]})]}),e.jsx(lt,{}),e.jsx(it,{isOpen:n,onClose:()=>l(!1),defaultMode:i})]})}function qi(s){const[a,t]=b.useState(0),[r,n]=b.useState(!1),{user:l}=ee(),{toast:i}=be(),[g,h]=b.useState({profileImage:"",bannerImage:"",selectedWidgets:[]}),y=async()=>{if(l){n(!0);try{const{error:x}=await W.from("profiles").update({avatar_url:g.profileImage||`https://api.dicebear.com/7.x/avataaars/svg?seed=${l.email}`,banner_url:g.bannerImage||"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab",dashboard_widgets:g.selectedWidgets,onboarding_completed:!0}).eq("id",l.id);if(x)throw x;i({title:"Setup Complete!",description:"Your profile has been updated successfully."}),s.onClose()}catch{i({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{n(!1)}}},u=[{title:"Profile Image",description:"Add a profile image to personalize your account",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{children:"Profile Image URL"}),e.jsx(K,{placeholder:"Enter image URL or leave blank for default avatar",value:g.profileImage,onChange:x=>h(p=>({...p,profileImage:x.target.value}))})]}),g.profileImage&&e.jsx("img",{src:g.profileImage,alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover mx-auto"})]})},{title:"Dashboard Banner",description:"Choose a banner image for your dashboard",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{children:"Banner Image URL"}),e.jsx(K,{placeholder:"Enter banner image URL or leave blank for default",value:g.bannerImage,onChange:x=>h(p=>({...p,bannerImage:x.target.value}))})]}),g.bannerImage&&e.jsx("img",{src:g.bannerImage,alt:"Banner Preview",className:"w-full h-32 object-cover rounded-md"})]})},{title:"Dashboard Widgets",description:"Select the widgets you want to see on your dashboard",component:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["market_trends","property_news","saved_properties","price_alerts","market_insights","investment_calculator"].map(x=>e.jsx(P,{variant:g.selectedWidgets.includes(x)?"default":"outline",onClick:()=>h(p=>({...p,selectedWidgets:p.selectedWidgets.includes(x)?p.selectedWidgets.filter(k=>k!==x):[...p.selectedWidgets,x]})),className:"h-auto py-4 px-6 text-left flex flex-col items-start space-y-2",children:e.jsx("span",{className:"font-medium capitalize",children:x.replace("_"," ")})},x))})})}];return e.jsx(Ee,{open:s.isOpen,onOpenChange:s.onClose,children:e.jsxs(_e,{className:"sm:max-w-[600px]",children:[e.jsxs(ke,{children:[e.jsx(Pe,{children:u[a].title}),e.jsx(ss,{children:u[a].description})]}),e.jsx("div",{className:"py-6",children:u[a].component}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>t(x=>Math.max(0,x-1)),disabled:a===0,children:"Previous"}),e.jsx(P,{onClick:()=>{a===u.length-1?y():t(x=>Math.min(u.length-1,x+1))},disabled:r,children:a===u.length-1?"Complete Setup":"Next"})]})]})})}function Bi(){const s=Me(),[a]=Gr(),{toast:t}=be(),{user:r}=ee(),[n,l]=d.useState(!0);return d.useEffect(()=>{a.get("session_id")&&t({title:"Subscription Successful!",description:"Thank you for subscribing. Your premium features are now available."}),n||s("/dashboard")},[n,s,a,t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full mx-auto p-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Thank you for subscribing. Your premium features are now available."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Setting up your preferences..."})]})})}),e.jsx(qi,{isOpen:n,onClose:()=>{l(!1),s("/dashboard")}})]})}function Ui(){const s=Me(),{toast:a}=be();return d.useEffect(()=>{a({title:"Subscription Cancelled",description:"Your subscription process was cancelled. Please try again if this was a mistake.",variant:"destructive"});const t=setTimeout(()=>{s("/")},3e3);return()=>clearTimeout(t)},[]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full mx-auto p-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription Cancelled"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your subscription process was cancelled. Please try again if this was a mistake."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you to the homepage..."})]})})})}const Gi=5*1024*1024,Ct=["image/jpeg","image/png","image/webp"];function Vi({currentAvatarUrl:s,onUpload:a,userInitials:t}){const[r,n]=d.useState(!1),{toast:l}=be(),i=b.useRef(null),g=async h=>{var u;const y=(u=h.target.files)==null?void 0:u[0];if(y){if(y.size>Gi){l({title:"File too large",description:"Please select an image under 5MB",variant:"destructive"});return}if(!Ct.includes(y.type)){l({title:"Invalid file type",description:"Please select a JPEG, PNG or WebP image",variant:"destructive"});return}try{n(!0),await a(y),l({title:"Success",description:"Profile picture updated successfully"})}catch(x){console.error("Error uploading avatar:",x),l({title:"Upload failed",description:"Failed to update profile picture. Please try again.",variant:"destructive"})}finally{n(!1)}}};return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(ze,{className:"h-24 w-24",children:[e.jsx(qe,{src:s}),e.jsx(Be,{children:t})]}),e.jsx("input",{type:"file",ref:i,className:"hidden",accept:Ct.join(","),onChange:g}),e.jsx(P,{variant:"outline",onClick:()=>{var h;return(h=i.current)==null?void 0:h.click()},disabled:r,children:r?"Uploading...":"Change Profile Picture"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum file size: 5MB. Supported formats: JPEG, PNG, WebP"})]})}function It(){var u;const{user:s,profile:a}=ee(),{toast:t}=be(),[r,n]=d.useState(!1),[l,i]=d.useState({fullName:(a==null?void 0:a.full_name)||"",currentPassword:"",newPassword:"",confirmPassword:""}),g=async x=>{if(s)try{const p=x.name.split(".").pop(),k=`${s.id}-${Date.now()}.${p}`,j=`${s.id}/${k}`,{error:D,data:C}=await W.storage.from("avatars").upload(j,x,{cacheControl:"3600",upsert:!0});if(D)throw console.error("Upload error:",D),D;const{data:{publicUrl:f}}=W.storage.from("avatars").getPublicUrl(j);console.log("File uploaded, public URL:",f);const{error:m}=await W.from("profiles").update({avatar_url:f,updated_at:new Date().toISOString()}).eq("id",s.id);if(m)throw console.error("Profile update error:",m),m;const{data:w,error:T}=await W.from("profiles").select("avatar_url").eq("id",s.id).single();if(T)throw console.error("Verification error:",T),T;console.log("Profile updated with new avatar:",w),window.location.reload()}catch(p){throw console.error("Error in handleAvatarUpload:",p),p}},h=async x=>{if(x.preventDefault(),!!s)try{if(n(!0),l.fullName!==(a==null?void 0:a.full_name)){const{error:p}=await W.from("profiles").update({full_name:l.fullName}).eq("id",s.id);if(p)throw p}if(l.newPassword){if(l.newPassword!==l.confirmPassword)throw new Error("New passwords do not match");const{error:p}=await W.auth.updateUser({password:l.newPassword});if(p)throw p}t({title:"Success",description:"Profile updated successfully"}),i(p=>({...p,currentPassword:"",newPassword:"",confirmPassword:""}))}catch(p){console.error("Error updating profile:",p),t({title:"Update failed",description:p.message||"Failed to update profile",variant:"destructive"})}finally{n(!1)}},y=((u=a==null?void 0:a.full_name)==null?void 0:u.split(" ").map(x=>x[0]).join("").toUpperCase())||"??";return e.jsx(he,{children:e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Account Settings"}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx(Ne,{children:"Profile Picture"})}),e.jsx(U,{children:e.jsx(Vi,{currentAvatarUrl:a==null?void 0:a.avatar_url,onUpload:g,userInitials:y})})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx(Ne,{children:"Profile Information"})}),e.jsx(U,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(X,{htmlFor:"fullName",children:"Full Name"}),e.jsx(K,{id:"fullName",value:l.fullName,onChange:x=>i(p=>({...p,fullName:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",value:(s==null?void 0:s.email)||"",disabled:!0})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(X,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(K,{id:"currentPassword",type:"password",value:l.currentPassword,onChange:x=>i(p=>({...p,currentPassword:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"newPassword",children:"New Password"}),e.jsx(K,{id:"newPassword",type:"password",value:l.newPassword,onChange:x=>i(p=>({...p,newPassword:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(K,{id:"confirmPassword",type:"password",value:l.confirmPassword,onChange:x=>i(p=>({...p,confirmPassword:x.target.value}))})]})]})]}),e.jsx(P,{type:"submit",disabled:r,children:r?"Saving...":"Save Changes"})]})})]})]})})})}const Hi=()=>e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4",children:e.jsxs("div",{className:"text-center space-y-6 max-w-2xl",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight sm:text-6xl text-primary",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold tracking-tight sm:text-3xl",children:"Page Not Found"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Sorry, we couldn't find the page you're looking for. The page might have been removed, renamed, or doesn't exist."}),e.jsx("div",{className:"flex justify-center gap-4 pt-4",children:e.jsx(P,{asChild:!0,children:e.jsxs(Vr,{to:"/",className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Back to Home"]})})})]})}),At=[{title:"UK House Prices Show Resilience Despite Economic Pressures",source:"Property News UK",published_at:new Date().toISOString(),url:"#",excerpt:"The latest data shows UK house prices maintaining stability with regional variations in growth rates."},{title:"New Rental Reforms Set to Transform Landlord-Tenant Relationships",source:"Real Estate Times",published_at:new Date(Date.now()-864e5).toISOString(),url:"#",excerpt:"The government's proposed rental reforms aim to provide greater security for tenants while maintaining landlord rights."},{title:"Property Investment Shifts: Where Buyers Are Looking in 2024",source:"Investment Quarterly",published_at:new Date(Date.now()-1728e5).toISOString(),url:"#",excerpt:"Investor focus is moving toward emerging regional hotspots as work patterns continue to evolve post-pandemic."},{title:"Interest Rate Forecast and Impact on Mortgage Market",source:"Financial Property Review",published_at:new Date(Date.now()-2592e5).toISOString(),url:"#",excerpt:"Analysts predict stabilizing interest rates may provide relief for mortgage holders in the coming quarters."},{title:"Green Homes Grant: What Property Owners Need to Know",source:"Sustainable Housing",published_at:new Date(Date.now()-3456e5).toISOString(),url:"#",excerpt:"The latest initiatives for improving energy efficiency in UK homes and the financial incentives available."}],ms=`
# UK Property Market Insights: July 2024

## Latest Tax Law Changes

The UK property market continues to adapt to recent regulatory changes. In April 2024, the government implemented adjustments to Capital Gains Tax (CGT) rates for property investors, with the higher rate increasing from 28% to 30% for residential property disposals. Buy-to-let landlords face additional reporting requirements for rental income above Â£10,000 annually.

The Stamp Duty Land Tax (SDLT) thresholds remain unchanged from last year's autumn statement, with first-time buyers enjoying relief up to Â£425,000 (down from Â£625,000 in 2023).

## Landlord Regulations

Licensing requirements have expanded to include mandatory electrical safety certificates (EICR) renewals every five years, and the new Decent Homes Standard now applies to the private rental sector. Tenant rights have strengthened with the Renters Reform Bill provisions now in effect, limiting no-fault evictions and establishing stronger grounds for possession.

Property safety regulations now include stricter rules for carbon monoxide alarms, with mandatory installation in all rooms with fixed combustion appliances.

## Government Policies

The Housing Ministry has announced a target of 300,000 new homes annually by 2026, with planning reforms to streamline development in designated growth zones. The Help to Buy equity loan scheme has been replaced with the First Homes initiative, offering 30-50% discounts on market value for first-time buyers.

Regional variations exist in Scotland's Private Housing (Tenancies) Act and Wales' Renting Homes Act, creating a patchwork regulatory landscape.

## Market Impact Analysis

These regulatory changes are creating downward pressure on rental yields, with the average UK yield dropping from 5.8% to 5.2% over the past year. Property values in commuter belts have shown greater resilience (+3.2%) compared to city centers (+1.7%).

Investment strategy adjustments should focus on regions with strong infrastructure investment and employment growth, particularly the Midlands and Northern England which offer better yields despite regulatory pressures.
`,Rt=`
# Market Risk Assessment: UK Property Sector

## Current Risk Level: Moderate

### Interest Rate Risk
The Bank of England's current base rate of 4.25% represents a stabilization after the peak of 5.25% in late 2023. While further cuts are anticipated, they are expected to be gradual, maintaining moderate pressure on mortgage affordability.

### Regulatory Risk
The implementation phase of the Renters Reform Bill creates temporary uncertainty for landlords adapting to new requirements. Compliance costs have increased approximately 12% year-over-year.

### Market Liquidity Risk
Transaction volumes remain 15% below pre-pandemic levels, extending the average time to sell from 45 to 63 days. Regional variations are significant, with London experiencing greater liquidity constraints than the North East.

### Recommendation
Investors should focus on properties with strong fundamentals that can weather short-term market fluctuations, particularly those in areas with diverse economic bases and strong rental demand.
`,Et=[{area:"Manchester - Salford Quays",propertyType:"2-bedroom apartments",averagePrice:21e4,expectedYield:5.8,growthPotential:"High",keyFactors:["Tech industry expansion","Transport improvements","Regeneration projects"]},{area:"Birmingham - Jewellery Quarter",propertyType:"1-2 bedroom converted industrial",averagePrice:185e3,expectedYield:5.4,growthPotential:"Medium-High",keyFactors:["HS2 development impact","Growing young professional population","Cultural district revival"]},{area:"Leeds - South Bank",propertyType:"New build city apartments",averagePrice:195e3,expectedYield:5.9,growthPotential:"High",keyFactors:["Major regeneration area","Financial sector growth","University expansion"]}];async function Wi(){try{const{error:s}=await ge.from("market_insights").select("id").limit(1);if(s&&s.code==="42P01"){console.log("Market insights table does not exist, attempting to create it...");const{error:a}=await ge.rpc("create_market_insights_table");return a?(console.error("Failed to create market_insights table:",a),!1):(console.log("Market insights table created successfully"),!0)}return!0}catch(s){return console.error("Error checking/creating market_insights table:",s),!1}}async function Ki(){try{const s=await fetch("https://newsapi.org/v2/everything?q=uk+property+market&sortBy=publishedAt&apiKey=YOUR_API_KEY&pageSize=10");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();return a.articles&&a.articles.length>0?a.articles.map(t=>({title:t.title,source:t.source.name,published_at:t.publishedAt,url:t.url,excerpt:t.description})):(console.log("No articles found in API response, using mock data"),At)}catch(s){return console.error("Error fetching property news:",s),At}}async function Yi(s){try{const a="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo";if(!a||a.includes("YOUR_API_KEY"))return console.warn("Using mock data: No valid API key provided for Gemini"),ms;const t=`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${a}`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}],generationConfig:{temperature:.7,maxOutputTokens:1024}})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();let l="";return n.candidates&&n.candidates[0]&&n.candidates[0].content?l=n.candidates[0].content.parts.filter(g=>g.text).map(g=>g.text).join(`
`):n.text&&(l=n.text),l||(console.warn("Empty response from Gemini API, using mock data"),ms)}catch(a){return console.error("Error generating insights:",a),ms}}async function Ji(){try{await Wi();const{data:s,error:a}=await ge.from("market_insights").select("*").order("generated_at",{ascending:!1}).limit(1);return a?(console.error("Error fetching market insights:",a),{id:"mock-id",content:ms,generated_at:new Date().toISOString()}):s&&s.length>0?s[0]:null}catch(s){return console.error("Error in getLatestMarketInsights:",s),{id:"mock-id",content:ms,generated_at:new Date().toISOString()}}}async function Zi(){try{return Rt}catch(s){return console.error("Error fetching risk assessment:",s),Rt}}async function Xi(){try{return Et}catch(s){return console.error("Error fetching personalized opportunities:",s),Et}}async function Qi(s="UK"){try{return{region:s,currentAveragePrice:29e4,predictedGrowthRate:3.8,confidenceScore:82,timeframe:"12 months",factors:["Interest rate stabilization","Housing supply constraints","Regional economic development"]}}catch(a){return console.error("Error fetching predictive analytics:",a),{region:s,currentAveragePrice:29e4,predictedGrowthRate:3.2,confidenceScore:75,timeframe:"12 months",factors:["Mock data - API unavailable","Contact administrator for actual predictions"]}}}function el({user:s,profile:a,className:t,showHero:r=!0}){const[n,l]=b.useState([]),[i,g]=b.useState(""),[h,y]=b.useState("No risk assessment data available."),[u,x]=b.useState([]),[p,k]=b.useState(!0),[j,D]=b.useState(null);b.useEffect(()=>{(async()=>{try{const w=await Ki();l(w.slice(0,5));const T=await Ji();if(T)g(T.content);else{const F=await Yi("Provide a concise analysis of the current UK property market trends, focusing on interest rates, price movements, and market sentiment. Include key statistics and recommendations for investors.");g(F)}const A=await Zi();y(A);const z=await Xi();x(z);const E=await Qi()}catch(w){console.error("Error loading market data:",w),D("Failed to load market data.")}finally{k(!1)}})()},[]);const C=[{month:"Jan",price:32e4},{month:"Feb",price:325e3},{month:"Mar",price:329e3},{month:"Apr",price:335e3},{month:"May",price:34e4},{month:"Jun",price:345e3}],f=[{region:"London",price:5e5},{region:"Manchester",price:25e4},{region:"Birmingham",price:22e4},{region:"Leeds",price:2e5},{region:"Liverpool",price:18e4}];return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"w-full",children:e.jsx(we,{title:"Property Market Insights & Analysis",subtitle:"Expert analysis, regional comparisons, and investment recommendations to guide your property decisions",showSearch:!1,showStats:!1,height:"h-[400px]"})}),e.jsx("div",{className:I("w-full",t),children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Price Trends"})}),e.jsx(U,{className:"h-80",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(Is,{data:C,children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Je,{dataKey:"month"}),e.jsx(Ze,{}),e.jsx(Fe,{formatter:m=>[`Â£${m.toLocaleString()}`,"Average Price"]}),e.jsx(hs,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))",activeDot:{r:8}})]})})})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Regional Comparison"})}),e.jsx(U,{className:"h-80",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(Is,{data:f,children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Je,{dataKey:"region"}),e.jsx(Ze,{}),e.jsx(Fe,{formatter:m=>[`Â£${m.toLocaleString()}`,"Average Price"]}),e.jsx(hs,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))",activeDot:{r:8}})]})})})]})]}),e.jsxs(O,{className:"mb-12",children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Market Analysis"})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"The UK property market continues to show resilience despite economic challenges. Regional variations are significant, with some areas experiencing rapid growth while others see more moderate changes."}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Key factors influencing the current market include:"}),e.jsxs("ul",{className:"list-disc pl-5 mb-4 text-muted-foreground",children:[e.jsx("li",{children:"Interest rate changes affecting mortgage affordability"}),e.jsx("li",{children:"Supply constraints in high-demand areas"}),e.jsx("li",{children:"Increasing preference for properties with outdoor space"}),e.jsx("li",{children:"Remote work influencing location decisions"})]}),e.jsx(P,{children:"Download Full Report"})]})]}),(a==null?void 0:a.subscription_tier)!=="free"&&e.jsxs(O,{className:"mb-12 border-primary/20 bg-gradient-to-r from-primary/5 to-background",children:[e.jsx(Y,{children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:["Premium Market Insights",e.jsx("span",{className:"ml-2 px-2 py-1 text-xs rounded-full bg-primary/20 text-primary",children:"Premium"})]})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Our exclusive analysis indicates emerging hotspots in the following areas:"}),e.jsxs("ul",{className:"list-disc pl-5 mb-4 text-muted-foreground",children:[e.jsx("li",{children:"Northwest Manchester - projected 8.3% growth over 12 months"}),e.jsx("li",{children:"East Birmingham suburbs - increasing demand from young professionals"}),e.jsx("li",{children:"Coastal towns in the Southwest - rising popularity for remote workers"})]}),e.jsx(P,{children:"View Detailed Forecast"})]})]})]})})]})}function sl({user:s,profile:a,className:t}){const[r,n]=b.useState("price"),l=[{year:"2018",price:28e4},{year:"2019",price:295e3},{year:"2020",price:305e3},{year:"2021",price:32e4},{year:"2022",price:335e3},{year:"2023",price:345e3},{year:"2024",price:358e3}],i=[{name:"London",value:38},{name:"South East",value:22},{name:"North West",value:16},{name:"Midlands",value:14},{name:"Scotland",value:10}],g=[{type:"Detached",count:420},{type:"Semi-Detached",count:580},{type:"Terraced",count:510},{type:"Flat",count:390},{type:"Bungalow",count:160}],h=[{region:"London",ppsqft:650},{region:"South East",ppsqft:410},{region:"East",ppsqft:380},{region:"South West",ppsqft:330},{region:"East Midlands",ppsqft:270},{region:"West Midlands",ppsqft:280},{region:"Yorkshire",ppsqft:240},{region:"North West",ppsqft:230},{region:"North East",ppsqft:190},{region:"Wales",ppsqft:210},{region:"Scotland",ppsqft:200}],y=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(O,{className:"mb-8",children:[e.jsxs(Y,{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Data Visualization Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Interactive charts and graphs showing property market trends and statistics"})]}),e.jsxs(U,{children:[e.jsxs(Ge,{defaultValue:"price",value:r,onValueChange:n,children:[e.jsxs(Ve,{className:"mb-6",children:[e.jsxs(me,{value:"price",className:"flex items-center",children:[e.jsx(Hr,{className:"mr-2 h-4 w-4"}),"Price Trends"]}),e.jsxs(me,{value:"regional",className:"flex items-center",children:[e.jsx(Wr,{className:"mr-2 h-4 w-4"}),"Regional Distribution"]}),e.jsxs(me,{value:"property-type",className:"flex items-center",children:[e.jsx(rt,{className:"mr-2 h-4 w-4"}),"Property Types"]}),e.jsxs(me,{value:"price-per-sqft",className:"flex items-center",children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Price per Sq Ft"]})]}),e.jsx(re,{value:"price",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(Is,{data:l,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Je,{dataKey:"year"}),e.jsx(Ze,{tickFormatter:u=>`Â£${(u/1e3).toFixed(0)}k`,domain:["dataMin - 20000","dataMax + 20000"]}),e.jsx(Fe,{formatter:u=>[`Â£${u.toLocaleString()}`,"Average Price"]}),e.jsx(Fs,{}),e.jsx(hs,{type:"monotone",dataKey:"price",name:"Average UK Property Price",stroke:"hsl(var(--primary))",activeDot:{r:8},strokeWidth:2})]})})}),e.jsx(re,{value:"regional",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(Kr,{children:[e.jsx(Yr,{data:i,cx:"50%",cy:"50%",labelLine:!0,outerRadius:180,fill:"#8884d8",dataKey:"value",label:({name:u,percent:x})=>`${u}: ${(x*100).toFixed(0)}%`,children:i.map((u,x)=>e.jsx(Jr,{fill:y[x%y.length]},`cell-${x}`))}),e.jsx(Fe,{formatter:u=>[`${u}%`,"Market Share"]}),e.jsx(Fs,{})]})})}),e.jsx(re,{value:"property-type",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(bt,{data:g,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Je,{dataKey:"type"}),e.jsx(Ze,{}),e.jsx(Fe,{formatter:u=>[`${u.toLocaleString()} properties`,"Count"]}),e.jsx(Fs,{}),e.jsx(wt,{dataKey:"count",name:"Number of Properties",fill:"hsl(var(--primary))",barSize:60})]})})}),e.jsx(re,{value:"price-per-sqft",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(bt,{data:h,margin:{top:20,right:30,left:20,bottom:10},layout:"vertical",children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Je,{type:"number"}),e.jsx(Ze,{type:"category",dataKey:"region",width:100}),e.jsx(Fe,{formatter:u=>[`Â£${u}/sq ft`,"Price"]}),e.jsx(wt,{dataKey:"ppsqft",name:"Price per Square Foot",fill:"hsl(var(--primary))",barSize:20})]})})})]}),e.jsx("div",{className:"mt-6 flex items-center justify-end",children:(a==null?void 0:a.subscription_tier)!=="free"?e.jsx(P,{children:"Download Full Report"}):e.jsx(P,{variant:"outline",onClick:()=>window.location.href="/pricing",children:"Upgrade for Full Access"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"About the Data"})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Our data is sourced from multiple reliable sources including Land Registry, Office for National Statistics, and major UK property portals. Data is updated monthly to provide the most accurate market insights."}),e.jsx("p",{className:"text-muted-foreground",children:"Premium subscribers have access to additional visualizations including predictive models, heat maps, and custom reporting tools."})]})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Data Interpretation Guide"})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"These visualizations help identify property market trends and regional variations. When interpreting the data, consider:"}),e.jsxs("ul",{className:"list-disc pl-5 mb-4 text-muted-foreground",children:[e.jsx("li",{children:"Long-term trends rather than short-term fluctuations"}),e.jsx("li",{children:"Regional differences in property values and growth rates"}),e.jsx("li",{children:"Correlation with economic indicators like interest rates"}),e.jsx("li",{children:"Seasonality effects on the property market"})]})]})]})]})]})}const tl=({children:s})=>{try{return ee(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(he,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}};function al(){const[s,a]=d.useState("insights"),{user:t,profile:r}=ee();return e.jsx(tl,{children:e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(we,{title:"Property Market Insights & Analysis",subtitle:"Expert analysis, regional comparisons, and investment recommendations to guide your property decisions",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs(Ge,{defaultValue:"insights",value:s,onValueChange:a,className:"w-full",children:[e.jsxs(Ve,{className:"mb-6",children:[e.jsx(me,{value:"insights",children:"Market Insights"}),e.jsx(me,{value:"visualization",children:"Data Visualization"})]}),e.jsx(re,{value:"insights",className:"mt-0",children:e.jsx(el,{user:t,profile:r,className:"mt-0",showHero:!1})}),e.jsx(re,{value:"visualization",className:"mt-0",children:e.jsx(sl,{user:t,profile:r})})]})})]})})}async function rl(s){var a,t,r,n,l;try{console.log("Calling chat API with prompt:",s);const h=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}],generationConfig:{temperature:.7,maxOutputTokens:1024}})});if(!h.ok)throw console.error("API error:",h.status,await h.text()),new Error(`API error: ${h.status} - ${await h.text()}`);return((l=(n=(r=(t=(a=(await h.json()).candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])==null?void 0:l.text)||"Sorry, I couldn't generate a response at this time."}catch(i){return console.error("Error getting chat response:",i),ll(s)}}async function nl(s){var a,t,r,n,l;try{console.log("Getting predictive analytics for location:",s);const i="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",g="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent",h=`Generate predictive analytics for property investment in ${s} for the next 5 years. Include price growth predictions, rental yield trends, and market dynamics. Format as JSON with the following structure: {
      "priceGrowthPrediction": { "year1": 2.5, "year2": 3.1, "year3": 3.5, "year4": 2.8, "year5": 3.0 },
      "rentalYieldTrend": { "year1": 5.2, "year2": 5.3, "year3": 5.4, "year4": 5.3, "year5": 5.2 },
      "marketSummary": "Brief summary of market dynamics",
      "keyFactors": ["Factor 1", "Factor 2", "Factor 3"]
    }`,y=await fetch(`${g}?key=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:h}]}],generationConfig:{temperature:.2,maxOutputTokens:1024}})});if(!y.ok)throw new Error("API response was not ok");const x=((l=(n=(r=(t=(a=(await y.json()).candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])==null?void 0:l.text)||null;if(!x)throw new Error("No content returned from API");let p=x.match(/```json\n([\s\S]*?)\n```/)||x.match(/```([\s\S]*?)```/)||x.match(/(\{[\s\S]*\})/);if(p&&p[1])return JSON.parse(p[1].trim());try{return JSON.parse(x)}catch(k){return console.error("Error parsing predictive analytics:",k),Mt(s)}}catch(i){return console.error("Error fetching predictive analytics:",i),Mt(s)}}async function il(s){var a,t,r,n,l;try{console.log("Getting investment hotspots for region:",s);const i="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",g="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent",h=`Generate a list of emerging property investment hotspots in ${s} with reasons why they are promising. Format as JSON with the following structure: 
    {
      "hotspots": [
        {
          "area": "Area name",
          "growthPotential": 4.2,
          "reasons": ["Reason 1", "Reason 2"],
          "estimatedROI": 5.8,
          "investmentType": "Buy-to-let"
        }
      ]
    }
    Include 3-5 different hotspots.`,y=await fetch(`${g}?key=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:h}]}],generationConfig:{temperature:.3,maxOutputTokens:1024}})});if(!y.ok)throw new Error("API response was not ok");const x=((l=(n=(r=(t=(a=(await y.json()).candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])==null?void 0:l.text)||null;if(!x)throw new Error("No content returned from API");let p=x.match(/```json\n([\s\S]*?)\n```/)||x.match(/```([\s\S]*?)```/)||x.match(/(\{[\s\S]*\})/);if(p&&p[1])return JSON.parse(p[1].trim());try{return JSON.parse(x)}catch(k){return console.error("Failed to parse hotspots:",k),Tt(s)}}catch(i){return console.error("Failed to fetch hotspots:",i),Tt(s)}}function ll(s){return s.includes("market insights")?"Based on recent data, the property market in this area has shown strong growth over the past 12 months. Average prices have increased by approximately 7.3%, which is above the national average of 4.5%. Rental yields remain competitive at around 5.2% for typical properties. The local economy is benefiting from new infrastructure projects and employment opportunities, which should provide continued stability. Demand currently exceeds supply, especially for 2-3 bedroom properties, creating a seller's market. Analysts predict continued but more moderate growth over the next 24 months.":s.includes("investment advice")?`For property investors looking at this market, there are several strategies worth considering:

1. Buy-to-let opportunities are particularly strong in the north and east neighborhoods, where rental demand from young professionals is high.

2. Properties requiring renovation can offer significant value-add opportunities, with potential for 15-20% equity gains after improvements.

3. The local council has approved new development zones which may present off-plan purchase opportunities with favorable terms.

4. Houses with potential for extension or conversion to multiple units can maximize returns in areas with strict planning constraints.

5. Consider the strong local university market for HMO investments, which typically yield 2-3% higher than standard rentals.`:"The current property market shows mixed signals. While some areas continue to see price growth, others have stabilized. Factors influencing the market include interest rate changes, supply constraints, and evolving work patterns affecting location preferences. For specific investment advice, consider local economic indicators, infrastructure developments, and demographic trends particular to your target area."}function Mt(s){return{priceGrowthPrediction:{year1:3.2,year2:3.5,year3:4.1,year4:3.8,year5:3.9},rentalYieldTrend:{year1:5.3,year2:5.4,year3:5.5,year4:5.4,year5:5.3},marketSummary:`The property market in ${s} shows promising growth potential over the next 5 years, supported by infrastructure development and increasing demand. While some volatility is expected in years 2-3, the overall trajectory remains positive.`,keyFactors:["New transportation links improving connectivity","Growing tech sector bringing high-income professionals to the area","Limited new housing supply in development pipeline","Strong rental demand from young professionals","Government stimulus for first-time buyers"]}}function Tt(s){return{hotspots:[{area:`${s} - North District`,growthPotential:4.7,reasons:["New tech hub development creating employment","Improved transport links reducing commute times","Regeneration project transforming former industrial areas"],estimatedROI:6.2,investmentType:"Buy-to-let apartments"},{area:`${s} - Riverside`,growthPotential:5.1,reasons:["Waterfront development project nearing completion","Limited supply of premium properties","Growing demand from young professionals"],estimatedROI:5.8,investmentType:"Luxury apartments"},{area:`${s} - University Area`,growthPotential:3.9,reasons:["Consistent student housing demand","University expansion plans announced","Improving local amenities and nightlife"],estimatedROI:7.3,investmentType:"HMO for students"},{area:`${s} - Central Village`,growthPotential:4.5,reasons:["Character properties with renovation potential","Growing tourism supporting short-term rentals","New boutique retail and restaurant scene"],estimatedROI:6.5,investmentType:"Period conversions"}]}}const ol=["Calculate stamp duty for a Â£400,000 property","What are typical legal fees for property purchase?","Explain all costs involved in buying a property","How much should I budget for property maintenance?","What surveys do I need when buying a property?","Calculate monthly mortgage payments for Â£300,000"],cl=s=>{if(s.success)return`<span class="block text-red-500">${s.message}</span>`;let t=(typeof s=="string"?s:s.message).replace(/\*\*(.*?)\*\*/g,'<span class="font-bold">$1</span>');return t=t.replace(/\*(.*?)\*/g,'<span class="italic">$1</span>'),t=t.replace(/^- (.+)$/gm,'<span class="block ml-2">â€¢ $1</span>'),t=t.replace(/^\d+\. (.+)$/gm,'<span class="block ml-2">$&</span>'),t.split(`
`).map((r,n)=>r?`<span class="block">${r}</span>`:'<span class="block h-2"></span>').join("")},dl=({trends:s=[{title:"Average Home Price",value:"Â£450,000",change:"+5.2%",isPositive:!0},{title:"Days on Market",value:"28",change:"-12%",isPositive:!0},{title:"Available Listings",value:"1,234",change:"-3.1%",isPositive:!1}],articles:a=[{title:"Understanding the Current Real Estate Market",excerpt:"Get insights into the latest trends and what they mean for buyers and sellers.",date:"2024-03-15"},{title:"Top 5 Investment Opportunities in Real Estate",excerpt:"Discover the most promising areas for property investment in the current market.",date:"2024-03-10"},{title:"Real Estate Market Forecast 2024",excerpt:"Expert predictions and analysis for the upcoming year in real estate.",date:"2024-03-05"}],user:t,profile:r})=>{const n=[{month:"Jan",price:45e4},{month:"Feb",price:455e3},{month:"Mar",price:458e3},{month:"Apr",price:462e3},{month:"May",price:47e4},{month:"Jun",price:475e3}],l=[{region:"London",price:5e5,growth:5.2},{region:"Manchester",price:25e4,growth:7.8},{region:"Birmingham",price:22e4,growth:6.5},{region:"Leeds",price:2e5,growth:8.1},{region:"Liverpool",price:18e4,growth:9.2}],i=[{name:"London",priceGrowth:5.2,averagePrice:5e5,transactions:1200},{name:"South East",priceGrowth:4.8,averagePrice:375e3,transactions:950},{name:"South West",priceGrowth:4.5,averagePrice:31e4,transactions:780},{name:"East of England",priceGrowth:4.2,averagePrice:325e3,transactions:820},{name:"West Midlands",priceGrowth:6.1,averagePrice:24e4,transactions:680},{name:"East Midlands",priceGrowth:5.8,averagePrice:225e3,transactions:650},{name:"Yorkshire",priceGrowth:7.2,averagePrice:195e3,transactions:720},{name:"North West",priceGrowth:8.1,averagePrice:205e3,transactions:850},{name:"North East",priceGrowth:6.5,averagePrice:155e3,transactions:480},{name:"Wales",priceGrowth:5.9,averagePrice:185e3,transactions:520},{name:"Scotland",priceGrowth:5.4,averagePrice:175e3,transactions:680}],g=({data:R})=>e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("svg",{viewBox:"0 0 500 800",className:"w-full h-full max-h-[400px]",style:{maxWidth:"300px"},children:[{path:"M250,600 L300,550 L350,600 L300,650 Z",name:"London"},{path:"M200,500 L300,450 L350,500 L250,550 Z",name:"South East"},{path:"M150,450 L250,400 L300,450 L200,500 Z",name:"South West"},{path:"M300,450 L400,400 L450,450 L350,500 Z",name:"East of England"},{path:"M200,350 L300,300 L350,350 L250,400 Z",name:"West Midlands"},{path:"M300,350 L400,300 L450,350 L350,400 Z",name:"East Midlands"},{path:"M200,250 L300,200 L350,250 L250,300 Z",name:"Yorkshire"},{path:"M150,200 L250,150 L300,200 L200,250 Z",name:"North West"},{path:"M250,150 L350,100 L400,150 L300,200 Z",name:"North East"},{path:"M100,350 L200,300 L250,350 L150,400 Z",name:"Wales"},{path:"M150,100 L300,50 L350,100 L200,150 Z",name:"Scotland"}].map(_=>{const H=R.find(oe=>oe.name===_.name),Z=(H==null?void 0:H.priceGrowth)||0;return e.jsxs("g",{children:[e.jsx("path",{d:_.path,fill:`hsl(${120*(Z/10)}, 70%, 50%)`,stroke:"white",strokeWidth:"2",className:"transition-colors duration-300 hover:brightness-110 cursor-pointer"}),e.jsx("title",{children:`${_.name}: +${Z}%`})]},_.name)})})}),[h,y]=d.useState(""),[u,x]=d.useState(!1),[p,k]=d.useState(!1),j=async R=>{x(!0);try{const _=await rl(`Provide a concise market insight for property investment in ${R} with recent price trends, rental yields, and future outlook. Keep it under 200 words.`);y(_)}catch(_){console.error("Error fetching market insights:",_),y("We're currently experiencing some issues retrieving market insights. Please try again later or contact support if the problem persists.")}finally{x(!1)}},[D,C]=d.useState([]),[f,m]=d.useState([]),[w,T]=d.useState(!1),[A,z]=d.useState(!1),[E,F]=d.useState(!1),[o,S]=d.useState(!1),M=async R=>{var _;T(!0);try{const H=await nl(R);if(Array.isArray(H))C(H);else if(H.regions&&Array.isArray(H.regions))C(H.regions);else{const Z=[{region:R||"United Kingdom",currentValue:35e4,predictedValue:35e4*(1+(((_=H.priceGrowthPrediction)==null?void 0:_.year1)||3.2)/100),confidence:85,growthFactors:H.keyFactors||["Data temporarily unavailable"]}];C(Z)}}catch(H){console.error("Error fetching predictive analytics:",H),C([{region:R,currentValue:35e4,predictedValue:361200,confidence:75,growthFactors:["Data temporarily unavailable","Please try again later"]}])}finally{T(!1)}},L=async R=>{S(!0);try{const _=await il(R);if(Array.isArray(_)){const H=_.map(Z=>({...Z,factors:Z.factors||[]}));m(H)}else if(_.hotspots&&Array.isArray(_.hotspots)){const H=_.hotspots.map(Z=>({...Z,factors:Z.factors||[]}));m(H)}else console.warn("Hotspots data is not in expected format:",_),m([])}catch(_){console.error("Error fetching hotspots:",_),m([{area:`${R} - North District`,score:75,predictedGrowth:4.2,factors:["Data currently unavailable","Try again later"],investmentType:"Residential"},{area:`${R} - Central Area`,score:68,predictedGrowth:3.8,factors:["Data currently unavailable","Try again later"],investmentType:"Commercial"}])}finally{S(!1)}},G=async()=>{k(!0),await j("United Kingdom"),k(!1)},J=async()=>{z(!0),await M("United Kingdom"),z(!1)},ne=async()=>{F(!0),await L("United Kingdom"),F(!1)},[ie,V]=d.useState(null),[le,ue]=d.useState(null),[je,ve]=d.useState(!0),Ce=async()=>{try{ve(!0);const R=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=gbp");if(!R.ok)throw new Error("Failed to fetch Bitcoin price");const _=await R.json();V(_.bitcoin.gbp),ue(null)}catch(R){console.error("Error fetching Bitcoin price:",R),ue("Failed to load Bitcoin price"),V(null)}finally{ve(!1)}};return d.useEffect(()=>{j("United Kingdom"),M("United Kingdom"),L("United Kingdom"),Ce();const R=setInterval(()=>{Ce()},6e4);return()=>clearInterval(R)},[]),e.jsxs(e.Fragment,{children:[e.jsx(we,{title:"Property Market Trends & Insights",subtitle:"Discover the latest market data, price forecasts, and investment hotspots to make informed property decisions",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsxs("section",{className:"w-full py-8 sm:py-16 bg-background relative overflow-hidden",children:[e.jsx("div",{className:"container mx-auto px-4 mb-16",children:e.jsxs(O,{className:"bg-card border-border",children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Real Estate Trends Visualization"})}),e.jsx(U,{children:e.jsxs(Ge,{defaultValue:"overview",className:"w-full",children:[e.jsx(Ve,{className:"w-full mb-8",children:e.jsxs("div",{className:"grid w-full grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx(me,{value:"overview",className:"w-full",children:"Price Evolution"}),e.jsx(me,{value:"regional",className:"w-full",children:"Regional Comparison"}),e.jsx(me,{value:"heatmap",className:"w-full",children:"Growth Heatmap"})]})}),e.jsx(re,{value:"overview",className:"h-[400px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(Zr,{data:n,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Je,{dataKey:"month"}),e.jsx(Ze,{}),e.jsx(Fe,{}),e.jsx(Xr,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorPrice)"})]})})}),e.jsx(re,{value:"regional",className:"h-[400px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(Is,{data:l,children:[e.jsx(Ye,{strokeDasharray:"3 3"}),e.jsx(Je,{dataKey:"region"}),e.jsx(Ze,{}),e.jsx(Fe,{}),e.jsx(hs,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))"}),e.jsx(hs,{type:"monotone",dataKey:"growth",stroke:"hsl(var(--chart-1))"})]})})}),e.jsx(re,{value:"heatmap",className:"h-[400px] overflow-y-auto",children:e.jsxs("div",{className:"h-full grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 min-h-[300px]",children:[e.jsx("h3",{className:"font-semibold text-lg sticky top-0 bg-background border-b py-2 px-2 rounded-t-lg",children:"Regional Price Growth"}),e.jsx("div",{className:"space-y-2 overflow-y-auto px-2",children:i.sort((R,_)=>_.priceGrowth-R.priceGrowth).map(R=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-8 rounded-full",style:{backgroundColor:`hsl(${120*(R.priceGrowth/10)}, 70%, 50%)`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:R.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Â£",R.averagePrice.toLocaleString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-emerald-500",children:["+",R.priceGrowth,"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[R.transactions," sales"]})]})]},R.name))})]}),e.jsx("div",{className:"relative hidden lg:flex items-center justify-center bg-muted/30 rounded-xl min-h-[300px]",children:e.jsx(g,{data:i})})]})})]})})]})}),e.jsx("div",{className:"container mx-auto px-4 mb-16",children:e.jsxs(O,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"AI Market Analysis"}),e.jsx(P,{variant:"ghost",size:"icon",onClick:G,className:`h-8 w-8 ${p?"animate-spin":""}`,disabled:p||u,children:e.jsx(Ss,{className:"h-4 w-4"})})]}),e.jsx(U,{children:u?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:cl(h)}})})]})}),e.jsxs("div",{className:"container mx-auto px-4 mb-16 grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Predictive Market Analytics"}),e.jsx(P,{variant:"ghost",size:"icon",onClick:J,className:`h-8 w-8 ${A?"animate-spin":""}`,disabled:A||w,children:e.jsx(Ss,{className:"h-4 w-4"})})]}),e.jsx(U,{children:w?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"space-y-4",children:D.map((R,_)=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:R.region}),e.jsxs("div",{className:"text-sm font-medium text-emerald-500",children:["+",((R.predictedValue-R.currentValue)/R.currentValue*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full bg-background rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${R.confidence}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Confidence: ",R.confidence,"%"]})]})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:R.growthFactors&&Array.isArray(R.growthFactors)&&R.growthFactors.length>0?R.growthFactors[0]:"No growth factors available"})]},_))})})]}),e.jsxs(O,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Emerging Investment Hotspots"}),e.jsx(P,{variant:"ghost",size:"icon",onClick:ne,className:`h-8 w-8 ${E?"animate-spin":""}`,disabled:E||o,children:e.jsx(Ss,{className:"h-4 w-4"})})]}),e.jsx(U,{children:o?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):f.length>0?e.jsx("div",{className:"space-y-4",children:f.map((R,_)=>e.jsxs("div",{className:"bg-card border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-1",children:R.area}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium mr-2",children:"Investment Score:"}),e.jsx("div",{className:"h-2 w-24 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${R.score}%`}})}),e.jsxs("span",{className:"ml-2 text-sm font-medium",children:[R.score,"/100"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ce,{className:"bg-primary/80",children:["+",R.predictedGrowth,"% Growth"]}),e.jsx(ce,{variant:"outline",children:R.investmentType})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Why Invest:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:R.factors&&Array.isArray(R.factors)?R.factors.map((H,Z)=>e.jsxs("li",{className:"text-sm flex items-start",children:[e.jsx(_s,{className:"h-4 w-4 mr-1 mt-1 text-primary"}),H]},Z)):e.jsxs("li",{className:"text-sm flex items-start",children:[e.jsx(_s,{className:"h-4 w-4 mr-1 mt-1 text-primary"}),"Data unavailable"]})})]})]},_))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No investment hotspots data available"})})]})]}),e.jsxs("div",{className:"container mx-auto px-4 max-w-7xl",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Market Trends & Insights"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stay informed with the latest real estate market trends and expert insights to make better property decisions."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:s.map((R,_)=>e.jsx(O,{className:`bg-card border-border hover:scale-[1.02] transition-all duration-300 ${_===0?"bg-gradient-to-r from-emerald-400/10 to-cyan-400/10":""}`,children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground/80",children:R.title}),_===0?e.jsx(Qe,{className:"w-5 h-5 text-emerald-500"}):_===1?e.jsx(We,{className:"w-5 h-5 text-emerald-500"}):e.jsx(es,{className:"w-5 h-5 text-emerald-500"})]}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground",children:R.value}),e.jsx("span",{className:`flex items-center ${R.isPositive?"text-emerald-500":"text-red-500"}`,children:R.change})]})]})},_))}),e.jsx("div",{className:"container mx-auto px-4 mb-16 grid gap-6 md:grid-cols-3",children:a.map((R,_)=>e.jsxs(O,{className:"bg-card border-border hover:scale-[1.02] transition-all duration-300",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:R.title}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(R.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:R.excerpt}),e.jsxs(P,{variant:"ghost",className:"group hover:text-emerald-500",onClick:()=>{window.location.href=`/article/${encodeURIComponent(R.title)}`},children:["Read More",e.jsx(_s,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]},_))}),e.jsx("div",{className:"w-full bg-muted/50 py-12",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Market Trends"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(O,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bitcoin Price (GBP)"}),je?e.jsx("div",{className:"animate-pulse h-8 bg-muted rounded"}):le?e.jsx("p",{className:"text-red-500",children:le}):ie?e.jsx("p",{className:"text-2xl font-bold",children:$(ie)}):e.jsx("p",{className:"text-muted-foreground",children:"Price unavailable"})]})})]})})]})]})]})};function Te({children:s}){return e.jsx(Gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:s})}const ml=({children:s})=>{try{return ee(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(he,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}},hl=()=>e.jsx(ml,{children:e.jsx(ul,{})}),ul=()=>{const{user:s,profile:a}=ee();return e.jsx(he,{children:e.jsx(Te,{children:e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx(dl,{user:s,profile:a})})})})};function Dt({title:s="Understanding the Current Real Estate Market",content:a="Default content",date:t=new Date().toISOString(),readTime:r="5 min read"}){const{user:n,profile:l}=ee();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(xs,{isAuthenticated:!!n,userProfile:l||void 0}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(O,{children:e.jsxs(U,{className:"p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:s}),e.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(t).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{className:"w-4 h-4"}),e.jsx("span",{children:r})]})]}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.split(`

`).map((i,g)=>e.jsx("p",{className:"mb-4",children:i},g))})]})})})})]})}const xl=({user:s,profile:a})=>{const[t,r]=d.useState([]),[n,l]=d.useState(!0);d.useEffect(()=>{(async()=>{try{l(!0),setTimeout(()=>{r([{id:1,title:"UK Property Market Outlook 2024",summary:"Comprehensive analysis of the UK property market trends, investment opportunities, and forecasts for 2024.",date:"2024-05-15",author:"Property Analysis Team",category:"Market Analysis",isPremium:!0,downloadUrl:"#"},{id:2,title:"Regional Investment Hotspots",summary:"Detailed report on emerging regional investment opportunities across the UK, with focus on yields and growth potential.",date:"2024-04-22",author:"Investment Research Division",category:"Investment",isPremium:!0,downloadUrl:"#"},{id:3,title:"First-Time Buyer Guide 2024",summary:"Essential information and advice for first-time buyers navigating the property market in 2024.",date:"2024-03-10",author:"Homebuyer Advisory Team",category:"Guides",isPremium:!1,downloadUrl:"#"}]),l(!1)},1e3)}catch(h){console.error("Error fetching research reports:",h),l(!1)}})()},[]);const i=(a==null?void 0:a.subscription_tier)!=="free";return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?Array(3).fill(0).map((g,h)=>e.jsx(O,{className:"overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-muted rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-24 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-1/2"})]})},h)):t.length>0?t.map(g=>e.jsxs(O,{className:"overflow-hidden flex flex-col",children:[e.jsxs(Y,{className:"flex flex-row items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:g.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("span",{children:Qr(new Date(g.date),new Date,{addSuffix:!0})})]})]}),g.isPremium&&e.jsx(ce,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Premium"})]}),e.jsxs(U,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:g.summary}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(Ia,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:g.category})]})]}),e.jsx(Es,{className:"border-t pt-4",children:g.isPremium&&!i?e.jsxs(P,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/pricing",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Upgrade to Access"]}):e.jsx(P,{className:"w-full",asChild:!0,children:e.jsxs("a",{href:g.downloadUrl,download:!0,children:[e.jsx(en,{className:"h-4 w-4 mr-2"}),"Download Report"]})})})]},g.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(He,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No reports available"}),e.jsx("p",{className:"text-muted-foreground",children:"There are currently no research reports available."})]})})})},nr=async(s=1,a=6)=>{try{const t=(s-1)*a;console.log("Fetching deals with params:",{page:s,limit:a,start:t});const{data:r,error:n}=await ge.from("deals").select(`
        id,
        title,
        description,
        location,
        price,
        roi_percentage,
        investment_term,
        property_type,
        deal_type,
        image_url,
        created_at,
        updated_at
      `).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase response:",{data:r,error:n}),n)throw console.error("Supabase query error:",n.message,n),new Error(`Failed to fetch deals: ${n.message}`);if(!r||r.length===0)return console.log("No deals found in database"),[];const l=r.map(i=>({id:i.id,title:i.title,description:i.description,location:i.location,price:Number(i.price),roi_percentage:Number(i.roi_percentage),investment_term:i.investment_term,property_type:i.property_type,deal_type:i.deal_type,image_url:i.image_url,created_at:i.created_at,updated_at:i.updated_at}));return console.log("Transformed deals:",l),l}catch(t){throw console.error("Error in getDeals:",t instanceof Error?t.message:t),t}};function Ie({className:s,...a}){return e.jsx("div",{className:I("animate-pulse rounded-md bg-muted",s),...a})}function pl(){return e.jsxs("div",{className:"overflow-hidden rounded-lg border bg-card",children:[e.jsx(Ie,{className:"aspect-video w-full"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(Ie,{className:"h-6 w-3/4"}),e.jsx(Ie,{className:"h-4 w-1/2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ie,{className:"h-4 w-full"}),e.jsx(Ie,{className:"h-4 w-5/6"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ie,{className:"h-4 w-20 mb-1"}),e.jsx(Ie,{className:"h-6 w-24"})]}),e.jsxs("div",{children:[e.jsx(Ie,{className:"h-4 w-20 mb-1"}),e.jsx(Ie,{className:"h-6 w-24"})]})]})]})]})}function et({deal:s,isSubscriber:a,onClick:t,isLoading:r,user:n,showMessageButton:l=!0}){const i=Me(),[g,h]=d.useState(!1);if(r)return e.jsx(pl,{});const y=u=>{if(u.stopPropagation(),!n){i("/login");return}h(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:n?t:()=>i("/login"),children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden bg-muted",children:[e.jsx("img",{src:s.image_url,alt:s.title,className:"object-cover w-full h-full",loading:"lazy"}),!n&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(ce,{variant:"secondary",children:"Sign in to View"})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx(ce,{variant:"secondary",className:"bg-white/90 text-black hover:bg-white/75",children:s.property_type}),e.jsx(ce,{variant:"secondary",className:"bg-primary/90 text-white hover:bg-primary/75",children:s.deal_type})]})]}),e.jsx(Y,{children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold line-clamp-2 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{className:"line-clamp-1",children:s.location})]})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("p",{className:"text-lg font-semibold",children:$(s.price)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ROI"}),e.jsxs("p",{className:"text-lg font-semibold text-emerald-500",children:[s.roi_percentage,"%"]})]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Investment Term"}),e.jsx("p",{className:"font-medium",children:s.investment_term})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected Returns"}),e.jsx("p",{className:"font-medium text-emerald-500",children:"High Yield"})]})]})}),n&&l&&e.jsxs(P,{variant:"outline",className:"w-full",onClick:y,children:[e.jsx(us,{className:"w-4 h-4 mr-2"}),"Enquire About This Deal"]})]})})]}),n&&e.jsx(tr,{isOpen:g,onClose:()=>h(!1),receiverId:"admin",dealId:s.id,deal:s})]})}const De=on,Le=cn,Ae=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Aa,{ref:r,className:I("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(sn,{asChild:!0,children:e.jsx(tt,{className:"h-4 w-4 opacity-50"})})]}));Ae.displayName=Aa.displayName;const ir=d.forwardRef(({className:s,...a},t)=>e.jsx(Ra,{ref:t,className:I("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(tn,{className:"h-4 w-4"})}));ir.displayName=Ra.displayName;const lr=d.forwardRef(({className:s,...a},t)=>e.jsx(Ea,{ref:t,className:I("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(tt,{className:"h-4 w-4"})}));lr.displayName=Ea.displayName;const Re=d.forwardRef(({className:s,children:a,position:t="popper",...r},n)=>e.jsx(an,{children:e.jsxs(Ma,{ref:n,className:I("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx(ir,{}),e.jsx(rn,{className:I("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(lr,{})]})}));Re.displayName=Ma.displayName;const gl=d.forwardRef(({className:s,...a},t)=>e.jsx(Ta,{ref:t,className:I("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a}));gl.displayName=Ta.displayName;const ae=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Da,{ref:r,className:I("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(nn,{children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsx(ln,{children:a})]}));ae.displayName=Da.displayName;const fl=d.forwardRef(({className:s,...a},t)=>e.jsx(La,{ref:t,className:I("-mx-1 my-1 h-px bg-muted",s),...a}));fl.displayName=La.displayName;const jl=({user:s,profile:a})=>{const[t,r]=d.useState("property"),[n,l]=d.useState(""),[i,g]=d.useState("standard"),[h,y]=d.useState(!1),[u,x]=d.useState([{id:1,type:"Market Analysis",details:"Detailed analysis of the Leeds property market, focusing on rental yields and capital growth potential in different neighborhoods.",priority:"high",status:"in-progress",submittedAt:"2024-05-01T10:30:00Z",estimatedCompletion:"2024-05-08T10:30:00Z"},{id:2,type:"Property",details:"Research on the historical price trends and planning permissions for 123 High Street, Manchester, M1 1AA.",priority:"standard",status:"completed",submittedAt:"2024-04-15T14:45:00Z",completedAt:"2024-04-20T09:15:00Z"}]),p=m=>{m.preventDefault(),y(!0),setTimeout(()=>{const w={id:u.length+1,type:t==="property"?"Property":"Market Analysis",details:n,priority:i,status:"pending",submittedAt:new Date().toISOString(),estimatedCompletion:new Date(Date.now()+6048e5).toISOString()};x([w,...u]),l(""),y(!1)},1500)},k=(a==null?void 0:a.subscription_tier)!=="free",j=k,D=k?"Unlimited":"2 / 3",C=m=>{switch(m){case"completed":return e.jsx(de,{className:"h-5 w-5 text-green-500"});case"in-progress":return e.jsx(As,{className:"h-5 w-5 text-blue-500"});case"pending":return e.jsx(As,{className:"h-5 w-5 text-amber-500"});default:return e.jsx(dn,{className:"h-5 w-5 text-red-500"})}},f=m=>new Date(m).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return e.jsxs("div",{children:[e.jsxs(O,{className:"mb-8",children:[e.jsx(Y,{children:e.jsx("h3",{className:"text-lg font-semibold",children:"Request Custom Research"})}),e.jsx(U,{children:e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(X,{htmlFor:"request-type",children:"Request Type"}),e.jsxs(De,{value:t,onValueChange:r,children:[e.jsx(Ae,{id:"request-type",children:e.jsx(Le,{placeholder:"Select request type"})}),e.jsxs(Re,{children:[e.jsx(ae,{value:"property",children:"Property Research"}),e.jsx(ae,{value:"market",children:"Market Analysis"})]})]})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"request-details",children:"Details"}),e.jsx(dt,{id:"request-details",placeholder:"Please provide specific details about what you'd like us to research...",rows:5,value:n,onChange:m=>l(m.target.value)})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"request-priority",children:"Priority"}),e.jsxs(De,{value:i,onValueChange:g,disabled:!j&&i==="high",children:[e.jsx(Ae,{id:"request-priority",children:e.jsx(Le,{placeholder:"Select priority"})}),e.jsxs(Re,{children:[e.jsx(ae,{value:"standard",children:"Standard (7 days)"}),e.jsxs(ae,{value:"high",disabled:!j,children:["High Priority (3 days)",!j&&" - Premium Feature"]})]})]})]})]})})}),e.jsxs(Es,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-4 sm:mb-0",children:["Requests remaining this month: ",e.jsx("span",{className:"font-medium",children:D})]}),e.jsx(P,{type:"submit",onClick:p,disabled:!n.trim()||h,children:h?"Submitting...":"Submit Request"})]})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h3",{className:"text-lg font-semibold",children:"Your Research Requests"})}),e.jsx(U,{children:u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(m=>e.jsxs("div",{className:"p-4 border rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(St,{className:"h-4 w-4"}),e.jsxs("h4",{className:"font-medium",children:[m.type," Request"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.details}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Submitted: ",f(m.submittedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C(m.status),e.jsx("span",{className:"text-sm font-medium capitalize",children:m.status.replace("-"," ")})]})]}),m.status==="in-progress"&&e.jsxs("div",{className:"mt-4 pt-4 border-t text-xs text-muted-foreground",children:["Estimated completion: ",f(m.estimatedCompletion)]}),m.status==="completed"&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(P,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Report"]})})]},m.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(St,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No requests yet"}),e.jsx("p",{className:"text-muted-foreground",children:"You haven't submitted any research requests yet."})]})})]})]})},vl=({children:s})=>{try{return ee(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(he,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}},yl=()=>e.jsx(vl,{children:e.jsx(Nl,{})}),Nl=()=>{const{user:s,profile:a,isLoading:t}=ee(),r=Me(),[n,l]=d.useState([]),[i,g]=d.useState(!0),[h,y]=b.useState(!1),[u,x]=b.useState("reports");return d.useEffect(()=>{let p=!0;async function k(){try{const j=await nr();p&&(l(j),g(!1))}catch(j){console.error("Error loading deals:",j),p&&g(!1)}}return s&&!t?k():!t&&!s&&r("/login"),()=>{p=!1}},[s,t,r]),t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{children:"Loading..."})}):s?e.jsx(he,{children:e.jsx(Te,{children:e.jsxs("div",{className:"min-h-screen bg-neutral",children:[e.jsx(we,{title:"Research & Analysis",subtitle:"Discover in-depth market insights and property analysis",showSearch:!1,showStats:!1,height:"h-[400px]",image:"/research-hero.jpg"}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-primary",children:"Latest Research"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stay informed with our comprehensive research reports and expert analysis"})]}),e.jsxs(Ge,{defaultValue:"reports",value:u,onValueChange:x,className:"mb-8",children:[e.jsxs(Ve,{className:"mb-4",children:[e.jsx(me,{value:"reports",children:"Research Reports"}),e.jsx(me,{value:"requests",children:"Research Requests"})]}),e.jsx(re,{value:"reports",children:e.jsx(xl,{user:s,profile:a})}),e.jsx(re,{value:"requests",children:e.jsx(jl,{user:s,profile:a})})]})]}),i?e.jsx("div",{className:"text-center py-8",children:"Loading deals..."}):e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Latest Deals"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(p=>e.jsx(et,{deal:p,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},p.id))})]})]}),e.jsx(sr,{isOpen:h,onClose:()=>y(!1)})]})})}):null};function bl(){const{user:s,profile:a}=ee(),t=[{title:"Understanding Property Market Cycles",excerpt:"A comprehensive guide to property market cycles and how to identify market phases for optimal investment timing.",category:"Market Analysis",date:"2024-03-20",readTime:"8 min read",image:"https://images.unsplash.com/photo-1460472178825-e5240623afd5?ixlib=rb-4.0.3"},{title:"Buy-to-Let Investment Strategy Guide",excerpt:"Expert insights into creating a successful buy-to-let investment strategy in today's market conditions.",category:"Investment",date:"2024-03-18",readTime:"10 min read",image:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3"},{title:"Property Tax Changes in 2024",excerpt:"Stay updated with the latest property tax regulations and how they affect property investors and homeowners.",category:"Legal",date:"2024-03-15",readTime:"6 min read",image:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?ixlib=rb-4.0.3"}];return e.jsx(Te,{children:e.jsxs(he,{children:[e.jsx(we,{title:"Property Investment Blog",subtitle:"Expert insights and analysis on the UK property market",backgroundImage:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24 sm:pt-8",children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((r,n)=>e.jsxs(O,{className:"flex flex-col h-full hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative h-48 w-full overflow-hidden rounded-t-lg",children:e.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"})}),e.jsxs(Y,{className:"flex flex-row items-center gap-2",children:[e.jsx(Ia,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r.category})]}),e.jsxs(U,{className:"flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),e.jsx("p",{className:"text-muted-foreground mb-4 flex-1",children:r.excerpt}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(r.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(As,{className:"w-4 h-4"}),e.jsx("span",{children:r.readTime})]})]}),e.jsxs(P,{variant:"ghost",className:"group hover:text-primary",onClick:()=>{window.location.href=`/blog/${r.title.toLowerCase().replace(/ /g,"-")}`},children:["Read More",e.jsx(_s,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})]},n))})})})]})})}const ye=d.forwardRef(({className:s,...a},t)=>e.jsxs(Oa,{ref:t,className:I("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(mn,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(hn,{className:"absolute h-full bg-primary"})}),e.jsx(un,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));ye.displayName=Oa.displayName;const wl=({children:s})=>{try{return ee(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(he,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}},Sl=()=>e.jsx(wl,{children:e.jsx(_l,{})}),_l=()=>{const{user:s,profile:a}=ee(),[t,r]=d.useState("mortgage"),[n,l]=d.useState(25e4),[i,g]=d.useState(20),[h,y]=d.useState(25),[u,x]=d.useState(3.5),[p,k]=d.useState(2e5),[j,D]=d.useState(15e3),[C,f]=d.useState(7500),[m,w]=d.useState(2e3),[T,A]=d.useState(1200),[z,E]=d.useState(1e3),[F,o]=d.useState(500),[S,M]=d.useState(5),[L,G]=d.useState(3),[J,ne]=d.useState(10),ie=n*(i/100),V=n-ie,le=u/100/12,ue=h*12,je=V*le*Math.pow(1+le,ue)/(Math.pow(1+le,ue)-1),ve=je*ue,Ce=ve-V,R=p+j+C+m,_=T*12*(1-S/100),H=z+F,Z=_-H,oe=Z/R*100,as=p*Math.pow(1+L/100,J),rs=Z*J,ns=as-p+rs,c=ns/R/J*100,N=v=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(v);return e.jsx(he,{children:e.jsx(Te,{children:e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"container mx-auto px-4 py-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Property Investment Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate mortgage payments, ROI, and other key investment metrics"})]}),e.jsxs(Ge,{defaultValue:"mortgage",value:t,onValueChange:r,className:"mb-8",children:[e.jsxs(Ve,{className:"grid w-full grid-cols-2",children:[e.jsxs(me,{value:"mortgage",className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-4 w-4"}),"Mortgage"]}),e.jsxs(me,{value:"roi",className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"ROI"]})]}),e.jsx(re,{value:"mortgage",children:e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Mortgage Calculator"})}),e.jsxs(U,{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Property Price: ",N(n)]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:5e4,max:2e6,step:5e3,value:[n],onValueChange:v=>l(v[0])}),e.jsx(K,{type:"number",value:n,onChange:v=>l(Number(v.target.value)),className:"w-24"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Deposit: ",i,"%"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:5,max:95,step:1,value:[i],onValueChange:v=>g(v[0])}),e.jsx(K,{type:"number",value:i,onChange:v=>g(Number(v.target.value)),className:"w-24"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Mortgage Term: ",h," years"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:5,max:40,step:1,value:[h],onValueChange:v=>y(v[0])}),e.jsx(K,{type:"number",value:h,onChange:v=>y(Number(v.target.value)),className:"w-24"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Interest Rate: ",u,"%"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:.5,max:10,step:.1,value:[u],onValueChange:v=>x(v[0])}),e.jsx(K,{type:"number",value:u,onChange:v=>x(Number(v.target.value)),className:"w-24",step:.1})]})]})]}),e.jsxs("div",{className:"bg-muted/40 rounded-lg p-6 space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Results"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Loan Amount:"}),e.jsx("span",{className:"font-medium",children:N(V)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Deposit Amount:"}),e.jsx("span",{className:"font-medium",children:N(ie)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold text-primary",children:[e.jsx("span",{children:"Monthly Payment:"}),e.jsx("span",{children:isNaN(je)?"Â£0":N(je)})]}),e.jsx("div",{className:"border-t pt-3 mt-3"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Repayment:"}),e.jsx("span",{className:"font-medium",children:N(ve)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Interest:"}),e.jsx("span",{className:"font-medium",children:N(Ce)})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(P,{className:"w-full",children:"Save Calculation"})})]})]})]})}),e.jsx(re,{value:"roi",children:e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"ROI Calculator"})}),e.jsxs(U,{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Purchase Price: ",N(p)]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:5e4,max:2e6,step:5e3,value:[p],onValueChange:v=>k(v[0])}),e.jsx(K,{type:"number",value:p,onChange:v=>k(Number(v.target.value)),className:"w-24"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Renovation Cost: ",N(j)]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:0,max:2e5,step:1e3,value:[j],onValueChange:v=>D(v[0])}),e.jsx(K,{type:"number",value:j,onChange:v=>D(Number(v.target.value)),className:"w-24"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Monthly Rent: ",N(T)]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:300,max:1e4,step:50,value:[T],onValueChange:v=>A(v[0])}),e.jsx(K,{type:"number",value:T,onChange:v=>A(Number(v.target.value)),className:"w-24"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Annual Maintenance: ",N(z)]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:0,max:1e4,step:100,value:[z],onValueChange:v=>E(v[0])}),e.jsx(K,{type:"number",value:z,onChange:v=>E(Number(v.target.value)),className:"w-24"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Property Growth Rate: ",L,"%"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:0,max:15,step:.5,value:[L],onValueChange:v=>G(v[0])}),e.jsx(K,{type:"number",value:L,onChange:v=>G(Number(v.target.value)),className:"w-24",step:.1})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(X,{children:["Holding Period: ",J," years"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{min:1,max:30,step:1,value:[J],onValueChange:v=>ne(v[0])}),e.jsx(K,{type:"number",value:J,onChange:v=>ne(Number(v.target.value)),className:"w-24"})]})]})]}),e.jsxs("div",{className:"bg-muted/40 rounded-lg p-6 space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Investment Returns"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Investment:"}),e.jsx("span",{className:"font-medium",children:N(R)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Annual Rental Income:"}),e.jsx("span",{className:"font-medium",children:N(_)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Annual Income:"}),e.jsx("span",{className:"font-medium",children:N(Z)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold text-primary",children:[e.jsx("span",{children:"Cash-on-Cash Return:"}),e.jsxs("span",{children:[oe.toFixed(2),"%"]})]}),e.jsx("div",{className:"border-t pt-3 mt-3"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Future Property Value:"}),e.jsx("span",{className:"font-medium",children:N(as)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Rental Income:"}),e.jsx("span",{className:"font-medium",children:N(rs)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Return:"}),e.jsx("span",{className:"font-medium",children:N(ns)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold text-primary",children:[e.jsx("span",{children:"Annualized Return:"}),e.jsxs("span",{children:[c.toFixed(2),"%"]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(P,{className:"w-full",children:"Save Calculation"})})]})]})]})})]})]})})})})})};function kl(){const s=[{title:"Getting Started",icon:e.jsx(pn,{className:"w-5 h-5"}),description:"Learn the basics of using our platform",content:["How to search for properties","Understanding market insights","Setting up your account","Subscription plans overview"]},{title:"Account & Billing",icon:e.jsx(He,{className:"w-5 h-5"}),description:"Manage your account and subscription",content:["Updating account details","Subscription management","Billing history","Payment methods"]},{title:"Technical Support",icon:e.jsx(gn,{className:"w-5 h-5"}),description:"Get help with technical issues",content:["Troubleshooting guide","System requirements","Known issues","Browser compatibility"]}],a=[{icon:e.jsx(fn,{className:"w-5 h-5"}),title:"Email Support",description:"Get help via email",action:"support@myvge.co.uk",buttonText:"Send Email",onClick:()=>window.location.href="mailto:support@myvge.co.uk"},{icon:e.jsx(jn,{className:"w-5 h-5"}),title:"Phone Support",description:"Speak to our team",action:"0800 123 4567",buttonText:"Call Now",onClick:()=>window.location.href="tel:08001234567"},{icon:e.jsx(us,{className:"w-5 h-5"}),title:"Live Chat",description:"Chat with our support team",action:"Available 24/7",buttonText:"Start Chat",onClick:()=>{const t=new CustomEvent("open-messages",{detail:{receiverId:"support"}});window.dispatchEvent(t)}}];return e.jsx(Te,{children:e.jsxs(he,{children:[e.jsx(we,{title:"Help & Support Center",subtitle:"Get the assistance you need with our comprehensive support resources",backgroundImage:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map((t,r)=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Y,{className:"flex flex-row items-center gap-2",children:[t.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e.jsx(U,{children:e.jsx("ul",{className:"space-y-2",children:t.content.map((n,l)=>e.jsxs("li",{className:"text-sm",children:["â€¢ ",n]},l))})})]},r))}),e.jsxs("div",{className:"bg-card shadow rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Contact Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose your preferred method of contact"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map((t,r)=>e.jsx(O,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(U,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:t.icon}),e.jsx("h3",{className:"font-semibold mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),e.jsx("p",{className:"text-sm font-medium mb-4",children:t.action}),e.jsx(P,{onClick:t.onClick,className:"w-full",children:t.buttonText})]})},r))})]})]})})]})})}const Pl=s=>{let a=s.replace(/\*\*(.*?)\*\*/g,'<span class="font-bold">$1</span>');return a=a.replace(/\*(.*?)\*/g,'<span class="italic">$1</span>'),a=a.replace(/^- (.+)$/gm,'<span class="block ml-2">â€¢ $1</span>'),a=a.replace(/^\d+\. (.+)$/gm,'<span class="block ml-2">$&</span>'),a.split(`
`).map(t=>t?`<span class="block">${t}</span>`:'<span class="block h-2"></span>').join("")},Cl="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",Il="https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent";function Al(){const{user:s,profile:a}=ee(),[t,r]=b.useState(!1),[n,l]=b.useState("ai"),[i,g]=b.useState([]),[h,y]=b.useState([]),[u,x]=b.useState([]),[p,k]=b.useState(""),[j,D]=b.useState(!1),[C,f]=b.useState([]),[m,w]=b.useState(null),T=b.useRef(null),A=Me();b.useEffect(()=>{if(s){z();const o=S=>{r(!0),l("messages");const M=S.detail.receiverId,L=C.find(G=>G.id===M);L&&w(L)};return window.addEventListener("open-messages",o),()=>window.removeEventListener("open-messages",o)}},[s,C]);const z=async()=>{try{const{data:o}=await W.from("messages").select(`
          *,
          sender:profiles!messages_sender_id_fkey(id, full_name, email),
          receiver:profiles!messages_receiver_id_fkey(id, full_name, email)
        `).or(`sender_id.eq.${s==null?void 0:s.id},receiver_id.eq.${s==null?void 0:s.id}`).order("created_at",{ascending:!1});if(!o)return;const S=new Map;o.forEach(M=>{const L=M.sender.id===(s==null?void 0:s.id)?M.receiver:M.sender;S.has(L.id)||S.set(L.id,{id:L.id,full_name:L.full_name,email:L.email,last_message:M.content,unread_count:M.receiver_id===(s==null?void 0:s.id)&&!M.is_read?1:0})}),f(Array.from(S.values()))}catch(o){console.error("Error loading contacts:",o)}},E=async o=>{if(o.trim())if(n==="ai"){g(S=>[...S,{text:o,isUser:!0}]),k(""),D(!0);try{const S=await fetch(`${Il}?key=${Cl}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:o}]}]})});if(!S.ok)throw new Error(`AI API error: ${S.status}`);const L=(await S.json()).candidates[0].content.parts[0].text;if(s){const G=`ai_${s.id}_${Date.now()}`;await W.from("messages").insert([{sender_id:s.id,receiver_id:s.id,content:o,is_support:!1,conversation_id:G},{sender_id:null,receiver_id:s.id,content:L,is_support:!0,conversation_id:G}])}g(G=>[...G,{text:L,isUser:!1}])}catch(S){console.error("Error in AI chat:",S),g(M=>[...M,{text:"Sorry, I encountered an error. Please try again.",isUser:!1}])}finally{D(!1)}}else if(s)if(n==="support"){y(S=>[...S,{text:o,isUser:!0}]),k("");try{const S=`support_${s.id}_${Date.now()}`,{error:M}=await W.from("messages").insert({sender_id:s.id,receiver_id:"support",content:o,is_support:!0,conversation_id:S});if(M)throw M;const L="Thank you for your message. Our support team will get back to you soon.",{error:G}=await W.from("messages").insert({sender_id:null,receiver_id:s.id,content:L,is_support:!0,conversation_id:S});if(G)throw G;y(J=>[...J,{text:L,isUser:!1}])}catch(S){console.error("Error handling support message:",S),y(M=>[...M,{text:"Sorry, there was an error sending your message. Please try again.",isUser:!1}])}}else{if(!s||!m)return;try{console.log("Sending message to Supabase:",{sender_id:s.id,receiver_id:m.id,content:o,is_support:n==="support"});const{data:S,error:M}=await W.from("messages").insert([{sender_id:s.id,receiver_id:m.id,content:o,is_support:n==="support"}]);if(M)throw console.error("Supabase insert error:",M),M;console.log("Supabase insert success:",S),x(L=>[...L,{text:o,isUser:!0,sender:{full_name:(a==null?void 0:a.full_name)||"",email:(a==null?void 0:a.email)||""},timestamp:new Date().toISOString()}]),k("")}catch(S){console.error("Error sending message:",S)}}else{g(S=>[...S,{text:"Please sign in to use support and direct messaging features.",isUser:!1}]);return}},F=()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)};return b.useEffect(()=>{F()},[i,h,u]),b.useEffect(()=>{F()},[j]),b.useEffect(()=>{if(!s||!m)return;const o=W.channel(`messages:${s.id}:${m.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`or(and(sender_id.eq.${s.id},receiver_id.eq.${m.id}),and(sender_id.eq.${m.id},receiver_id.eq.${s.id}))`},S=>{console.log("Realtime message received:",S);const M=S.new;M.sender_id!==s.id&&x(L=>[...L,{text:M.content,isUser:!1,sender:m,timestamp:M.created_at}])}).subscribe();return()=>{o.unsubscribe()}},[s,m]),e.jsx(e.Fragment,{children:e.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${t?"w-96":"w-auto"}`,children:t?e.jsxs("div",{className:"bg-background border rounded-lg shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold",children:"AI Assistant"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>A("/messages"),title:"Chat with Users",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>r(!1),children:e.jsx(st,{className:"h-4 w-4"})})]})]}),e.jsxs(Ge,{defaultValue:n,onValueChange:l,children:[e.jsxs(re,{value:"ai",className:"m-0 bg-white",children:[e.jsxs("div",{ref:T,className:"h-96 p-4 space-y-4 overflow-y-auto",children:[i.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hello! I'm your property assistant. Ask me anything about property investment, or try one of these popular questions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ol.map((o,S)=>e.jsx(P,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>E(o),children:o},S))})]}):i.map((o,S)=>e.jsx("div",{className:`flex ${o.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${o.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:o.isUser?o.text:Pl(o.text)}})})},S)),j&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"max-w-[80%] rounded-lg p-3 bg-muted",children:e.jsx("p",{className:"text-sm",children:"Typing..."})})})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:p,onChange:o=>k(o.target.value),placeholder:"Ask me anything about property...",onKeyPress:o=>{o.key==="Enter"&&E(p)}}),e.jsx(P,{onClick:()=>E(p),disabled:!p.trim(),children:e.jsx(os,{className:"h-4 w-4"})})]})})]}),e.jsxs(re,{value:"messages",className:"m-0 bg-white",children:[e.jsx("div",{ref:T,className:"h-96 p-4 space-y-4 overflow-y-auto",children:s?m?e.jsx("div",{className:"space-y-4",children:u.map((o,S)=>e.jsx("div",{className:`flex ${o.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${o.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm",children:o.text})})},S))}):e.jsx("div",{className:"space-y-4",children:C.map(o=>{var S;return e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded-lg cursor-pointer",onClick:()=>w(o),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{className:"h-8 w-8",children:[e.jsx(qe,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(o.full_name)}&background=random`,alt:o.full_name}),e.jsx(Be,{children:(S=o.full_name)==null?void 0:S.split(" ").map(M=>M[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.last_message})]})]}),o.unread_count&&o.unread_count>0&&e.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:o.unread_count})]},o.id)})}):e.jsx("div",{className:"text-center p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Please sign in to view messages"})})}),m&&e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:p,onChange:o=>k(o.target.value),placeholder:"Type a message...",onKeyPress:o=>{o.key==="Enter"&&E(p)}}),e.jsx(P,{onClick:()=>E(p),disabled:!p.trim(),children:e.jsx(os,{className:"h-4 w-4"})})]})})]}),e.jsxs(re,{value:"support",className:"m-0 bg-white",children:[e.jsx("div",{ref:T,className:"h-96 p-4 space-y-4 overflow-y-auto",children:h.length===0?e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome to support! How can we help you today?"})}):h.map((o,S)=>e.jsx("div",{className:`flex ${o.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${o.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm",children:o.text})})},S))}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:p,onChange:o=>k(o.target.value),placeholder:"Type your support question...",onKeyPress:o=>{o.key==="Enter"&&E(p)}}),e.jsx(P,{onClick:()=>E(p),disabled:!p.trim(),children:e.jsx(os,{className:"h-4 w-4"})})]})})]})]})]}):e.jsx(P,{onClick:()=>r(!0),className:"rounded-full h-12 w-12 flex items-center justify-center",children:e.jsx(us,{className:"h-6 w-6"})})})})}function Rl(){const s=Me();return d.useEffect(()=>{W.auth.onAuthStateChange((t,r)=>{console.log("Auth state change:",t,r),t==="SIGNED_IN"&&s("/dashboard")}),(async()=>{const{data:{session:t}}=await W.auth.getSession();console.log("Initial session:",t),s(t?"/dashboard":"/")})()},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Authenticating..."}),e.jsx("p",{className:"text-muted-foreground",children:"Please wait while we verify your credentials."})]})})}const El=[{title:"AI Property Analysis",description:"Advanced AI algorithms analyze market trends, rental rates, and property conditions to optimize your investment returns.",icon:Fa,badge:"AI-Powered"},{title:"Smart Tenant Matching",description:"AI-driven tenant screening and matching system to find the perfect tenants for your properties.",icon:We,badge:"Smart Match"},{title:"Predictive Maintenance",description:"AI predicts maintenance needs before they become issues, saving you time and money.",icon:Ks,badge:"Predictive"},{title:"Automated Reporting",description:"AI-generated insights and reports on property performance, maintenance history, and financial metrics.",icon:rt,badge:"Automated"},{title:"AI Chat Support",description:"24/7 AI-powered chat support for tenants and property owners.",icon:vn,badge:"24/7 Support"},{title:"Smart Security",description:"AI-enhanced security monitoring and access control systems.",icon:yn,badge:"Enhanced"}],Ml=[{title:"Tenant Screening",description:"Comprehensive tenant screening with AI-powered background checks and risk assessment."},{title:"Rent Collection",description:"Smart rent collection with predictive payment analysis and automated reminders."},{title:"Property Maintenance",description:"AI-driven maintenance scheduling and vendor management."},{title:"Financial Reporting",description:"Advanced financial analytics with AI-powered forecasting and recommendations."}];function Tl(){return e.jsx(Te,{children:e.jsxs(he,{children:[e.jsx(we,{title:"AI-Powered Property Management",subtitle:"Experience the future of property management with our advanced AI solutions.",backgroundImage:"https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-16",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Next-Generation Property Management"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Leveraging artificial intelligence to revolutionize property management and maximize your investment returns."})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"AI-Powered Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:El.map((s,a)=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(s.icon,{className:"h-6 w-6 text-primary"}),e.jsx(ce,{variant:"secondary",children:s.badge})]}),e.jsx(Ne,{className:"text-xl",children:s.title})]}),e.jsx(U,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]},a))})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Core Services Enhanced by AI"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ml.map((s,a)=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Y,{children:e.jsx(Ne,{children:s.title})}),e.jsx(U,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]},a))})]}),e.jsxs("section",{className:"space-y-8 bg-muted p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Why Choose Our AI-Powered Management?"}),e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Reduce operational costs by up to 30% with AI automation"}),e.jsx("li",{children:"Minimize vacancy rates with smart tenant matching"}),e.jsx("li",{children:"Prevent maintenance issues before they occur"}),e.jsx("li",{children:"Get real-time insights and predictive analytics"}),e.jsx("li",{children:"24/7 automated support for tenants"}),e.jsx("li",{children:"Enhanced security and risk management"})]})})]}),e.jsxs("section",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Ready to Transform Your Property Management?"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Experience the power of AI-driven property management. Contact us to learn how we can help optimize your property portfolio."}),e.jsx(P,{size:"lg",className:"px-8",children:"Schedule a Demo"})]})]})})]})})}let Bs;async function mt(){if(!Bs){const{GoogleGenerativeAI:s}=await Nn(async()=>{const{GoogleGenerativeAI:a}=await import("./vendor-BgshIRT9.js").then(t=>t.c0);return{GoogleGenerativeAI:a}},[]);Bs=new s("AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo")}return Bs}function ht(s){const a=s.indexOf("{"),t=s.lastIndexOf("}")+1;if(a===-1||t===0)throw new Error("Invalid JSON response");return s.slice(a,t)}async function Dl(s,a){const r=(await mt()).getGenerativeModel({model:"gemini-pro"}),n=`
    You are a UK property investment expert. Analyze investment opportunities for ${s} properties with a budget of Â£${a}.
    Respond with a JSON object containing ONLY these exact fields:
    {
      "analysis": "Brief overview of the investment opportunity",
      "roi_range": "Expected ROI range as a percentage",
      "risks": ["Risk 1", "Risk 2", "Risk 3"],
      "opportunities": ["Opportunity 1", "Opportunity 2", "Opportunity 3"],
      "market_trends": ["Trend 1", "Trend 2", "Trend 3"]
    }
    Ensure each array has exactly 3 items and all fields are present.
  `;try{const i=await(await r.generateContent(n)).response,g=ht(i.text().trim());console.log("Raw Analysis Response:",g);const h=JSON.parse(g);if(!h.analysis||!h.roi_range||!Array.isArray(h.risks)||!Array.isArray(h.opportunities)||!Array.isArray(h.market_trends))throw new Error("Invalid response format");return{analysis:h.analysis,roi_range:h.roi_range,risks:h.risks.slice(0,3),opportunities:h.opportunities.slice(0,3),market_trends:h.market_trends.slice(0,3)}}catch(l){return console.error("Error in getInvestmentAnalysis:",l),{analysis:`Analysis for ${s} properties with Â£${a} budget is currently unavailable`,roi_range:"8-12%",risks:["Market volatility","Economic uncertainty","Property condition risks"],opportunities:["Value appreciation potential","Rental income opportunities","Development possibilities"],market_trends:["Rising demand in key areas","Stable price growth","Infrastructure development"]}}}async function Ll(s){const t=(await mt()).getGenerativeModel({model:"gemini-pro"}),r=`
    You are a UK property market expert. Predict property market trends for ${s} in the next 12 months.
    Respond ONLY with a JSON object in this exact format:
    {
      "price_prediction": "2-3 sentence prediction of price movements",
      "demand_factors": ["3 specific demand factors"],
      "recommendations": ["3 specific investment recommendations"]
    }
  `;try{const l=await(await t.generateContent(r)).response,i=ht(l.text().trim());return console.log("Raw Predictions Response:",i),JSON.parse(i)}catch(n){return console.error("Error in getMarketPredictions:",n),{price_prediction:"Market prediction currently unavailable",demand_factors:["Population growth","Economic development","Infrastructure improvements"],recommendations:["Research thoroughly","Consider long-term potential","Evaluate local amenities"]}}}async function Ol(s){const t=(await mt()).getGenerativeModel({model:"gemini-pro"}),r=`
    You are a UK property investment advisor. Create a strategy for a ${s.experience} investor with Â£${s.budget} budget and ${s.riskTolerance} risk tolerance.
    Respond ONLY with a JSON object in this exact format:
    {
      "strategy": "2-3 sentence overview of recommended strategy",
      "portfolio_allocation": "Suggested portfolio breakdown percentages",
      "timeline": "Recommended investment timeline",
      "expected_returns": "Projected returns overview"
    }
  `;try{const l=await(await t.generateContent(r)).response,i=ht(l.text().trim());return console.log("Raw Strategy Response:",i),JSON.parse(i)}catch(n){return console.error("Error in getInvestmentStrategy:",n),{strategy:"Investment strategy currently unavailable",portfolio_allocation:"Residential: 60%, Commercial: 30%, Cash: 10%",timeline:"5-10 years recommended holding period",expected_returns:"8-12% annual return potential"}}}function Fl(){const[s,a]=b.useState(!1),[t,r]=b.useState(null),[n,l]=b.useState("residential"),[i,g]=b.useState(25e4),[h,y]=b.useState("London"),[u,x]=b.useState(null),[p,k]=b.useState(null),[j,D]=b.useState(null),C={experience:"intermediate",budget:i,riskTolerance:"moderate"},f=async()=>{a(!0),r(null);try{const m=await Dl(n,i);if(!m||typeof m!="object")throw new Error("Invalid analysis data received");x(m);const w=await Ll(h);if(!w||typeof w!="object")throw new Error("Invalid predictions data received");k(w);const T=await Ol(C);if(!T||typeof T!="object")throw new Error("Invalid strategy data received");D(T)}catch(m){console.error("Error in analysis:",m),r(m instanceof Error?m.message:"Failed to generate analysis. Please try again."),x(null),k(null),D(null)}finally{a(!1)}};return e.jsx(Te,{children:e.jsxs(he,{children:[e.jsx(we,{title:"AI-Powered Investment Analysis",subtitle:"Make data-driven investment decisions with our advanced AI analytics",showSearch:!1,height:"h-[400px]",onSearch:()=>{}}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsxs("section",{className:"bg-card p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Investment Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property Type"}),e.jsxs(De,{defaultValue:n,onValueChange:m=>l(m),children:[e.jsx(Ae,{className:"w-full",children:e.jsx(Le,{placeholder:"Select property type"})}),e.jsxs(Re,{children:[e.jsx(ae,{value:"residential",children:"Residential"}),e.jsx(ae,{value:"commercial",children:"Commercial"}),e.jsx(ae,{value:"industrial",children:"Industrial"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsx(K,{type:"text",value:h,onChange:m=>y(m.target.value),placeholder:"Enter location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Budget: Â£",i.toLocaleString()]}),e.jsx(ye,{value:[i],onValueChange:m=>g(m[0]),min:1e5,max:1e6,step:5e4})]})]}),e.jsx(P,{onClick:f,disabled:s,className:"mt-6",size:"lg",children:s?e.jsxs(e.Fragment,{children:[e.jsx(bn,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):"Analyze Investment Opportunity"})]}),t&&e.jsx("div",{className:"bg-destructive/10 text-destructive p-4 rounded-lg",children:t}),u&&p&&j&&!t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(es,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(Ne,{children:"Market Analysis"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Analysis"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.analysis||"Analysis not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"ROI Range"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.roi_range||"ROI range not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Risks"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(u.risks)?u.risks.map((m,w)=>e.jsx("li",{children:m},w)):e.jsx("li",{children:"Risks data not available"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Market Trends"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(u.market_trends)?u.market_trends.map((m,w)=>e.jsx("li",{children:m},w)):e.jsx("li",{children:"Market trends not available"})})]})]})]}),e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(Fa,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(Ne,{children:"AI Predictions"})]}),e.jsxs(U,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Price Trend"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.price_prediction||"Price prediction not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Demand Factors"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(p.demand_factors)?p.demand_factors.map((m,w)=>e.jsx("li",{children:m},w)):e.jsx("li",{children:"Demand factors not available"})})]})]})]}),e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(rt,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(Ne,{children:"Recommended Strategy"})]}),e.jsxs(U,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Portfolio Allocation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.portfolio_allocation||"Portfolio allocation not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Expected Returns"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.expected_returns||"Expected returns not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.timeline||"Timeline not available"})]})]})]})]})]})})]})})}function $l(){return e.jsx(Te,{children:e.jsxs(he,{children:[e.jsx(we,{title:"About MyVGE",subtitle:"Learn more about our mission and our team",backgroundImage:"https://images.unsplash.com/photo-1507585495646-50c2b6dbd483?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Our Story"}),e.jsx("p",{className:"text-muted-foreground",children:"MyVGE is dedicated to providing property investors with the tools and insights they need to succeed."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Mission"}),e.jsx("p",{children:"To empower property investors with comprehensive data, expert analysis, and innovative tools to make informed decisions and achieve their financial goals. We are committed to ethical practices, diversity, and transparency in all our operations."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Values"}),e.jsxs("ul",{className:"list-disc list-inside",children:[e.jsx("li",{children:"**Ethical Practices:** We adhere to the highest ethical standards in all our dealings, ensuring fairness and integrity."}),e.jsx("li",{children:"**Diversity:** We embrace diversity and inclusion, fostering a welcoming environment for all."}),e.jsx("li",{children:"**Transparency:** We are committed to open and honest communication, providing clear and accurate information to our users."})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Team"}),e.jsx("p",{children:"Our team consists of experienced property professionals, data scientists, and technology experts who are passionate about helping investors navigate the complexities of the real estate market. We are a diverse group of individuals with a shared commitment to excellence."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Contact Us"}),e.jsx("p",{children:"We'd love to hear from you! Contact us to learn more about our services or to discuss your investment needs."}),e.jsx(P,{children:"Contact Us"})]})]})})]})})}const zl=({isOpen:s,onClose:a,deal:t,isSubscriber:r})=>t?e.jsx(Ee,{open:s,onOpenChange:a,children:e.jsxs(_e,{className:"max-w-3xl w-[95vw] max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsx(ke,{children:e.jsxs(Pe,{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-4",children:[e.jsx("span",{className:"text-lg sm:text-xl font-bold break-words pr-4",children:t.title}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(ce,{className:"text-xs",children:t.property_type}),e.jsx(ce,{variant:"secondary",className:"text-xs",children:t.deal_type})]})]})}),e.jsx("div",{className:"relative aspect-video mb-3 sm:mb-4 overflow-hidden rounded-lg",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4 text-sm sm:text-base text-muted-foreground",children:[e.jsx(Ke,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"break-words",children:t.location})]}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Price"}),e.jsx("p",{className:"text-base sm:text-lg",children:$(t.price)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"ROI"}),e.jsxs("p",{className:"text-base sm:text-lg text-emerald-500",children:[t.roi_percentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Investment Term"}),e.jsx("p",{className:"text-base sm:text-lg",children:t.investment_term})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Property Type"}),e.jsx("p",{className:"text-base sm:text-lg",children:t.property_type})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Deal Type"}),e.jsx(ce,{variant:"outline",className:"text-xs sm:text-sm",children:t.deal_type})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Location"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground break-words",children:t.location})]})]})]})}):null,ql=({children:s})=>{try{return ee(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(he,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}};function Bl({onSignIn:s,onSignUp:a}){return e.jsx(ql,{children:e.jsx(Ul,{onSignIn:s,onSignUp:a})})}function Ul({onSignIn:s,onSignUp:a}){const{user:t,profile:r,isLoading:n}=ee(),[l,i]=d.useState([]),[g,h]=d.useState(!0),[y,u]=d.useState(null);return d.useEffect(()=>{let x=!0;async function p(){try{const k=await nr();x&&(i(k),h(!1))}catch(k){console.error("Error loading deals:",k),x&&h(!1)}}return p(),()=>{x=!1}},[]),n?e.jsx(he,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{children:"Loading..."})})}):e.jsx(he,{children:e.jsx(Te,{children:e.jsxs("div",{className:"min-h-screen bg-neutral",children:[e.jsx(we,{title:"Property Deals",subtitle:"Discover exclusive property investment opportunities",showSearch:!0,showStats:!1,height:"h-[400px]",image:"/deals-hero.jpg"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:g?e.jsx("div",{className:"text-center py-8",children:"Loading deals..."}):t?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(x=>e.jsx(et,{deal:x,isSubscriber:(r==null?void 0:r.subscription_tier)!=="free",onClick:()=>u(x),user:t},x.id))}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(O,{className:"p-8 text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sign in to View Full Deal Details"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Get access to exclusive property deals and investment opportunities. Create an account or sign in to view all available deals."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(P,{onClick:s,className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"w-4 w-4"}),"Sign In"]}),e.jsxs(P,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"w-4 w-4"}),"Create Account"]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(x=>e.jsx(et,{deal:x,isSubscriber:!1,onClick:s,user:null},x.id))})]})}),e.jsx(zl,{isOpen:!!y,onClose:()=>u(null),deal:y,isSubscriber:(r==null?void 0:r.subscription_tier)!=="free"})]})})})}function Gl(s){return s&&typeof s.user_id=="string"&&s.profile&&typeof s.profile.full_name=="string"&&(s.profile.avatar_url===null||typeof s.profile.avatar_url=="string")}const Us=s=>s.filter(Gl).map(a=>({user_id:a.user_id,profile:{full_name:a.profile.full_name,avatar_url:a.profile.avatar_url}}));function Vl(){const{user:s}=ee(),{toast:a}=be(),[t,r]=d.useState([]),[n,l]=d.useState(null),[i,g]=d.useState([]),[h,y]=d.useState(""),u=d.useRef(null),[,x]=d.useState(!0),[p,k]=d.useState(""),[j,D]=d.useState([]),[C,f]=d.useState(!1),[m,w]=d.useState(!1);d.useEffect(()=>{if(!s)return;(async()=>{try{console.log("Fetching conversations for user:",s==null?void 0:s.id);const{data:M,error:L}=await W.from("conversation_participants").select("conversation_id").eq("user_id",s==null?void 0:s.id);if(L)throw console.error("Error fetching participants:",L),L;if(console.log("Found participant records:",M),!(M!=null&&M.length)){console.log("No conversations found"),r([]),x(!1);return}const G=M.map(V=>V.conversation_id);console.log("Conversation IDs:",G);const{data:J,error:ne}=await W.from("conversations").select(`
            id,
            created_at,
            participants:conversation_participants!inner (
              user_id,
              profile:profiles!inner (
                full_name,
                avatar_url
              )
            ),
            messages (
              id,
              content,
              sender_id,
              created_at
            )
          `).in("id",G).order("created_at",{ascending:!1});if(ne)throw console.error("Error fetching conversations:",ne),ne;console.log("Raw conversations data:",J);const ie=(J||[]).map(V=>{const le=V.messages&&V.messages.length>0?V.messages[V.messages.length-1]:void 0;return{id:V.id,participants:Us(V.participants),last_message:le}});console.log("Transformed conversations:",ie),r(ie)}catch(M){console.error("Error in fetchConversations:",M),a({title:"Error",description:M instanceof Error?M.message:"Failed to load conversations",variant:"destructive"})}finally{x(!1)}})();const S=W.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},M=>{const L=M.new;(n==null?void 0:n.id)===L.conversation_id&&g(G=>[...G,L])}).subscribe();return()=>{S.unsubscribe()}},[s,n==null?void 0:n.id]),d.useEffect(()=>{n&&T(n.id)},[n]),d.useEffect(()=>{A()},[i]);const T=async o=>{const{data:S,error:M}=await W.from("messages").select(`
        *,
        sender:profiles!sender_id(
          full_name,
          avatar_url
        )
      `).eq("conversation_id",o).order("created_at",{ascending:!0});if(M){console.error("Error fetching messages:",M);return}g(S||[])},A=()=>{var o;(o=u.current)==null||o.scrollIntoView({behavior:"smooth"})},z=async o=>{if(o.preventDefault(),!(!n||!h.trim()))try{const{error:S}=await W.from("messages").insert({conversation_id:n.id,sender_id:s==null?void 0:s.id,content:h.trim()});if(S)throw S;y("")}catch(S){console.error("Error sending message:",S),a({title:"Error",description:"Failed to send message",variant:"destructive"})}},E=async o=>{if(!o.trim()){D([]);return}f(!0);try{const{data:S,error:M}=await W.from("profiles").select("id, full_name, avatar_url, email").neq("id",s==null?void 0:s.id).or(`full_name.ilike.%${o}%,email.ilike.%${o}%`).limit(5);if(M)throw M;D(S||[])}catch(S){console.error("Error searching users:",S),a({title:"Error",description:"Failed to search users",variant:"destructive"})}finally{f(!1)}},F=async o=>{try{const{data:S,error:M}=await W.from("conversation_participants").select("conversation_id").eq("user_id",s==null?void 0:s.id);if(M)throw M;if(S!=null&&S.length){const{data:V,error:le}=await W.from("conversation_participants").select("conversation_id").in("conversation_id",S.map(ue=>ue.conversation_id)).eq("user_id",o.id).single();if(le&&le.code!=="PGRST116")throw le;if(V){const{data:ue,error:je}=await W.from("conversations").select(`
              id,
              participants:conversation_participants(
                user_id,
                profile:profiles(
                  full_name,
                  avatar_url
                )
              )
            `).eq("id",V.conversation_id).single();if(je)throw je;if(ue){const ve={id:ue.id,participants:Us(ue.participants)};l(ve),w(!1);return}}}const{data:L,error:G}=await W.from("conversations").insert({created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(G)throw G;const{error:J}=await W.from("conversation_participants").insert([{conversation_id:L.id,user_id:s==null?void 0:s.id,created_at:new Date().toISOString()},{conversation_id:L.id,user_id:o.id,created_at:new Date().toISOString()}]);if(J)throw J;const{data:ne,error:ie}=await W.from("conversations").select(`
          id,
          participants:conversation_participants(
            user_id,
            profile:profiles(
              full_name,
              avatar_url
            )
          )
        `).eq("id",L.id).single();if(ie)throw ie;if(ne){const V={id:ne.id,participants:Us(ne.participants)};r(le=>[V,...le]),l(V),w(!1),a({title:"Success",description:"New conversation started"})}}catch(S){console.error("Error starting conversation:",S),a({title:"Error",description:S.message||"Failed to start conversation. Please try again.",variant:"destructive"})}};return s?e.jsx(he,{children:e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 max-w-6xl mx-auto",children:[e.jsxs(O,{className:"col-span-4",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(Ne,{children:"Messages"}),e.jsxs(Ee,{open:m,onOpenChange:w,children:[e.jsx(ii,{asChild:!0,children:e.jsx(P,{size:"icon",variant:"ghost",children:e.jsx(wn,{className:"h-4 w-4"})})}),e.jsxs(_e,{children:[e.jsx(ke,{children:e.jsx(Pe,{children:"New Conversation"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Search users...",value:p,onChange:o=>{k(o.target.value),E(o.target.value)}}),e.jsx(P,{size:"icon",variant:"ghost",disabled:C,children:e.jsx(ya,{className:"h-4 w-4"})})]}),e.jsxs(ds,{className:"h-[300px]",children:[j.map(o=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-accent rounded-lg cursor-pointer",onClick:()=>F(o),children:[e.jsxs(ze,{children:[e.jsx(qe,{src:o.avatar_url||void 0}),e.jsx(Be,{children:o.full_name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.email})]})]},o.id)),p&&!C&&j.length===0&&e.jsx("p",{className:"text-center text-muted-foreground p-4",children:"No users found"})]})]})]})]})]}),e.jsx(U,{children:e.jsx(ds,{className:"h-[600px]",children:t.map(o=>e.jsx("div",{className:`p-4 cursor-pointer hover:bg-accent rounded-lg mb-2 ${(n==null?void 0:n.id)===o.id?"bg-accent":""}`,onClick:()=>l(o),children:o.participants.filter(S=>S.user_id!==(s==null?void 0:s.id)).map(S=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ze,{children:[e.jsx(qe,{src:S.profile.avatar_url||void 0}),e.jsx(Be,{children:S.profile.full_name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S.profile.full_name}),o.last_message&&e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:o.last_message.content})]})]},S.user_id))},o.id))})})]}),e.jsx(O,{className:"col-span-8",children:e.jsx(U,{className:"p-0",children:n?e.jsxs("div",{className:"h-[600px] flex flex-col",children:[e.jsxs(ds,{className:"flex-1 p-4",children:[i.map(o=>e.jsx("div",{className:`flex mb-4 ${o.sender_id===(s==null?void 0:s.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${o.sender_id===(s==null?void 0:s.id)?"bg-primary text-primary-foreground":"bg-muted"} rounded-lg p-3`,children:[e.jsx("p",{children:o.content}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:new Date(o.created_at).toLocaleTimeString()})]})},o.id)),e.jsx("div",{ref:u})]}),e.jsx("form",{onSubmit:z,className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:h,onChange:o=>y(o.target.value),placeholder:"Type a message..."}),e.jsx(P,{type:"submit",size:"icon",children:e.jsx(os,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"h-[600px] flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})})]})})}):null}const Ms="3160af39c66686f66e595371584faa9d8087132c",Ts="https://app.patma.co.uk",Ds="/api/prospector/v1";async function Hl(s){try{const a=new URLSearchParams;a.append("postcode",s.postcode),s.lat&&a.append("lat",s.lat.toString()),s.long&&a.append("long",s.long.toString()),s.bedrooms&&a.append("bedrooms",s.bedrooms.toString()),s.property_type&&a.append("property_type",s.property_type),s.min_data_points&&a.append("min_data_points",s.min_data_points.toString());const t=`${Ts}${Ds}/asking-prices/?${a.toString()}`;console.log("Fetching asking prices from:",t);const r=await fetch(t,{method:"GET",headers:{Authorization:`Token ${Ms}`,"Content-Type":"application/json",Accept:"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to fetch asking prices")}return await r.json()}catch(a){throw console.error("Error fetching asking prices:",a),a}}async function Wl(s){var a;try{const t=new URLSearchParams;t.append("postcode",s.postcode),s.location&&t.append("location",s.location),s.lat&&t.append("lat",s.lat.toString()),s.long&&t.append("long",s.long.toString()),t.append("property_type",s.property_type),s.tenure&&t.append("tenure",s.tenure),s.new_build&&t.append("new_build",s.new_build),s.max_age_months&&t.append("max_age_months",s.max_age_months.toString()),s.min_data_points&&t.append("min_data_points",s.min_data_points.toString()),s.apply_indexation!==void 0&&t.append("apply_indexation",s.apply_indexation.toString());const r=`${Ts}${Ds}/sold-prices/?${t.toString()}`;console.log("Fetching sold properties from:",r);const n=await fetch(r,{method:"GET",headers:{Authorization:`Token ${Ms}`,"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok){const i=await n.json().catch(()=>({errors:["Unknown error occurred"]}));throw new Error(((a=i.errors)==null?void 0:a[0])||`HTTP error! status: ${n.status}`)}const l=await n.json();if(console.log("Sold properties response:",l),l.status==="error"||l.errors){const i=Array.isArray(l.errors)?l.errors[0]:l.message||"Failed to fetch sold properties";throw new Error(i)}return l&&l.data&&Array.isArray(l.data.available_results)?{properties:l.data.available_results,total:l.data.total_results_count||l.data.available_results.length,totalPages:l.data.number_of_pages||Math.ceil(l.data.total_results_count/(s.page_size||12))}:l&&l.data&&Array.isArray(l.data.properties)?{properties:l.data.properties,total:l.data.total||l.data.properties.length,totalPages:l.data.total_pages||Math.ceil(l.data.properties.length/(s.page_size||10))}:(console.warn("Unexpected API response structure for sold properties:",l),{properties:[],total:0,totalPages:1})}catch(t){throw console.error("Error fetching sold properties:",t),t}}async function Kl(s){var a,t;try{const r=new URLSearchParams;r.append("postcode",s.postcode),s.location&&r.append("location",s.location),s.lat&&r.append("lat",s.lat.toString()),s.long&&r.append("long",s.long.toString()),s.radius&&r.append("radius",s.radius.toString()),s.polygon&&r.append("polygon",JSON.stringify(s.polygon)),s.property_type&&r.append("property_type",s.property_type),s.bedrooms&&r.append("bedrooms",s.bedrooms.toString()),s.require_sold_price!==void 0&&r.append("require_sold_price",s.require_sold_price.toString()),s.require_size!==void 0&&r.append("require_size",s.require_size.toString()),s.include_sold_history!==void 0&&r.append("include_sold_history",s.include_sold_history.toString()),s.include_indexation_based_value!==void 0&&r.append("include_indexation_based_value",s.include_indexation_based_value.toString()),s.sort_by&&r.append("sort_by",s.sort_by),s.page&&r.append("page",s.page.toString()),s.page_size&&r.append("page_size",s.page_size.toString()),s.records_after&&r.append("records_after",s.records_after);const n=`${Ts}${Ds}/list-property/?${r.toString()}`;console.log("Fetching listed properties from:",n);const i=await(await fetch(n,{method:"GET",headers:{Authorization:`Token ${Ms}`,"Content-Type":"application/json",Accept:"application/json"}})).json();if(console.log("Listed properties response:",i),i.status==="error"||i.errors){const g=Array.isArray(i.errors)?i.errors[0]:i.message||"Failed to fetch listed properties";throw new Error(g)}return i&&i.data&&Array.isArray(i.data.available_results)?{properties:i.data.available_results,total:i.data.total_results_count||i.data.available_results.length,totalPages:i.data.number_of_pages||Math.ceil(i.data.total_results_count/(s.page_size||12))}:i&&i.properties?{properties:i.properties||[],total:i.total||((a=i.properties)==null?void 0:a.length)||0,totalPages:i.total_pages||Math.ceil((((t=i.properties)==null?void 0:t.length)||0)/(s.page_size||10))}:i&&i.data&&i.data.properties?{properties:i.data.properties,total:i.data.total||i.data.properties.length,totalPages:i.data.total_pages||Math.ceil(i.data.properties.length/(s.page_size||10))}:(console.warn("Unexpected API response structure:",i),{properties:[],total:0,totalPages:1})}catch(r){throw console.error("Error fetching listed properties:",r),r}}async function Yl(s){try{const a=new URLSearchParams;a.append("postcode",s.postcode),s.property_type&&a.append("property_type",s.property_type);const t=`${Ts}${Ds}/price-history/?${a.toString()}`;console.log("Fetching price history from:",t);const r=await fetch(t,{method:"GET",headers:{Authorization:`Token ${Ms}`,"Content-Type":"application/json",Accept:"application/json"}});if(!r.ok){const l=await r.json();throw new Error(l.message||"Failed to fetch price history")}return await r.json()}catch(a){throw console.error("Error fetching price history:",a),a}}function Jl(){var as,rs,ns;const[s,a]=b.useState(""),[t,r]=b.useState(!1),[n,l]=b.useState([]),[i,g]=b.useState([]),[h,y]=b.useState({}),[u,x]=b.useState("listed"),[p,k]=b.useState(0),[j,D]=b.useState(1),{toast:C}=be(),[f,m]=b.useState({propertyType:"any",tenure:"any",minBeds:"0",radius:1,page:1,limit:12,newBuild:!1,maxAgeMonths:18,sortBy:"most_recent_sale_date"}),[w,T]=b.useState(!0),[A,z]=b.useState(!0),[E,F]=b.useState(!1),[o,S]=b.useState(null),[M,L]=b.useState(!1),G=b.useMemo(()=>u==="listed"?n:i,[u,n,i]),J=async c=>{try{const[N,v]=await Promise.all([Hl({postcode:c,property_type:f.propertyType==="any"?void 0:f.propertyType,bedrooms:f.minBeds==="0"?void 0:parseInt(f.minBeds),radius:f.radius}),Yl({postcode:c,property_type:f.propertyType==="any"?void 0:f.propertyType,max_age_months:f.maxAgeMonths})]);y({askingPrices:N,priceHistory:v})}catch(N){console.error("Error fetching area insights:",N)}},ne=c=>{if(c.image_url&&typeof c.image_url=="string"&&c.image_url.trim()!=="")return console.log("Using direct image URL from API"),c.image_url;const N=["main_image","photo_url","thumbnail","image"];for(const v of N)if(c[v]&&typeof c[v]=="string"&&c[v].trim()!=="")return console.log(`Found image in property.${v}`),c[v];for(const v in c)if(typeof c[v]=="string"&&c[v].includes("property-software.uk")&&(c[v].endsWith(".jpg")||c[v].endsWith(".jpeg")||c[v].endsWith(".png")))return console.log(`Found PaTMa image URL in property.${v}`),c[v];if(c.images&&Array.isArray(c.images)&&c.images.length>0){const v=c.images.find(B=>typeof B=="string"&&B.includes("property-software.uk"));if(v)return console.log("Found PaTMa image URL in images array"),v;if(typeof c.images[0]=="string")return console.log("Using first image from images array"),c.images[0];if(c.images[0]&&typeof c.images[0]=="object"&&c.images[0].url)return console.log("Using URL from first image object in images array"),c.images[0].url}if(c.photos&&Array.isArray(c.photos)&&c.photos.length>0){const v=c.photos.find(B=>typeof B=="string"&&B.includes("property-software.uk"));if(v)return console.log("Found PaTMa image URL in photos array"),v;if(typeof c.photos[0]=="string")return console.log("Using first image from photos array"),c.photos[0];if(c.photos[0]&&typeof c.photos[0]=="object"&&c.photos[0].url)return console.log("Using URL from first image object in photos array"),c.photos[0].url}if(c.sold_history&&Array.isArray(c.sold_history)&&c.sold_history.length>0){for(const v of c.sold_history)if(v){for(const B of N)if(v[B]&&typeof v[B]=="string"&&v[B].trim()!=="")return console.log(`Found image in sold_history item.${B}`),v[B];for(const B in v)if(typeof v[B]=="string"&&v[B].includes("property-software.uk")&&(v[B].endsWith(".jpg")||v[B].endsWith(".jpeg")||v[B].endsWith(".png")))return console.log(`Found PaTMa image URL in sold_history item.${B}`),v[B];if(v.images&&Array.isArray(v.images)&&v.images.length>0){const B=v.images.find(te=>typeof te=="string"&&te.includes("property-software.uk"));if(B)return console.log("Found PaTMa image URL in sold_history images array"),B;if(typeof v.images[0]=="string")return console.log("Using first image from sold_history images array"),v.images[0]}}}return console.log("No image found for property"),null},ie=async()=>{if(!s){C({variant:"destructive",title:"Error",description:"Please enter a location or postcode"});return}try{r(!0);const c=/^[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}$/i.test(s.trim());if(J(s).catch(N=>{console.error("Error fetching area insights:",N),C({variant:"destructive",title:"Warning",description:"Could not fetch area insights. Some information may be missing."})}),u==="listed")try{const N=await Kl({postcode:s.trim(),location:c?void 0:s.trim(),radius:f.radius,property_type:f.propertyType==="any"?void 0:f.propertyType,tenure:f.tenure==="any"?void 0:f.tenure,bedrooms:f.minBeds==="0"?void 0:parseInt(f.minBeds),new_build:f.newBuild||void 0,page:f.page,page_size:f.limit,sort_by:f.sortBy,include_sold_history:!0,require_sold_price:!0,require_size:!0});console.log("COMPLETE API RESPONSE STRUCTURE:",JSON.stringify(N,null,2));const v=N.properties[0];v&&(console.log("COMPLETE SAMPLE PROPERTY STRUCTURE:",JSON.stringify(v,null,2)),console.log("KEY PROPERTY FIELDS FOR IMAGE LOOKUP:",{listing_url:v.listing_url,property_url:v.property_url,url:v.url,id:v.id,rightmove_id:v.rightmove_id,zoopla_id:v.zoopla_id,uprn:v.uprn,listing_detail_url:v.listing_detail_url}));const te=N.properties.map((q,fe)=>{let xe=JSON.parse(JSON.stringify(q));return q.uprn&&(xe.uprn=String(q.uprn)),q.last_sold_price&&(xe.price=q.last_sold_price),xe.image_url=ne(q),!xe.property_type&&q.built_form?xe.property_type=q.built_form:xe.property_type||(xe.property_type="House"),xe}).map(q=>V(q));l(te),k(N.total),D(N.totalPages),N.properties.length===0&&C({variant:"default",title:"No Results",description:"No listed properties found for this search criteria. Try adjusting your filters."})}catch(N){console.error("Error fetching listed properties:",N),C({variant:"destructive",title:"Error",description:N instanceof Error?N.message:"Could not fetch listed properties. Please check your search criteria and try again."}),l([]),k(0),D(1)}else try{const N=await Wl({postcode:s.trim(),location:c?void 0:s.trim(),radius:f.radius,property_type:f.propertyType==="any"?"flat":f.propertyType,tenure:f.tenure==="any"?void 0:f.tenure,max_age_months:f.maxAgeMonths,min_data_points:20,apply_indexation:!0,page:f.page,page_size:f.limit});console.log("Sold properties API response structure:",JSON.stringify(N,null,2).substring(0,500)+"..."),N.properties&&N.properties.length>0&&console.log("First sold property full object:",N.properties[0]);const B=N.properties.map(te=>{var fe;let q=JSON.parse(JSON.stringify(te));if(!q.price&&!q.sale_price){if((fe=te.details)!=null&&fe.price)q.price=te.details.price;else if(te.price_paid)q.sale_price=te.price_paid;else if(te.sale_price)q.sale_price=te.sale_price;else if(te.latest_sold_price)q.sale_price=te.latest_sold_price;else if(typeof te.price=="string"){const xe=te.price.match(/[\d,]+/);xe&&(q.price=parseInt(xe[0].replace(/,/g,"")))}}if(q.sale_price&&typeof q.sale_price=="string"){const xe=q.sale_price.match(/[\d,]+/);xe&&(q.sale_price=parseInt(xe[0].replace(/,/g,"")))}return q.image_url=ne(te),q}).map(te=>V(te));g(B),k(N.total),D(N.totalPages),N.properties.length===0&&C({variant:"default",title:"No Results",description:"No sold properties found for this search criteria. Try adjusting your filters."})}catch(N){console.error("Error fetching sold properties:",N),C({variant:"destructive",title:"Error",description:N instanceof Error?N.message:"Could not fetch sold properties. Please check your search criteria and try again."}),g([]),k(0),D(1)}}catch(c){console.error("Search error:",c),C({variant:"destructive",title:"Error",description:c instanceof Error?c.message:"An unexpected error occurred. Please try again."})}finally{r(!1)}},V=c=>{const N={...c},v=N.price||N.asking_price||N.sale_price||N.price_paid||N.latest_price||0;if(v>0&&(N.stamp_duty||(N.stamp_duty=le(v)),N.size_sq_meters&&!N.price_per_sqft?N.price_per_sqft=ue(v,N.size_sq_meters,!0):N.size_sq_feet&&!N.price_per_sqft&&(N.price_per_sqft=ue(v,N.size_sq_feet,!1)),!N.estimated_rent)){let B=0;if(B=v*.04/12,N.bedrooms){const fe=1+(N.bedrooms-2)*.1;B*=Math.max(.8,Math.min(fe,1.5))}if(N.estimated_rent=Math.round(B),!N.rental_yield){const fe=N.estimated_rent*12;N.rental_yield=fe/v*100}if(!N.roi){const Se=v*Math.pow(1.03,5),ps=N.estimated_rent*12*5,gs=Se-v+ps;N.roi=gs/v*100}N.estimated_growth||(N.estimated_growth=3.5)}return N},le=(c,N=!1,v=!1)=>{if(c<=0)return 0;let B=0;return v&&(c<=425e3?B=0:c<=625e3?B=(c-425e3)*.05:v=!1),v||(c<=25e4?B=0:c<=925e3?B=(c-25e4)*.05:c<=15e5?B=(c-925e3)*.1+675e3*.05:B=(c-15e5)*.12+575e3*.1+675e3*.05),N&&(B+=c*.03),Math.round(B)},ue=(c,N,v=!1)=>{if(!c||!N||N<=0)return null;if(v)return Math.round(c/N);{const B=v?N*10.764:N;return Math.round(c/B)}};b.useEffect(()=>{s&&ie()},[u,f.page]),b.useEffect(()=>{u==="sold"&&f.propertyType==="any"&&m(c=>({...c,propertyType:"flat"}))},[u,f.propertyType]);const je=c=>{m(N=>({...N,propertyType:c,page:1}))},ve=c=>{m(N=>({...N,tenure:c,page:1}))},Ce=c=>{m(N=>({...N,minBeds:c,page:1}))},R=c=>{m(N=>({...N,radius:parseFloat(c),page:1}))},_=c=>{m(N=>({...N,sortBy:c,page:1}))},H=c=>{S(c),L(!0)},Z=()=>{L(!1),setTimeout(()=>S(null),300)},oe=()=>{var ps,gs,ut,xt,pt;if(!o)return null;const c=o.price||o.asking_price||o.sale_price||o.price_paid||o.latest_price||0,N="date_of_transfer"in o,v=o.image_url,B=o.postcode||o.address&&((ps=o.address.match(/[A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}/i))==null?void 0:ps[0])||"Not Available",te=o.sold_history&&o.sold_history.length>0,q=te?o.sold_history.filter(Q=>Q&&Q.date&&!isNaN(new Date(Q.date).getTime())&&Q.price&&!isNaN(parseFloat(String(Q.price)))).sort((Q,pe)=>new Date(Q.date).getTime()-new Date(pe.date).getTime()):[],fe=q.length>=2?(q[q.length-1].price-q[0].price)/q[0].price*100:null,xe=(Q,pe=25,Ls=4.5,Os=25)=>{const fs=Q*(pe/100),js=Q-fs,is=Ls/100/12,vs=Os*12,gt=js*(is*Math.pow(1+is,vs))/(Math.pow(1+is,vs)-1);return{downPayment:fs,loanAmount:js,monthlyPayment:gt,totalPayments:vs,totalRepayment:gt*vs}},Se=c>0?xe(c):null;return e.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 ${M?"opacity-100":"opacity-0 pointer-events-none"} transition-opacity duration-300`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:Z}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("button",{onClick:Z,className:"absolute top-4 right-4 z-10 bg-white/80 p-1 rounded-full hover:bg-white transition-colors",children:e.jsx(st,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex flex-col md:flex-row h-full overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-2/5 h-64 md:h-auto relative bg-gray-100",children:[v?e.jsx("img",{src:v,alt:o.address||"Property",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[e.jsx(We,{className:"h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No image available"})]}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium",children:o.property_type})}),o.listing_url&&e.jsxs("a",{href:o.listing_url,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-4 left-4 bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 hover:bg-white transition-colors",children:[e.jsx(Sn,{className:"h-4 w-4"}),"View Listing"]})]}),e.jsxs("div",{className:"w-full md:w-3/5 p-6 overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:o.address}),e.jsx("p",{className:"text-3xl font-bold mb-4 text-emerald-600",children:$(c)}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Property Type"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(_a,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:o.property_type||"N/A"})]})]}),o.bedrooms&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bedrooms"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ws,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:o.bedrooms})]})]}),o.bathrooms&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bathrooms"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"h-4 w-4 text-gray-600 flex items-center justify-center",children:"ðŸ›"}),e.jsx("span",{className:"font-medium",children:o.bathrooms})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Postcode"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ke,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:B})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Tenure"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(_n,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:o.tenure||"N/A"})]})]}),N&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Sold Date"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx($e,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:new Date(o.date_of_transfer).toLocaleDateString()})]})]}),(o.size_sq_feet||o.size_sq_meters)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Size"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Sa,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"font-medium",children:[o.size_sq_feet?`${o.size_sq_feet} sq.ft`:"",o.size_sq_meters?`${o.size_sq_meters} mÂ²`:""]})]})]}),o.price_per_sqft&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Price per sq.ft"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Qe,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:$(o.price_per_sqft)})]})]})]}),e.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(es,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Investment Dashboard"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[o.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Estimated Monthly Rent"}),e.jsxs("p",{className:"text-blue-600 text-lg font-bold mt-1",children:[$(o.estimated_rent),"/month"]}),o.rental_yield&&e.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:[o.rental_yield.toFixed(1),"% yield"]})]}),o.roi&&e.jsxs("div",{className:"bg-purple-50 p-3 rounded",children:[e.jsx("p",{className:"text-purple-800 text-sm font-medium",children:"5-Year ROI Estimate"}),e.jsxs("p",{className:"text-purple-600 text-lg font-bold mt-1",children:[o.roi.toFixed(1),"%"]}),o.estimated_growth&&e.jsxs("p",{className:"text-purple-600 text-sm mt-1",children:[o.estimated_growth.toFixed(1),"% annual growth"]})]})]}),Se&&e.jsxs("div",{className:"bg-emerald-50 p-3 rounded",children:[e.jsx("p",{className:"text-emerald-800 text-sm font-medium",children:"Mortgage Estimate (25% deposit)"}),e.jsxs("p",{className:"text-emerald-600 text-lg font-bold mt-1",children:[$(Se.monthlyPayment),"/month"]}),e.jsxs("div",{className:"mt-2 text-sm text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Deposit (25%):"}),e.jsx("span",{children:$(Se.downPayment)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Loan amount:"}),e.jsx("span",{children:$(Se.loanAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Term:"}),e.jsx("span",{children:"25 years at 4.5%"})]})]})]})]}),o.estimated_rent&&Se&&e.jsxs("div",{className:"mt-4 bg-white p-3 rounded border border-gray-100",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium",children:"Monthly Cash Flow Analysis"}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rental Income:"}),e.jsxs("span",{className:"text-emerald-600",children:["+",$(o.estimated_rent)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mortgage Payment:"}),e.jsxs("span",{className:"text-red-600",children:["-",$(Se.monthlyPayment)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Management (10%):"}),e.jsxs("span",{className:"text-red-600",children:["-",$(o.estimated_rent*.1)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Maintenance (5%):"}),e.jsxs("span",{className:"text-red-600",children:["-",$(o.estimated_rent*.05)]})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-gray-100 mt-2",children:[e.jsx("span",{children:"Net Cash Flow:"}),e.jsx("span",{className:`${o.estimated_rent-Se.monthlyPayment-o.estimated_rent*.15>0?"text-emerald-600":"text-red-600"}`,children:$(o.estimated_rent-Se.monthlyPayment-o.estimated_rent*.15)})]})]})]})]}),o.stamp_duty!==void 0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Purchase Costs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 p-3 rounded",children:[e.jsx("p",{className:"text-amber-800 text-sm font-medium",children:"Stamp Duty"}),e.jsx("p",{className:"text-amber-600 text-lg font-bold mt-1",children:$(o.stamp_duty)}),e.jsx("p",{className:"text-amber-700 text-xs mt-2",children:"First-time buyer? You may qualify for lower rates."})]}),e.jsxs("div",{className:"bg-emerald-50 p-3 rounded",children:[e.jsx("p",{className:"text-emerald-800 text-sm font-medium",children:"Total Purchase Cost"}),e.jsx("p",{className:"text-emerald-600 text-lg font-bold mt-1",children:$(c+(o.stamp_duty||0))}),e.jsxs("div",{className:"mt-2 text-sm text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property price:"}),e.jsx("span",{children:$(c)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stamp duty:"}),e.jsx("span",{children:$(o.stamp_duty||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Legal fees (est.):"}),e.jsx("span",{children:$(1500)})]})]})]})]})]}),((ut=(gs=h.priceHistory)==null?void 0:gs.data)==null?void 0:ut.trend_percentage)!==void 0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(kn,{className:"h-5 w-5 mr-2 text-blue-600"}),"Area Insights"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-cyan-50 p-3 rounded",children:[e.jsx("p",{className:"text-cyan-800 text-sm font-medium",children:"Area Price Trend"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[h.priceHistory.data.trend_percentage>0?e.jsx(Ws,{className:"h-5 w-5 text-emerald-600"}):e.jsx(ka,{className:"h-5 w-5 text-red-600"}),e.jsxs("p",{className:`text-lg font-bold ${h.priceHistory.data.trend_percentage>0?"text-emerald-600":"text-red-600"}`,children:[h.priceHistory.data.trend_percentage.toFixed(1),"%"]})]}),e.jsx("p",{className:"text-cyan-600 text-sm mt-1",children:"Last 12 months"}),e.jsx("div",{className:"mt-3 h-10 bg-white rounded overflow-hidden",children:e.jsx("div",{className:`h-full ${h.priceHistory.data.trend_percentage>0?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Math.min(Math.abs(h.priceHistory.data.trend_percentage)*3,100)}%`}})})]}),((pt=(xt=h.askingPrices)==null?void 0:xt.data)==null?void 0:pt.mean)&&e.jsxs("div",{className:"bg-teal-50 p-3 rounded",children:[e.jsx("p",{className:"text-teal-800 text-sm font-medium",children:"Average Area Price"}),e.jsx("p",{className:"text-teal-600 text-lg font-bold mt-1",children:$(h.askingPrices.data.mean)}),c>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-teal-600 text-sm mt-1",children:["This property is ",e.jsx("strong",{children:c<h.askingPrices.data.mean?"below":"above"})," average"]}),e.jsxs("div",{className:"mt-3 relative h-10 bg-gray-100 rounded overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"h-full bg-teal-200",style:{width:"50%"}}),e.jsx("div",{className:"h-full bg-teal-300",style:{width:"50%"}})]}),e.jsx("div",{className:"absolute top-0 h-full w-1 bg-black",style:{left:"50%",transform:"translateX(-50%)"}}),e.jsx("div",{className:"absolute top-0 h-full w-2 bg-emerald-600 rounded",style:{left:`${Math.min(Math.max(c/h.askingPrices.data.mean*50,10),90)}%`,transform:"translateX(-50%)"}})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1 text-gray-600",children:[e.jsx("span",{children:"-50%"}),e.jsx("span",{children:"Average"}),e.jsx("span",{children:"+50%"})]})]})]})]})]}),o.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:o.description})]}),te&&q.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(es,{className:"h-5 w-5 mr-2 text-amber-600"}),"Sale History"]}),fe!==null&&e.jsxs("div",{className:"mb-3 p-3 rounded bg-amber-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-amber-800 text-sm mr-2",children:"Total Price Growth:"}),e.jsxs("span",{className:`font-bold ${fe>=0?"text-emerald-600":"text-red-600"}`,children:[fe>=0?"+":"",fe.toFixed(1),"%"]})]}),q.length>=2&&e.jsxs("div",{className:"text-xs text-amber-700 mt-1",children:["Over ",Math.round((new Date(q[q.length-1].date).getTime()-new Date(q[0].date).getTime())/(1e3*60*60*24*365))," years (",new Date(q[0].date).getFullYear()," to ",new Date(q[q.length-1].date).getFullYear(),")"]})]}),q.length>=2&&e.jsxs("div",{className:"mb-4 bg-white p-3 rounded border border-gray-100",children:[e.jsx("div",{className:"h-32 relative",children:e.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex items-end h-full",children:q.map((Q,pe)=>{const Ls=Math.max(...q.map(is=>is.price)),Os=Q.price/Ls*100,fs=`${100/q.length}%`,js=pe>0?"0 0 0 1px":"0";return e.jsx("div",{className:"bg-emerald-500 hover:bg-emerald-600 transition-colors relative group",style:{height:`${Os}%`,width:fs,margin:js},children:e.jsxs("div",{className:"hidden group-hover:block absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-black text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[e.jsx("div",{children:$(Q.price)}),e.jsx("div",{children:new Date(Q.date).toLocaleDateString()})]})},pe)})})}),e.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:q.map((Q,pe)=>e.jsx("div",{children:new Date(Q.date).getFullYear()},pe))})]}),e.jsx("div",{className:"space-y-2",children:q.map((Q,pe)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{children:new Date(Q.date).toLocaleDateString()})]}),e.jsx("span",{className:"font-medium",children:typeof Q.price=="number"&&!isNaN(Q.price)?$(Q.price):"Price not available"})]},pe))})]}),o.nearby_stations&&o.nearby_stations.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Nearby Transport"}),e.jsx("div",{className:"space-y-2",children:o.nearby_stations.map((Q,pe)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{children:Q.name}),e.jsxs("span",{className:"text-gray-600",children:[Q.distance," miles"]})]},pe))})]}),o.nearby_schools&&o.nearby_schools.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Nearby Schools"}),e.jsx("div",{className:"space-y-2",children:o.nearby_schools.map((Q,pe)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{children:Q.name}),e.jsxs("span",{className:"text-gray-600",children:[Q.distance," miles"]})]},pe))})]})]})]})]})]})};return e.jsxs(he,{children:[e.jsx("div",{className:"bg-background",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500 to-cyan-500 mix-blend-multiply"})}),e.jsxs("div",{className:"relative px-4 py-24 sm:px-6 sm:py-32 lg:py-40 lg:px-8",children:[e.jsx("h1",{className:"text-center text-4xl font-extrabold tracking-tight text-white sm:text-5xl lg:text-6xl",children:"Property Search"}),e.jsx("p",{className:"mx-auto mt-6 max-w-lg text-center text-xl text-white sm:max-w-3xl",children:"Search through thousands of properties, compare market prices, and make informed decisions with our comprehensive property data."})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 -mt-16 relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Find Properties"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:u==="listed"?"default":"outline",onClick:()=>x("listed"),className:"min-w-[120px]",children:"Listed Properties"}),e.jsx(P,{variant:u==="sold"?"default":"outline",onClick:()=>x("sold"),className:"min-w-[120px]",children:"Sold Properties"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(De,{value:f.propertyType,onValueChange:je,children:[e.jsx(Ae,{className:"w-full",children:e.jsx(Le,{placeholder:"Property Type"})}),e.jsxs(Re,{children:[u==="listed"&&e.jsx(ae,{value:"any",children:"Any Type"}),e.jsx(ae,{value:"flat",children:"Flat"}),e.jsx(ae,{value:"terraced",children:"Terraced"}),e.jsx(ae,{value:"semi-detached",children:"Semi-Detached"}),e.jsx(ae,{value:"detached",children:"Detached"}),e.jsx(ae,{value:"bungalow",children:"Bungalow"})]})]}),e.jsxs(De,{value:f.tenure,onValueChange:ve,children:[e.jsx(Ae,{className:"w-full",children:e.jsx(Le,{placeholder:"Tenure"})}),e.jsxs(Re,{children:[e.jsx(ae,{value:"any",children:"Any Tenure"}),e.jsx(ae,{value:"freehold",children:"Freehold"}),e.jsx(ae,{value:"leasehold",children:"Leasehold"})]})]}),e.jsxs(De,{value:f.minBeds,onValueChange:Ce,children:[e.jsx(Ae,{className:"w-full",children:e.jsx(Le,{placeholder:"Min Bedrooms"})}),e.jsxs(Re,{children:[e.jsx(ae,{value:"0",children:"Any"}),[1,2,3,4,5].map(c=>e.jsxs(ae,{value:c.toString(),children:[c,"+ beds"]},c))]})]}),e.jsxs(De,{value:f.radius.toString(),onValueChange:R,children:[e.jsx(Ae,{className:"w-full",children:e.jsx(Le,{placeholder:"Search Radius"})}),e.jsx(Re,{children:[.25,.5,1,2,5,10].map(c=>e.jsxs(ae,{value:c.toString(),children:[c," miles"]},c))})]}),u==="listed"&&e.jsxs(De,{value:f.sortBy,onValueChange:_,children:[e.jsx(Ae,{className:"w-full",children:e.jsx(Le,{placeholder:"Sort By"})}),e.jsxs(Re,{children:[e.jsx(ae,{value:"most_recent_sale_date",children:"Most Recent Sale"}),e.jsx(ae,{value:"distance",children:"Distance"})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx(K,{type:"text",placeholder:"Enter location (postcode, city, street, etc.)",value:s,onChange:c=>a(c.target.value),className:"flex-1 h-12"}),e.jsx(P,{onClick:ie,className:"h-12 px-8 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white hover:from-emerald-600 hover:to-cyan-600",disabled:t,children:t?e.jsx(Qs,{size:"sm"}):"Search"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:c=>T(c.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show price per sq.ft"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:c=>z(c.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show stamp duty"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:c=>F(c.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show planning applications"]})]})]})]}),t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Qs,{size:"lg"})}):G.length>0?e.jsxs(e.Fragment,{children:[((as=h.askingPrices)==null?void 0:as.data)&&e.jsxs("div",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Area Insights for ",s]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-emerald-800 text-sm font-medium mb-2",children:"Average Asking Price"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:$(h.askingPrices.data.mean||0)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-800 text-sm font-medium mb-2",children:"Median Asking Price"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:$(h.askingPrices.data.median||0)})]}),((ns=(rs=h.priceHistory)==null?void 0:rs.data)==null?void 0:ns.trend_percentage)!==void 0&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-800 text-sm font-medium mb-2",children:"Price Trend (12 months)"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[h.priceHistory.data.trend_percentage.toFixed(1),"%"]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg text-gray-600",children:["Found ",p," ",u==="listed"?"listed":"sold"," properties"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map((c,N)=>e.jsx(O,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>H(c),children:u==="listed"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"aspect-video relative bg-gray-100",children:[c.image_url?e.jsx("img",{src:c.image_url,alt:c.address||"Property",className:"w-full h-full object-cover",loading:"lazy"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[e.jsx(We,{className:"h-12 w-12 text-gray-300"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No image available"})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("span",{className:"bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium",children:c.property_type}),c.new_build&&e.jsx("span",{className:"bg-emerald-500/90 text-white px-3 py-1 rounded-full text-sm font-medium",children:"New Build"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2 mb-2",children:c.address}),e.jsx("p",{className:"text-2xl font-bold mb-3 text-emerald-600",children:$(c.price||c.asking_price||c.last_sold_price||c.price_paid||c.latest_price||0)}),w&&c.price_per_sqft&&e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[$(c.price_per_sqft),"/sq.ft",c.size_sq_feet&&` Â· ${c.size_sq_feet} sq.ft`,c.size_sq_meters&&` Â· ${c.size_sq_meters} mÂ²`]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:c.bedrooms||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:c.postcode})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:c.tenure||"N/A"})]})]}),A&&c.stamp_duty!==void 0&&e.jsx("div",{className:"mt-2 mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stamp Duty:"}),e.jsx("span",{className:"font-medium",children:$(c.stamp_duty)})]})}),(c.estimated_rent||c.rental_yield||c.roi||c.estimated_growth)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Investment Potential"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[c.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"Est. Rent"}),e.jsxs("p",{className:"text-blue-600 font-bold",children:[$(c.estimated_rent),"/mo"]})]}),c.rental_yield&&e.jsxs("div",{className:"bg-emerald-50 p-2 rounded",children:[e.jsx("p",{className:"text-emerald-800 font-medium",children:"Yield"}),e.jsxs("p",{className:"text-emerald-600 font-bold",children:[c.rental_yield.toFixed(1),"%"]})]}),c.roi&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"5yr ROI"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[c.roi.toFixed(1),"%"]})]}),c.estimated_growth&&e.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"Growth"}),e.jsxs("p",{className:"text-amber-600 font-bold",children:[c.estimated_growth.toFixed(1),"%"]})]})]})]})]})]}):e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2 mb-2",children:c.address}),e.jsx("p",{className:"text-2xl font-bold mb-3 text-emerald-600",children:$(c.sale_price||c.price||c.price_paid||0)}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:c.postcode})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:c.property_type})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsxs("span",{children:["Sold: ",new Date(c.date_of_transfer).toLocaleDateString()]})]}),c.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.bedrooms," beds"]})]})]}),A&&c.stamp_duty!==void 0&&e.jsx("div",{className:"mt-2 mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stamp Duty:"}),e.jsx("span",{className:"font-medium",children:$(c.stamp_duty)})]})}),(c.estimated_rent||c.rental_yield||c.roi||c.estimated_growth)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Investment Potential"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[c.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"Est. Rent"}),e.jsxs("p",{className:"text-blue-600 font-bold",children:[$(c.estimated_rent),"/mo"]})]}),c.rental_yield&&e.jsxs("div",{className:"bg-emerald-50 p-2 rounded",children:[e.jsx("p",{className:"text-emerald-800 font-medium",children:"Yield"}),e.jsxs("p",{className:"text-emerald-600 font-bold",children:[c.rental_yield.toFixed(1),"%"]})]}),c.roi&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"5yr ROI"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[c.roi.toFixed(1),"%"]})]}),c.estimated_growth&&e.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"Growth"}),e.jsxs("p",{className:"text-amber-600 font-bold",children:[c.estimated_growth.toFixed(1),"%"]})]})]})]})]})},`${c.address}-${N}`))}),j>1&&e.jsxs("div",{className:"mt-8 flex justify-center gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>m(c=>({...c,page:Math.max(1,c.page-1)})),disabled:f.page===1,children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4",children:["Page ",f.page," of ",j]}),e.jsx(P,{variant:"outline",onClick:()=>m(c=>({...c,page:Math.min(j,c.page+1)})),disabled:f.page===j,children:"Next"})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-600",children:["No ",u," properties found. Try adjusting your search criteria."]})})]}),e.jsx(oe,{})]})}function Zl(){const[s,a]=d.useState(!0),t=Pn(),{user:r,profile:n,signOut:l,refreshSession:i}=ee();return d.useEffect(()=>{console.log("Auth state in App:",{user:r,profile:n}),i()},[]),d.useEffect(()=>{const g=()=>a(!0),h=()=>a(!1);g();const y=setTimeout(h,100);return()=>clearTimeout(y)},[t.pathname]),d.useEffect(()=>{document.documentElement.classList.remove("dark")},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(xs,{isAuthenticated:!!r,userProfile:n||void 0,onSignIn:()=>{},onSignUp:()=>{},onSignOut:l}),e.jsx("main",{children:e.jsxs(Cn,{children:[e.jsx(se,{path:"/",element:e.jsx(Ai,{})}),e.jsx(se,{path:"/listings",element:e.jsx(Jl,{})}),e.jsx(se,{path:"/deals",element:e.jsx(Bl,{})}),e.jsx(se,{path:"/trends",element:e.jsx(hl,{})}),e.jsx(se,{path:"/insights",element:e.jsx(al,{})}),e.jsx(se,{path:"/calculators",element:e.jsx(Sl,{})}),e.jsx(se,{path:"/profile",element:e.jsx(It,{})}),e.jsx(se,{path:"/login",element:e.jsx(In,{to:"/",replace:!0})}),e.jsx(se,{path:"/dashboard",element:e.jsx(Fi,{})}),e.jsx(se,{path:"/pricing",element:e.jsx(zi,{})}),e.jsx(se,{path:"/subscription/success",element:e.jsx(Bi,{})}),e.jsx(se,{path:"/subscription/cancel",element:e.jsx(Ui,{})}),e.jsx(se,{path:"/account",element:e.jsx(It,{})}),e.jsx(se,{path:"/research",element:e.jsx(yl,{})}),e.jsx(se,{path:"/blog",element:e.jsx(bl,{})}),e.jsx(se,{path:"/article/:title",element:e.jsx(Dt,{})}),e.jsx(se,{path:"/blog/:slug",element:e.jsx(Dt,{})}),e.jsx(se,{path:"/help",element:e.jsx(kl,{})}),e.jsx(se,{path:"/auth/callback",element:e.jsx(Rl,{})}),e.jsx(se,{path:"/property-management",element:e.jsx(Tl,{})}),e.jsx(se,{path:"/investment-opportunities",element:e.jsx(Fl,{})}),e.jsx(se,{path:"/about-us",element:e.jsx($l,{})}),e.jsx(se,{path:"/messages",element:e.jsx(Vl,{})}),!1,e.jsx(se,{path:"*",element:e.jsx(Hi,{})})]})}),e.jsx(Al,{}),e.jsx(Gn,{}),e.jsx(Kn,{isAnimating:s})]})}function Xl(){return e.jsx(Ha,{children:e.jsx(d.Suspense,{fallback:e.jsx(Wn,{}),children:e.jsx(Zl,{})})})}An.TempoDevtools.init();Rn.init("phc_Pg1VGdZoazG7KyDNxnUXNZZz6zPVrGNSRtFlDnlZCcA",{api_host:"https://eu.i.posthog.com",person_profiles:"identified_only"});const Ql=new En;Mn.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(Tn,{client:Ql,children:e.jsx(Dn,{children:e.jsx(Ha,{children:e.jsx(Xl,{})})})})}));
//# sourceMappingURL=index-05Bz_WNq.js.map
