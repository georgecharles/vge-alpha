import{t as hr,c as ur,r as c,j as e,V as Ft,R as Ot,a as ts,A as $t,C as zt,b as qt,T as Bt,D as Ut,P as xr,d as Gt,e as S,S as pr,f as Vt,g as gr,h as fr,i as Ht,k as jr,l as vr,m as Vs,X as tt,n as Wt,L as Kt,o as Yt,p as at,q as Jt,s as Zt,I as Xt,u as yr,v as Nr,w as Qt,x as ea,F as sa,y as ta,z as br,B as aa,E as wr,G as ra,H as na,J as ia,K as la,M as oa,N as ca,O as Sr,Q as da,U as ma,W as _r,Y as kr,Z as ha,_ as Pr,$ as ua,a0 as Cr,a1 as xa,a2 as pa,a3 as Ir,a4 as Ar,a5 as ga,a6 as Fe,a7 as Rr,a8 as fa,a9 as Hs,aa as Ws,ab as jt,ac as vt,ad as ms,ae as yt,af as Mr,ag as Er,ah as ja,ai as va,aj as Nt,ak as ya,al as Na,am as ba,an as Tr,ao as Dr,ap as Lr,aq as wa,ar as Sa,as as _a,at as Fr,au as de,av as Or,aw as $r,ax as is,ay as zr,az as rt,aA as qr,aB as ws,aC as Br,aD as ka,aE as Pa,aF as Ye,aG as We,aH as ve,aI as bt,aJ as Ca,aK as Ks,aL as De,aM as Ia,aN as Ss,aO as Ur,aP as Gr,aQ as Vr,aR as Ys,aS as es,aT as Aa,aU as Hr,aV as Wr,aW as Kr,aX as Ke,aY as Oe,aZ as As,a_ as Je,a$ as Ze,b0 as Xe,b1 as $e,b2 as ds,b3 as Yr,b4 as Jr,b5 as nt,b6 as $s,b7 as Zr,b8 as Xr,b9 as Qr,ba as wt,bb as St,bc as en,bd as sn,be as _s,bf as Rs,bg as tn,bh as Ra,bi as an,bj as Ma,bk as rn,bl as Ea,bm as nn,bn as Ta,bo as ln,bp as Da,bq as on,br as La,bs as Fa,bt as cn,bu as dn,bv as Oa,bw as mn,bx as hn,by as _t,bz as un,bA as xn,bB as pn,bC as gn,bD as fn,bE as $a,bF as jn,bG as vn,bH as za,bI as yn,bJ as Nn,bK as bn,bL as wn,bM as Sn,bN as _n,bO as kn,bP as Pn,bQ as Cn,bR as qa,bS as In,bT as Ba,bU as An,bV as Rn,bW as Mn,bX as En,bY as Tn,bZ as ae,b_ as Dn,b$ as Ln,c0 as Fn,c1 as On,c2 as $n,c3 as zn,c4 as qn}from"./vendor-Cjl9-thN.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function I(...s){return hr(ur(s))}function B(s){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}function ks(s){return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"long",year:"numeric"}).format(new Date(s))}function Ua(s){return new Intl.NumberFormat("en-GB").format(s)}const Bn=xr,Ga=c.forwardRef(({className:s,...a},t)=>e.jsx(Ft,{ref:t,className:I("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));Ga.displayName=Ft.displayName;const Un=ts("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Va=c.forwardRef(({className:s,variant:a,...t},r)=>e.jsx(Ot,{ref:r,className:I(Un({variant:a}),s),...t}));Va.displayName=Ot.displayName;const Gn=c.forwardRef(({className:s,...a},t)=>e.jsx($t,{ref:t,className:I("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a}));Gn.displayName=$t.displayName;const Ha=c.forwardRef(({className:s,...a},t)=>e.jsx(zt,{ref:t,className:I("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:e.jsx(qt,{className:"h-4 w-4"})}));Ha.displayName=zt.displayName;const Wa=c.forwardRef(({className:s,...a},t)=>e.jsx(Bt,{ref:t,className:I("text-sm font-semibold [&+div]:text-xs",s),...a}));Wa.displayName=Bt.displayName;const Ka=c.forwardRef(({className:s,...a},t)=>e.jsx(Ut,{ref:t,className:I("text-sm opacity-90",s),...a}));Ka.displayName=Ut.displayName;const Vn=1,Hn=1e6;let zs=0;function Wn(){return zs=(zs+1)%Number.MAX_SAFE_INTEGER,zs.toString()}const qs=new Map,kt=s=>{if(qs.has(s))return;const a=setTimeout(()=>{qs.delete(s),ls({type:"REMOVE_TOAST",toastId:s})},Hn);qs.set(s,a)},Kn=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,Vn)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?kt(t):s.toasts.forEach(r=>{kt(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},Ps=[];let Cs={toasts:[]};function ls(s){Cs=Kn(Cs,s),Ps.forEach(a=>{a(Cs)})}function Yn({...s}){const a=Wn(),t=n=>ls({type:"UPDATE_TOAST",toast:{...n,id:a}}),r=()=>ls({type:"DISMISS_TOAST",toastId:a});return ls({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:n=>{n||r()}}}),{id:a,dismiss:r,update:t}}function we(){const[s,a]=c.useState(Cs);return c.useEffect(()=>(Ps.push(a),()=>{const t=Ps.indexOf(a);t>-1&&Ps.splice(t,1)}),[s]),{...s,toast:Yn,dismiss:t=>ls({type:"DISMISS_TOAST",toastId:t})}}function Jn(){const{toasts:s}=we();return e.jsxs(Bn,{children:[s.map(function({id:a,title:t,description:r,action:n,...l}){return e.jsxs(Va,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(Wa,{children:t}),r&&e.jsx(Ka,{children:r})]}),n,e.jsx(Ha,{})]},a)}),e.jsx(Ga,{})]})}const Zn="https://zcuapuvvygahkzljuhyg.supabase.co",Xn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdWFwdXZ2eWdhaGt6bGp1aHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MTQwMzcsImV4cCI6MjA1MzQ5MDAzN30.GIhphzkznmDXgrUApGW479uHHluqDWqy_9cfG5sU5Xc",fe=Gt(Zn,Xn),Ya=c.createContext({user:null,session:null,profile:null,isLoading:!0,signOut:async()=>{},refreshSession:async()=>{}}),Bs=async s=>{try{const{data:a,error:t}=await fe.from("profiles").select("*").eq("id",s).single();return t?(console.error("Error fetching profile:",t),null):(console.log("Fetched profile data:",a),a)}catch(a){return console.error("Error in fetchProfile:",a),null}},Ja=({children:s})=>{const[a,t]=c.useState(null),[r,n]=c.useState(null),[l,i]=c.useState(null),[f,h]=c.useState(!0),N=async()=>{var g,y;try{h(!0),console.log("Refreshing session...");const{data:j,error:D}=await fe.auth.getSession();if(D)throw D;if(console.log("Session data:",j),n(j.session),t(((g=j.session)==null?void 0:g.user)||null),(y=j.session)!=null&&y.user){const w=await Bs(j.session.user.id);i(w)}else i(null)}catch(j){console.error("Error refreshing session:",j),t(null),i(null),n(null)}finally{h(!1)}},x=async()=>{try{h(!0);const{error:g}=await fe.auth.signOut();if(g)throw g;t(null),i(null),n(null)}catch(g){console.error("Error signing out:",g)}finally{h(!1)}};c.useEffect(()=>{const y=(async()=>{var D,w;h(!0),console.log("Initializing auth...");try{const{data:u,error:d}=await fe.auth.getSession();if(d)throw d;if(console.log("Initial session data:",u),n(u.session),t(((D=u.session)==null?void 0:D.user)||null),(w=u.session)!=null&&w.user){const v=await Bs(u.session.user.id);i(v)}}catch(u){console.error("Error initializing auth:",u)}finally{h(!1)}const{data:j}=fe.auth.onAuthStateChange(async(u,d)=>{if(console.log("Auth state changed:",u,d),n(d),t((d==null?void 0:d.user)||null),d!=null&&d.user){const v=await Bs(d.user.id);i(v)}else i(null)});return()=>{j.subscription.unsubscribe()}})();return()=>{y.then(j=>j&&j())}},[]);const p={user:a,session:r,profile:l,isLoading:f,signOut:x,refreshSession:N};return S.createElement(Ya.Provider,{value:p},s)};function te(){return c.useContext(Ya)}function Qn({className:s}){return e.jsx("div",{className:I("flex items-center justify-center",s),children:e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})})}function ei(){return null}const si=ts("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=c.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...n},l)=>{const i=r?pr:"button";return e.jsx(i,{className:I(si({variant:a,size:t,className:s})),ref:l,...n})});P.displayName="Button";const os=c.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Vt,{ref:r,className:I("relative overflow-hidden",s),...t,children:[e.jsx(gr,{className:"h-full w-full rounded-[inherit]",children:a}),e.jsx(Za,{}),e.jsx(fr,{})]}));os.displayName=Vt.displayName;const Za=c.forwardRef(({className:s,orientation:a="vertical",...t},r)=>e.jsx(Ht,{ref:r,orientation:a,className:I("flex touch-none select-none transition-colors",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...t,children:e.jsx(jr,{className:"relative flex-1 rounded-full bg-border"})}));Za.displayName=Ht.displayName;function ti({isOpen:s,onClose:a,children:t}){return e.jsx(vr,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(Vs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm lg:hidden",onClick:a,style:{width:"100vw"}}),e.jsxs(Vs.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:20,stiffness:300},className:I("fixed inset-y-0 right-0 z-50 w-full max-w-xs bg-white shadow-2xl lg:hidden","flex flex-col"),children:[e.jsxs("div",{className:"flex h-16 items-center justify-between border-b px-6",children:[e.jsx("a",{href:"/",className:"hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://i.postimg.cc/GpdY6N74/my-1920-x-1080-px-1.png",alt:"MyVGE",className:"h-8"})}),e.jsx(P,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full hover:bg-muted",onClick:r=>{r.stopPropagation(),a()},children:e.jsx(tt,{className:"h-5 w-5"})})]}),e.jsx(os,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col p-6 pb-16",children:[e.jsx("div",{className:"flex-1",children:t}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["© ",new Date().getFullYear()," MyVGE. All rights reserved."]})})]})})]})]})})}const Xa=c.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Wt,{ref:r,className:I("relative z-10 flex max-w-max flex-1 items-center justify-center",s),...t,children:[a,e.jsx(er,{})]}));Xa.displayName=Wt.displayName;const Qa=c.forwardRef(({className:s,...a},t)=>e.jsx(Kt,{ref:t,className:I("group flex flex-1 list-none items-center justify-center space-x-1",s),...a}));Qa.displayName=Kt.displayName;const ns=Nr,ai=ts("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),Js=c.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Yt,{ref:r,className:I(ai(),"group",s),...t,children:[a," ",e.jsx(at,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));Js.displayName=Yt.displayName;const Zs=c.forwardRef(({className:s,...a},t)=>e.jsx(Jt,{ref:t,className:I("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",s),...a}));Zs.displayName=Jt.displayName;const ys=yr,er=c.forwardRef(({className:s,...a},t)=>e.jsx("div",{className:I("absolute left-0 top-full flex justify-center"),children:e.jsx(Zt,{className:I("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",s),ref:t,...a})}));er.displayName=Zt.displayName;const ri=c.forwardRef(({className:s,...a},t)=>e.jsx(Xt,{ref:t,className:I("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",s),...a,children:e.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));ri.displayName=Xt.displayName;const ze=c.forwardRef(({className:s,...a},t)=>e.jsx(Qt,{ref:t,className:I("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));ze.displayName=Qt.displayName;const qe=c.forwardRef(({className:s,...a},t)=>e.jsx(ea,{ref:t,className:I("aspect-square h-full w-full",s),...a}));qe.displayName=ea.displayName;const Be=c.forwardRef(({className:s,...a},t)=>e.jsx(sa,{ref:t,className:I("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a}));Be.displayName=sa.displayName;const ni=_r,ii=kr,li=c.forwardRef(({className:s,inset:a,children:t,...r},n)=>e.jsxs(ta,{ref:n,className:I("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...r,children:[t,e.jsx(br,{className:"ml-auto h-4 w-4"})]}));li.displayName=ta.displayName;const oi=c.forwardRef(({className:s,...a},t)=>e.jsx(aa,{ref:t,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));oi.displayName=aa.displayName;const sr=c.forwardRef(({className:s,sideOffset:a=4,...t},r)=>e.jsx(wr,{children:e.jsx(ra,{ref:r,sideOffset:a,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t})}));sr.displayName=ra.displayName;const Qe=c.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(na,{ref:r,className:I("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...t}));Qe.displayName=na.displayName;const ci=c.forwardRef(({className:s,children:a,checked:t,...r},n)=>e.jsxs(ia,{ref:n,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(la,{children:e.jsx(oa,{className:"h-4 w-4"})})}),a]}));ci.displayName=ia.displayName;const di=c.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(ca,{ref:r,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(la,{children:e.jsx(Sr,{className:"h-4 w-4 fill-current"})})}),a]}));di.displayName=ca.displayName;const mi=c.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(da,{ref:r,className:I("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...t}));mi.displayName=da.displayName;const Xs=c.forwardRef(({className:s,...a},t)=>e.jsx(ma,{ref:t,className:I("-mx-1 my-1 h-px bg-muted",s),...a}));Xs.displayName=ma.displayName;const Le=Ir,hi=Ar,ui=Pr,tr=c.forwardRef(({className:s,...a},t)=>e.jsx(ha,{ref:t,className:I("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));tr.displayName=ha.displayName;const Ae=c.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(ui,{children:[e.jsx(tr,{}),e.jsxs(ua,{ref:r,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(Cr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ae.displayName=ua.displayName;const Re=({className:s,...a})=>e.jsx("div",{className:I("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});Re.displayName="DialogHeader";const it=({className:s,...a})=>e.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});it.displayName="DialogFooter";const Me=c.forwardRef(({className:s,...a},t)=>e.jsx(xa,{ref:t,className:I("text-lg font-semibold leading-none tracking-tight",s),...a}));Me.displayName=xa.displayName;const ss=c.forwardRef(({className:s,...a},t)=>e.jsx(pa,{ref:t,className:I("text-sm text-muted-foreground",s),...a}));ss.displayName=pa.displayName;const q=c.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:I("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));q.displayName="Input";const xi=ts("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),U=c.forwardRef(({className:s,...a},t)=>e.jsx(ga,{ref:t,className:I(xi(),s),...a}));U.displayName=ga.displayName;function pi({isOpen:s,onClose:a,onSuccess:t}){const[r,n]=c.useState(""),[l,i]=c.useState(""),[f,h]=c.useState(!1),{toast:N}=we(),x=async p=>{p.preventDefault(),h(!0);try{console.log("Attempting login with:",r);const{data:g,error:y}=await fe.auth.signInWithPassword({email:r,password:l});if(y)throw console.error("Supabase auth error:",y),y;console.log("Login successful:",g),N({title:"Success",description:"You have successfully logged in."}),a(),setTimeout(()=>{t&&t(),window.location.href=window.location.pathname},300)}catch(g){console.error("Login error:",g),N({variant:"destructive",title:"Login failed",description:g.message||"Please check your credentials and try again."})}finally{h(!1)}};return e.jsx(Le,{open:s,onOpenChange:a,children:e.jsxs(Ae,{className:"sm:max-w-[425px]",children:[e.jsxs(Re,{children:[e.jsx(Me,{children:"Login"}),e.jsx(ss,{children:"Enter your credentials to access your account."})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(q,{id:"email",type:"email",value:r,onChange:p=>n(p.target.value),placeholder:"your.email@example.com",autoComplete:"email",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(U,{htmlFor:"password",children:"Password"}),e.jsx(q,{id:"password",type:"password",value:l,onChange:p=>i(p.target.value),autoComplete:"current-password",required:!0})]})]}),e.jsx(it,{children:e.jsx(P,{type:"submit",disabled:f,children:f?"Logging in...":"Login"})})]})]})})}const gi=[{title:"Investment Deals",href:"/deals",icon:"💼",requiresAuth:!0},{title:"Listings",href:"/listings",icon:"🏠",requiresAuth:!1},{title:"Market",items:[{title:"Market Trends",href:"/trends",description:"Stay updated with the latest real estate market trends",requiresAuth:!0},{title:"Market Insights",href:"/insights",description:"Deep dive into property market analytics",requiresAuth:!0},{title:"Research & Reports",href:"/research",description:"Access expert analysis and reports",requiresAuth:!1}],icon:"📊"},{title:"Services",items:[{title:"Property Management",href:"/property-management",description:"Let us take care of your property",requiresAuth:!0},{title:"Investment Opportunities",href:"/investment-opportunities",description:"Discover tailored investment strategies",requiresAuth:!0},{title:"Calculators",href:"/calculators",description:"Calculate your property investment",requiresAuth:!1}],icon:"🏠"},{title:"Messages",href:"/messages",icon:"💬",requiresAuth:!0},{title:"Pricing",href:"/pricing",icon:"💎",requiresAuth:!1},{title:"Support",href:"/help",icon:"❓",requiresAuth:!1},{title:"About Us",href:"/about-us",icon:"ℹ️",requiresAuth:!1}];function hs({isAuthenticated:s=!1,onSignIn:a,onSignUp:t,userProfile:r={},onSignOut:n}){var E,L;const[l,i]=S.useState(!1),[f,h]=S.useState(!1),[N,x]=S.useState(!1),p=Fe(),g=te(),y=s||!!g.user,j=r&&Object.keys(r).length>0?r:g.profile,D=n||g.signOut;S.useEffect(()=>{const A=()=>{h(window.scrollY>20)};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]);const w=A=>{A.preventDefault(),x(!0)},u=async()=>{console.log("Sign out button clicked");try{await D(),window.location.href="/"}catch(A){console.error("Error signing out:",A)}},d=(A,M,F)=>{M&&!y&&(A.preventDefault(),x(!0)),i(!1)},v=S.forwardRef(({className:A,title:M,children:F,...o},b)=>e.jsx("li",{children:e.jsx(ys,{asChild:!0,children:e.jsxs("a",{ref:b,className:I("block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",A??""),...o,children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:M}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:F})]})})}));return v.displayName="ListItem",e.jsxs(e.Fragment,{children:[e.jsx("header",{className:I("fixed top-0 left-0 right-0 z-50 transition-all duration-300",f?"py-2":"py-4"),children:e.jsx("div",{className:"px-4 mx-auto max-w-7xl",children:e.jsx("div",{className:I("rounded-full bg-white border transition-all duration-300",f?"shadow-md border-gray-200/50 backdrop-blur-md bg-white/90":"shadow-sm border-transparent"),children:e.jsxs("div",{className:"h-16 px-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("a",{href:"/",className:"hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://i.postimg.cc/GpdY6N74/my-1920-x-1080-px-1.png",alt:"MyVGE",className:"h-8"})}),e.jsx(Xa,{className:"hidden lg:flex",children:e.jsxs(Qa,{className:"gap-2",children:[e.jsxs(ns,{children:[e.jsx(Js,{className:I("text-sm font-medium rounded-full px-4","bg-transparent hover:bg-gray-100 transition-colors","data-[state=open]:bg-gray-100"),children:"Market"}),e.jsx(Zs,{children:e.jsxs("ul",{className:"w-[400px] gap-3 p-4 rounded-2xl",children:[y?e.jsxs(e.Fragment,{children:[e.jsx(v,{href:"/trends",title:"Market Trends",children:"Stay updated with the latest real estate market trends."}),e.jsx(v,{href:"/insights",title:"Market Insights",children:"Deep dive into property market analytics and forecasts."})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{href:"#",onClick:w,title:"Market Trends",children:"Sign in to access market trends."}),e.jsx(v,{href:"#",onClick:w,title:"Market Insights",children:"Sign in to access market insights."})]}),e.jsx(v,{href:"/research",title:"Research & Reports",children:"Access expert analysis and reports."})]})})]}),e.jsx(ns,{children:e.jsx(ys,{className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/deals",children:"Deals"})}),e.jsx(ns,{children:e.jsx(ys,{className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/listings",children:"Listings"})}),e.jsxs(ns,{children:[e.jsx(Js,{className:I("text-sm font-medium rounded-full px-4","bg-transparent hover:bg-gray-100 transition-colors","data-[state=open]:bg-gray-100"),children:"Services"}),e.jsx(Zs,{children:e.jsxs("ul",{className:"w-[400px] gap-3 p-4 rounded-2xl",children:[e.jsx(v,{href:"/property-management",title:"Property Management",children:"Let us take care of your property."}),e.jsx(v,{href:"/investment-opportunities",title:"Investment Opportunities",children:"Discover tailored investment strategies."}),e.jsx(v,{href:"/calculators",title:"Calculators",children:"Calculate different aspects of your property investment."})]})})]}),e.jsx(ns,{children:e.jsx(ys,{className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/pricing",children:"Pricing"})})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P,{variant:"ghost",className:"lg:hidden p-2",onClick:()=>i(!0),children:e.jsx(Rr,{className:"h-6 w-6"})}),e.jsxs("nav",{className:"hidden lg:flex items-center gap-2 mr-4",children:[e.jsx("a",{href:"/help",className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),children:"Support"}),e.jsx("a",{href:"/about-us",className:I("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),children:"About Us"})]}),e.jsxs(P,{variant:"ghost",className:"hidden md:flex bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500 rounded-full border border-emerald-500/20 shadow-lg hover:shadow-emerald-500/20 transition-all duration-300",onClick:()=>p("/pricing"),children:[e.jsx(fa,{className:"mr-2 h-4 w-4"}),"Upgrade"]}),e.jsx("div",{className:"w-[160px] flex justify-end",children:y?e.jsxs(ni,{children:[e.jsx(ii,{asChild:!0,children:e.jsx(P,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:e.jsxs(ze,{className:"h-10 w-10",children:[e.jsx(qe,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent((j==null?void 0:j.full_name)||"")}&background=random`,alt:(j==null?void 0:j.full_name)||"User avatar"}),e.jsx(Be,{className:"bg-primary/10",children:((E=j==null?void 0:j.full_name)==null?void 0:E.split(" ").filter(Boolean).map(A=>A[0]).slice(0,2).join("").toUpperCase())||"U"})]})})}),e.jsxs(sr,{className:"w-56 mt-2 bg-white border border-gray-200 rounded-2xl shadow-lg",align:"end",forceMount:!0,children:[e.jsxs(Qe,{className:"flex-col items-start",children:[e.jsx("div",{className:"font-medium",children:j==null?void 0:j.full_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:j==null?void 0:j.email})]}),e.jsx(Xs,{}),e.jsxs(Qe,{onClick:()=>p("/dashboard"),children:[e.jsx(jt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(Qe,{onClick:()=>p("/account"),children:[e.jsx(vt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Account Settings"})]}),e.jsxs(Qe,{onClick:()=>p("/messages"),children:[e.jsx(ms,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Messages"})]}),e.jsx(Xs,{}),e.jsxs(Qe,{className:"text-red-500 focus:text-red-500",onClick:u,children:[e.jsx(yt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log Out"})]})]})]}):e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsxs(P,{variant:"ghost",onClick:w,className:"rounded-full hover:bg-gray-100",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Sign In"]}),e.jsxs(P,{onClick:()=>t==null?void 0:t(),className:"rounded-full bg-black text-white hover:bg-gray-800",children:[e.jsx(Ws,{className:"mr-2 h-4 w-4"}),"Sign Up"]})]})})]})]})})})}),e.jsx(ti,{isOpen:l,onClose:()=>i(!1),children:e.jsxs("nav",{className:"space-y-6",children:[y&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 px-2",children:[e.jsxs(ze,{className:"h-10 w-10",children:[e.jsx(qe,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent((j==null?void 0:j.full_name)||"")}&background=random`,alt:(j==null?void 0:j.full_name)||"User avatar"}),e.jsx(Be,{className:"bg-primary/10",children:((L=j==null?void 0:j.full_name)==null?void 0:L.split(" ").filter(Boolean).map(A=>A[0]).slice(0,2).join("").toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm font-medium leading-none truncate",children:j==null?void 0:j.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:j==null?void 0:j.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(P,{variant:"outline",className:"justify-center rounded-full",onClick:()=>{p("/dashboard"),i(!1)},children:[e.jsx(jt,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs(P,{variant:"outline",className:"justify-center rounded-full",onClick:()=>{p("/account"),i(!1)},children:[e.jsx(vt,{className:"mr-2 h-4 w-4"}),"Account"]})]}),e.jsx("div",{className:"border-b border-border"})]}),gi.map((A,M)=>{var F;return e.jsx("div",{className:"space-y-3",children:A.href?e.jsxs("a",{href:A.href,className:I("flex items-center space-x-3 text-lg font-medium transition-colors",!A.requiresAuth||y?"hover:text-primary":"text-muted-foreground hover:text-primary/70"),onClick:o=>d(o,A.requiresAuth,A.href),children:[e.jsx("span",{className:"text-xl",children:A.icon}),e.jsx("span",{children:A.title}),A.requiresAuth&&!y&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Sign in required)"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-3 text-lg font-medium",children:[e.jsx("span",{className:"text-xl",children:A.icon}),e.jsx("span",{children:A.title})]}),e.jsx("div",{className:"space-y-3 pl-9",children:(F=A.items)==null?void 0:F.map((o,b)=>e.jsxs("a",{href:o.href,className:I("block text-base transition-colors",!o.requiresAuth||y?"text-muted-foreground hover:text-primary":"text-muted-foreground/70 hover:text-primary/70"),onClick:k=>d(k,o.requiresAuth,o.href),children:[o.title,o.requiresAuth&&!y&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Sign in required)"})]},b))})]})},M)}),y?e.jsx("div",{className:"pt-6",children:e.jsxs(P,{variant:"outline",className:"w-full justify-center rounded-full text-red-500 hover:text-red-600 hover:bg-red-50",onClick:u,children:[e.jsx(yt,{className:"mr-2 h-4 w-4"}),"Log Out"]})}):e.jsxs("div",{className:"space-y-4 pt-6",children:[e.jsxs(P,{variant:"outline",className:"w-full justify-center rounded-full",onClick:w,children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Sign In"]}),e.jsxs(P,{className:"w-full justify-center rounded-full bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500",onClick:()=>{t==null||t(),i(!1)},children:[e.jsx(Ws,{className:"mr-2 h-4 w-4"}),"Sign Up"]})]})]})}),e.jsx(pi,{isOpen:N,onClose:()=>x(!1),onSuccess:()=>{x(!1),window.location.reload()}})]})}const fi=({text:s="",className:a="",delay:t=100,animationFrom:r={opacity:0,transform:"translate3d(0,40px,0)"},animationTo:n={opacity:1,transform:"translate3d(0,0,0)"},easing:l=x=>x,threshold:i=.1,rootMargin:f="-100px",textAlign:h="center",onLetterAnimationComplete:N})=>{const x=s.split(" ").map(u=>u.split("")),p=x.flat(),[g,y]=c.useState(!1),j=c.useRef(null),D=c.useRef(0);c.useEffect(()=>{const u=new IntersectionObserver(([d])=>{d.isIntersecting&&(y(!0),j.current&&u.unobserve(j.current))},{threshold:i,rootMargin:f});return j.current&&u.observe(j.current),()=>u.disconnect()},[i,f]);const w=Mr(p.length,p.map((u,d)=>({from:r,to:g?async v=>{await v(n),D.current+=1,D.current===p.length&&N&&N()}:r,delay:d*t,config:{easing:l}})));return e.jsx("p",{ref:j,className:`split-parent overflow-hidden inline ${a}`,style:{textAlign:h,whiteSpace:"normal",wordWrap:"break-word"},children:x.map((u,d)=>e.jsxs("span",{style:{display:"inline-block",whiteSpace:"nowrap"},children:[u.map((v,E)=>{const L=x.slice(0,d).reduce((A,M)=>A+M.length,0)+E;return e.jsx(Er.span,{style:w[L],className:"inline-block transform transition-opacity will-change-transform",children:v},L)}),e.jsx("span",{style:{display:"inline-block",width:"0.3em"},children:" "})]},d))})},ji=`#version 300 es
in vec2 position;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}
`,vi=`#version 300 es
precision highp float;

uniform float uTime;
uniform float uAmplitude;
uniform vec3 uColorStops[3];
uniform vec2 uResolution;
uniform float uBlend;

out vec4 fragColor;

vec3 permute(vec3 x) {
  return mod(((x * 34.0) + 1.0) * x, 289.0);
}

float snoise(vec2 v){
  const vec4 C = vec4(
      0.211324865405187, 0.366025403784439,
      -0.577350269189626, 0.024390243902439
  );
  vec2 i  = floor(v + dot(v, C.yy));
  vec2 x0 = v - i + dot(i, C.xx);
  vec2 i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;
  i = mod(i, 289.0);

  vec3 p = permute(
      permute(i.y + vec3(0.0, i1.y, 1.0))
    + i.x + vec3(0.0, i1.x, 1.0)
  );

  vec3 m = max(
      0.5 - vec3(
          dot(x0, x0),
          dot(x12.xy, x12.xy),
          dot(x12.zw, x12.zw)
      ), 
      0.0
  );
  m = m * m;
  m = m * m;

  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;
  m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);

  vec3 g;
  g.x  = a0.x  * x0.x  + h.x  * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

struct ColorStop {
  vec3 color;
  float position;
};

#define COLOR_RAMP(colors, factor, finalColor) {                int index = 0;                                              for (int i = 0; i < 2; i++) {                                    ColorStop currentColor = colors[i];                         bool isInBetween = currentColor.position <= factor;         index = int(mix(float(index), float(i), float(isInBetween)));   }                                                           ColorStop currentColor = colors[index];                     ColorStop nextColor = colors[index + 1];                    float range = nextColor.position - currentColor.position;   float lerpFactor = (factor - currentColor.position) / range;   finalColor = mix(currentColor.color, nextColor.color, lerpFactor); }

void main() {
  vec2 uv = gl_FragCoord.xy / uResolution;
  
  ColorStop colors[3];
  colors[0] = ColorStop(uColorStops[0], 0.0);
  colors[1] = ColorStop(uColorStops[1], 0.5);
  colors[2] = ColorStop(uColorStops[2], 1.0);
  
  vec3 rampColor;
  COLOR_RAMP(colors, uv.x, rampColor);
  
  float height = snoise(vec2(uv.x * 2.0 + uTime * 0.1, uTime * 0.25)) * 0.5 * uAmplitude;
  height = exp(height);
  height = (uv.y * 2.0 - height + 0.2);
  float intensity = 0.6 * height;
  
  float midPoint = 0.20;
  float auroraAlpha = smoothstep(midPoint - uBlend * 0.5, midPoint + uBlend * 0.5, intensity);
  
  vec3 auroraColor = intensity * rampColor;
  
  fragColor = vec4(auroraColor * auroraAlpha, auroraAlpha);
}
`,yi=s=>{const{colorStops:a=["#00d8ff","#7cff67","#00d8ff"],amplitude:t=1,blend:r=.5}=s,n=c.useRef(s);n.current=s;const l=c.useRef(null);return c.useEffect(()=>{const i=l.current;if(!i)return;const f=new ja({alpha:!0,premultipliedAlpha:!0,antialias:!0}),h=f.gl;h.clearColor(0,0,0,0),h.enable(h.BLEND),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA),h.canvas.style.backgroundColor="transparent";let N;function x(){if(!i)return;const w=i.offsetWidth,u=i.offsetHeight;f.setSize(w,u),N&&(N.uniforms.uResolution.value=[w,u])}window.addEventListener("resize",x);const p=new va(h);p.attributes.uv&&delete p.attributes.uv;const g=a.map(w=>{const u=new Nt(w);return[u.r,u.g,u.b]});N=new ya(h,{vertex:ji,fragment:vi,uniforms:{uTime:{value:0},uAmplitude:{value:t},uColorStops:{value:g},uResolution:{value:[i.offsetWidth,i.offsetHeight]},uBlend:{value:r}}});const y=new Na(h,{geometry:p,program:N});i.appendChild(h.canvas);let j=0;const D=w=>{j=requestAnimationFrame(D);const{time:u=w*.01,speed:d=1}=n.current;if(N){N.uniforms.uTime.value=u*d*.1,N.uniforms.uAmplitude.value=n.current.amplitude??1,N.uniforms.uBlend.value=n.current.blend??r;const v=n.current.colorStops??a;N.uniforms.uColorStops.value=v.map(E=>{const L=new Nt(E);return[L.r,L.g,L.b]}),f.render({scene:y})}};return j=requestAnimationFrame(D),x(),()=>{var w;cancelAnimationFrame(j),window.removeEventListener("resize",x),i&&h.canvas.parentNode===i&&i.removeChild(h.canvas),(w=h.getExtension("WEBGL_lose_context"))==null||w.loseContext()}},[t]),e.jsx("div",{ref:l,className:"w-full h-full"})},Ne=({onSearch:s=()=>{},title:a="Find Your Next Investment Property",subtitle:t="Search through our curated selection of properties",showSearch:r=!0,showStats:n=!0,height:l="h-[500px]",image:i})=>{const[f,h]=S.useState(""),N=p=>{p.preventDefault(),s(f)},x=()=>{console.log("Hero text animation completed!")};return e.jsxs("div",{className:`relative w-full ${l} bg-gray-900 overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(yi,{colorStops:["#004F39","#FEFACA","#151513"],blend:.6,amplitude:1.2,speed:.3}),e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center text-center py-16 pt-24 animate-fade-in-up",children:[e.jsx(fi,{text:a,className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4",delay:50,animationFrom:{opacity:0,transform:"translate3d(0,50px,0)"},animationTo:{opacity:1,transform:"translate3d(0,0,0)"},easing:p=>1-Math.pow(1-p,3),threshold:.2,rootMargin:"-50px",onLetterAnimationComplete:x}),e.jsx("p",{className:"text-lg sm:text-xl text-gray-200 mb-6 sm:mb-8 max-w-3xl mx-auto",children:t}),r&&e.jsx("form",{onSubmit:N,className:"w-full max-w-2xl animate-fade-in-up",children:e.jsxs("div",{className:"relative",children:[e.jsx(q,{type:"text",placeholder:"Enter an address, neighbourhood, city, or postcode",value:f,onChange:p=>h(p.target.value),className:"w-full h-12 sm:h-14 pl-5 pr-14 text-base sm:text-lg bg-white/90 backdrop-blur-sm text-black border-2 border-transparent focus:border-primary"}),e.jsx(P,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-2 top-1/2 -translate-y-1/2 hover:bg-transparent",children:e.jsx(ba,{className:"w-6 h-6 text-gray-500 hover:text-primary transition-colors"})})]})})]})]})},O=c.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("rounded-xl border bg-card text-card-foreground shadow",s),...a}));O.displayName="Card";const Y=c.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex flex-col space-y-1.5 p-6",s),...a}));Y.displayName="CardHeader";const ue=c.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:I("font-semibold leading-none tracking-tight",s),...a}));ue.displayName="CardTitle";const Qs=c.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:I("text-sm text-muted-foreground",s),...a}));Qs.displayName="CardDescription";const z=c.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("p-6 pt-0",s),...a}));z.displayName="CardContent";const Es=c.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex items-center p-6 pt-0",s),...a}));Es.displayName="CardFooter";const Ni=ts("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"bg-green-500/10 text-green-500 hover:bg-green-500/20",warning:"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20",premium:"bg-gradient-to-r from-amber-500 to-amber-600 text-white hover:from-amber-600 hover:to-amber-700"}},defaultVariants:{variant:"default"}});function ce({className:s,variant:a,...t}){return e.jsx("div",{className:I(Ni({variant:a}),s),...t})}function Ms({id:s,address:a,price:t,squareFootage:r,bedrooms:n,bathrooms:l,isPremium:i=!1,propertyType:f="residential",description:h,createdAt:N,author:x,original_price:p,roi_percentage:g,investment_term:y,deal_type:j,isSubscriber:D=!1,type:w="listing",isDeal:u=!1,images:d=[],onClick:v,onMessageAuthor:E,currentUser:L,userProfile:A}){const M=!!L,[F,o]=S.useState(!1),b=Z=>{Z.stopPropagation(),o(!F)},k=Z=>{Z.stopPropagation(),console.log("Share property:",s)},$=Z=>{Z.stopPropagation(),x&&E&&E(x.id)},W=d&&d.length>0?d[0]:`https://source.unsplash.com/random/800x600?property,house&sig=${s}`;return e.jsxs(O,{className:"overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:v,children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-muted",children:[e.jsx("img",{src:W,alt:a,className:"object-cover w-full h-full",loading:"lazy"}),i&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(ce,{variant:"secondary",className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Featured"})}),u&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(ce,{variant:"secondary",className:"bg-emerald-500 text-white hover:bg-emerald-600",children:"Investment Deal"})}),g&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(ce,{className:"bg-emerald-500 text-white",children:[g,"% ROI"]})})]}),e.jsxs(Y,{className:"p-4 pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:B(t)}),p&&e.jsx("div",{className:"text-sm text-muted-foreground line-through",children:B(p)})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a})]}),e.jsxs(z,{className:"p-4 pt-2",children:[(n||l||r)&&e.jsxs("div",{className:"flex justify-between mb-3 text-sm",children:[n!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:n})," ",e.jsx("span",{className:"text-muted-foreground",children:n===1?"Bed":"Beds"})]}),l!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:l})," ",e.jsx("span",{className:"text-muted-foreground",children:l===1?"Bath":"Baths"})]}),r!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:Ua(r)})," ",e.jsx("span",{className:"text-muted-foreground",children:"sq ft"})]})]}),y&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Investment Term: "}),e.jsx("span",{className:"text-sm font-medium",children:y})]}),j&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Deal Type: "}),e.jsx("span",{className:"text-sm font-medium",children:j})]}),h&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:h}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:ks(N)}),e.jsxs("div",{className:"flex space-x-1",children:[M&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:b,children:e.jsx(Tr,{className:`h-4 w-4 ${F?"fill-red-500 text-red-500":""}`})}),x&&e.jsx(P,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:$,children:e.jsx(ms,{className:"h-4 w-4"})})]}),e.jsx(P,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:k,children:e.jsx(Dr,{className:"h-4 w-4"})})]})]})]})]})}const bi="https://zcuapuvvygahkzljuhyg.supabase.co",ar="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdWFwdXZ2eWdhaGt6bGp1aHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MTQwMzcsImV4cCI6MjA1MzQ5MDAzN30.GIhphzkznmDXgrUApGW479uHHluqDWqy_9cfG5sU5Xc";console.log("Supabase Anon Key:",ar);const J=Gt(bi,ar,{auth:{persistSession:!0,storage:window.localStorage,storageKey:"supabase.auth.token",autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"}}),wi={BASIC:{name:"Basic",price:"£9.99",priceId:"price_1QnikACOhalwhG2QDocCWbQj",features:["Basic property search","Save up to 5 properties","Basic market trends","Email support"]},PRO:{name:"Pro",price:"£19.99",priceId:"price_1QnikPCOhalwhG2QVYfxwG5D",features:["Advanced property search","Save unlimited properties","Detailed market analysis","Premium property insights","Priority support"]},PREMIUM:{name:"Premium",price:"£49.99",priceId:"price_1QnikjCOhalwhG2QUgRtMAco",features:["All Pro features","AI-powered market predictions","Portfolio analytics","Investment ROI calculator","Dedicated account manager","24/7 phone support"]}};async function rr(s,a){try{const t=await fetch("https://clever-chaplygin6-vbfae.dev.tempolabs.ai/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:s,userId:a})}),{sessionId:r}=await t.json(),n=await Lr(void 0);n&&await n.redirectToCheckout({sessionId:r})}catch(t){throw console.error("Error creating checkout session:",t),t}}function lt({isOpen:s,onClose:a,defaultMode:t="signin"}){const[r,n]=S.useState(t);S.useEffect(()=>{n(t)},[t]);const[l,i]=S.useState(!1),[f,h]=S.useState(!1),{signIn:N,signUp:x,signInWithGoogle:p}=te(),{toast:g}=we(),[y,j]=S.useState({email:"",password:"",firstName:"",lastName:""}),D=async w=>{w.preventDefault(),i(!0);try{if(r==="signin")await N(y.email,y.password)&&(g({title:"Welcome back!",description:"You have successfully signed in."}),setTimeout(()=>a(),500));else{const u=await x(y.email,y.password,y.firstName,y.lastName),d=localStorage.getItem("pending_subscription_price_id");d&&u&&"id"in u?(localStorage.removeItem("pending_subscription_price_id"),await rr(d,u.id)):(h(!0),g({title:"Welcome to MyVGE Alpha!",description:"Thank you for joining us during our alpha testing phase."}))}}catch(u){g({title:"Error",description:u.message||"An error occurred",variant:"destructive"})}finally{i(!1)}};return f?e.jsx(Le,{open:s,onOpenChange:a,children:e.jsxs(Ae,{className:"sm:max-w-[425px]",children:[e.jsxs(Re,{children:[e.jsx(Me,{children:"Welcome to MyVGE Alpha!"}),e.jsxs(ss,{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-primary",children:"Thank you for joining MyVGE during our alpha testing phase!"}),e.jsx("p",{children:"We've sent a confirmation email to your inbox. Please click the verification link to activate your account and start exploring MyVGE."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Note: You must confirm your email before signing in. Please check your spam folder if you don't see the email."}),e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"As an alpha tester, your feedback is invaluable to us. We're excited to have you on board and look forward to your insights as we continue to improve the platform."})})]})]}),e.jsx("div",{className:"flex flex-col space-y-4 pt-4",children:e.jsx(P,{onClick:()=>{h(!1),a()},children:"Close"})})]})}):e.jsx(Le,{open:s,onOpenChange:a,children:e.jsxs(Ae,{className:"sm:max-w-[425px]",children:[e.jsxs(Re,{children:[e.jsx(Me,{children:r==="signin"?"Sign In":"Create Account"}),e.jsx(ss,{children:r==="signin"?"Welcome back! Please sign in to continue.":"Join MyVGE and start exploring properties."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4 pt-4",children:[r==="signup"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"firstName",children:"First Name"}),e.jsx(q,{id:"firstName",value:y.firstName,onChange:w=>j(u=>({...u,firstName:w.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"lastName",children:"Last Name"}),e.jsx(q,{id:"lastName",value:y.lastName,onChange:w=>j(u=>({...u,lastName:w.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(q,{id:"email",type:"email",value:y.email,onChange:w=>j(u=>({...u,email:w.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"password",children:"Password"}),e.jsx(q,{id:"password",type:"password",value:y.password,onChange:w=>j(u=>({...u,password:w.target.value})),required:!0})]}),e.jsxs("div",{className:"flex flex-col space-y-4 pt-4",children:[e.jsx(P,{type:"submit",disabled:l,children:l?"Loading...":r==="signin"?"Sign In":"Create Account"}),e.jsx(P,{type:"button",variant:"link",onClick:()=>p(),disabled:l,children:"Sign In with Google"}),e.jsx(P,{type:"button",variant:"link",onClick:()=>n(r==="signin"?"signup":"signin"),children:r==="signin"?"Don't have an account? Sign up":"Already have an account? Sign in"})]})]})]})})}const Ge=Fr,Ve=c.forwardRef(({className:s,...a},t)=>e.jsx(wa,{ref:t,className:I("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a}));Ve.displayName=wa.displayName;const ie=c.forwardRef(({className:s,...a},t)=>e.jsx(Sa,{ref:t,className:I("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a}));ie.displayName=Sa.displayName;const se=c.forwardRef(({className:s,...a},t)=>e.jsx(_a,{ref:t,className:I("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));se.displayName=_a.displayName;function nr({isOpen:s,onClose:a,currentUser:t,userProfile:r}){const n=Fe(),l=i=>{console.log(`Subscribing to ${i} tier`),n(`/checkout?tier=${i}`),a()};return e.jsx(Le,{open:s,onOpenChange:a,children:e.jsxs(Ae,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Re,{children:e.jsx(Me,{className:"text-2xl",children:"Upgrade Your Experience"})}),e.jsxs(Ge,{defaultValue:"monthly",className:"mt-4",children:[e.jsxs(Ve,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(ie,{value:"monthly",children:"Monthly"}),e.jsxs(ie,{value:"yearly",children:["Yearly ",e.jsx("span",{className:"ml-2 text-emerald-500",children:"Save 20%"})]})]}),e.jsx(se,{value:"monthly",children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 mt-4",children:[e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Basic"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Essential property insights for casual investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"£9.99"}),e.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Basic property data"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"5 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Limited market insights"})]})]}),e.jsx(P,{className:"w-full",onClick:()=>l("basic"),children:(r==null?void 0:r.subscription_tier)==="basic"?"Current Plan":"Subscribe"})]}),e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden bg-gradient-to-b from-blue-50 to-white dark:from-blue-950 dark:to-background",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white px-3 py-1 text-xs font-medium rounded-bl-lg",children:"POPULAR"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Pro"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Advanced tools for serious property investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"£29.99"}),e.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:e.jsx("span",{className:"font-medium",children:"Everything in Basic"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Detailed investment metrics"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"50 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Full market insights access"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Priority customer support"})]})]}),e.jsx(P,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>l("pro"),children:(r==null?void 0:r.subscription_tier)==="pro"?"Current Plan":"Subscribe"})]})]})}),e.jsx(se,{value:"yearly",children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 mt-4",children:[e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100 px-3 py-1 text-xs font-medium transform rotate-12",children:"SAVE 20%"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Basic Annual"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Essential property insights for casual investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"£95.90"}),e.jsx("span",{className:"text-muted-foreground",children:"/year"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Equivalent to £7.99/month"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Basic property data"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"5 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Limited market insights"})]})]}),e.jsx(P,{className:"w-full",onClick:()=>l("basic-annual"),children:(r==null?void 0:r.subscription_tier)==="basic"&&(r==null?void 0:r.subscription_status)==="yearly"?"Current Plan":"Subscribe"})]}),e.jsxs("div",{className:"border rounded-lg p-6 space-y-4 relative overflow-hidden bg-gradient-to-b from-blue-50 to-white dark:from-blue-950 dark:to-background",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white px-3 py-1 text-xs font-medium rounded-bl-lg",children:"BEST VALUE"}),e.jsx("div",{className:"absolute -top-1 -right-12 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100 px-3 py-1 text-xs font-medium transform rotate-12",children:"SAVE 20%"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Pro Annual"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Advanced tools for serious property investors."}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-bold",children:"£287.90"}),e.jsx("span",{className:"text-muted-foreground",children:"/year"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Equivalent to £23.99/month"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:e.jsx("span",{className:"font-medium",children:"Everything in Basic"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Detailed investment metrics"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"50 saved properties"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Full market insights access"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-emerald-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Priority customer support"})]})]}),e.jsx(P,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>l("pro-annual"),children:(r==null?void 0:r.subscription_tier)==="pro"&&(r==null?void 0:r.subscription_status)==="yearly"?"Current Plan":"Subscribe"})]})]})})]}),e.jsx(it,{className:"mt-6",children:e.jsx(P,{variant:"outline",onClick:a,children:"Cancel"})})]})})}function ir({isOpen:s,onClose:a,receiverId:t,dealId:r,deal:n,currentUser:l,userProfile:i}){const[f,h]=c.useState([]),[N,x]=c.useState(""),[p,g]=c.useState(!1),y=c.useRef(null),j=c.useRef(null),D=()=>{var v;(v=y.current)==null||v.scrollIntoView({behavior:"smooth"})};c.useEffect(()=>{if(s){const v=[{id:"1",text:r?`Hi, I'm interested in your property deal '${n==null?void 0:n.title}'. Could you tell me more about the ROI calculations?`:"Hi, I'm interested in learning more about your services.",createdAt:new Date(Date.now()-1728e5),sender:l==null?void 0:l.id,receiver:t},{id:"2",text:r?"Hello! Thanks for your interest. The ROI is calculated based on the projected rental income minus expenses, divided by the total investment. Would you like me to break down the specific numbers for this property?":"Hello! Thanks for reaching out. How can I help you today?",createdAt:new Date(Date.now()-864e5),sender:t,receiver:l==null?void 0:l.id}];h(v),setTimeout(D,100)}},[s,l,t,r,n]);const w=()=>{N.trim()&&(g(!0),setTimeout(()=>{const v={id:Math.random().toString(),text:N,createdAt:new Date,sender:l==null?void 0:l.id,receiver:t};h([...f,v]),x(""),g(!1),setTimeout(D,100)},500))},u=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),w())},d=()=>{var v;(v=j.current)==null||v.click()};return e.jsx(Le,{open:s,onOpenChange:a,children:e.jsxs(Ae,{className:"sm:max-w-[500px] h-[600px] max-h-[80vh] flex flex-col p-0 gap-0",children:[e.jsx(Re,{className:"px-4 py-2 border-b",children:e.jsxs(Me,{className:"flex items-center gap-2",children:[e.jsxs(ze,{className:"h-8 w-8",children:[e.jsx(qe,{src:"https://ui-avatars.com/api/?name=Admin&background=random",alt:"Admin"}),e.jsx(Be,{children:"AD"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"Admin"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Customer Support"})]})]})}),n&&e.jsxs("div",{className:"p-3 bg-muted/30 border-b flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:n.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ce,{variant:"outline",className:"text-xs",children:n.property_type}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["£",n.price.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f.map(v=>e.jsx("div",{className:`flex ${v.sender===(l==null?void 0:l.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${v.sender===(l==null?void 0:l.id)?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:v.text}),e.jsx("p",{className:`text-xs mt-1 ${v.sender===(l==null?void 0:l.id)?"text-primary-foreground/70":"text-muted-foreground"}`,children:Or(new Date(v.createdAt),"MMM d, h:mm a")})]})},v.id)),e.jsx("div",{ref:y})]}),e.jsx("div",{className:"p-3 border-t",children:e.jsxs("form",{onSubmit:v=>{v.preventDefault(),w()},className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:j,className:"hidden",accept:"image/*,.pdf,.doc,.docx"}),e.jsx(P,{type:"button",size:"icon",variant:"ghost",onClick:d,children:e.jsx($r,{className:"h-5 w-5"})}),e.jsx(q,{placeholder:"Type your message...",value:N,onChange:v=>x(v.target.value),onKeyDown:u,className:"flex-1"}),e.jsx(P,{type:"submit",size:"icon",disabled:!N.trim()||p,children:e.jsx(is,{className:"h-5 w-5"})})]})})]})})}function Si(){const[s,a]=S.useState("");return S.useEffect(()=>{fetch("https://uselessfacts.jsph.pl/api/v2/facts/random?language=en").then(t=>t.json()).then(t=>a(t.text)).catch(t=>console.error("Error fetching random fact:",t))},[]),s?e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[e.jsx(zr,{className:"w-4 h-4"}),e.jsx("p",{children:s})]}):null}function ot(){return e.jsx("footer",{className:"bg-gray-900 text-white py-8 sm:py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Us"}),e.jsx("p",{className:"text-gray-400",children:"Your trusted source for property search and market analysis."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"/terms",className:"hover:text-white",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"/privacy",className:"hover:text-white",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"/disclaimer",className:"hover:text-white",children:"Legal Disclaimer"})}),e.jsx("li",{children:e.jsx("a",{href:"/gdpr",className:"hover:text-white",children:"GDPR Compliance"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:"info@myvge.com"}),e.jsx("li",{children:"Lytchett House, 13 Freeland Park, Poole, Dorset, England, BH16 6FA"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Compliance"}),e.jsx("ul",{className:"space-y-2 text-gray-400",children:e.jsx("li",{children:"Company No: 15271126"})})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-800 space-y-4",children:[e.jsx(Si,{}),e.jsxs("div",{className:"text-center text-gray-400 space-y-2",children:[e.jsx("p",{className:"text-xs",children:"MyVGE is registered in England and Wales. Registered office: Lytchett House, 13 Freeland Park, Poole, Dorset, England, BH16 6FA. Company No: 15271126"}),e.jsx("p",{className:"text-xs",children:"The information on this website is for general information purposes only and does not constitute financial advice."}),e.jsxs("p",{children:["© ",new Date().getFullYear()," MyVGE. All rights reserved."]})]})]})]})})}const _i=ts("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ct=c.forwardRef(({className:s,variant:a,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:I(_i({variant:a}),s),...t}));ct.displayName="Alert";const lr=c.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:I("mb-1 font-medium leading-none tracking-tight",s),...a}));lr.displayName="AlertTitle";const dt=c.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("text-sm [&_p]:leading-relaxed",s),...a}));dt.displayName="AlertDescription";function or(){return e.jsxs(ct,{className:"bg-muted/50 border-muted-foreground/20",children:[e.jsx(rt,{className:"h-4 w-4"}),e.jsx(dt,{className:"text-xs text-muted-foreground",children:"The information provided on this website is for general informational purposes only and should not be considered as financial or investment advice. Property investments carry risks and values can go down as well as up. Always seek professional advice before making investment decisions."})]})}async function Pt(s,a){try{const t=(s-1)*a;console.log("Production URL:","https://zcuapuvvygahkzljuhyg.supabase.co"),console.log("Fetching properties with params:",{page:s,perPage:a,start:t});const{data:r,error:n}=await fe.from("properties").select(`
        id,
        title,
        description,
        location,
        price,
        beds,
        baths,
        sqft,
        image_url,
        is_featured,
        created_at,
        updated_at
      `).eq("is_featured",!0).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase response:",{data:r,error:n}),n)throw console.error("Supabase error:",n),n;if(!r||r.length===0)return console.log("No properties found"),[];const l=r.map(i=>({id:i.id||"",title:i.title||"",description:i.description||"",location:i.location||"",price:Number(i.price)||0,beds:Number(i.beds)||0,baths:Number(i.baths)||0,sqft:Number(i.sqft)||0,image_url:i.image_url||"",is_featured:!!i.is_featured,created_at:i.created_at||new Date().toISOString(),updated_at:i.updated_at||new Date().toISOString()}));return console.log("Mapped properties:",l),l}catch(t){return console.error("Error in getFeaturedProperties:",t),[]}}async function ki(s){try{const{data:a,error:t}=await fe.from("properties").select(`
        id,
        title,
        location,
        price,
        sqft,
        beds,
        baths,
        description,
        image_url,
        is_featured,
        created_at,
        updated_at
      `).or(`
        location.ilike.%${s}%,
        description.ilike.%${s}%,
        title.ilike.%${s}%
      `).order("created_at",{ascending:!1});if(t)throw t;return a||[]}catch(a){return console.error("Error searching properties:",a),[]}}async function Pi(s){const{data:a,error:t}=await fe.from("saved_properties").select(`
      *,
      property:properties(*)
    `).eq("user_id",s);if(t)throw t;return a}async function Ci(s,a){try{const t=(s-1)*a;console.log("Fetching deals with params:",{page:s,perPage:a,start:t});const{data:r,error:n}=await fe.from("deals").select(`
        id,
        title,
        description,
        location,
        price,
        roi_percentage,
        investment_term,
        property_type,
        deal_type,
        image_url,
        created_at,
        updated_at
      `).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase deals response:",{data:r,error:n}),n)throw console.error("Supabase error:",n),n;if(!r||r.length===0)return console.log("No deals found"),[];const l=r.map(i=>({id:i.id||"",title:i.title||"",description:i.description||"",location:i.location||"",price:Number(i.price)||0,roi_percentage:Number(i.roi_percentage)||0,investment_term:i.investment_term||"",property_type:i.property_type||"",deal_type:i.deal_type||"",image_url:i.image_url||"",created_at:i.created_at||new Date().toISOString(),updated_at:i.updated_at||new Date().toISOString()}));return console.log("Mapped deals:",l),l}catch(t){return console.error("Error in getDeals:",t),[]}}const Ii=(s=6)=>qr({queryKey:["deals"],queryFn:({pageParam:a=1})=>Ci(a,s),getNextPageParam:(a,t)=>a.length===s?t.length+1:void 0,staleTime:5*60*1e3,cacheTime:30*60*1e3}),Ns=({children:s,direction:a="left",pauseOnHover:t=!1,reverse:r=!1,fade:n=!1,className:l,vertical:i=!1})=>e.jsxs("div",{className:I("group flex gap-4 overflow-hidden",i?"flex-col":"flex-row",l),children:[e.jsx("div",{className:I("flex min-w-full shrink-0 animate-marquee items-center justify-around gap-4",i?"flex-col":"flex-row",t&&"group-hover:[animation-play-state:paused]",r&&"animate-marquee-reverse"),children:s}),e.jsx("div",{className:I("flex min-w-full shrink-0 animate-marquee items-center justify-around gap-4",i?"flex-col":"flex-row",t&&"group-hover:[animation-play-state:paused]",r&&"animate-marquee-reverse"),children:s})]}),Ai=({baseColor:s=[.1,.1,.1],speed:a=.2,amplitude:t=.5,frequencyX:r=3,frequencyY:n=2,interactive:l=!0,...i})=>{const f=c.useRef(null);return c.useEffect(()=>{if(!f.current)return;const h=f.current,N=new ja({antialias:!0}),x=N.gl;x.clearColor(1,1,1,1);const p=`
      attribute vec2 position;
      attribute vec2 uv;
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = vec4(position, 0.0, 1.0);
      }
    `,g=`
      precision highp float;
      uniform float uTime;
      uniform vec3 uResolution;
      uniform vec3 uBaseColor;
      uniform float uAmplitude;
      uniform float uFrequencyX;
      uniform float uFrequencyY;
      uniform vec2 uMouse;
      varying vec2 vUv;

      vec4 renderImage(vec2 uvCoord) {
          vec2 fragCoord = uvCoord * uResolution.xy;
          vec2 uv = (2.0 * fragCoord - uResolution.xy) / min(uResolution.x, uResolution.y);

          for (float i = 1.0; i < 10.0; i++){
              uv.x += uAmplitude / i * cos(i * uFrequencyX * uv.y + uTime + uMouse.x * 3.14159);
              uv.y += uAmplitude / i * cos(i * uFrequencyY * uv.x + uTime + uMouse.y * 3.14159);
          }

          vec2 diff = (uvCoord - uMouse);
          float dist = length(diff);
          float falloff = exp(-dist * 20.0);
          float ripple = sin(10.0 * dist - uTime * 2.0) * 0.03;
          uv += (diff / (dist + 0.0001)) * ripple * falloff;

          vec3 color = uBaseColor / abs(sin(uTime - uv.y - uv.x));
          return vec4(color, 1.0);
      }

      void main() {
          vec4 col = vec4(0.0);
          int samples = 0;
          for (int i = -1; i <= 1; i++){
              for (int j = -1; j <= 1; j++){
                  vec2 offset = vec2(float(i), float(j)) * (1.0 / min(uResolution.x, uResolution.y));
                  col += renderImage(vUv + offset);
                  samples++;
              }
          }
          gl_FragColor = col / float(samples);
      }
    `,y=new va(x),j=new ya(x,{vertex:p,fragment:g,uniforms:{uTime:{value:0},uResolution:{value:new Float32Array([x.canvas.width,x.canvas.height,x.canvas.width/x.canvas.height])},uBaseColor:{value:new Float32Array(s)},uAmplitude:{value:t},uFrequencyX:{value:r},uFrequencyY:{value:n},uMouse:{value:new Float32Array([0,0])}}}),D=new Na(x,{geometry:y,program:j});function w(){N.setSize(h.offsetWidth*1,h.offsetHeight*1);const A=j.uniforms.uResolution.value;A[0]=x.canvas.width,A[1]=x.canvas.height,A[2]=x.canvas.width/x.canvas.height}window.addEventListener("resize",w),w();function u(L){const A=h.getBoundingClientRect(),M=(L.clientX-A.left)/A.width,F=1-(L.clientY-A.top)/A.height,o=j.uniforms.uMouse.value;o[0]=M,o[1]=F}function d(L){if(L.touches.length>0){const A=L.touches[0],M=h.getBoundingClientRect(),F=(A.clientX-M.left)/M.width,o=1-(A.clientY-M.top)/M.height,b=j.uniforms.uMouse.value;b[0]=F,b[1]=o}}l&&(h.addEventListener("mousemove",u),h.addEventListener("touchmove",d));let v;function E(L){v=requestAnimationFrame(E),j.uniforms.uTime.value=L*.001*a,N.render({scene:D})}return v=requestAnimationFrame(E),h.appendChild(x.canvas),()=>{var L;cancelAnimationFrame(v),window.removeEventListener("resize",w),l&&(h.removeEventListener("mousemove",u),h.removeEventListener("touchmove",d)),x.canvas.parentElement&&x.canvas.parentElement.removeChild(x.canvas),(L=x.getExtension("WEBGL_lose_context"))==null||L.loseContext()}},[s,a,t,r,n,l]),e.jsx("div",{ref:f,className:"w-full h-full",...i})};function Ri({isOpen:s,onClose:a,property:t,currentUser:r,userProfile:n}){var L,A;const l=!!r,i=(n==null?void 0:n.subscription_tier)==="pro";if(!t)return null;const f=t.price?B(Number(t.price)):"Price on application";let h=t.location||t.address||"Address not available",N=t.postcode||((A=(L=t.location)==null?void 0:L.match(/[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}/i))==null?void 0:A[0])||"";const x=t.property_type||"Residential",p=t.beds||t.bedrooms||0,g=t.baths||t.bathrooms||0,y=t.square_footage||t.sqft||0,j=t.tenure||"Freehold",D=t.description||"No description available",u=(t.sale_history||[]).filter(M=>M&&M.sale_price&&!isNaN(Number(M.sale_price))).sort((M,F)=>new Date(F.sale_date).getTime()-new Date(M.sale_date).getTime());let d=0;if(u.length>1){const M=Number(u[0].sale_price),F=Number(u[u.length-1].sale_price);d=(M-F)/F*100}const E=((M,F,o,b)=>{const k=M*(1-F/100),$=o/100/12,W=b*12,Z=k*$*Math.pow(1+$,W)/(Math.pow(1+$,W)-1);return{monthlyPayment:Z,totalInterest:Z*W-k,totalCost:Z*W}})(Number(t.price)||0,20,4.5,25);return e.jsx(Le,{open:s,onOpenChange:a,children:e.jsxs(Ae,{className:"max-w-4xl max-h-[90vh] overflow-y-auto p-0",children:[e.jsxs("div",{className:"relative h-72 overflow-hidden",children:[e.jsx("img",{src:t.image_url||`https://source.unsplash.com/random/1200x600?property,house&sig=${t.id}`,alt:h,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[e.jsx(ce,{className:"bg-primary text-white",children:x}),t.status&&e.jsx(ce,{variant:"secondary",children:t.status})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs(Re,{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Me,{className:"text-2xl font-bold",children:f}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{variant:"outline",size:"sm",className:"text-sm",onClick:M=>M.stopPropagation(),children:"Save"}),e.jsx(P,{variant:"outline",size:"sm",className:"text-sm",onClick:M=>M.stopPropagation(),children:"Share"})]})]}),e.jsx(ss,{className:"text-base font-medium text-foreground mt-1",children:h})]}),e.jsxs(Ge,{defaultValue:"details",className:"mt-6",children:[e.jsxs(Ve,{className:"grid grid-cols-3 mb-6",children:[e.jsx(ie,{value:"details",children:"Property Details"}),e.jsx(ie,{value:"investment",children:"Investment Metrics"}),e.jsx(ie,{value:"history",children:"History & Area"})]}),e.jsxs(se,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx(ws,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[p," Bedrooms"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx(Br,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[g," Bathrooms"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx(ka,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:[Ua(y)," sq ft"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-muted rounded-lg",children:[e.jsx(Pa,{className:"h-5 w-5 mb-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:j})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(Ye,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Location"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",h]}),N&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Postcode:"})," ",N]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(rt,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Description"]}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:D})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(We,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Property Documents"]}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsx("p",{className:"text-sm mb-2",children:l&&i?e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(We,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-primary underline cursor-pointer",children:"Energy Performance Certificate (EPC)"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(We,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-primary underline cursor-pointer",children:"Floor Plan"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(We,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-primary underline cursor-pointer",children:"Property Brochure"})]})]}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"Upgrade to PRO to access property documents"}),e.jsx(P,{className:"text-sm",size:"sm",children:"Upgrade Now"})]})})})]})]}),e.jsxs(se,{value:"investment",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(ve,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Investment Metrics"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Estimated Monthly Rent"}),e.jsx("span",{className:"font-medium",children:B(t.estimated_rent||t.price*.004)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Rental Yield"}),e.jsxs("span",{className:"font-medium",children:[t.rental_yield?t.rental_yield.toFixed(2):(t.price*.004*12/t.price*100).toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Estimated ROI (5yr)"}),e.jsxs("span",{className:"font-medium",children:[t.roi?t.roi.toFixed(2):(t.price*.25/t.price*100).toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Price per sq ft"}),e.jsx("span",{className:"font-medium",children:y>0?B(t.price/y):"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(bt,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Area Insights"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Area Price"}),e.jsx("span",{className:"font-medium",children:B(t.area_avg_price||t.price*1.1)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Price vs. Area Average"}),e.jsx("div",{className:"flex items-center",children:t.price<(t.area_avg_price||t.price*1.1)?e.jsxs(e.Fragment,{children:[e.jsx(Ca,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-green-500 font-medium",children:[(((t.area_avg_price||t.price*1.1)-t.price)/(t.area_avg_price||t.price*1.1)*100).toFixed(1),"% below"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"h-4 w-4 text-amber-500 mr-1"}),e.jsxs("span",{className:"text-amber-500 font-medium",children:[((t.price-(t.area_avg_price||t.price*.9))/(t.area_avg_price||t.price*.9)*100).toFixed(1),"% above"]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"12-month Price Trend"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ks,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-500 font-medium",children:"+4.2%"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(ve,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Mortgage Calculator"]}),e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Property Price"}),e.jsx("p",{className:"text-lg font-medium",children:B(Number(t.price)||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Monthly Payment"}),e.jsx("p",{className:"text-lg font-medium",children:B(E.monthlyPayment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Total Interest"}),e.jsx("p",{className:"text-lg font-medium",children:B(E.totalInterest)})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Based on 20% down payment, 4.5% interest rate, 25-year term"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(ve,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Cash Flow Analysis"]}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Monthly Rental Income"}),e.jsx("span",{className:"font-medium",children:B(t.estimated_rent||t.price*.004)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Mortgage Payment"}),e.jsxs("span",{className:"font-medium text-red-500",children:["-",B(E.monthlyPayment)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Est. Maintenance (10%)"}),e.jsxs("span",{className:"font-medium text-red-500",children:["-",B((t.estimated_rent||t.price*.004)*.1)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Est. Management (5%)"}),e.jsxs("span",{className:"font-medium text-red-500",children:["-",B((t.estimated_rent||t.price*.004)*.05)]})]}),e.jsxs("div",{className:"border-t pt-2 mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Monthly Cash Flow"}),e.jsx("span",{className:"font-medium",children:B((t.estimated_rent||t.price*.004)-E.monthlyPayment-(t.estimated_rent||t.price*.004)*.15)})]})]})})]})]}),e.jsxs(se,{value:"history",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(De,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Sale History"]}),u.length>0?e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"mb-4",children:[d!==0&&e.jsxs("div",{className:"mb-3 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Total price growth: "}),e.jsxs("span",{className:d>=0?"text-green-500":"text-red-500",children:[d>=0?"+":"",d.toFixed(2),"%"]})]}),e.jsx("div",{className:"relative h-24 mt-6 mb-2",children:u.map((M,F)=>{const o=Math.max(...u.map(W=>Number(W.sale_price))),b=Number(M.sale_price)/o*100,k=100/u.length,$=F*k;return e.jsx("div",{className:"absolute bottom-0 bg-primary hover:bg-primary/80 rounded-t transition-all cursor-pointer group",style:{height:`${b}%`,width:`${k-5}%`,left:`${$}%`},title:`${ks(M.sale_date)}: ${B(Number(M.sale_price))}`,children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-10 left-1/2 transform -translate-x-1/2 bg-background border p-2 rounded text-xs whitespace-nowrap z-10",children:[ks(M.sale_date),": ",B(Number(M.sale_price))]})},F)})})]}),e.jsx("div",{className:"space-y-3",children:u.map((M,F)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(De,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:ks(M.sale_date)})]}),e.jsx("span",{className:"font-medium",children:B(Number(M.sale_price))})]},F))})]}):e.jsx("div",{className:"bg-muted rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No sale history available"})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(bt,{className:"h-5 w-5 mr-2 text-muted-foreground"}),"Neighborhood Information"]}),l&&i?e.jsxs("div",{className:"bg-muted rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Local Schools"}),e.jsx(ce,{variant:"outline",children:"Good"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Transport Links"}),e.jsx(ce,{variant:"outline",children:"Excellent"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Local Amenities"}),e.jsx(ce,{variant:"outline",children:"Good"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Crime Rate"}),e.jsx(ce,{variant:"outline",children:"Low"})]}),e.jsx("div",{className:"mt-2 pt-2 border-t",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"This property is located in a well-established residential area with good local schools and excellent transport links. The neighborhood has seen steady property value growth over the past 5 years."})})]}):e.jsxs("div",{className:"bg-muted rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"Upgrade to PRO to access detailed neighborhood information"}),e.jsx(P,{className:"text-sm",size:"sm",children:"Upgrade Now"})]})]})]})]})]})]})})}function et({size:s="md",className:a}){const t={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return e.jsx("div",{className:I("animate-spin rounded-full border-2 border-current border-t-transparent",t[s],a)})}const Ue=[{name:"Savills",username:"@savills",body:"Leading the way in property investment and market analysis.",img:"https://avatar.vercel.sh/savills"},{name:"Knight Frank",username:"@knightfrank",body:"Exceptional platform for property investment insights.",img:"https://avatar.vercel.sh/knightfrank"},{name:"JLL",username:"@jll",body:"Revolutionary approach to property investment analytics.",img:"https://avatar.vercel.sh/jll"}],Mi=Ue.slice(0,Ue.length/2),Ei=Ue.slice(Ue.length/2),Ti=Ue.slice(0,Ue.length/2),Di=Ue.slice(Ue.length/2),bs=({img:s,name:a,username:t,body:r})=>e.jsxs("figure",{className:I("relative h-full w-36 cursor-pointer overflow-hidden rounded-xl border p-4","border-gray-950/[.1] bg-gray-950/[.01] hover:bg-gray-950/[.05]","dark:border-gray-50/[.1] dark:bg-gray-50/[.10] dark:hover:bg-gray-50/[.15]"),children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx("img",{className:"rounded-full",width:"32",height:"32",alt:"",src:s}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("figcaption",{className:"text-sm font-medium dark:text-white",children:a}),e.jsx("p",{className:"text-xs font-medium dark:text-white/40",children:t})]})]}),e.jsx("blockquote",{className:"mt-2 text-sm",children:r})]}),Li=()=>{var T;const{user:s,profile:a,signOut:t}=te(),[r,n]=S.useState(!0),[l,i]=S.useState([]),[f,h]=S.useState(!1),[N,x]=S.useState(!1),[p,g]=S.useState(!1),[y,j]=S.useState("signin"),[D,w]=S.useState(!1),[u]=S.useState(),[d,v]=S.useState(1),[E,L]=S.useState(!0),A=6,[M,F]=S.useState(!0),[o,b]=S.useState(!1),[k,$]=S.useState(null),[W,Z]=S.useState(!1),oe=S.useRef(null),le=S.useRef(!1),{data:K,isLoading:me}=Ii(),pe=async(_=1,V=!1)=>{if(!le.current){le.current=!0;try{V?b(!0):F(!0),console.log("Fetching page:",_);const X=await Pt(_,A);console.log("Received properties:",X),i(_===1?X:re=>[...re,...X]),L(X.length===A),v(_),n(!1)}catch(X){console.error("Error loading properties:",X)}finally{F(!1),b(!1),le.current=!1}}};S.useEffect(()=>{r&&pe(1,!1)},[r]),S.useEffect(()=>{if(!oe.current||r||f)return;const _=new IntersectionObserver(V=>{V[0].isIntersecting&&E&&!le.current&&pe(d+1,!0)},{rootMargin:"200px",threshold:.1});return _.observe(oe.current),()=>_.disconnect()},[E,d,r,f]);const Se=async _=>{if(!_.trim()){i([]),h(!1),v(1),L(!0),F(!0);try{const V=await Pt(1,A);i(V),L(V.length===A)}catch(V){console.error("Error loading properties:",V)}finally{F(!1)}return}h(!0),i([]);try{const X=(await ki(_)).map(re=>({id:re.id,title:re.title,location:re.location,price:re.price,sqft:re.sqft,beds:re.beds,baths:re.baths,description:re.description,image_url:re.image_url,is_featured:re.is_featured,created_at:re.created_at,updated_at:re.updated_at}));i(X),L(!1),v(1)}catch(V){console.error("Error searching properties:",V),i([])}finally{h(!1)}},be=M,Ee=l&&l.length>0;return console.log("Render state:",{isLoading:M,searchResultsLength:l==null?void 0:l.length,showLoading:be,showProperties:Ee}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(hs,{isAuthenticated:!!s,userProfile:a||void 0,onSignIn:()=>{j("signin"),x(!0)},onSignUp:()=>{j("signup"),x(!0)},onSignOut:async()=>{try{await t(),window.location.href="/"}catch(_){console.error("Error signing out:",_)}}}),e.jsxs("main",{children:[e.jsx(Ne,{onSearch:Se}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:f?"Search Results":"Featured Properties"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:be?Array(3).fill(0).map((_,V)=>e.jsx("div",{className:"w-full h-[420px] bg-muted rounded-lg animate-pulse"},V)):Ee?l.map(_=>e.jsx("div",{onClick:()=>{$(_),Z(!0)},className:"cursor-pointer hover:opacity-90 transition-opacity",children:e.jsx(Ms,{id:_.id,address:_.location||"Location not available",price:Number(_.price)||0,squareFootage:Number(_.sqft)||0,bedrooms:Number(_.beds)||0,bathrooms:Number(_.baths)||0,isPremium:!!_.is_featured,propertyType:"residential",description:_.description||"",createdAt:_.created_at||new Date().toISOString(),images:_.image_url?[_.image_url]:[],currentUser:s,userProfile:a})},_.id||Math.random().toString())):e.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:"No properties found"})}),E&&!M&&!f&&e.jsx("div",{ref:oe,className:"h-24 flex items-center justify-center my-8",children:o?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(et,{}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading more properties..."})]}):e.jsx("div",{className:"h-8"})})]})}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Investment Deals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:me?Array(3).fill(0).map((_,V)=>e.jsx("div",{className:"w-full h-[420px] bg-muted rounded-lg animate-pulse"},V)):(T=K==null?void 0:K.pages)!=null&&T[0]&&Array.isArray(K.pages[0])?K.pages[0].map(_=>e.jsx(Ms,{id:_.id,address:_.location,price:_.price,description:_.description,propertyType:_.property_type,createdAt:_.created_at,images:[_.image_url],isDeal:!0,roi_percentage:_.roi_percentage,investment_term:_.investment_term,deal_type:_.deal_type,isPremium:!0,currentUser:s,userProfile:a},_.id)):e.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:"No investment deals available"})})]})}),e.jsxs("section",{className:"w-full py-12 bg-background",children:[e.jsx("div",{className:"container mx-auto text-center mb-8",children:e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Trusted by Industry Leaders"})}),e.jsxs("div",{className:"relative flex h-96 w-full flex-row items-center justify-center gap-4 overflow-hidden [perspective:300px]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-4",style:{transform:"translateX(-100px) translateY(0px) translateZ(-100px) rotateX(20deg) rotateY(-10deg) rotateZ(20deg)"},children:[e.jsx(Ns,{pauseOnHover:!0,vertical:!0,className:"[--duration:20s]",children:Mi.map(_=>e.jsx(bs,{..._},_.username))}),e.jsx(Ns,{reverse:!0,pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:Ei.map(_=>e.jsx(bs,{..._},_.username))}),e.jsx(Ns,{reverse:!0,pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:Ti.map(_=>e.jsx(bs,{..._},_.username))}),e.jsx(Ns,{pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:Di.map(_=>e.jsx(bs,{..._},_.username))})]}),e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-1/4 bg-gradient-to-b from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-1/4 bg-gradient-to-t from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 w-1/4 bg-gradient-to-r from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/4 bg-gradient-to-l from-background"})]})]}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:e.jsx("div",{className:"mb-8",children:e.jsx(or,{})})})}),(!a||a.subscription_tier==="free")&&e.jsx("div",{className:"w-full bg-background py-16",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:e.jsxs("div",{className:"relative w-full rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx(Ai,{baseColor:[.1,.1,.1],speed:1,amplitude:.6,interactive:!0})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[8px]"}),e.jsxs("div",{className:"relative z-10 text-center py-12 px-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"Unlock Premium Property Insights"}),e.jsx("p",{className:"text-lg text-gray-300 mb-8 max-w-2xl mx-auto",children:"Get access to detailed property analysis, market comparisons, and investment metrics to make informed decisions."}),e.jsx("button",{onClick:()=>g(!0),className:"px-8 py-3 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Upgrade Now"})]})]})})})]}),e.jsx(ot,{}),e.jsx(lt,{isOpen:N,onClose:()=>x(!1),defaultMode:y}),e.jsx(nr,{isOpen:p,onClose:()=>g(!1),currentUser:s,userProfile:a}),e.jsx(ir,{isOpen:D,onClose:()=>w(!1),receiverId:u,currentUser:s,userProfile:a}),e.jsx(Ri,{isOpen:W,onClose:()=>{Z(!1),setTimeout(()=>$(null),300)},property:k,currentUser:s,userProfile:a})]})};function xe({children:s}){const{user:a,profile:t,signOut:r,isLoading:n}=te(),[l,i]=S.useState(!1),[f,h]=S.useState("signin");return e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(hs,{isAuthenticated:!!a,userProfile:t,onSignIn:()=>window.location.href="/login",onSignUp:()=>window.location.href="/signup",onSignOut:r}),e.jsx("main",{className:"flex-1",children:s}),e.jsx(ot,{}),e.jsx(lt,{isOpen:l,onClose:()=>i(!1),defaultMode:f})]})}function Fi(){const[s,a]=c.useState(null),[t,r]=c.useState(!0);return c.useEffect(()=>{const l=async()=>{try{const N=(await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"What is the current Bitcoin price in GBP? Return ONLY the number, no text or currency symbols."}]}]})})).json()).candidates[0].content.parts[0].text,x=parseFloat(N.replace(/[^0-9.]/g,""));isNaN(x)||(a(x),r(!1))}catch(f){console.error("Error fetching Bitcoin price:",f)}};l();const i=setInterval(l,6e4);return()=>clearInterval(i)},[]),{btcPrice:s,loading:t,convertGBPtoBTC:l=>s?l/s:null}}function Oi({amount:s}){const{loading:a,convertGBPtoBTC:t}=Fi(),r=t(s);return a?e.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):r?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Ia,{className:"h-4 w-4 text-[#F7931A]"}),r.toFixed(2)]}):null}async function $i(s,a){var t;try{console.log("Starting profile update for user:",s),console.log("Updates to apply:",a);const{data:r,error:n}=await J.from("profiles").select("role").eq("id",(t=(await J.auth.getUser()).data.user)==null?void 0:t.id);if(n)throw console.error("Admin check error:",n),n;if(!(r!=null&&r.length)||r[0].role!=="admin")throw new Error("Unauthorized: Only admins can update user profiles");const{data:l,error:i}=await J.from("profiles").select("*").eq("id",s);if(i)throw console.error("User verification error:",i),i;if(!(l!=null&&l.length))throw new Error("User not found");console.log("Existing user:",l[0]);const f={...a,updated_at:new Date().toISOString()};console.log("Applying updates:",f);const{data:h,error:N}=await J.from("profiles").update(f).eq("id",s).select();if(N)throw console.error("Profile update error:",N),N;if(!(h!=null&&h.length))throw console.error("No data returned from update"),new Error("Update failed - no data returned");if(console.log("Profile updated successfully:",h[0]),a.role)try{await J.auth.admin.updateUserById(s,{user_metadata:{role:a.role}}),console.log("Auth metadata updated for role change")}catch(x){console.warn("Failed to update auth metadata (non-critical):",x)}return h[0]}catch(r){throw console.error("Error in updateUserProfile:",r),r}}async function Ct(){try{const{data:s,error:a}=await J.from("profiles").select(`
        *,
        subscription_tier,
        subscription_status,
        role
      `).order("created_at",{ascending:!1});if(a)throw console.error("Profiles fetch error:",a),a;return s?s.map(t=>({...t,role:t.role||"user",subscription_tier:t.subscription_tier||"free",subscription_status:t.subscription_status||"active"})):[]}catch(s){throw console.error("Error fetching users:",s),s}}async function zi(s,a){try{console.log("Importing properties:",{count:s.length,userId:a});const{data:t,error:r}=await J.from("properties").insert(s.map(n=>({...n,added_by_user_id:a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})));if(r)throw console.error("Supabase error:",r),r;return console.log("Import successful:",t),t}catch(t){throw console.error("Error importing properties:",t),t}}const mt=c.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{className:I("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a}));mt.displayName="Textarea";function qi({children:s}){const[a,t]=c.useState(!1),[r,n]=c.useState(!0);c.useEffect(()=>{l()},[]);const l=()=>{n(!0);try{const i=te();t(!0)}catch(i){console.error("Auth context not available:",i),t(!1)}finally{n(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):a?e.jsx(e.Fragment,{children:s}):e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsxs("div",{className:"text-center max-w-md p-6 border rounded-lg bg-muted/50",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to access authentication. This may be due to a temporary issue or your session has expired."}),e.jsxs(P,{variant:"outline",onClick:()=>{window.location.reload()},className:"inline-flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4"})," Refresh Page"]})]})})}function Bi(){const[s,a]=c.useState(!1),[t,r]=c.useState(""),[n,l]=c.useState(!1),[i,f]=c.useState(!1),[h,N]=c.useState([]),[x,p]=c.useState(new Set),[g,y]=c.useState(1),[j,D]=c.useState(1),[w,u]=c.useState(0),[d,v]=c.useState(null),[E,L]=c.useState(""),[A,M]=c.useState(!1),[F,o]=c.useState("idle"),[b,k]=c.useState(""),{user:$}=te(),{toast:W}=we();c.useEffect(()=>{s||(N([]),p(new Set),y(1),D(1),u(0),r(""))},[s]);const Z=async()=>{if(!(!($!=null&&$.id)||x.size===0))try{f(!0);const K=h.filter(me=>x.has(me.id));await zi(K,$.id),W({title:"Success",description:`Imported ${x.size} properties successfully`}),a(!1)}catch{W({variant:"destructive",title:"Error",description:"Failed to import properties. Please try again."})}finally{f(!1)}},oe=K=>{K.target.files&&K.target.files.length>0&&(v(K.target.files[0]),L(""))},le=K=>{L(K.target.value),v(null)};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Property Importer"}),e.jsx("p",{className:"text-muted-foreground",children:"Import properties from external sources by uploading a JSON file or pasting JSON data."})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(ue,{children:"Upload JSON File"}),e.jsx(Qs,{children:"Import properties from a JSON file"})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center hover:bg-muted/50 transition-colors",children:[e.jsx(Ur,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop a JSON file here, or click to browse"}),e.jsx(q,{type:"file",accept:".json",onChange:oe,className:"hidden",id:"file-upload"}),e.jsx(U,{htmlFor:"file-upload",className:"cursor-pointer",children:e.jsx(P,{variant:"outline",type:"button",children:"Browse Files"})})]}),d&&e.jsxs("div",{className:"bg-muted p-3 rounded text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Selected file:"}),e.jsxs("p",{className:"text-muted-foreground",children:[d.name," (",Math.round(d.size/1024)," KB)"]})]})]})})]}),e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(ue,{children:"Paste JSON Data"}),e.jsx(Qs,{children:"Paste your JSON data directly"})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(mt,{placeholder:'{"properties": [{"address": "123 Main St", "price": 250000, ...}]}',rows:8,value:E,onChange:le,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JSON must be properly formatted and contain property data."})]})})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(P,{onClick:Z,disabled:A||!d&&!E,className:"px-8",children:A?"Importing...":"Import Properties"})}),F!=="idle"&&e.jsxs(ct,{variant:F==="success"?"default":"destructive",className:"mt-6",children:[F==="success"?e.jsx(Gr,{className:"h-4 w-4"}):e.jsx(Vr,{className:"h-4 w-4"}),e.jsx(lr,{children:F==="success"?"Import Successful":"Import Failed"}),e.jsx(dt,{children:b})]}),e.jsxs(O,{className:"mt-8",children:[e.jsx(Y,{children:e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-5 w-5"}),"Import Format Guidelines"]})}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your JSON data should follow this structure:"}),e.jsx("pre",{className:"bg-muted p-4 rounded-md text-xs overflow-auto",children:`{
  "properties": [
    {
      "address": "123 Main Street, London, E1 6AN",
      "price": 450000,
      "type": "flat",
      "bedrooms": 2,
      "bathrooms": 1,
      "size_sqft": 750,
      "description": "A spacious 2 bedroom flat...",
      "images": ["image1.jpg", "image2.jpg"]
    },
    {
      // Additional properties...
    }
  ]
}`}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You can also import a simple array of property objects."})]})})]})]})}function Ui(){return e.jsx(qi,{children:e.jsx(Bi,{})})}function Gi(){const{user:s,profile:a}=te(),t=Fe(),[r,n]=S.useState([]),[l,i]=S.useState([]),[f,h]=S.useState([]),[N,x]=S.useState({totalProperties:0,totalValue:0,averagePrice:0,totalProfit:0,monthlyIncome:0}),[p,g]=S.useState(!0),[y,j]=S.useState(null),D=S.useCallback(async()=>{if(!(!s||(a==null?void 0:a.role)!=="admin"))try{const d=await Ct();h(d)}catch(d){console.error("Error loading users:",d),j("Failed to load users")}finally{g(!1)}},[s,a]),w=async(d,v)=>{try{g(!0),console.log("Attempting to update user:",d),console.log("Updates:",v);const E=await $i(d,v);console.log("Update successful:",E);const L=await Ct();h(L),alert("User updated successfully")}catch(E){console.error("Error updating user:",E),alert(E.message||"Failed to update user. Please check console for details.")}finally{g(!1)}},u=S.useCallback(async()=>{if(s)try{const[d,{data:v}]=await Promise.all([Pi(s.id),J.from("properties").select(`*,
            assigned_user:profiles!properties_assigned_user_id_fkey(full_name, email),
            author:profiles!properties_created_by_fkey(full_name, email)`).eq("created_by",s.id)]);i(v||[]),n(d);const E=(v||[]).length+d.length,L=[...v||[],...d].reduce((o,b)=>o+(b.price||0),0),A=L/(E||1),M=[...v||[],...d].reduce((o,b)=>o+(b.potential_profit||0),0),F=[...v||[],...d].reduce((o,b)=>o+(b.monthly_income||0),0);x({totalProperties:E,totalValue:L,averagePrice:A,totalProfit:M,monthlyIncome:F})}catch(d){console.error("Error loading properties:",d)}},[s]);return S.useEffect(()=>{if(!s){t("/");return}u(),D()},[s,t,u,D]),s?e.jsx(xe,{children:e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx(Ui,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portfolio Value"}),e.jsx(ve,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["£",N.totalValue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[N.totalProperties," properties"]})]})}),e.jsx(O,{children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Average Price"}),e.jsx(Ys,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["£",N.averagePrice.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Per property"})]})}),e.jsx(O,{children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Profit"}),e.jsx(es,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["£",N.totalProfit.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Estimated profit"})]})}),e.jsx(O,{children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"BTC Value"}),e.jsx(Ia,{className:"w-5 h-5 text-[#F7931A]"})]}),e.jsx(Oi,{amount:N.totalValue}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Portfolio in BTC"})]})})]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Aa,{className:"w-5 h-5"})," User Management"]})}),y&&e.jsx("div",{className:"text-red-500 mb-4",children:y}),p?e.jsx("div",{children:"Loading..."}):e.jsx("div",{className:"grid gap-4",children:f.map(d=>e.jsx("div",{className:"border p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:d.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:d.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:d.role,onChange:v=>w(d.id,{role:v.target.value}),className:"border rounded p-1",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("select",{value:d.subscription_tier,onChange:v=>w(d.id,{subscription_tier:v.target.value}),className:"border rounded p-1",children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"premium",children:"Premium"})]})]})]})},d.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Hr,{className:"w-5 h-5"})," Saved Properties"]}),e.jsx("div",{className:"space-y-4",children:r.map(d=>e.jsx(Ms,{...d.property,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},d.property.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5"})," Added Properties"]}),e.jsx("div",{className:"space-y-4",children:l.map(d=>e.jsx(Ms,{...d,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},d.id))})]})]})]})})}):(t("/"),null)}function Vi({onSubscribe:s}){const{profile:a}=te(),t=(a==null?void 0:a.subscription_tier)||"free";return e.jsx("div",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Choose Your Plan"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Select the perfect plan for your property investment journey"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:Object.entries(wi).map(([r,n])=>e.jsxs(O,{className:`relative ${r==="PRO"?"border-primary shadow-lg scale-105 bg-gradient-to-r from-emerald-400/10 to-cyan-400/10":""}`,children:[r==="PRO"&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-emerald-400 to-cyan-400 text-white px-4 py-1 rounded-full text-sm font-medium border border-emerald-500/20 shadow-lg",children:"Most Popular"}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold",children:n.name}),r==="PREMIUM"&&e.jsx(fa,{className:"h-6 w-6 text-yellow-500"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-4xl font-bold",children:n.price}),e.jsx("span",{className:"text-gray-600 ml-2",children:"/month"})]})]}),e.jsx(z,{children:e.jsx("ul",{className:"space-y-3",children:n.features.map((l,i)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(de,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsx("span",{children:l})]},i))})}),e.jsx(Es,{children:e.jsx(P,{className:"w-full",variant:r==="PRO"?"default":"outline",onClick:()=>s(n.priceId),disabled:t===r.toLowerCase(),children:t===r.toLowerCase()?"Current Plan":"Subscribe"})})]},r))})]})})}function Hi(){const{user:s,profile:a,signOut:t}=te(),{toast:r}=we(),[n,l]=S.useState(!1),[i,f]=S.useState("signin"),h=async N=>{if(!s){localStorage.setItem("pending_subscription_price_id",N),f("signup"),l(!0);return}try{await rr(N,s.id)}catch{r({title:"Error",description:"Failed to start subscription process. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(hs,{isAuthenticated:!!s,userProfile:a||void 0,onSignIn:()=>{f("signin"),l(!0)},onSignUp:()=>{f("signup"),l(!0)},onSignOut:async()=>{try{await t(),window.location.href="/"}catch(N){console.error("Error signing out:",N)}}}),e.jsx(Ne,{title:"Choose Your Perfect Plan",subtitle:"Select the perfect subscription plan to unlock premium features and detailed property insights",backgroundImage:"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsxs("main",{children:[e.jsx(Vi,{onSubscribe:h}),e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"max-w-4xl mx-auto prose dark:prose-invert mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Investment Plans for Every Property Investor"}),e.jsx("p",{children:"Choose from our range of subscription plans designed to meet the needs of property investors at every level. From market analysis to detailed property insights, our plans provide the tools you need to make informed investment decisions."}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Plan Benefits"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Access to comprehensive property market data and analytics"}),e.jsx("li",{children:"Real-time market insights and trend analysis"}),e.jsx("li",{children:"Advanced property search and filtering capabilities"}),e.jsx("li",{children:"Investment calculators and ROI projections"}),e.jsx("li",{children:"Portfolio tracking and management tools"})]}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Why Subscribe?"}),e.jsx("p",{children:"Our subscription plans give you access to premium features and insights that help you stay ahead in the property market. From basic market analysis to advanced AI-powered predictions, we provide the tools you need to make successful property investments."}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Money-Back Guarantee"}),e.jsx("p",{children:"We're confident in the value our platform provides. If you're not satisfied with your subscription within the first 30 days, we'll provide a full refund, no questions asked."})]}),e.jsx(or,{})]})]}),e.jsx(ot,{}),e.jsx(lt,{isOpen:n,onClose:()=>l(!1),defaultMode:i})]})}function Wi(s){const[a,t]=S.useState(0),[r,n]=S.useState(!1),{user:l}=te(),{toast:i}=we(),[f,h]=S.useState({profileImage:"",bannerImage:"",selectedWidgets:[]}),N=async()=>{if(l){n(!0);try{const{error:p}=await J.from("profiles").update({avatar_url:f.profileImage||`https://api.dicebear.com/7.x/avataaars/svg?seed=${l.email}`,banner_url:f.bannerImage||"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab",dashboard_widgets:f.selectedWidgets,onboarding_completed:!0}).eq("id",l.id);if(p)throw p;i({title:"Setup Complete!",description:"Your profile has been updated successfully."}),s.onClose()}catch{i({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{n(!1)}}},x=[{title:"Profile Image",description:"Add a profile image to personalize your account",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Profile Image URL"}),e.jsx(q,{placeholder:"Enter image URL or leave blank for default avatar",value:f.profileImage,onChange:p=>h(g=>({...g,profileImage:p.target.value}))})]}),f.profileImage&&e.jsx("img",{src:f.profileImage,alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover mx-auto"})]})},{title:"Dashboard Banner",description:"Choose a banner image for your dashboard",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Banner Image URL"}),e.jsx(q,{placeholder:"Enter banner image URL or leave blank for default",value:f.bannerImage,onChange:p=>h(g=>({...g,bannerImage:p.target.value}))})]}),f.bannerImage&&e.jsx("img",{src:f.bannerImage,alt:"Banner Preview",className:"w-full h-32 object-cover rounded-md"})]})},{title:"Dashboard Widgets",description:"Select the widgets you want to see on your dashboard",component:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["market_trends","property_news","saved_properties","price_alerts","market_insights","investment_calculator"].map(p=>e.jsx(P,{variant:f.selectedWidgets.includes(p)?"default":"outline",onClick:()=>h(g=>({...g,selectedWidgets:g.selectedWidgets.includes(p)?g.selectedWidgets.filter(y=>y!==p):[...g.selectedWidgets,p]})),className:"h-auto py-4 px-6 text-left flex flex-col items-start space-y-2",children:e.jsx("span",{className:"font-medium capitalize",children:p.replace("_"," ")})},p))})})}];return e.jsx(Le,{open:s.isOpen,onOpenChange:s.onClose,children:e.jsxs(Ae,{className:"sm:max-w-[600px]",children:[e.jsxs(Re,{children:[e.jsx(Me,{children:x[a].title}),e.jsx(ss,{children:x[a].description})]}),e.jsx("div",{className:"py-6",children:x[a].component}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>t(p=>Math.max(0,p-1)),disabled:a===0,children:"Previous"}),e.jsx(P,{onClick:()=>{a===x.length-1?N():t(p=>Math.min(x.length-1,p+1))},disabled:r,children:a===x.length-1?"Complete Setup":"Next"})]})]})})}function Ki(){const s=Fe(),[a]=Wr(),{toast:t}=we(),{user:r}=te(),[n,l]=c.useState(!0);return c.useEffect(()=>{a.get("session_id")&&t({title:"Subscription Successful!",description:"Thank you for subscribing. Your premium features are now available."}),n||s("/dashboard")},[n,s,a,t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full mx-auto p-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Thank you for subscribing. Your premium features are now available."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Setting up your preferences..."})]})})}),e.jsx(Wi,{isOpen:n,onClose:()=>{l(!1),s("/dashboard")}})]})}function Yi(){const s=Fe(),{toast:a}=we();return c.useEffect(()=>{a({title:"Subscription Cancelled",description:"Your subscription process was cancelled. Please try again if this was a mistake.",variant:"destructive"});const t=setTimeout(()=>{s("/")},3e3);return()=>clearTimeout(t)},[]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full mx-auto p-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription Cancelled"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your subscription process was cancelled. Please try again if this was a mistake."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you to the homepage..."})]})})})}const Ji=5*1024*1024,It=["image/jpeg","image/png","image/webp"];function Zi({currentAvatarUrl:s,onUpload:a,userInitials:t}){const[r,n]=c.useState(!1),{toast:l}=we(),i=S.useRef(null),f=async h=>{var x;const N=(x=h.target.files)==null?void 0:x[0];if(N){if(N.size>Ji){l({title:"File too large",description:"Please select an image under 5MB",variant:"destructive"});return}if(!It.includes(N.type)){l({title:"Invalid file type",description:"Please select a JPEG, PNG or WebP image",variant:"destructive"});return}try{n(!0),await a(N),l({title:"Success",description:"Profile picture updated successfully"})}catch(p){console.error("Error uploading avatar:",p),l({title:"Upload failed",description:"Failed to update profile picture. Please try again.",variant:"destructive"})}finally{n(!1)}}};return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(ze,{className:"h-24 w-24",children:[e.jsx(qe,{src:s}),e.jsx(Be,{children:t})]}),e.jsx("input",{type:"file",ref:i,className:"hidden",accept:It.join(","),onChange:f}),e.jsx(P,{variant:"outline",onClick:()=>{var h;return(h=i.current)==null?void 0:h.click()},disabled:r,children:r?"Uploading...":"Change Profile Picture"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum file size: 5MB. Supported formats: JPEG, PNG, WebP"})]})}function At(){var x;const{user:s,profile:a}=te(),{toast:t}=we(),[r,n]=c.useState(!1),[l,i]=c.useState({fullName:(a==null?void 0:a.full_name)||"",currentPassword:"",newPassword:"",confirmPassword:""}),f=async p=>{if(s)try{const g=p.name.split(".").pop(),y=`${s.id}-${Date.now()}.${g}`,j=`${s.id}/${y}`,{error:D,data:w}=await J.storage.from("avatars").upload(j,p,{cacheControl:"3600",upsert:!0});if(D)throw console.error("Upload error:",D),D;const{data:{publicUrl:u}}=J.storage.from("avatars").getPublicUrl(j);console.log("File uploaded, public URL:",u);const{error:d}=await J.from("profiles").update({avatar_url:u,updated_at:new Date().toISOString()}).eq("id",s.id);if(d)throw console.error("Profile update error:",d),d;const{data:v,error:E}=await J.from("profiles").select("avatar_url").eq("id",s.id).single();if(E)throw console.error("Verification error:",E),E;console.log("Profile updated with new avatar:",v),window.location.reload()}catch(g){throw console.error("Error in handleAvatarUpload:",g),g}},h=async p=>{if(p.preventDefault(),!!s)try{if(n(!0),l.fullName!==(a==null?void 0:a.full_name)){const{error:g}=await J.from("profiles").update({full_name:l.fullName}).eq("id",s.id);if(g)throw g}if(l.newPassword){if(l.newPassword!==l.confirmPassword)throw new Error("New passwords do not match");const{error:g}=await J.auth.updateUser({password:l.newPassword});if(g)throw g}t({title:"Success",description:"Profile updated successfully"}),i(g=>({...g,currentPassword:"",newPassword:"",confirmPassword:""}))}catch(g){console.error("Error updating profile:",g),t({title:"Update failed",description:g.message||"Failed to update profile",variant:"destructive"})}finally{n(!1)}},N=((x=a==null?void 0:a.full_name)==null?void 0:x.split(" ").map(p=>p[0]).join("").toUpperCase())||"??";return e.jsx(xe,{children:e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Account Settings"}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx(ue,{children:"Profile Picture"})}),e.jsx(z,{children:e.jsx(Zi,{currentAvatarUrl:a==null?void 0:a.avatar_url,onUpload:f,userInitials:N})})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx(ue,{children:"Profile Information"})}),e.jsx(z,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"fullName",children:"Full Name"}),e.jsx(q,{id:"fullName",value:l.fullName,onChange:p=>i(g=>({...g,fullName:p.target.value}))})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(q,{id:"email",value:(s==null?void 0:s.email)||"",disabled:!0})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(q,{id:"currentPassword",type:"password",value:l.currentPassword,onChange:p=>i(g=>({...g,currentPassword:p.target.value}))})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"newPassword",children:"New Password"}),e.jsx(q,{id:"newPassword",type:"password",value:l.newPassword,onChange:p=>i(g=>({...g,newPassword:p.target.value}))})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(q,{id:"confirmPassword",type:"password",value:l.confirmPassword,onChange:p=>i(g=>({...g,confirmPassword:p.target.value}))})]})]})]}),e.jsx(P,{type:"submit",disabled:r,children:r?"Saving...":"Save Changes"})]})})]})]})})})}const Xi=()=>e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4",children:e.jsxs("div",{className:"text-center space-y-6 max-w-2xl",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight sm:text-6xl text-primary",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold tracking-tight sm:text-3xl",children:"Page Not Found"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Sorry, we couldn't find the page you're looking for. The page might have been removed, renamed, or doesn't exist."}),e.jsx("div",{className:"flex justify-center gap-4 pt-4",children:e.jsx(P,{asChild:!0,children:e.jsxs(Kr,{to:"/",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Back to Home"]})})})]})}),Rt=[{title:"UK House Prices Show Resilience Despite Economic Pressures",source:"Property News UK",published_at:new Date().toISOString(),url:"#",excerpt:"The latest data shows UK house prices maintaining stability with regional variations in growth rates."},{title:"New Rental Reforms Set to Transform Landlord-Tenant Relationships",source:"Real Estate Times",published_at:new Date(Date.now()-864e5).toISOString(),url:"#",excerpt:"The government's proposed rental reforms aim to provide greater security for tenants while maintaining landlord rights."},{title:"Property Investment Shifts: Where Buyers Are Looking in 2024",source:"Investment Quarterly",published_at:new Date(Date.now()-1728e5).toISOString(),url:"#",excerpt:"Investor focus is moving toward emerging regional hotspots as work patterns continue to evolve post-pandemic."},{title:"Interest Rate Forecast and Impact on Mortgage Market",source:"Financial Property Review",published_at:new Date(Date.now()-2592e5).toISOString(),url:"#",excerpt:"Analysts predict stabilizing interest rates may provide relief for mortgage holders in the coming quarters."},{title:"Green Homes Grant: What Property Owners Need to Know",source:"Sustainable Housing",published_at:new Date(Date.now()-3456e5).toISOString(),url:"#",excerpt:"The latest initiatives for improving energy efficiency in UK homes and the financial incentives available."}],cs=`
# UK Property Market Insights: July 2024

## Latest Tax Law Changes

The UK property market continues to adapt to recent regulatory changes. In April 2024, the government implemented adjustments to Capital Gains Tax (CGT) rates for property investors, with the higher rate increasing from 28% to 30% for residential property disposals. Buy-to-let landlords face additional reporting requirements for rental income above £10,000 annually.

The Stamp Duty Land Tax (SDLT) thresholds remain unchanged from last year's autumn statement, with first-time buyers enjoying relief up to £425,000 (down from £625,000 in 2023).

## Landlord Regulations

Licensing requirements have expanded to include mandatory electrical safety certificates (EICR) renewals every five years, and the new Decent Homes Standard now applies to the private rental sector. Tenant rights have strengthened with the Renters Reform Bill provisions now in effect, limiting no-fault evictions and establishing stronger grounds for possession.

Property safety regulations now include stricter rules for carbon monoxide alarms, with mandatory installation in all rooms with fixed combustion appliances.

## Government Policies

The Housing Ministry has announced a target of 300,000 new homes annually by 2026, with planning reforms to streamline development in designated growth zones. The Help to Buy equity loan scheme has been replaced with the First Homes initiative, offering 30-50% discounts on market value for first-time buyers.

Regional variations exist in Scotland's Private Housing (Tenancies) Act and Wales' Renting Homes Act, creating a patchwork regulatory landscape.

## Market Impact Analysis

These regulatory changes are creating downward pressure on rental yields, with the average UK yield dropping from 5.8% to 5.2% over the past year. Property values in commuter belts have shown greater resilience (+3.2%) compared to city centers (+1.7%).

Investment strategy adjustments should focus on regions with strong infrastructure investment and employment growth, particularly the Midlands and Northern England which offer better yields despite regulatory pressures.
`,Mt=`
# Market Risk Assessment: UK Property Sector

## Current Risk Level: Moderate

### Interest Rate Risk
The Bank of England's current base rate of 4.25% represents a stabilization after the peak of 5.25% in late 2023. While further cuts are anticipated, they are expected to be gradual, maintaining moderate pressure on mortgage affordability.

### Regulatory Risk
The implementation phase of the Renters Reform Bill creates temporary uncertainty for landlords adapting to new requirements. Compliance costs have increased approximately 12% year-over-year.

### Market Liquidity Risk
Transaction volumes remain 15% below pre-pandemic levels, extending the average time to sell from 45 to 63 days. Regional variations are significant, with London experiencing greater liquidity constraints than the North East.

### Recommendation
Investors should focus on properties with strong fundamentals that can weather short-term market fluctuations, particularly those in areas with diverse economic bases and strong rental demand.
`,Et=[{area:"Manchester - Salford Quays",propertyType:"2-bedroom apartments",averagePrice:21e4,expectedYield:5.8,growthPotential:"High",keyFactors:["Tech industry expansion","Transport improvements","Regeneration projects"]},{area:"Birmingham - Jewellery Quarter",propertyType:"1-2 bedroom converted industrial",averagePrice:185e3,expectedYield:5.4,growthPotential:"Medium-High",keyFactors:["HS2 development impact","Growing young professional population","Cultural district revival"]},{area:"Leeds - South Bank",propertyType:"New build city apartments",averagePrice:195e3,expectedYield:5.9,growthPotential:"High",keyFactors:["Major regeneration area","Financial sector growth","University expansion"]}];async function Qi(){try{const{error:s}=await fe.from("market_insights").select("id").limit(1);if(s&&s.code==="42P01"){console.log("Market insights table does not exist, attempting to create it...");const{error:a}=await fe.rpc("create_market_insights_table");return a?(console.error("Failed to create market_insights table:",a),!1):(console.log("Market insights table created successfully"),!0)}return!0}catch(s){return console.error("Error checking/creating market_insights table:",s),!1}}async function el(){try{const s=await fetch("https://newsapi.org/v2/everything?q=uk+property+market&sortBy=publishedAt&apiKey=YOUR_API_KEY&pageSize=10");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();return a.articles&&a.articles.length>0?a.articles.map(t=>({title:t.title,source:t.source.name,published_at:t.publishedAt,url:t.url,excerpt:t.description})):(console.log("No articles found in API response, using mock data"),Rt)}catch(s){return console.error("Error fetching property news:",s),Rt}}async function sl(s){try{const a="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo";if(!a||a.includes("YOUR_API_KEY"))return console.warn("Using mock data: No valid API key provided for Gemini"),cs;const t=`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${a}`,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}],generationConfig:{temperature:.7,maxOutputTokens:1024}})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();let l="";return n.candidates&&n.candidates[0]&&n.candidates[0].content?l=n.candidates[0].content.parts.filter(f=>f.text).map(f=>f.text).join(`
`):n.text&&(l=n.text),l||(console.warn("Empty response from Gemini API, using mock data"),cs)}catch(a){return console.error("Error generating insights:",a),cs}}async function tl(){try{await Qi();const{data:s,error:a}=await fe.from("market_insights").select("*").order("generated_at",{ascending:!1}).limit(1);return a?(console.error("Error fetching market insights:",a),{id:"mock-id",content:cs,generated_at:new Date().toISOString()}):s&&s.length>0?s[0]:null}catch(s){return console.error("Error in getLatestMarketInsights:",s),{id:"mock-id",content:cs,generated_at:new Date().toISOString()}}}async function al(){try{return Mt}catch(s){return console.error("Error fetching risk assessment:",s),Mt}}async function rl(){try{return Et}catch(s){return console.error("Error fetching personalized opportunities:",s),Et}}async function nl(s="UK"){try{return{region:s,currentAveragePrice:29e4,predictedGrowthRate:3.8,confidenceScore:82,timeframe:"12 months",factors:["Interest rate stabilization","Housing supply constraints","Regional economic development"]}}catch(a){return console.error("Error fetching predictive analytics:",a),{region:s,currentAveragePrice:29e4,predictedGrowthRate:3.2,confidenceScore:75,timeframe:"12 months",factors:["Mock data - API unavailable","Contact administrator for actual predictions"]}}}function il({user:s,profile:a,className:t,showHero:r=!0}){const[n,l]=S.useState([]),[i,f]=S.useState(""),[h,N]=S.useState("No risk assessment data available."),[x,p]=S.useState([]),[g,y]=S.useState(!0),[j,D]=S.useState(null);S.useEffect(()=>{(async()=>{try{const v=await el();l(v.slice(0,5));const E=await tl();if(E)f(E.content);else{const F=await sl("Provide a concise analysis of the current UK property market trends, focusing on interest rates, price movements, and market sentiment. Include key statistics and recommendations for investors.");f(F)}const L=await al();N(L);const A=await rl();p(A);const M=await nl()}catch(v){console.error("Error loading market data:",v),D("Failed to load market data.")}finally{y(!1)}})()},[]);const w=[{month:"Jan",price:32e4},{month:"Feb",price:325e3},{month:"Mar",price:329e3},{month:"Apr",price:335e3},{month:"May",price:34e4},{month:"Jun",price:345e3}],u=[{region:"London",price:5e5},{region:"Manchester",price:25e4},{region:"Birmingham",price:22e4},{region:"Leeds",price:2e5},{region:"Liverpool",price:18e4}];return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"w-full",children:e.jsx(Ne,{title:"Property Market Insights & Analysis",subtitle:"Expert analysis, regional comparisons, and investment recommendations to guide your property decisions",showSearch:!1,showStats:!1,height:"h-[400px]"})}),e.jsx("div",{className:I("w-full",t),children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Price Trends"})}),e.jsx(z,{className:"h-80",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(As,{data:w,children:[e.jsx(Je,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"month"}),e.jsx(Xe,{}),e.jsx($e,{formatter:d=>[`£${d.toLocaleString()}`,"Average Price"]}),e.jsx(ds,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))",activeDot:{r:8}})]})})})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Regional Comparison"})}),e.jsx(z,{className:"h-80",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(As,{data:u,children:[e.jsx(Je,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"region"}),e.jsx(Xe,{}),e.jsx($e,{formatter:d=>[`£${d.toLocaleString()}`,"Average Price"]}),e.jsx(ds,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))",activeDot:{r:8}})]})})})]})]}),e.jsxs(O,{className:"mb-12",children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Market Analysis"})}),e.jsxs(z,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"The UK property market continues to show resilience despite economic challenges. Regional variations are significant, with some areas experiencing rapid growth while others see more moderate changes."}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Key factors influencing the current market include:"}),e.jsxs("ul",{className:"list-disc pl-5 mb-4 text-muted-foreground",children:[e.jsx("li",{children:"Interest rate changes affecting mortgage affordability"}),e.jsx("li",{children:"Supply constraints in high-demand areas"}),e.jsx("li",{children:"Increasing preference for properties with outdoor space"}),e.jsx("li",{children:"Remote work influencing location decisions"})]}),e.jsx(P,{children:"Download Full Report"})]})]}),(a==null?void 0:a.subscription_tier)!=="free"&&e.jsxs(O,{className:"mb-12 border-primary/20 bg-gradient-to-r from-primary/5 to-background",children:[e.jsx(Y,{children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:["Premium Market Insights",e.jsx("span",{className:"ml-2 px-2 py-1 text-xs rounded-full bg-primary/20 text-primary",children:"Premium"})]})}),e.jsxs(z,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Our exclusive analysis indicates emerging hotspots in the following areas:"}),e.jsxs("ul",{className:"list-disc pl-5 mb-4 text-muted-foreground",children:[e.jsx("li",{children:"Northwest Manchester - projected 8.3% growth over 12 months"}),e.jsx("li",{children:"East Birmingham suburbs - increasing demand from young professionals"}),e.jsx("li",{children:"Coastal towns in the Southwest - rising popularity for remote workers"})]}),e.jsx(P,{children:"View Detailed Forecast"})]})]})]})})]})}function ll({user:s,profile:a,className:t}){const[r,n]=S.useState("price"),l=[{year:"2018",price:28e4},{year:"2019",price:295e3},{year:"2020",price:305e3},{year:"2021",price:32e4},{year:"2022",price:335e3},{year:"2023",price:345e3},{year:"2024",price:358e3}],i=[{name:"London",value:38},{name:"South East",value:22},{name:"North West",value:16},{name:"Midlands",value:14},{name:"Scotland",value:10}],f=[{type:"Detached",count:420},{type:"Semi-Detached",count:580},{type:"Terraced",count:510},{type:"Flat",count:390},{type:"Bungalow",count:160}],h=[{region:"London",ppsqft:650},{region:"South East",ppsqft:410},{region:"East",ppsqft:380},{region:"South West",ppsqft:330},{region:"East Midlands",ppsqft:270},{region:"West Midlands",ppsqft:280},{region:"Yorkshire",ppsqft:240},{region:"North West",ppsqft:230},{region:"North East",ppsqft:190},{region:"Wales",ppsqft:210},{region:"Scotland",ppsqft:200}],N=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(O,{className:"mb-8",children:[e.jsxs(Y,{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Data Visualization Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Interactive charts and graphs showing property market trends and statistics"})]}),e.jsxs(z,{children:[e.jsxs(Ge,{defaultValue:"price",value:r,onValueChange:n,children:[e.jsxs(Ve,{className:"mb-6",children:[e.jsxs(ie,{value:"price",className:"flex items-center",children:[e.jsx(Yr,{className:"mr-2 h-4 w-4"}),"Price Trends"]}),e.jsxs(ie,{value:"regional",className:"flex items-center",children:[e.jsx(Jr,{className:"mr-2 h-4 w-4"}),"Regional Distribution"]}),e.jsxs(ie,{value:"property-type",className:"flex items-center",children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Property Types"]}),e.jsxs(ie,{value:"price-per-sqft",className:"flex items-center",children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Price per Sq Ft"]})]}),e.jsx(se,{value:"price",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(As,{data:l,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(Je,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"year"}),e.jsx(Xe,{tickFormatter:x=>`£${(x/1e3).toFixed(0)}k`,domain:["dataMin - 20000","dataMax + 20000"]}),e.jsx($e,{formatter:x=>[`£${x.toLocaleString()}`,"Average Price"]}),e.jsx($s,{}),e.jsx(ds,{type:"monotone",dataKey:"price",name:"Average UK Property Price",stroke:"hsl(var(--primary))",activeDot:{r:8},strokeWidth:2})]})})}),e.jsx(se,{value:"regional",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(Zr,{children:[e.jsx(Xr,{data:i,cx:"50%",cy:"50%",labelLine:!0,outerRadius:180,fill:"#8884d8",dataKey:"value",label:({name:x,percent:p})=>`${x}: ${(p*100).toFixed(0)}%`,children:i.map((x,p)=>e.jsx(Qr,{fill:N[p%N.length]},`cell-${p}`))}),e.jsx($e,{formatter:x=>[`${x}%`,"Market Share"]}),e.jsx($s,{})]})})}),e.jsx(se,{value:"property-type",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(wt,{data:f,margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(Je,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"type"}),e.jsx(Xe,{}),e.jsx($e,{formatter:x=>[`${x.toLocaleString()} properties`,"Count"]}),e.jsx($s,{}),e.jsx(St,{dataKey:"count",name:"Number of Properties",fill:"hsl(var(--primary))",barSize:60})]})})}),e.jsx(se,{value:"price-per-sqft",className:"h-[500px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(wt,{data:h,margin:{top:20,right:30,left:20,bottom:10},layout:"vertical",children:[e.jsx(Je,{strokeDasharray:"3 3"}),e.jsx(Ze,{type:"number"}),e.jsx(Xe,{type:"category",dataKey:"region",width:100}),e.jsx($e,{formatter:x=>[`£${x}/sq ft`,"Price"]}),e.jsx(St,{dataKey:"ppsqft",name:"Price per Square Foot",fill:"hsl(var(--primary))",barSize:20})]})})})]}),e.jsx("div",{className:"mt-6 flex items-center justify-end",children:(a==null?void 0:a.subscription_tier)!=="free"?e.jsx(P,{children:"Download Full Report"}):e.jsx(P,{variant:"outline",onClick:()=>window.location.href="/pricing",children:"Upgrade for Full Access"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"About the Data"})}),e.jsxs(z,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Our data is sourced from multiple reliable sources including Land Registry, Office for National Statistics, and major UK property portals. Data is updated monthly to provide the most accurate market insights."}),e.jsx("p",{className:"text-muted-foreground",children:"Premium subscribers have access to additional visualizations including predictive models, heat maps, and custom reporting tools."})]})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Data Interpretation Guide"})}),e.jsxs(z,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"These visualizations help identify property market trends and regional variations. When interpreting the data, consider:"}),e.jsxs("ul",{className:"list-disc pl-5 mb-4 text-muted-foreground",children:[e.jsx("li",{children:"Long-term trends rather than short-term fluctuations"}),e.jsx("li",{children:"Regional differences in property values and growth rates"}),e.jsx("li",{children:"Correlation with economic indicators like interest rates"}),e.jsx("li",{children:"Seasonality effects on the property market"})]})]})]})]})]})}const ol=({children:s})=>{try{return te(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(xe,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}};function cl(){const[s,a]=c.useState("insights"),{user:t,profile:r}=te();return e.jsx(ol,{children:e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(Ne,{title:"Property Market Insights & Analysis",subtitle:"Expert analysis, regional comparisons, and investment recommendations to guide your property decisions",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs(Ge,{defaultValue:"insights",value:s,onValueChange:a,className:"w-full",children:[e.jsxs(Ve,{className:"mb-6",children:[e.jsx(ie,{value:"insights",children:"Market Insights"}),e.jsx(ie,{value:"visualization",children:"Data Visualization"})]}),e.jsx(se,{value:"insights",className:"mt-0",children:e.jsx(il,{user:t,profile:r,className:"mt-0",showHero:!1})}),e.jsx(se,{value:"visualization",className:"mt-0",children:e.jsx(ll,{user:t,profile:r})})]})})]})})}async function dl(s){var a,t,r,n,l;try{console.log("Calling chat API with prompt:",s);const h=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}],generationConfig:{temperature:.7,maxOutputTokens:1024}})});if(!h.ok)throw console.error("API error:",h.status,await h.text()),new Error(`API error: ${h.status} - ${await h.text()}`);return((l=(n=(r=(t=(a=(await h.json()).candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])==null?void 0:l.text)||"Sorry, I couldn't generate a response at this time."}catch(i){return console.error("Error getting chat response:",i),ul(s)}}async function ml(s){var a,t,r,n,l;try{console.log("Getting predictive analytics for location:",s);const i="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",f="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent",h=`Generate predictive analytics for property investment in ${s} for the next 5 years. Include price growth predictions, rental yield trends, and market dynamics. Format as JSON with the following structure: {
      "priceGrowthPrediction": { "year1": 2.5, "year2": 3.1, "year3": 3.5, "year4": 2.8, "year5": 3.0 },
      "rentalYieldTrend": { "year1": 5.2, "year2": 5.3, "year3": 5.4, "year4": 5.3, "year5": 5.2 },
      "marketSummary": "Brief summary of market dynamics",
      "keyFactors": ["Factor 1", "Factor 2", "Factor 3"]
    }`,N=await fetch(`${f}?key=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:h}]}],generationConfig:{temperature:.2,maxOutputTokens:1024}})});if(!N.ok)throw new Error("API response was not ok");const p=((l=(n=(r=(t=(a=(await N.json()).candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])==null?void 0:l.text)||null;if(!p)throw new Error("No content returned from API");let g=p.match(/```json\n([\s\S]*?)\n```/)||p.match(/```([\s\S]*?)```/)||p.match(/(\{[\s\S]*\})/);if(g&&g[1])return JSON.parse(g[1].trim());try{return JSON.parse(p)}catch(y){return console.error("Error parsing predictive analytics:",y),Tt(s)}}catch(i){return console.error("Error fetching predictive analytics:",i),Tt(s)}}async function hl(s){var a,t,r,n,l;try{console.log("Getting investment hotspots for region:",s);const i="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",f="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent",h=`Generate a list of emerging property investment hotspots in ${s} with reasons why they are promising. Format as JSON with the following structure: 
    {
      "hotspots": [
        {
          "area": "Area name",
          "growthPotential": 4.2,
          "reasons": ["Reason 1", "Reason 2"],
          "estimatedROI": 5.8,
          "investmentType": "Buy-to-let"
        }
      ]
    }
    Include 3-5 different hotspots.`,N=await fetch(`${f}?key=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:h}]}],generationConfig:{temperature:.3,maxOutputTokens:1024}})});if(!N.ok)throw new Error("API response was not ok");const p=((l=(n=(r=(t=(a=(await N.json()).candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])==null?void 0:l.text)||null;if(!p)throw new Error("No content returned from API");let g=p.match(/```json\n([\s\S]*?)\n```/)||p.match(/```([\s\S]*?)```/)||p.match(/(\{[\s\S]*\})/);if(g&&g[1])return JSON.parse(g[1].trim());try{return JSON.parse(p)}catch(y){return console.error("Failed to parse hotspots:",y),Dt(s)}}catch(i){return console.error("Failed to fetch hotspots:",i),Dt(s)}}function ul(s){return s.includes("market insights")?"Based on recent data, the property market in this area has shown strong growth over the past 12 months. Average prices have increased by approximately 7.3%, which is above the national average of 4.5%. Rental yields remain competitive at around 5.2% for typical properties. The local economy is benefiting from new infrastructure projects and employment opportunities, which should provide continued stability. Demand currently exceeds supply, especially for 2-3 bedroom properties, creating a seller's market. Analysts predict continued but more moderate growth over the next 24 months.":s.includes("investment advice")?`For property investors looking at this market, there are several strategies worth considering:

1. Buy-to-let opportunities are particularly strong in the north and east neighborhoods, where rental demand from young professionals is high.

2. Properties requiring renovation can offer significant value-add opportunities, with potential for 15-20% equity gains after improvements.

3. The local council has approved new development zones which may present off-plan purchase opportunities with favorable terms.

4. Houses with potential for extension or conversion to multiple units can maximize returns in areas with strict planning constraints.

5. Consider the strong local university market for HMO investments, which typically yield 2-3% higher than standard rentals.`:"The current property market shows mixed signals. While some areas continue to see price growth, others have stabilized. Factors influencing the market include interest rate changes, supply constraints, and evolving work patterns affecting location preferences. For specific investment advice, consider local economic indicators, infrastructure developments, and demographic trends particular to your target area."}function Tt(s){return{priceGrowthPrediction:{year1:3.2,year2:3.5,year3:4.1,year4:3.8,year5:3.9},rentalYieldTrend:{year1:5.3,year2:5.4,year3:5.5,year4:5.4,year5:5.3},marketSummary:`The property market in ${s} shows promising growth potential over the next 5 years, supported by infrastructure development and increasing demand. While some volatility is expected in years 2-3, the overall trajectory remains positive.`,keyFactors:["New transportation links improving connectivity","Growing tech sector bringing high-income professionals to the area","Limited new housing supply in development pipeline","Strong rental demand from young professionals","Government stimulus for first-time buyers"]}}function Dt(s){return{hotspots:[{area:`${s} - North District`,growthPotential:4.7,reasons:["New tech hub development creating employment","Improved transport links reducing commute times","Regeneration project transforming former industrial areas"],estimatedROI:6.2,investmentType:"Buy-to-let apartments"},{area:`${s} - Riverside`,growthPotential:5.1,reasons:["Waterfront development project nearing completion","Limited supply of premium properties","Growing demand from young professionals"],estimatedROI:5.8,investmentType:"Luxury apartments"},{area:`${s} - University Area`,growthPotential:3.9,reasons:["Consistent student housing demand","University expansion plans announced","Improving local amenities and nightlife"],estimatedROI:7.3,investmentType:"HMO for students"},{area:`${s} - Central Village`,growthPotential:4.5,reasons:["Character properties with renovation potential","Growing tourism supporting short-term rentals","New boutique retail and restaurant scene"],estimatedROI:6.5,investmentType:"Period conversions"}]}}const xl=["Calculate stamp duty for a £400,000 property","What are typical legal fees for property purchase?","Explain all costs involved in buying a property","How much should I budget for property maintenance?","What surveys do I need when buying a property?","Calculate monthly mortgage payments for £300,000"],pl=s=>{if(s.success)return`<span class="block text-red-500">${s.message}</span>`;let t=(typeof s=="string"?s:s.message).replace(/\*\*(.*?)\*\*/g,'<span class="font-bold">$1</span>');return t=t.replace(/\*(.*?)\*/g,'<span class="italic">$1</span>'),t=t.replace(/^- (.+)$/gm,'<span class="block ml-2">• $1</span>'),t=t.replace(/^\d+\. (.+)$/gm,'<span class="block ml-2">$&</span>'),t.split(`
`).map((r,n)=>r?`<span class="block">${r}</span>`:'<span class="block h-2"></span>').join("")},gl=({trends:s=[{title:"Average Home Price",value:"£450,000",change:"+5.2%",isPositive:!0},{title:"Days on Market",value:"28",change:"-12%",isPositive:!0},{title:"Available Listings",value:"1,234",change:"-3.1%",isPositive:!1}],articles:a=[{title:"Understanding the Current Real Estate Market",excerpt:"Get insights into the latest trends and what they mean for buyers and sellers.",date:"2024-03-15"},{title:"Top 5 Investment Opportunities in Real Estate",excerpt:"Discover the most promising areas for property investment in the current market.",date:"2024-03-10"},{title:"Real Estate Market Forecast 2024",excerpt:"Expert predictions and analysis for the upcoming year in real estate.",date:"2024-03-05"}],user:t,profile:r})=>{const n=[{month:"Jan",price:45e4},{month:"Feb",price:455e3},{month:"Mar",price:458e3},{month:"Apr",price:462e3},{month:"May",price:47e4},{month:"Jun",price:475e3}],l=[{region:"London",price:5e5,growth:5.2},{region:"Manchester",price:25e4,growth:7.8},{region:"Birmingham",price:22e4,growth:6.5},{region:"Leeds",price:2e5,growth:8.1},{region:"Liverpool",price:18e4,growth:9.2}],i=[{name:"London",priceGrowth:5.2,averagePrice:5e5,transactions:1200},{name:"South East",priceGrowth:4.8,averagePrice:375e3,transactions:950},{name:"South West",priceGrowth:4.5,averagePrice:31e4,transactions:780},{name:"East of England",priceGrowth:4.2,averagePrice:325e3,transactions:820},{name:"West Midlands",priceGrowth:6.1,averagePrice:24e4,transactions:680},{name:"East Midlands",priceGrowth:5.8,averagePrice:225e3,transactions:650},{name:"Yorkshire",priceGrowth:7.2,averagePrice:195e3,transactions:720},{name:"North West",priceGrowth:8.1,averagePrice:205e3,transactions:850},{name:"North East",priceGrowth:6.5,averagePrice:155e3,transactions:480},{name:"Wales",priceGrowth:5.9,averagePrice:185e3,transactions:520},{name:"Scotland",priceGrowth:5.4,averagePrice:175e3,transactions:680}],f=({data:T})=>e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("svg",{viewBox:"0 0 500 800",className:"w-full h-full max-h-[400px]",style:{maxWidth:"300px"},children:[{path:"M250,600 L300,550 L350,600 L300,650 Z",name:"London"},{path:"M200,500 L300,450 L350,500 L250,550 Z",name:"South East"},{path:"M150,450 L250,400 L300,450 L200,500 Z",name:"South West"},{path:"M300,450 L400,400 L450,450 L350,500 Z",name:"East of England"},{path:"M200,350 L300,300 L350,350 L250,400 Z",name:"West Midlands"},{path:"M300,350 L400,300 L450,350 L350,400 Z",name:"East Midlands"},{path:"M200,250 L300,200 L350,250 L250,300 Z",name:"Yorkshire"},{path:"M150,200 L250,150 L300,200 L200,250 Z",name:"North West"},{path:"M250,150 L350,100 L400,150 L300,200 Z",name:"North East"},{path:"M100,350 L200,300 L250,350 L150,400 Z",name:"Wales"},{path:"M150,100 L300,50 L350,100 L200,150 Z",name:"Scotland"}].map(_=>{const V=T.find(re=>re.name===_.name),X=(V==null?void 0:V.priceGrowth)||0;return e.jsxs("g",{children:[e.jsx("path",{d:_.path,fill:`hsl(${120*(X/10)}, 70%, 50%)`,stroke:"white",strokeWidth:"2",className:"transition-colors duration-300 hover:brightness-110 cursor-pointer"}),e.jsx("title",{children:`${_.name}: +${X}%`})]},_.name)})})}),[h,N]=c.useState(""),[x,p]=c.useState(!1),[g,y]=c.useState(!1),j=async T=>{p(!0);try{const _=await dl(`Provide a concise market insight for property investment in ${T} with recent price trends, rental yields, and future outlook. Keep it under 200 words.`);N(_)}catch(_){console.error("Error fetching market insights:",_),N("We're currently experiencing some issues retrieving market insights. Please try again later or contact support if the problem persists.")}finally{p(!1)}},[D,w]=c.useState([]),[u,d]=c.useState([]),[v,E]=c.useState(!1),[L,A]=c.useState(!1),[M,F]=c.useState(!1),[o,b]=c.useState(!1),k=async T=>{var _;E(!0);try{const V=await ml(T);if(Array.isArray(V))w(V);else if(V.regions&&Array.isArray(V.regions))w(V.regions);else{const X=[{region:T||"United Kingdom",currentValue:35e4,predictedValue:35e4*(1+(((_=V.priceGrowthPrediction)==null?void 0:_.year1)||3.2)/100),confidence:85,growthFactors:V.keyFactors||["Data temporarily unavailable"]}];w(X)}}catch(V){console.error("Error fetching predictive analytics:",V),w([{region:T,currentValue:35e4,predictedValue:361200,confidence:75,growthFactors:["Data temporarily unavailable","Please try again later"]}])}finally{E(!1)}},$=async T=>{b(!0);try{const _=await hl(T);if(Array.isArray(_)){const V=_.map(X=>({...X,factors:X.factors||[]}));d(V)}else if(_.hotspots&&Array.isArray(_.hotspots)){const V=_.hotspots.map(X=>({...X,factors:X.factors||[]}));d(V)}else console.warn("Hotspots data is not in expected format:",_),d([])}catch(_){console.error("Error fetching hotspots:",_),d([{area:`${T} - North District`,score:75,predictedGrowth:4.2,factors:["Data currently unavailable","Try again later"],investmentType:"Residential"},{area:`${T} - Central Area`,score:68,predictedGrowth:3.8,factors:["Data currently unavailable","Try again later"],investmentType:"Commercial"}])}finally{b(!1)}},W=async()=>{y(!0),await j("United Kingdom"),y(!1)},Z=async()=>{A(!0),await k("United Kingdom"),A(!1)},oe=async()=>{F(!0),await $("United Kingdom"),F(!1)},[le,K]=c.useState(null),[me,pe]=c.useState(null),[Se,be]=c.useState(!0),Ee=async()=>{try{be(!0);const T=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=gbp");if(!T.ok)throw new Error("Failed to fetch Bitcoin price");const _=await T.json();K(_.bitcoin.gbp),pe(null)}catch(T){console.error("Error fetching Bitcoin price:",T),pe("Failed to load Bitcoin price"),K(null)}finally{be(!1)}};return c.useEffect(()=>{j("United Kingdom"),k("United Kingdom"),$("United Kingdom"),Ee();const T=setInterval(()=>{Ee()},6e4);return()=>clearInterval(T)},[]),e.jsxs(e.Fragment,{children:[e.jsx(Ne,{title:"Property Market Trends & Insights",subtitle:"Discover the latest market data, price forecasts, and investment hotspots to make informed property decisions",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsxs("section",{className:"w-full py-8 sm:py-16 bg-background relative overflow-hidden",children:[e.jsx("div",{className:"container mx-auto px-4 mb-16",children:e.jsxs(O,{className:"bg-card border-border",children:[e.jsx(Y,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Real Estate Trends Visualization"})}),e.jsx(z,{children:e.jsxs(Ge,{defaultValue:"overview",className:"w-full",children:[e.jsx(Ve,{className:"w-full mb-8",children:e.jsxs("div",{className:"grid w-full grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx(ie,{value:"overview",className:"w-full",children:"Price Evolution"}),e.jsx(ie,{value:"regional",className:"w-full",children:"Regional Comparison"}),e.jsx(ie,{value:"heatmap",className:"w-full",children:"Growth Heatmap"})]})}),e.jsx(se,{value:"overview",className:"h-[400px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(en,{data:n,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(Je,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"month"}),e.jsx(Xe,{}),e.jsx($e,{}),e.jsx(sn,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorPrice)"})]})})}),e.jsx(se,{value:"regional",className:"h-[400px]",children:e.jsx(Oe,{width:"100%",height:"100%",children:e.jsxs(As,{data:l,children:[e.jsx(Je,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"region"}),e.jsx(Xe,{}),e.jsx($e,{}),e.jsx(ds,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))"}),e.jsx(ds,{type:"monotone",dataKey:"growth",stroke:"hsl(var(--chart-1))"})]})})}),e.jsx(se,{value:"heatmap",className:"h-[400px] overflow-y-auto",children:e.jsxs("div",{className:"h-full grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 min-h-[300px]",children:[e.jsx("h3",{className:"font-semibold text-lg sticky top-0 bg-background border-b py-2 px-2 rounded-t-lg",children:"Regional Price Growth"}),e.jsx("div",{className:"space-y-2 overflow-y-auto px-2",children:i.sort((T,_)=>_.priceGrowth-T.priceGrowth).map(T=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-8 rounded-full",style:{backgroundColor:`hsl(${120*(T.priceGrowth/10)}, 70%, 50%)`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:T.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["£",T.averagePrice.toLocaleString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-emerald-500",children:["+",T.priceGrowth,"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.transactions," sales"]})]})]},T.name))})]}),e.jsx("div",{className:"relative hidden lg:flex items-center justify-center bg-muted/30 rounded-xl min-h-[300px]",children:e.jsx(f,{data:i})})]})})]})})]})}),e.jsx("div",{className:"container mx-auto px-4 mb-16",children:e.jsxs(O,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"AI Market Analysis"}),e.jsx(P,{variant:"ghost",size:"icon",onClick:W,className:`h-8 w-8 ${g?"animate-spin":""}`,disabled:g||x,children:e.jsx(Ss,{className:"h-4 w-4"})})]}),e.jsx(z,{children:x?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:pl(h)}})})]})}),e.jsxs("div",{className:"container mx-auto px-4 mb-16 grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Predictive Market Analytics"}),e.jsx(P,{variant:"ghost",size:"icon",onClick:Z,className:`h-8 w-8 ${L?"animate-spin":""}`,disabled:L||v,children:e.jsx(Ss,{className:"h-4 w-4"})})]}),e.jsx(z,{children:v?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"space-y-4",children:D.map((T,_)=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:T.region}),e.jsxs("div",{className:"text-sm font-medium text-emerald-500",children:["+",((T.predictedValue-T.currentValue)/T.currentValue*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full bg-background rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${T.confidence}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Confidence: ",T.confidence,"%"]})]})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:T.growthFactors&&Array.isArray(T.growthFactors)&&T.growthFactors.length>0?T.growthFactors[0]:"No growth factors available"})]},_))})})]}),e.jsxs(O,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Emerging Investment Hotspots"}),e.jsx(P,{variant:"ghost",size:"icon",onClick:oe,className:`h-8 w-8 ${M?"animate-spin":""}`,disabled:M||o,children:e.jsx(Ss,{className:"h-4 w-4"})})]}),e.jsx(z,{children:o?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):u.length>0?e.jsx("div",{className:"space-y-4",children:u.map((T,_)=>e.jsxs("div",{className:"bg-card border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-1",children:T.area}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium mr-2",children:"Investment Score:"}),e.jsx("div",{className:"h-2 w-24 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${T.score}%`}})}),e.jsxs("span",{className:"ml-2 text-sm font-medium",children:[T.score,"/100"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ce,{className:"bg-primary/80",children:["+",T.predictedGrowth,"% Growth"]}),e.jsx(ce,{variant:"outline",children:T.investmentType})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Why Invest:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:T.factors&&Array.isArray(T.factors)?T.factors.map((V,X)=>e.jsxs("li",{className:"text-sm flex items-start",children:[e.jsx(_s,{className:"h-4 w-4 mr-1 mt-1 text-primary"}),V]},X)):e.jsxs("li",{className:"text-sm flex items-start",children:[e.jsx(_s,{className:"h-4 w-4 mr-1 mt-1 text-primary"}),"Data unavailable"]})})]})]},_))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No investment hotspots data available"})})]})]}),e.jsxs("div",{className:"container mx-auto px-4 max-w-7xl",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Market Trends & Insights"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stay informed with the latest real estate market trends and expert insights to make better property decisions."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:s.map((T,_)=>e.jsx(O,{className:`bg-card border-border hover:scale-[1.02] transition-all duration-300 ${_===0?"bg-gradient-to-r from-emerald-400/10 to-cyan-400/10":""}`,children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground/80",children:T.title}),_===0?e.jsx(ve,{className:"w-5 h-5 text-emerald-500"}):_===1?e.jsx(Ke,{className:"w-5 h-5 text-emerald-500"}):e.jsx(es,{className:"w-5 h-5 text-emerald-500"})]}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground",children:T.value}),e.jsx("span",{className:`flex items-center ${T.isPositive?"text-emerald-500":"text-red-500"}`,children:T.change})]})]})},_))}),e.jsx("div",{className:"container mx-auto px-4 mb-16 grid gap-6 md:grid-cols-3",children:a.map((T,_)=>e.jsxs(O,{className:"bg-card border-border hover:scale-[1.02] transition-all duration-300",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:T.title}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(T.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})}),e.jsxs(z,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:T.excerpt}),e.jsxs(P,{variant:"ghost",className:"group hover:text-emerald-500",onClick:()=>{window.location.href=`/article/${encodeURIComponent(T.title)}`},children:["Read More",e.jsx(_s,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]},_))}),e.jsx("div",{className:"w-full bg-muted/50 py-12",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Market Trends"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(O,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bitcoin Price (GBP)"}),Se?e.jsx("div",{className:"animate-pulse h-8 bg-muted rounded"}):me?e.jsx("p",{className:"text-red-500",children:me}):le?e.jsx("p",{className:"text-2xl font-bold",children:B(le)}):e.jsx("p",{className:"text-muted-foreground",children:"Price unavailable"})]})})]})})]})]})]})};function He({children:s}){return e.jsx(Vs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:s})}const fl=({children:s})=>{try{return te(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(xe,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}},jl=()=>e.jsx(fl,{children:e.jsx(vl,{})}),vl=()=>{const{user:s,profile:a}=te();return e.jsx(xe,{children:e.jsx(He,{children:e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx(gl,{user:s,profile:a})})})})};function Lt({title:s="Understanding the Current Real Estate Market",content:a="Default content",date:t=new Date().toISOString(),readTime:r="5 min read"}){const{user:n,profile:l}=te();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(hs,{isAuthenticated:!!n,userProfile:l||void 0}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(O,{children:e.jsxs(z,{className:"p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:s}),e.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(t).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-4 h-4"}),e.jsx("span",{children:r})]})]}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.split(`

`).map((i,f)=>e.jsx("p",{className:"mb-4",children:i},f))})]})})})})]})}const yl=({user:s,profile:a})=>{const[t,r]=c.useState([]),[n,l]=c.useState(!0);c.useEffect(()=>{(async()=>{try{l(!0),setTimeout(()=>{r([{id:1,title:"UK Property Market Outlook 2024",summary:"Comprehensive analysis of the UK property market trends, investment opportunities, and forecasts for 2024.",date:"2024-05-15",author:"Property Analysis Team",category:"Market Analysis",isPremium:!0,downloadUrl:"#"},{id:2,title:"Regional Investment Hotspots",summary:"Detailed report on emerging regional investment opportunities across the UK, with focus on yields and growth potential.",date:"2024-04-22",author:"Investment Research Division",category:"Investment",isPremium:!0,downloadUrl:"#"},{id:3,title:"First-Time Buyer Guide 2024",summary:"Essential information and advice for first-time buyers navigating the property market in 2024.",date:"2024-03-10",author:"Homebuyer Advisory Team",category:"Guides",isPremium:!1,downloadUrl:"#"}]),l(!1)},1e3)}catch(h){console.error("Error fetching research reports:",h),l(!1)}})()},[]);const i=(a==null?void 0:a.subscription_tier)!=="free";return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?Array(3).fill(0).map((f,h)=>e.jsx(O,{className:"overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"h-6 bg-muted rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-24 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-1/2"})]})},h)):t.length>0?t.map(f=>e.jsxs(O,{className:"overflow-hidden flex flex-col",children:[e.jsxs(Y,{className:"flex flex-row items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:f.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:tn(new Date(f.date),new Date,{addSuffix:!0})})]})]}),f.isPremium&&e.jsx(ce,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Premium"})]}),e.jsxs(z,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:f.summary}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:f.category})]})]}),e.jsx(Es,{className:"border-t pt-4",children:f.isPremium&&!i?e.jsxs(P,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/pricing",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Upgrade to Access"]}):e.jsx(P,{className:"w-full",asChild:!0,children:e.jsxs("a",{href:f.downloadUrl,download:!0,children:[e.jsx(an,{className:"h-4 w-4 mr-2"}),"Download Report"]})})})]},f.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(We,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No reports available"}),e.jsx("p",{className:"text-muted-foreground",children:"There are currently no research reports available."})]})})})},cr=async(s=1,a=6)=>{try{const t=(s-1)*a;console.log("Fetching deals with params:",{page:s,limit:a,start:t});const{data:r,error:n}=await fe.from("deals").select(`
        id,
        title,
        description,
        location,
        price,
        roi_percentage,
        investment_term,
        property_type,
        deal_type,
        image_url,
        created_at,
        updated_at
      `).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase response:",{data:r,error:n}),n)throw console.error("Supabase query error:",n.message,n),new Error(`Failed to fetch deals: ${n.message}`);if(!r||r.length===0)return console.log("No deals found in database"),[];const l=r.map(i=>({id:i.id,title:i.title,description:i.description,location:i.location,price:Number(i.price),roi_percentage:Number(i.roi_percentage),investment_term:i.investment_term,property_type:i.property_type,deal_type:i.deal_type,image_url:i.image_url,created_at:i.created_at,updated_at:i.updated_at}));return console.log("Transformed deals:",l),l}catch(t){throw console.error("Error in getDeals:",t instanceof Error?t.message:t),t}};function Te({className:s,...a}){return e.jsx("div",{className:I("animate-pulse rounded-md bg-muted",s),...a})}function Nl(){return e.jsxs("div",{className:"overflow-hidden rounded-lg border bg-card",children:[e.jsx(Te,{className:"aspect-video w-full"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(Te,{className:"h-6 w-3/4"}),e.jsx(Te,{className:"h-4 w-1/2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Te,{className:"h-4 w-full"}),e.jsx(Te,{className:"h-4 w-5/6"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"h-4 w-20 mb-1"}),e.jsx(Te,{className:"h-6 w-24"})]}),e.jsxs("div",{children:[e.jsx(Te,{className:"h-4 w-20 mb-1"}),e.jsx(Te,{className:"h-6 w-24"})]})]})]})]})}function st({deal:s,isSubscriber:a,onClick:t,isLoading:r,user:n,showMessageButton:l=!0}){const i=Fe(),[f,h]=c.useState(!1);if(r)return e.jsx(Nl,{});const N=x=>{if(x.stopPropagation(),!n){i("/login");return}h(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:n?t:()=>i("/login"),children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden bg-muted",children:[e.jsx("img",{src:s.image_url,alt:s.title,className:"object-cover w-full h-full",loading:"lazy"}),!n&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(ce,{variant:"secondary",children:"Sign in to View"})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx(ce,{variant:"secondary",className:"bg-white/90 text-black hover:bg-white/75",children:s.property_type}),e.jsx(ce,{variant:"secondary",className:"bg-primary/90 text-white hover:bg-primary/75",children:s.deal_type})]})]}),e.jsx(Y,{children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold line-clamp-2 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{className:"line-clamp-1",children:s.location})]})]})}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("p",{className:"text-lg font-semibold",children:B(s.price)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ROI"}),e.jsxs("p",{className:"text-lg font-semibold text-emerald-500",children:[s.roi_percentage,"%"]})]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Investment Term"}),e.jsx("p",{className:"font-medium",children:s.investment_term})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected Returns"}),e.jsx("p",{className:"font-medium text-emerald-500",children:"High Yield"})]})]})}),n&&l&&e.jsxs(P,{variant:"outline",className:"w-full",onClick:N,children:[e.jsx(ms,{className:"w-4 h-4 mr-2"}),"Enquire About This Deal"]})]})})]}),n&&e.jsx(ir,{isOpen:f,onClose:()=>h(!1),receiverId:"admin",dealId:s.id,deal:s})]})}const Ce=mn,Ie=hn,_e=c.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ma,{ref:r,className:I("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(rn,{asChild:!0,children:e.jsx(at,{className:"h-4 w-4 opacity-50"})})]}));_e.displayName=Ma.displayName;const dr=c.forwardRef(({className:s,...a},t)=>e.jsx(Ea,{ref:t,className:I("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(nn,{className:"h-4 w-4"})}));dr.displayName=Ea.displayName;const mr=c.forwardRef(({className:s,...a},t)=>e.jsx(Ta,{ref:t,className:I("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(at,{className:"h-4 w-4"})}));mr.displayName=Ta.displayName;const ke=c.forwardRef(({className:s,children:a,position:t="popper",...r},n)=>e.jsx(ln,{children:e.jsxs(Da,{ref:n,className:I("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx(dr,{}),e.jsx(on,{className:I("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(mr,{})]})}));ke.displayName=Da.displayName;const bl=c.forwardRef(({className:s,...a},t)=>e.jsx(La,{ref:t,className:I("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a}));bl.displayName=La.displayName;const Q=c.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Fa,{ref:r,className:I("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(cn,{children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsx(dn,{children:a})]}));Q.displayName=Fa.displayName;const wl=c.forwardRef(({className:s,...a},t)=>e.jsx(Oa,{ref:t,className:I("-mx-1 my-1 h-px bg-muted",s),...a}));wl.displayName=Oa.displayName;const Sl=({user:s,profile:a})=>{const[t,r]=c.useState("property"),[n,l]=c.useState(""),[i,f]=c.useState("standard"),[h,N]=c.useState(!1),[x,p]=c.useState([{id:1,type:"Market Analysis",details:"Detailed analysis of the Leeds property market, focusing on rental yields and capital growth potential in different neighborhoods.",priority:"high",status:"in-progress",submittedAt:"2024-05-01T10:30:00Z",estimatedCompletion:"2024-05-08T10:30:00Z"},{id:2,type:"Property",details:"Research on the historical price trends and planning permissions for 123 High Street, Manchester, M1 1AA.",priority:"standard",status:"completed",submittedAt:"2024-04-15T14:45:00Z",completedAt:"2024-04-20T09:15:00Z"}]),g=d=>{d.preventDefault(),N(!0),setTimeout(()=>{const v={id:x.length+1,type:t==="property"?"Property":"Market Analysis",details:n,priority:i,status:"pending",submittedAt:new Date().toISOString(),estimatedCompletion:new Date(Date.now()+6048e5).toISOString()};p([v,...x]),l(""),N(!1)},1500)},y=(a==null?void 0:a.subscription_tier)!=="free",j=y,D=y?"Unlimited":"2 / 3",w=d=>{switch(d){case"completed":return e.jsx(de,{className:"h-5 w-5 text-green-500"});case"in-progress":return e.jsx(Rs,{className:"h-5 w-5 text-blue-500"});case"pending":return e.jsx(Rs,{className:"h-5 w-5 text-amber-500"});default:return e.jsx(un,{className:"h-5 w-5 text-red-500"})}},u=d=>new Date(d).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return e.jsxs("div",{children:[e.jsxs(O,{className:"mb-8",children:[e.jsx(Y,{children:e.jsx("h3",{className:"text-lg font-semibold",children:"Request Custom Research"})}),e.jsx(z,{children:e.jsx("form",{onSubmit:g,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"request-type",children:"Request Type"}),e.jsxs(Ce,{value:t,onValueChange:r,children:[e.jsx(_e,{id:"request-type",children:e.jsx(Ie,{placeholder:"Select request type"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"property",children:"Property Research"}),e.jsx(Q,{value:"market",children:"Market Analysis"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"request-details",children:"Details"}),e.jsx(mt,{id:"request-details",placeholder:"Please provide specific details about what you'd like us to research...",rows:5,value:n,onChange:d=>l(d.target.value)})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"request-priority",children:"Priority"}),e.jsxs(Ce,{value:i,onValueChange:f,disabled:!j&&i==="high",children:[e.jsx(_e,{id:"request-priority",children:e.jsx(Ie,{placeholder:"Select priority"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"standard",children:"Standard (7 days)"}),e.jsxs(Q,{value:"high",disabled:!j,children:["High Priority (3 days)",!j&&" - Premium Feature"]})]})]})]})]})})}),e.jsxs(Es,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground mb-4 sm:mb-0",children:["Requests remaining this month: ",e.jsx("span",{className:"font-medium",children:D})]}),e.jsx(P,{type:"submit",onClick:g,disabled:!n.trim()||h,children:h?"Submitting...":"Submit Request"})]})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsx("h3",{className:"text-lg font-semibold",children:"Your Research Requests"})}),e.jsx(z,{children:x.length>0?e.jsx("div",{className:"space-y-4",children:x.map(d=>e.jsxs("div",{className:"p-4 border rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsxs("h4",{className:"font-medium",children:[d.type," Request"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:d.details}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Submitted: ",u(d.submittedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[w(d.status),e.jsx("span",{className:"text-sm font-medium capitalize",children:d.status.replace("-"," ")})]})]}),d.status==="in-progress"&&e.jsxs("div",{className:"mt-4 pt-4 border-t text-xs text-muted-foreground",children:["Estimated completion: ",u(d.estimatedCompletion)]}),d.status==="completed"&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(P,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Download,{className:"h-4 w-4 mr-2"}),"Download Report"]})})]},d.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_t,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No requests yet"}),e.jsx("p",{className:"text-muted-foreground",children:"You haven't submitted any research requests yet."})]})})]})]})},_l=({children:s})=>{try{return te(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(xe,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}},kl=()=>e.jsx(_l,{children:e.jsx(Pl,{})}),Pl=()=>{const{user:s,profile:a,isLoading:t}=te(),r=Fe(),[n,l]=c.useState([]),[i,f]=c.useState(!0),[h,N]=S.useState(!1),[x,p]=S.useState("reports");return c.useEffect(()=>{let g=!0;async function y(){try{const j=await cr();g&&(l(j),f(!1))}catch(j){console.error("Error loading deals:",j),g&&f(!1)}}return s&&!t?y():!t&&!s&&r("/login"),()=>{g=!1}},[s,t,r]),t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{children:"Loading..."})}):s?e.jsx(xe,{children:e.jsx(He,{children:e.jsxs("div",{className:"min-h-screen bg-neutral",children:[e.jsx(Ne,{title:"Research & Analysis",subtitle:"Discover in-depth market insights and property analysis",showSearch:!1,showStats:!1,height:"h-[400px]",image:"/research-hero.jpg"}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-primary",children:"Latest Research"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stay informed with our comprehensive research reports and expert analysis"})]}),e.jsxs(Ge,{defaultValue:"reports",value:x,onValueChange:p,className:"mb-8",children:[e.jsxs(Ve,{className:"mb-4",children:[e.jsx(ie,{value:"reports",children:"Research Reports"}),e.jsx(ie,{value:"requests",children:"Research Requests"})]}),e.jsx(se,{value:"reports",children:e.jsx(yl,{user:s,profile:a})}),e.jsx(se,{value:"requests",children:e.jsx(Sl,{user:s,profile:a})})]})]}),i?e.jsx("div",{className:"text-center py-8",children:"Loading deals..."}):e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Latest Deals"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(g=>e.jsx(st,{deal:g,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},g.id))})]})]}),e.jsx(nr,{isOpen:h,onClose:()=>N(!1)})]})})}):null};function Cl(){const{user:s,profile:a}=te(),t=[{title:"Understanding Property Market Cycles",excerpt:"A comprehensive guide to property market cycles and how to identify market phases for optimal investment timing.",category:"Market Analysis",date:"2024-03-20",readTime:"8 min read",image:"https://images.unsplash.com/photo-1460472178825-e5240623afd5?ixlib=rb-4.0.3"},{title:"Buy-to-Let Investment Strategy Guide",excerpt:"Expert insights into creating a successful buy-to-let investment strategy in today's market conditions.",category:"Investment",date:"2024-03-18",readTime:"10 min read",image:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3"},{title:"Property Tax Changes in 2024",excerpt:"Stay updated with the latest property tax regulations and how they affect property investors and homeowners.",category:"Legal",date:"2024-03-15",readTime:"6 min read",image:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?ixlib=rb-4.0.3"}];return e.jsx(He,{children:e.jsxs(xe,{children:[e.jsx(Ne,{title:"Property Investment Blog",subtitle:"Expert insights and analysis on the UK property market",backgroundImage:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24 sm:pt-8",children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((r,n)=>e.jsxs(O,{className:"flex flex-col h-full hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative h-48 w-full overflow-hidden rounded-t-lg",children:e.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"})}),e.jsxs(Y,{className:"flex flex-row items-center gap-2",children:[e.jsx(Ra,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r.category})]}),e.jsxs(z,{className:"flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),e.jsx("p",{className:"text-muted-foreground mb-4 flex-1",children:r.excerpt}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(r.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rs,{className:"w-4 h-4"}),e.jsx("span",{children:r.readTime})]})]}),e.jsxs(P,{variant:"ghost",className:"group hover:text-primary",onClick:()=>{window.location.href=`/blog/${r.title.toLowerCase().replace(/ /g,"-")}`},children:["Read More",e.jsx(_s,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})]},n))})})})]})})}function Il(){const s=[{title:"Getting Started",icon:e.jsx(xn,{className:"w-5 h-5"}),description:"Learn the basics of using our platform",content:["How to search for properties","Understanding market insights","Setting up your account","Subscription plans overview"]},{title:"Account & Billing",icon:e.jsx(We,{className:"w-5 h-5"}),description:"Manage your account and subscription",content:["Updating account details","Subscription management","Billing history","Payment methods"]},{title:"Technical Support",icon:e.jsx(pn,{className:"w-5 h-5"}),description:"Get help with technical issues",content:["Troubleshooting guide","System requirements","Known issues","Browser compatibility"]}],a=[{icon:e.jsx(gn,{className:"w-5 h-5"}),title:"Email Support",description:"Get help via email",action:"support@myvge.co.uk",buttonText:"Send Email",onClick:()=>window.location.href="mailto:support@myvge.co.uk"},{icon:e.jsx(fn,{className:"w-5 h-5"}),title:"Phone Support",description:"Speak to our team",action:"0800 123 4567",buttonText:"Call Now",onClick:()=>window.location.href="tel:08001234567"},{icon:e.jsx(ms,{className:"w-5 h-5"}),title:"Live Chat",description:"Chat with our support team",action:"Available 24/7",buttonText:"Start Chat",onClick:()=>{const t=new CustomEvent("open-messages",{detail:{receiverId:"support"}});window.dispatchEvent(t)}}];return e.jsx(He,{children:e.jsxs(xe,{children:[e.jsx(Ne,{title:"Help & Support Center",subtitle:"Get the assistance you need with our comprehensive support resources",backgroundImage:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map((t,r)=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Y,{className:"flex flex-row items-center gap-2",children:[t.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e.jsx(z,{children:e.jsx("ul",{className:"space-y-2",children:t.content.map((n,l)=>e.jsxs("li",{className:"text-sm",children:["• ",n]},l))})})]},r))}),e.jsxs("div",{className:"bg-card shadow rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Contact Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose your preferred method of contact"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map((t,r)=>e.jsx(O,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(z,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:t.icon}),e.jsx("h3",{className:"font-semibold mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),e.jsx("p",{className:"text-sm font-medium mb-4",children:t.action}),e.jsx(P,{onClick:t.onClick,className:"w-full",children:t.buttonText})]})},r))})]})]})})]})})}const Al=s=>{let a=s.replace(/\*\*(.*?)\*\*/g,'<span class="font-bold">$1</span>');return a=a.replace(/\*(.*?)\*/g,'<span class="italic">$1</span>'),a=a.replace(/^- (.+)$/gm,'<span class="block ml-2">• $1</span>'),a=a.replace(/^\d+\. (.+)$/gm,'<span class="block ml-2">$&</span>'),a.split(`
`).map(t=>t?`<span class="block">${t}</span>`:'<span class="block h-2"></span>').join("")},Rl="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",Ml="https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent";function El(){const{user:s,profile:a}=te(),[t,r]=S.useState(!1),[n,l]=S.useState("ai"),[i,f]=S.useState([]),[h,N]=S.useState([]),[x,p]=S.useState([]),[g,y]=S.useState(""),[j,D]=S.useState(!1),[w,u]=S.useState([]),[d,v]=S.useState(null),E=S.useRef(null),L=Fe();S.useEffect(()=>{if(s){A();const o=b=>{r(!0),l("messages");const k=b.detail.receiverId,$=w.find(W=>W.id===k);$&&v($)};return window.addEventListener("open-messages",o),()=>window.removeEventListener("open-messages",o)}},[s,w]);const A=async()=>{try{const{data:o}=await J.from("messages").select(`
          *,
          sender:profiles!messages_sender_id_fkey(id, full_name, email),
          receiver:profiles!messages_receiver_id_fkey(id, full_name, email)
        `).or(`sender_id.eq.${s==null?void 0:s.id},receiver_id.eq.${s==null?void 0:s.id}`).order("created_at",{ascending:!1});if(!o)return;const b=new Map;o.forEach(k=>{const $=k.sender.id===(s==null?void 0:s.id)?k.receiver:k.sender;b.has($.id)||b.set($.id,{id:$.id,full_name:$.full_name,email:$.email,last_message:k.content,unread_count:k.receiver_id===(s==null?void 0:s.id)&&!k.is_read?1:0})}),u(Array.from(b.values()))}catch(o){console.error("Error loading contacts:",o)}},M=async o=>{if(o.trim())if(n==="ai"){f(b=>[...b,{text:o,isUser:!0}]),y(""),D(!0);try{const b=await fetch(`${Ml}?key=${Rl}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:o}]}]})});if(!b.ok)throw new Error(`AI API error: ${b.status}`);const $=(await b.json()).candidates[0].content.parts[0].text;if(s){const W=`ai_${s.id}_${Date.now()}`;await J.from("messages").insert([{sender_id:s.id,receiver_id:s.id,content:o,is_support:!1,conversation_id:W},{sender_id:null,receiver_id:s.id,content:$,is_support:!0,conversation_id:W}])}f(W=>[...W,{text:$,isUser:!1}])}catch(b){console.error("Error in AI chat:",b),f(k=>[...k,{text:"Sorry, I encountered an error. Please try again.",isUser:!1}])}finally{D(!1)}}else if(s)if(n==="support"){N(b=>[...b,{text:o,isUser:!0}]),y("");try{const b=`support_${s.id}_${Date.now()}`,{error:k}=await J.from("messages").insert({sender_id:s.id,receiver_id:"support",content:o,is_support:!0,conversation_id:b});if(k)throw k;const $="Thank you for your message. Our support team will get back to you soon.",{error:W}=await J.from("messages").insert({sender_id:null,receiver_id:s.id,content:$,is_support:!0,conversation_id:b});if(W)throw W;N(Z=>[...Z,{text:$,isUser:!1}])}catch(b){console.error("Error handling support message:",b),N(k=>[...k,{text:"Sorry, there was an error sending your message. Please try again.",isUser:!1}])}}else{if(!s||!d)return;try{console.log("Sending message to Supabase:",{sender_id:s.id,receiver_id:d.id,content:o,is_support:n==="support"});const{data:b,error:k}=await J.from("messages").insert([{sender_id:s.id,receiver_id:d.id,content:o,is_support:n==="support"}]);if(k)throw console.error("Supabase insert error:",k),k;console.log("Supabase insert success:",b),p($=>[...$,{text:o,isUser:!0,sender:{full_name:(a==null?void 0:a.full_name)||"",email:(a==null?void 0:a.email)||""},timestamp:new Date().toISOString()}]),y("")}catch(b){console.error("Error sending message:",b)}}else{f(b=>[...b,{text:"Please sign in to use support and direct messaging features.",isUser:!1}]);return}},F=()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)};return S.useEffect(()=>{F()},[i,h,x]),S.useEffect(()=>{F()},[j]),S.useEffect(()=>{if(!s||!d)return;const o=J.channel(`messages:${s.id}:${d.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`or(and(sender_id.eq.${s.id},receiver_id.eq.${d.id}),and(sender_id.eq.${d.id},receiver_id.eq.${s.id}))`},b=>{console.log("Realtime message received:",b);const k=b.new;k.sender_id!==s.id&&p($=>[...$,{text:k.content,isUser:!1,sender:d,timestamp:k.created_at}])}).subscribe();return()=>{o.unsubscribe()}},[s,d]),e.jsx(e.Fragment,{children:e.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${t?"w-96":"w-auto"}`,children:t?e.jsxs("div",{className:"bg-background border rounded-lg shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold",children:"AI Assistant"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>L("/messages"),title:"Chat with Users",children:e.jsx(Aa,{className:"h-4 w-4"})}),e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>r(!1),children:e.jsx(tt,{className:"h-4 w-4"})})]})]}),e.jsxs(Ge,{defaultValue:n,onValueChange:l,children:[e.jsxs(se,{value:"ai",className:"m-0 bg-white",children:[e.jsxs("div",{ref:E,className:"h-96 p-4 space-y-4 overflow-y-auto",children:[i.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hello! I'm your property assistant. Ask me anything about property investment, or try one of these popular questions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:xl.map((o,b)=>e.jsx(P,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>M(o),children:o},b))})]}):i.map((o,b)=>e.jsx("div",{className:`flex ${o.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${o.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:o.isUser?o.text:Al(o.text)}})})},b)),j&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"max-w-[80%] rounded-lg p-3 bg-muted",children:e.jsx("p",{className:"text-sm",children:"Typing..."})})})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:g,onChange:o=>y(o.target.value),placeholder:"Ask me anything about property...",onKeyPress:o=>{o.key==="Enter"&&M(g)}}),e.jsx(P,{onClick:()=>M(g),disabled:!g.trim(),children:e.jsx(is,{className:"h-4 w-4"})})]})})]}),e.jsxs(se,{value:"messages",className:"m-0 bg-white",children:[e.jsx("div",{ref:E,className:"h-96 p-4 space-y-4 overflow-y-auto",children:s?d?e.jsx("div",{className:"space-y-4",children:x.map((o,b)=>e.jsx("div",{className:`flex ${o.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${o.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm",children:o.text})})},b))}):e.jsx("div",{className:"space-y-4",children:w.map(o=>{var b;return e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded-lg cursor-pointer",onClick:()=>v(o),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{className:"h-8 w-8",children:[e.jsx(qe,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(o.full_name)}&background=random`,alt:o.full_name}),e.jsx(Be,{children:(b=o.full_name)==null?void 0:b.split(" ").map(k=>k[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.last_message})]})]}),o.unread_count&&o.unread_count>0&&e.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:o.unread_count})]},o.id)})}):e.jsx("div",{className:"text-center p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Please sign in to view messages"})})}),d&&e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:g,onChange:o=>y(o.target.value),placeholder:"Type a message...",onKeyPress:o=>{o.key==="Enter"&&M(g)}}),e.jsx(P,{onClick:()=>M(g),disabled:!g.trim(),children:e.jsx(is,{className:"h-4 w-4"})})]})})]}),e.jsxs(se,{value:"support",className:"m-0 bg-white",children:[e.jsx("div",{ref:E,className:"h-96 p-4 space-y-4 overflow-y-auto",children:h.length===0?e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome to support! How can we help you today?"})}):h.map((o,b)=>e.jsx("div",{className:`flex ${o.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${o.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm",children:o.text})})},b))}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:g,onChange:o=>y(o.target.value),placeholder:"Type your support question...",onKeyPress:o=>{o.key==="Enter"&&M(g)}}),e.jsx(P,{onClick:()=>M(g),disabled:!g.trim(),children:e.jsx(is,{className:"h-4 w-4"})})]})})]})]})]}):e.jsx(P,{onClick:()=>r(!0),className:"rounded-full h-12 w-12 flex items-center justify-center",children:e.jsx(ms,{className:"h-6 w-6"})})})})}function Tl(){const s=Fe();return c.useEffect(()=>{J.auth.onAuthStateChange((t,r)=>{console.log("Auth state change:",t,r),t==="SIGNED_IN"&&s("/dashboard")}),(async()=>{const{data:{session:t}}=await J.auth.getSession();console.log("Initial session:",t),s(t?"/dashboard":"/")})()},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Authenticating..."}),e.jsx("p",{className:"text-muted-foreground",children:"Please wait while we verify your credentials."})]})})}const Dl=[{title:"AI Property Analysis",description:"Advanced AI algorithms analyze market trends, rental rates, and property conditions to optimize your investment returns.",icon:$a,badge:"AI-Powered"},{title:"Smart Tenant Matching",description:"AI-driven tenant screening and matching system to find the perfect tenants for your properties.",icon:Ke,badge:"Smart Match"},{title:"Predictive Maintenance",description:"AI predicts maintenance needs before they become issues, saving you time and money.",icon:Ys,badge:"Predictive"},{title:"Automated Reporting",description:"AI-generated insights and reports on property performance, maintenance history, and financial metrics.",icon:nt,badge:"Automated"},{title:"AI Chat Support",description:"24/7 AI-powered chat support for tenants and property owners.",icon:jn,badge:"24/7 Support"},{title:"Smart Security",description:"AI-enhanced security monitoring and access control systems.",icon:vn,badge:"Enhanced"}],Ll=[{title:"Tenant Screening",description:"Comprehensive tenant screening with AI-powered background checks and risk assessment."},{title:"Rent Collection",description:"Smart rent collection with predictive payment analysis and automated reminders."},{title:"Property Maintenance",description:"AI-driven maintenance scheduling and vendor management."},{title:"Financial Reporting",description:"Advanced financial analytics with AI-powered forecasting and recommendations."}];function Fl(){return e.jsx(He,{children:e.jsxs(xe,{children:[e.jsx(Ne,{title:"AI-Powered Property Management",subtitle:"Experience the future of property management with our advanced AI solutions.",backgroundImage:"https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-16",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Next-Generation Property Management"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Leveraging artificial intelligence to revolutionize property management and maximize your investment returns."})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"AI-Powered Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Dl.map((s,a)=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Y,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(s.icon,{className:"h-6 w-6 text-primary"}),e.jsx(ce,{variant:"secondary",children:s.badge})]}),e.jsx(ue,{className:"text-xl",children:s.title})]}),e.jsx(z,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]},a))})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Core Services Enhanced by AI"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ll.map((s,a)=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Y,{children:e.jsx(ue,{children:s.title})}),e.jsx(z,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]},a))})]}),e.jsxs("section",{className:"space-y-8 bg-muted p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Why Choose Our AI-Powered Management?"}),e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Reduce operational costs by up to 30% with AI automation"}),e.jsx("li",{children:"Minimize vacancy rates with smart tenant matching"}),e.jsx("li",{children:"Prevent maintenance issues before they occur"}),e.jsx("li",{children:"Get real-time insights and predictive analytics"}),e.jsx("li",{children:"24/7 automated support for tenants"}),e.jsx("li",{children:"Enhanced security and risk management"})]})})]}),e.jsxs("section",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Ready to Transform Your Property Management?"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Experience the power of AI-driven property management. Contact us to learn how we can help optimize your property portfolio."}),e.jsx(P,{size:"lg",className:"px-8",children:"Schedule a Demo"})]})]})})]})})}const je=c.forwardRef(({className:s,...a},t)=>e.jsxs(za,{ref:t,className:I("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(yn,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(Nn,{className:"absolute h-full bg-primary"})}),e.jsx(bn,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));je.displayName=za.displayName;let Us;async function ht(){if(!Us){const{GoogleGenerativeAI:s}=await wn(async()=>{const{GoogleGenerativeAI:a}=await import("./vendor-Cjl9-thN.js").then(t=>t.c5);return{GoogleGenerativeAI:a}},[]);Us=new s("AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo")}return Us}function ut(s){const a=s.indexOf("{"),t=s.lastIndexOf("}")+1;if(a===-1||t===0)throw new Error("Invalid JSON response");return s.slice(a,t)}async function Ol(s,a){const r=(await ht()).getGenerativeModel({model:"gemini-pro"}),n=`
    You are a UK property investment expert. Analyze investment opportunities for ${s} properties with a budget of £${a}.
    Respond with a JSON object containing ONLY these exact fields:
    {
      "analysis": "Brief overview of the investment opportunity",
      "roi_range": "Expected ROI range as a percentage",
      "risks": ["Risk 1", "Risk 2", "Risk 3"],
      "opportunities": ["Opportunity 1", "Opportunity 2", "Opportunity 3"],
      "market_trends": ["Trend 1", "Trend 2", "Trend 3"]
    }
    Ensure each array has exactly 3 items and all fields are present.
  `;try{const i=await(await r.generateContent(n)).response,f=ut(i.text().trim());console.log("Raw Analysis Response:",f);const h=JSON.parse(f);if(!h.analysis||!h.roi_range||!Array.isArray(h.risks)||!Array.isArray(h.opportunities)||!Array.isArray(h.market_trends))throw new Error("Invalid response format");return{analysis:h.analysis,roi_range:h.roi_range,risks:h.risks.slice(0,3),opportunities:h.opportunities.slice(0,3),market_trends:h.market_trends.slice(0,3)}}catch(l){return console.error("Error in getInvestmentAnalysis:",l),{analysis:`Analysis for ${s} properties with £${a} budget is currently unavailable`,roi_range:"8-12%",risks:["Market volatility","Economic uncertainty","Property condition risks"],opportunities:["Value appreciation potential","Rental income opportunities","Development possibilities"],market_trends:["Rising demand in key areas","Stable price growth","Infrastructure development"]}}}async function $l(s){const t=(await ht()).getGenerativeModel({model:"gemini-pro"}),r=`
    You are a UK property market expert. Predict property market trends for ${s} in the next 12 months.
    Respond ONLY with a JSON object in this exact format:
    {
      "price_prediction": "2-3 sentence prediction of price movements",
      "demand_factors": ["3 specific demand factors"],
      "recommendations": ["3 specific investment recommendations"]
    }
  `;try{const l=await(await t.generateContent(r)).response,i=ut(l.text().trim());return console.log("Raw Predictions Response:",i),JSON.parse(i)}catch(n){return console.error("Error in getMarketPredictions:",n),{price_prediction:"Market prediction currently unavailable",demand_factors:["Population growth","Economic development","Infrastructure improvements"],recommendations:["Research thoroughly","Consider long-term potential","Evaluate local amenities"]}}}async function zl(s){const t=(await ht()).getGenerativeModel({model:"gemini-pro"}),r=`
    You are a UK property investment advisor. Create a strategy for a ${s.experience} investor with £${s.budget} budget and ${s.riskTolerance} risk tolerance.
    Respond ONLY with a JSON object in this exact format:
    {
      "strategy": "2-3 sentence overview of recommended strategy",
      "portfolio_allocation": "Suggested portfolio breakdown percentages",
      "timeline": "Recommended investment timeline",
      "expected_returns": "Projected returns overview"
    }
  `;try{const l=await(await t.generateContent(r)).response,i=ut(l.text().trim());return console.log("Raw Strategy Response:",i),JSON.parse(i)}catch(n){return console.error("Error in getInvestmentStrategy:",n),{strategy:"Investment strategy currently unavailable",portfolio_allocation:"Residential: 60%, Commercial: 30%, Cash: 10%",timeline:"5-10 years recommended holding period",expected_returns:"8-12% annual return potential"}}}function ql(){const[s,a]=S.useState(!1),[t,r]=S.useState(null),[n,l]=S.useState("residential"),[i,f]=S.useState(25e4),[h,N]=S.useState("London"),[x,p]=S.useState(null),[g,y]=S.useState(null),[j,D]=S.useState(null),w={experience:"intermediate",budget:i,riskTolerance:"moderate"},u=async()=>{a(!0),r(null);try{const d=await Ol(n,i);if(!d||typeof d!="object")throw new Error("Invalid analysis data received");p(d);const v=await $l(h);if(!v||typeof v!="object")throw new Error("Invalid predictions data received");y(v);const E=await zl(w);if(!E||typeof E!="object")throw new Error("Invalid strategy data received");D(E)}catch(d){console.error("Error in analysis:",d),r(d instanceof Error?d.message:"Failed to generate analysis. Please try again."),p(null),y(null),D(null)}finally{a(!1)}};return e.jsx(He,{children:e.jsxs(xe,{children:[e.jsx(Ne,{title:"AI-Powered Investment Analysis",subtitle:"Make data-driven investment decisions with our advanced AI analytics",showSearch:!1,height:"h-[400px]",onSearch:()=>{}}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsxs("section",{className:"bg-card p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Investment Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property Type"}),e.jsxs(Ce,{defaultValue:n,onValueChange:d=>l(d),children:[e.jsx(_e,{className:"w-full",children:e.jsx(Ie,{placeholder:"Select property type"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"residential",children:"Residential"}),e.jsx(Q,{value:"commercial",children:"Commercial"}),e.jsx(Q,{value:"industrial",children:"Industrial"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsx(q,{type:"text",value:h,onChange:d=>N(d.target.value),placeholder:"Enter location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Budget: £",i.toLocaleString()]}),e.jsx(je,{value:[i],onValueChange:d=>f(d[0]),min:1e5,max:1e6,step:5e4})]})]}),e.jsx(P,{onClick:u,disabled:s,className:"mt-6",size:"lg",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Sn,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):"Analyze Investment Opportunity"})]}),t&&e.jsx("div",{className:"bg-destructive/10 text-destructive p-4 rounded-lg",children:t}),x&&g&&j&&!t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(es,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(ue,{children:"Market Analysis"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Analysis"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.analysis||"Analysis not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"ROI Range"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.roi_range||"ROI range not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Risks"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(x.risks)?x.risks.map((d,v)=>e.jsx("li",{children:d},v)):e.jsx("li",{children:"Risks data not available"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Market Trends"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(x.market_trends)?x.market_trends.map((d,v)=>e.jsx("li",{children:d},v)):e.jsx("li",{children:"Market trends not available"})})]})]})]}),e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx($a,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(ue,{children:"AI Predictions"})]}),e.jsxs(z,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Price Trend"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.price_prediction||"Price prediction not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Demand Factors"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(g.demand_factors)?g.demand_factors.map((d,v)=>e.jsx("li",{children:d},v)):e.jsx("li",{children:"Demand factors not available"})})]})]})]}),e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsx(nt,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(ue,{children:"Recommended Strategy"})]}),e.jsxs(z,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Portfolio Allocation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.portfolio_allocation||"Portfolio allocation not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Expected Returns"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.expected_returns||"Expected returns not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.timeline||"Timeline not available"})]})]})]})]})]})})]})})}function Bl(){return e.jsx(He,{children:e.jsxs(xe,{children:[e.jsx(Ne,{title:"About MyVGE",subtitle:"Learn more about our mission and our team",backgroundImage:"https://images.unsplash.com/photo-1507585495646-50c2b6dbd483?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Our Story"}),e.jsx("p",{className:"text-muted-foreground",children:"MyVGE is dedicated to providing property investors with the tools and insights they need to succeed."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Mission"}),e.jsx("p",{children:"To empower property investors with comprehensive data, expert analysis, and innovative tools to make informed decisions and achieve their financial goals. We are committed to ethical practices, diversity, and transparency in all our operations."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Values"}),e.jsxs("ul",{className:"list-disc list-inside",children:[e.jsx("li",{children:"**Ethical Practices:** We adhere to the highest ethical standards in all our dealings, ensuring fairness and integrity."}),e.jsx("li",{children:"**Diversity:** We embrace diversity and inclusion, fostering a welcoming environment for all."}),e.jsx("li",{children:"**Transparency:** We are committed to open and honest communication, providing clear and accurate information to our users."})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Team"}),e.jsx("p",{children:"Our team consists of experienced property professionals, data scientists, and technology experts who are passionate about helping investors navigate the complexities of the real estate market. We are a diverse group of individuals with a shared commitment to excellence."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Contact Us"}),e.jsx("p",{children:"We'd love to hear from you! Contact us to learn more about our services or to discuss your investment needs."}),e.jsx(P,{children:"Contact Us"})]})]})})]})})}const Ul=({isOpen:s,onClose:a,deal:t,isSubscriber:r})=>t?e.jsx(Le,{open:s,onOpenChange:a,children:e.jsxs(Ae,{className:"max-w-3xl w-[95vw] max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsx(Re,{children:e.jsxs(Me,{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-4",children:[e.jsx("span",{className:"text-lg sm:text-xl font-bold break-words pr-4",children:t.title}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(ce,{className:"text-xs",children:t.property_type}),e.jsx(ce,{variant:"secondary",className:"text-xs",children:t.deal_type})]})]})}),e.jsx("div",{className:"relative aspect-video mb-3 sm:mb-4 overflow-hidden rounded-lg",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4 text-sm sm:text-base text-muted-foreground",children:[e.jsx(Ye,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"break-words",children:t.location})]}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Price"}),e.jsx("p",{className:"text-base sm:text-lg",children:B(t.price)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"ROI"}),e.jsxs("p",{className:"text-base sm:text-lg text-emerald-500",children:[t.roi_percentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Investment Term"}),e.jsx("p",{className:"text-base sm:text-lg",children:t.investment_term})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Property Type"}),e.jsx("p",{className:"text-base sm:text-lg",children:t.property_type})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Deal Type"}),e.jsx(ce,{variant:"outline",className:"text-xs sm:text-sm",children:t.deal_type})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2",children:"Location"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground break-words",children:t.location})]})]})]})}):null,Gl=({children:s})=>{try{return te(),e.jsx(e.Fragment,{children:s})}catch{return e.jsx(xe,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:e.jsxs(O,{className:"p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Authentication Error"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:"Unable to load authentication. Please refresh the page or try again later."}),e.jsx(P,{className:"w-full",onClick:()=>window.location.reload(),children:"Refresh Page"})]})})})}};function Vl({onSignIn:s,onSignUp:a}){return e.jsx(Gl,{children:e.jsx(Hl,{onSignIn:s,onSignUp:a})})}function Hl({onSignIn:s,onSignUp:a}){const{user:t,profile:r,isLoading:n}=te(),[l,i]=c.useState([]),[f,h]=c.useState(!0),[N,x]=c.useState(null);return c.useEffect(()=>{let p=!0;async function g(){try{const y=await cr();p&&(i(y),h(!1))}catch(y){console.error("Error loading deals:",y),p&&h(!1)}}return g(),()=>{p=!1}},[]),n?e.jsx(xe,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{children:"Loading..."})})}):e.jsx(xe,{children:e.jsx(He,{children:e.jsxs("div",{className:"min-h-screen bg-neutral",children:[e.jsx(Ne,{title:"Property Deals",subtitle:"Discover exclusive property investment opportunities",showSearch:!0,showStats:!1,height:"h-[400px]",image:"/deals-hero.jpg"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:f?e.jsx("div",{className:"text-center py-8",children:"Loading deals..."}):t?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(p=>e.jsx(st,{deal:p,isSubscriber:(r==null?void 0:r.subscription_tier)!=="free",onClick:()=>x(p),user:t},p.id))}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(O,{className:"p-8 text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sign in to View Full Deal Details"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Get access to exclusive property deals and investment opportunities. Create an account or sign in to view all available deals."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(P,{onClick:s,className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"w-4 w-4"}),"Sign In"]}),e.jsxs(P,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-4 w-4"}),"Create Account"]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(p=>e.jsx(st,{deal:p,isSubscriber:!1,onClick:s,user:null},p.id))})]})}),e.jsx(Ul,{isOpen:!!N,onClose:()=>x(null),deal:N,isSubscriber:(r==null?void 0:r.subscription_tier)!=="free"})]})})})}function Wl(s){return s&&typeof s.user_id=="string"&&s.profile&&typeof s.profile.full_name=="string"&&(s.profile.avatar_url===null||typeof s.profile.avatar_url=="string")}const Gs=s=>s.filter(Wl).map(a=>({user_id:a.user_id,profile:{full_name:a.profile.full_name,avatar_url:a.profile.avatar_url}}));function Kl(){const{user:s}=te(),{toast:a}=we(),[t,r]=c.useState([]),[n,l]=c.useState(null),[i,f]=c.useState([]),[h,N]=c.useState(""),x=c.useRef(null),[,p]=c.useState(!0),[g,y]=c.useState(""),[j,D]=c.useState([]),[w,u]=c.useState(!1),[d,v]=c.useState(!1);c.useEffect(()=>{if(!s)return;(async()=>{try{console.log("Fetching conversations for user:",s==null?void 0:s.id);const{data:k,error:$}=await J.from("conversation_participants").select("conversation_id").eq("user_id",s==null?void 0:s.id);if($)throw console.error("Error fetching participants:",$),$;if(console.log("Found participant records:",k),!(k!=null&&k.length)){console.log("No conversations found"),r([]),p(!1);return}const W=k.map(K=>K.conversation_id);console.log("Conversation IDs:",W);const{data:Z,error:oe}=await J.from("conversations").select(`
            id,
            created_at,
            participants:conversation_participants!inner (
              user_id,
              profile:profiles!inner (
                full_name,
                avatar_url
              )
            ),
            messages (
              id,
              content,
              sender_id,
              created_at
            )
          `).in("id",W).order("created_at",{ascending:!1});if(oe)throw console.error("Error fetching conversations:",oe),oe;console.log("Raw conversations data:",Z);const le=(Z||[]).map(K=>{const me=K.messages&&K.messages.length>0?K.messages[K.messages.length-1]:void 0;return{id:K.id,participants:Gs(K.participants),last_message:me}});console.log("Transformed conversations:",le),r(le)}catch(k){console.error("Error in fetchConversations:",k),a({title:"Error",description:k instanceof Error?k.message:"Failed to load conversations",variant:"destructive"})}finally{p(!1)}})();const b=J.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},k=>{const $=k.new;(n==null?void 0:n.id)===$.conversation_id&&f(W=>[...W,$])}).subscribe();return()=>{b.unsubscribe()}},[s,n==null?void 0:n.id]),c.useEffect(()=>{n&&E(n.id)},[n]),c.useEffect(()=>{L()},[i]);const E=async o=>{const{data:b,error:k}=await J.from("messages").select(`
        *,
        sender:profiles!sender_id(
          full_name,
          avatar_url
        )
      `).eq("conversation_id",o).order("created_at",{ascending:!0});if(k){console.error("Error fetching messages:",k);return}f(b||[])},L=()=>{var o;(o=x.current)==null||o.scrollIntoView({behavior:"smooth"})},A=async o=>{if(o.preventDefault(),!(!n||!h.trim()))try{const{error:b}=await J.from("messages").insert({conversation_id:n.id,sender_id:s==null?void 0:s.id,content:h.trim()});if(b)throw b;N("")}catch(b){console.error("Error sending message:",b),a({title:"Error",description:"Failed to send message",variant:"destructive"})}},M=async o=>{if(!o.trim()){D([]);return}u(!0);try{const{data:b,error:k}=await J.from("profiles").select("id, full_name, avatar_url, email").neq("id",s==null?void 0:s.id).or(`full_name.ilike.%${o}%,email.ilike.%${o}%`).limit(5);if(k)throw k;D(b||[])}catch(b){console.error("Error searching users:",b),a({title:"Error",description:"Failed to search users",variant:"destructive"})}finally{u(!1)}},F=async o=>{try{const{data:b,error:k}=await J.from("conversation_participants").select("conversation_id").eq("user_id",s==null?void 0:s.id);if(k)throw k;if(b!=null&&b.length){const{data:K,error:me}=await J.from("conversation_participants").select("conversation_id").in("conversation_id",b.map(pe=>pe.conversation_id)).eq("user_id",o.id).single();if(me&&me.code!=="PGRST116")throw me;if(K){const{data:pe,error:Se}=await J.from("conversations").select(`
              id,
              participants:conversation_participants(
                user_id,
                profile:profiles(
                  full_name,
                  avatar_url
                )
              )
            `).eq("id",K.conversation_id).single();if(Se)throw Se;if(pe){const be={id:pe.id,participants:Gs(pe.participants)};l(be),v(!1);return}}}const{data:$,error:W}=await J.from("conversations").insert({created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(W)throw W;const{error:Z}=await J.from("conversation_participants").insert([{conversation_id:$.id,user_id:s==null?void 0:s.id,created_at:new Date().toISOString()},{conversation_id:$.id,user_id:o.id,created_at:new Date().toISOString()}]);if(Z)throw Z;const{data:oe,error:le}=await J.from("conversations").select(`
          id,
          participants:conversation_participants(
            user_id,
            profile:profiles(
              full_name,
              avatar_url
            )
          )
        `).eq("id",$.id).single();if(le)throw le;if(oe){const K={id:oe.id,participants:Gs(oe.participants)};r(me=>[K,...me]),l(K),v(!1),a({title:"Success",description:"New conversation started"})}}catch(b){console.error("Error starting conversation:",b),a({title:"Error",description:b.message||"Failed to start conversation. Please try again.",variant:"destructive"})}};return s?e.jsx(xe,{children:e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 max-w-6xl mx-auto",children:[e.jsxs(O,{className:"col-span-4",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(ue,{children:"Messages"}),e.jsxs(Le,{open:d,onOpenChange:v,children:[e.jsx(hi,{asChild:!0,children:e.jsx(P,{size:"icon",variant:"ghost",children:e.jsx(_n,{className:"h-4 w-4"})})}),e.jsxs(Ae,{children:[e.jsx(Re,{children:e.jsx(Me,{children:"New Conversation"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{placeholder:"Search users...",value:g,onChange:o=>{y(o.target.value),M(o.target.value)}}),e.jsx(P,{size:"icon",variant:"ghost",disabled:w,children:e.jsx(ba,{className:"h-4 w-4"})})]}),e.jsxs(os,{className:"h-[300px]",children:[j.map(o=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-accent rounded-lg cursor-pointer",onClick:()=>F(o),children:[e.jsxs(ze,{children:[e.jsx(qe,{src:o.avatar_url||void 0}),e.jsx(Be,{children:o.full_name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.email})]})]},o.id)),g&&!w&&j.length===0&&e.jsx("p",{className:"text-center text-muted-foreground p-4",children:"No users found"})]})]})]})]})]}),e.jsx(z,{children:e.jsx(os,{className:"h-[600px]",children:t.map(o=>e.jsx("div",{className:`p-4 cursor-pointer hover:bg-accent rounded-lg mb-2 ${(n==null?void 0:n.id)===o.id?"bg-accent":""}`,onClick:()=>l(o),children:o.participants.filter(b=>b.user_id!==(s==null?void 0:s.id)).map(b=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ze,{children:[e.jsx(qe,{src:b.profile.avatar_url||void 0}),e.jsx(Be,{children:b.profile.full_name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:b.profile.full_name}),o.last_message&&e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:o.last_message.content})]})]},b.user_id))},o.id))})})]}),e.jsx(O,{className:"col-span-8",children:e.jsx(z,{className:"p-0",children:n?e.jsxs("div",{className:"h-[600px] flex flex-col",children:[e.jsxs(os,{className:"flex-1 p-4",children:[i.map(o=>e.jsx("div",{className:`flex mb-4 ${o.sender_id===(s==null?void 0:s.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${o.sender_id===(s==null?void 0:s.id)?"bg-primary text-primary-foreground":"bg-muted"} rounded-lg p-3`,children:[e.jsx("p",{children:o.content}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:new Date(o.created_at).toLocaleTimeString()})]})},o.id)),e.jsx("div",{ref:x})]}),e.jsx("form",{onSubmit:A,className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{value:h,onChange:o=>N(o.target.value),placeholder:"Type a message..."}),e.jsx(P,{type:"submit",size:"icon",children:e.jsx(is,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"h-[600px] flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})})]})})}):null}const Ts="3160af39c66686f66e595371584faa9d8087132c",Ds="https://app.patma.co.uk",Ls="/api/prospector/v1";async function Yl(s){try{const a=new URLSearchParams;a.append("postcode",s.postcode),s.lat&&a.append("lat",s.lat.toString()),s.long&&a.append("long",s.long.toString()),s.bedrooms&&a.append("bedrooms",s.bedrooms.toString()),s.property_type&&a.append("property_type",s.property_type),s.min_data_points&&a.append("min_data_points",s.min_data_points.toString());const t=`${Ds}${Ls}/asking-prices/?${a.toString()}`;console.log("Fetching asking prices from:",t);const r=await fetch(t,{method:"GET",headers:{Authorization:`Token ${Ts}`,"Content-Type":"application/json",Accept:"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to fetch asking prices")}return await r.json()}catch(a){throw console.error("Error fetching asking prices:",a),a}}async function Jl(s){var a;try{const t=new URLSearchParams;t.append("postcode",s.postcode),s.location&&t.append("location",s.location),s.lat&&t.append("lat",s.lat.toString()),s.long&&t.append("long",s.long.toString()),t.append("property_type",s.property_type),s.tenure&&t.append("tenure",s.tenure),s.new_build&&t.append("new_build",s.new_build),s.max_age_months&&t.append("max_age_months",s.max_age_months.toString()),s.min_data_points&&t.append("min_data_points",s.min_data_points.toString()),s.apply_indexation!==void 0&&t.append("apply_indexation",s.apply_indexation.toString());const r=`${Ds}${Ls}/sold-prices/?${t.toString()}`;console.log("Fetching sold properties from:",r);const n=await fetch(r,{method:"GET",headers:{Authorization:`Token ${Ts}`,"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok){const i=await n.json().catch(()=>({errors:["Unknown error occurred"]}));throw new Error(((a=i.errors)==null?void 0:a[0])||`HTTP error! status: ${n.status}`)}const l=await n.json();if(console.log("Sold properties response:",l),l.status==="error"||l.errors){const i=Array.isArray(l.errors)?l.errors[0]:l.message||"Failed to fetch sold properties";throw new Error(i)}return l&&l.data&&Array.isArray(l.data.available_results)?{properties:l.data.available_results,total:l.data.total_results_count||l.data.available_results.length,totalPages:l.data.number_of_pages||Math.ceil(l.data.total_results_count/(s.page_size||12))}:l&&l.data&&Array.isArray(l.data.properties)?{properties:l.data.properties,total:l.data.total||l.data.properties.length,totalPages:l.data.total_pages||Math.ceil(l.data.properties.length/(s.page_size||10))}:(console.warn("Unexpected API response structure for sold properties:",l),{properties:[],total:0,totalPages:1})}catch(t){throw console.error("Error fetching sold properties:",t),t}}async function Zl(s){var a,t;try{const r=new URLSearchParams;r.append("postcode",s.postcode),s.location&&r.append("location",s.location),s.lat&&r.append("lat",s.lat.toString()),s.long&&r.append("long",s.long.toString()),s.radius&&r.append("radius",s.radius.toString()),s.polygon&&r.append("polygon",JSON.stringify(s.polygon)),s.property_type&&r.append("property_type",s.property_type),s.bedrooms&&r.append("bedrooms",s.bedrooms.toString()),s.require_sold_price!==void 0&&r.append("require_sold_price",s.require_sold_price.toString()),s.require_size!==void 0&&r.append("require_size",s.require_size.toString()),s.include_sold_history!==void 0&&r.append("include_sold_history",s.include_sold_history.toString()),s.include_indexation_based_value!==void 0&&r.append("include_indexation_based_value",s.include_indexation_based_value.toString()),s.sort_by&&r.append("sort_by",s.sort_by),s.page&&r.append("page",s.page.toString()),s.page_size&&r.append("page_size",s.page_size.toString()),s.records_after&&r.append("records_after",s.records_after);const n=`${Ds}${Ls}/list-property/?${r.toString()}`;console.log("Fetching listed properties from:",n);const i=await(await fetch(n,{method:"GET",headers:{Authorization:`Token ${Ts}`,"Content-Type":"application/json",Accept:"application/json"}})).json();if(console.log("Listed properties response:",i),i.status==="error"||i.errors){const f=Array.isArray(i.errors)?i.errors[0]:i.message||"Failed to fetch listed properties";throw new Error(f)}return i&&i.data&&Array.isArray(i.data.available_results)?{properties:i.data.available_results,total:i.data.total_results_count||i.data.available_results.length,totalPages:i.data.number_of_pages||Math.ceil(i.data.total_results_count/(s.page_size||12))}:i&&i.properties?{properties:i.properties||[],total:i.total||((a=i.properties)==null?void 0:a.length)||0,totalPages:i.total_pages||Math.ceil((((t=i.properties)==null?void 0:t.length)||0)/(s.page_size||10))}:i&&i.data&&i.data.properties?{properties:i.data.properties,total:i.data.total||i.data.properties.length,totalPages:i.data.total_pages||Math.ceil(i.data.properties.length/(s.page_size||10))}:(console.warn("Unexpected API response structure:",i),{properties:[],total:0,totalPages:1})}catch(r){throw console.error("Error fetching listed properties:",r),r}}async function Xl(s){try{const a=new URLSearchParams;a.append("postcode",s.postcode),s.property_type&&a.append("property_type",s.property_type);const t=`${Ds}${Ls}/price-history/?${a.toString()}`;console.log("Fetching price history from:",t);const r=await fetch(t,{method:"GET",headers:{Authorization:`Token ${Ts}`,"Content-Type":"application/json",Accept:"application/json"}});if(!r.ok){const l=await r.json();throw new Error(l.message||"Failed to fetch price history")}return await r.json()}catch(a){throw console.error("Error fetching price history:",a),a}}function Ql(){var as,us,xs;const[s,a]=S.useState(""),[t,r]=S.useState(!1),[n,l]=S.useState([]),[i,f]=S.useState([]),[h,N]=S.useState({}),[x,p]=S.useState("listed"),[g,y]=S.useState(0),[j,D]=S.useState(1),{toast:w}=we(),[u,d]=S.useState({propertyType:"any",tenure:"any",minBeds:"0",radius:1,page:1,limit:12,newBuild:!1,maxAgeMonths:18,sortBy:"most_recent_sale_date"}),[v,E]=S.useState(!0),[L,A]=S.useState(!0),[M,F]=S.useState(!1),[o,b]=S.useState(null),[k,$]=S.useState(!1),W=S.useMemo(()=>x==="listed"?n:i,[x,n,i]),Z=async m=>{try{const[C,R]=await Promise.all([Yl({postcode:m,property_type:u.propertyType==="any"?void 0:u.propertyType,bedrooms:u.minBeds==="0"?void 0:parseInt(u.minBeds),radius:u.radius}),Xl({postcode:m,property_type:u.propertyType==="any"?void 0:u.propertyType,max_age_months:u.maxAgeMonths})]);N({askingPrices:C,priceHistory:R})}catch(C){console.error("Error fetching area insights:",C)}},oe=m=>{if(m.image_url&&typeof m.image_url=="string"&&m.image_url.trim()!=="")return console.log("Using direct image URL from API"),m.image_url;const C=["main_image","photo_url","thumbnail","image"];for(const R of C)if(m[R]&&typeof m[R]=="string"&&m[R].trim()!=="")return console.log(`Found image in property.${R}`),m[R];for(const R in m)if(typeof m[R]=="string"&&m[R].includes("property-software.uk")&&(m[R].endsWith(".jpg")||m[R].endsWith(".jpeg")||m[R].endsWith(".png")))return console.log(`Found PaTMa image URL in property.${R}`),m[R];if(m.images&&Array.isArray(m.images)&&m.images.length>0){const R=m.images.find(H=>typeof H=="string"&&H.includes("property-software.uk"));if(R)return console.log("Found PaTMa image URL in images array"),R;if(typeof m.images[0]=="string")return console.log("Using first image from images array"),m.images[0];if(m.images[0]&&typeof m.images[0]=="object"&&m.images[0].url)return console.log("Using URL from first image object in images array"),m.images[0].url}if(m.photos&&Array.isArray(m.photos)&&m.photos.length>0){const R=m.photos.find(H=>typeof H=="string"&&H.includes("property-software.uk"));if(R)return console.log("Found PaTMa image URL in photos array"),R;if(typeof m.photos[0]=="string")return console.log("Using first image from photos array"),m.photos[0];if(m.photos[0]&&typeof m.photos[0]=="object"&&m.photos[0].url)return console.log("Using URL from first image object in photos array"),m.photos[0].url}if(m.sold_history&&Array.isArray(m.sold_history)&&m.sold_history.length>0){for(const R of m.sold_history)if(R){for(const H of C)if(R[H]&&typeof R[H]=="string"&&R[H].trim()!=="")return console.log(`Found image in sold_history item.${H}`),R[H];for(const H in R)if(typeof R[H]=="string"&&R[H].includes("property-software.uk")&&(R[H].endsWith(".jpg")||R[H].endsWith(".jpeg")||R[H].endsWith(".png")))return console.log(`Found PaTMa image URL in sold_history item.${H}`),R[H];if(R.images&&Array.isArray(R.images)&&R.images.length>0){const H=R.images.find(ne=>typeof ne=="string"&&ne.includes("property-software.uk"));if(H)return console.log("Found PaTMa image URL in sold_history images array"),H;if(typeof R.images[0]=="string")return console.log("Using first image from sold_history images array"),R.images[0]}}}return console.log("No image found for property"),null},le=async()=>{if(!s){w({variant:"destructive",title:"Error",description:"Please enter a location or postcode"});return}try{r(!0);const m=/^[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}$/i.test(s.trim());if(Z(s).catch(C=>{console.error("Error fetching area insights:",C),w({variant:"destructive",title:"Warning",description:"Could not fetch area insights. Some information may be missing."})}),x==="listed")try{const C=await Zl({postcode:s.trim(),location:m?void 0:s.trim(),radius:u.radius,property_type:u.propertyType==="any"?void 0:u.propertyType,tenure:u.tenure==="any"?void 0:u.tenure,bedrooms:u.minBeds==="0"?void 0:parseInt(u.minBeds),new_build:u.newBuild||void 0,page:u.page,page_size:u.limit,sort_by:u.sortBy,include_sold_history:!0,require_sold_price:!0,require_size:!0});console.log("COMPLETE API RESPONSE STRUCTURE:",JSON.stringify(C,null,2));const R=C.properties[0];R&&(console.log("COMPLETE SAMPLE PROPERTY STRUCTURE:",JSON.stringify(R,null,2)),console.log("KEY PROPERTY FIELDS FOR IMAGE LOOKUP:",{listing_url:R.listing_url,property_url:R.property_url,url:R.url,id:R.id,rightmove_id:R.rightmove_id,zoopla_id:R.zoopla_id,uprn:R.uprn,listing_detail_url:R.listing_detail_url}));const ne=C.properties.map((G,ye)=>{let he=JSON.parse(JSON.stringify(G));return G.uprn&&(he.uprn=String(G.uprn)),G.last_sold_price&&(he.price=G.last_sold_price),he.image_url=oe(G),!he.property_type&&G.built_form?he.property_type=G.built_form:he.property_type||(he.property_type="House"),he}).map(G=>K(G));l(ne),y(C.total),D(C.totalPages),C.properties.length===0&&w({variant:"default",title:"No Results",description:"No listed properties found for this search criteria. Try adjusting your filters."})}catch(C){console.error("Error fetching listed properties:",C),w({variant:"destructive",title:"Error",description:C instanceof Error?C.message:"Could not fetch listed properties. Please check your search criteria and try again."}),l([]),y(0),D(1)}else try{const C=await Jl({postcode:s.trim(),location:m?void 0:s.trim(),radius:u.radius,property_type:u.propertyType==="any"?"flat":u.propertyType,tenure:u.tenure==="any"?void 0:u.tenure,max_age_months:u.maxAgeMonths,min_data_points:20,apply_indexation:!0,page:u.page,page_size:u.limit});console.log("Sold properties API response structure:",JSON.stringify(C,null,2).substring(0,500)+"..."),C.properties&&C.properties.length>0&&console.log("First sold property full object:",C.properties[0]);const H=C.properties.map(ne=>{var ye;let G=JSON.parse(JSON.stringify(ne));if(!G.price&&!G.sale_price){if((ye=ne.details)!=null&&ye.price)G.price=ne.details.price;else if(ne.price_paid)G.sale_price=ne.price_paid;else if(ne.sale_price)G.sale_price=ne.sale_price;else if(ne.latest_sold_price)G.sale_price=ne.latest_sold_price;else if(typeof ne.price=="string"){const he=ne.price.match(/[\d,]+/);he&&(G.price=parseInt(he[0].replace(/,/g,"")))}}if(G.sale_price&&typeof G.sale_price=="string"){const he=G.sale_price.match(/[\d,]+/);he&&(G.sale_price=parseInt(he[0].replace(/,/g,"")))}return G.image_url=oe(ne),G}).map(ne=>K(ne));f(H),y(C.total),D(C.totalPages),C.properties.length===0&&w({variant:"default",title:"No Results",description:"No sold properties found for this search criteria. Try adjusting your filters."})}catch(C){console.error("Error fetching sold properties:",C),w({variant:"destructive",title:"Error",description:C instanceof Error?C.message:"Could not fetch sold properties. Please check your search criteria and try again."}),f([]),y(0),D(1)}}catch(m){console.error("Search error:",m),w({variant:"destructive",title:"Error",description:m instanceof Error?m.message:"An unexpected error occurred. Please try again."})}finally{r(!1)}},K=m=>{const C={...m},R=C.price||C.asking_price||C.sale_price||C.price_paid||C.latest_price||0;if(R>0&&(C.stamp_duty||(C.stamp_duty=me(R)),C.size_sq_meters&&!C.price_per_sqft?C.price_per_sqft=pe(R,C.size_sq_meters,!0):C.size_sq_feet&&!C.price_per_sqft&&(C.price_per_sqft=pe(R,C.size_sq_feet,!1)),!C.estimated_rent)){let H=0;if(H=R*.04/12,C.bedrooms){const ye=1+(C.bedrooms-2)*.1;H*=Math.max(.8,Math.min(ye,1.5))}if(C.estimated_rent=Math.round(H),!C.rental_yield){const ye=C.estimated_rent*12;C.rental_yield=ye/R*100}if(!C.roi){const Pe=R*Math.pow(1.03,5),ps=C.estimated_rent*12*5,gs=Pe-R+ps;C.roi=gs/R*100}C.estimated_growth||(C.estimated_growth=3.5)}return C},me=(m,C=!1,R=!1)=>{if(m<=0)return 0;let H=0;return R&&(m<=425e3?H=0:m<=625e3?H=(m-425e3)*.05:R=!1),R||(m<=25e4?H=0:m<=925e3?H=(m-25e4)*.05:m<=15e5?H=(m-925e3)*.1+675e3*.05:H=(m-15e5)*.12+575e3*.1+675e3*.05),C&&(H+=m*.03),Math.round(H)},pe=(m,C,R=!1)=>{if(!m||!C||C<=0)return null;if(R)return Math.round(m/C);{const H=R?C*10.764:C;return Math.round(m/H)}};S.useEffect(()=>{s&&le()},[x,u.page]),S.useEffect(()=>{x==="sold"&&u.propertyType==="any"&&d(m=>({...m,propertyType:"flat"}))},[x,u.propertyType]);const Se=m=>{d(C=>({...C,propertyType:m,page:1}))},be=m=>{d(C=>({...C,tenure:m,page:1}))},Ee=m=>{d(C=>({...C,minBeds:m,page:1}))},T=m=>{d(C=>({...C,radius:parseFloat(m),page:1}))},_=m=>{d(C=>({...C,sortBy:m,page:1}))},V=m=>{b(m),$(!0)},X=()=>{$(!1),setTimeout(()=>b(null),300)},re=()=>{var ps,gs,xt,pt,gt;if(!o)return null;const m=o.price||o.asking_price||o.sale_price||o.price_paid||o.latest_price||0,C="date_of_transfer"in o,R=o.image_url,H=o.postcode||o.address&&((ps=o.address.match(/[A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}/i))==null?void 0:ps[0])||"Not Available",ne=o.sold_history&&o.sold_history.length>0,G=ne?o.sold_history.filter(ee=>ee&&ee.date&&!isNaN(new Date(ee.date).getTime())&&ee.price&&!isNaN(parseFloat(String(ee.price)))).sort((ee,ge)=>new Date(ee.date).getTime()-new Date(ge.date).getTime()):[],ye=G.length>=2?(G[G.length-1].price-G[0].price)/G[0].price*100:null,he=(ee,ge=25,Fs=4.5,Os=25)=>{const fs=ee*(ge/100),js=ee-fs,rs=Fs/100/12,vs=Os*12,ft=js*(rs*Math.pow(1+rs,vs))/(Math.pow(1+rs,vs)-1);return{downPayment:fs,loanAmount:js,monthlyPayment:ft,totalPayments:vs,totalRepayment:ft*vs}},Pe=m>0?he(m):null;return e.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 ${k?"opacity-100":"opacity-0 pointer-events-none"} transition-opacity duration-300`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:X}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("button",{onClick:X,className:"absolute top-4 right-4 z-10 bg-white/80 p-1 rounded-full hover:bg-white transition-colors",children:e.jsx(tt,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex flex-col md:flex-row h-full overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-2/5 h-64 md:h-auto relative bg-gray-100",children:[R?e.jsx("img",{src:R,alt:o.address||"Property",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[e.jsx(Ke,{className:"h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No image available"})]}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium",children:o.property_type})}),o.listing_url&&e.jsxs("a",{href:o.listing_url,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-4 left-4 bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 hover:bg-white transition-colors",children:[e.jsx(kn,{className:"h-4 w-4"}),"View Listing"]})]}),e.jsxs("div",{className:"w-full md:w-3/5 p-6 overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:o.address}),e.jsx("p",{className:"text-3xl font-bold mb-4 text-emerald-600",children:B(m)}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Property Type"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Pa,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:o.property_type||"N/A"})]})]}),o.bedrooms&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bedrooms"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ws,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:o.bedrooms})]})]}),o.bathrooms&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bathrooms"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"h-4 w-4 text-gray-600 flex items-center justify-center",children:"🛁"}),e.jsx("span",{className:"font-medium",children:o.bathrooms})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Postcode"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:H})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Tenure"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Pn,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:o.tenure||"N/A"})]})]}),C&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Sold Date"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(De,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:new Date(o.date_of_transfer).toLocaleDateString()})]})]}),(o.size_sq_feet||o.size_sq_meters)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Size"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ka,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"font-medium",children:[o.size_sq_feet?`${o.size_sq_feet} sq.ft`:"",o.size_sq_meters?`${o.size_sq_meters} m²`:""]})]})]}),o.price_per_sqft&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Price per sq.ft"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ve,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:B(o.price_per_sqft)})]})]})]}),e.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(es,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Investment Dashboard"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[o.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Estimated Monthly Rent"}),e.jsxs("p",{className:"text-blue-600 text-lg font-bold mt-1",children:[B(o.estimated_rent),"/month"]}),o.rental_yield&&e.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:[o.rental_yield.toFixed(1),"% yield"]})]}),o.roi&&e.jsxs("div",{className:"bg-purple-50 p-3 rounded",children:[e.jsx("p",{className:"text-purple-800 text-sm font-medium",children:"5-Year ROI Estimate"}),e.jsxs("p",{className:"text-purple-600 text-lg font-bold mt-1",children:[o.roi.toFixed(1),"%"]}),o.estimated_growth&&e.jsxs("p",{className:"text-purple-600 text-sm mt-1",children:[o.estimated_growth.toFixed(1),"% annual growth"]})]})]}),Pe&&e.jsxs("div",{className:"bg-emerald-50 p-3 rounded",children:[e.jsx("p",{className:"text-emerald-800 text-sm font-medium",children:"Mortgage Estimate (25% deposit)"}),e.jsxs("p",{className:"text-emerald-600 text-lg font-bold mt-1",children:[B(Pe.monthlyPayment),"/month"]}),e.jsxs("div",{className:"mt-2 text-sm text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Deposit (25%):"}),e.jsx("span",{children:B(Pe.downPayment)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Loan amount:"}),e.jsx("span",{children:B(Pe.loanAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Term:"}),e.jsx("span",{children:"25 years at 4.5%"})]})]})]})]}),o.estimated_rent&&Pe&&e.jsxs("div",{className:"mt-4 bg-white p-3 rounded border border-gray-100",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium",children:"Monthly Cash Flow Analysis"}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rental Income:"}),e.jsxs("span",{className:"text-emerald-600",children:["+",B(o.estimated_rent)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mortgage Payment:"}),e.jsxs("span",{className:"text-red-600",children:["-",B(Pe.monthlyPayment)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Management (10%):"}),e.jsxs("span",{className:"text-red-600",children:["-",B(o.estimated_rent*.1)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Maintenance (5%):"}),e.jsxs("span",{className:"text-red-600",children:["-",B(o.estimated_rent*.05)]})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-gray-100 mt-2",children:[e.jsx("span",{children:"Net Cash Flow:"}),e.jsx("span",{className:`${o.estimated_rent-Pe.monthlyPayment-o.estimated_rent*.15>0?"text-emerald-600":"text-red-600"}`,children:B(o.estimated_rent-Pe.monthlyPayment-o.estimated_rent*.15)})]})]})]})]}),o.stamp_duty!==void 0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Purchase Costs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 p-3 rounded",children:[e.jsx("p",{className:"text-amber-800 text-sm font-medium",children:"Stamp Duty"}),e.jsx("p",{className:"text-amber-600 text-lg font-bold mt-1",children:B(o.stamp_duty)}),e.jsx("p",{className:"text-amber-700 text-xs mt-2",children:"First-time buyer? You may qualify for lower rates."})]}),e.jsxs("div",{className:"bg-emerald-50 p-3 rounded",children:[e.jsx("p",{className:"text-emerald-800 text-sm font-medium",children:"Total Purchase Cost"}),e.jsx("p",{className:"text-emerald-600 text-lg font-bold mt-1",children:B(m+(o.stamp_duty||0))}),e.jsxs("div",{className:"mt-2 text-sm text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property price:"}),e.jsx("span",{children:B(m)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stamp duty:"}),e.jsx("span",{children:B(o.stamp_duty||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Legal fees (est.):"}),e.jsx("span",{children:B(1500)})]})]})]})]})]}),((xt=(gs=h.priceHistory)==null?void 0:gs.data)==null?void 0:xt.trend_percentage)!==void 0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Cn,{className:"h-5 w-5 mr-2 text-blue-600"}),"Area Insights"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-cyan-50 p-3 rounded",children:[e.jsx("p",{className:"text-cyan-800 text-sm font-medium",children:"Area Price Trend"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[h.priceHistory.data.trend_percentage>0?e.jsx(Ks,{className:"h-5 w-5 text-emerald-600"}):e.jsx(Ca,{className:"h-5 w-5 text-red-600"}),e.jsxs("p",{className:`text-lg font-bold ${h.priceHistory.data.trend_percentage>0?"text-emerald-600":"text-red-600"}`,children:[h.priceHistory.data.trend_percentage.toFixed(1),"%"]})]}),e.jsx("p",{className:"text-cyan-600 text-sm mt-1",children:"Last 12 months"}),e.jsx("div",{className:"mt-3 h-10 bg-white rounded overflow-hidden",children:e.jsx("div",{className:`h-full ${h.priceHistory.data.trend_percentage>0?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Math.min(Math.abs(h.priceHistory.data.trend_percentage)*3,100)}%`}})})]}),((gt=(pt=h.askingPrices)==null?void 0:pt.data)==null?void 0:gt.mean)&&e.jsxs("div",{className:"bg-teal-50 p-3 rounded",children:[e.jsx("p",{className:"text-teal-800 text-sm font-medium",children:"Average Area Price"}),e.jsx("p",{className:"text-teal-600 text-lg font-bold mt-1",children:B(h.askingPrices.data.mean)}),m>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-teal-600 text-sm mt-1",children:["This property is ",e.jsx("strong",{children:m<h.askingPrices.data.mean?"below":"above"})," average"]}),e.jsxs("div",{className:"mt-3 relative h-10 bg-gray-100 rounded overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"h-full bg-teal-200",style:{width:"50%"}}),e.jsx("div",{className:"h-full bg-teal-300",style:{width:"50%"}})]}),e.jsx("div",{className:"absolute top-0 h-full w-1 bg-black",style:{left:"50%",transform:"translateX(-50%)"}}),e.jsx("div",{className:"absolute top-0 h-full w-2 bg-emerald-600 rounded",style:{left:`${Math.min(Math.max(m/h.askingPrices.data.mean*50,10),90)}%`,transform:"translateX(-50%)"}})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1 text-gray-600",children:[e.jsx("span",{children:"-50%"}),e.jsx("span",{children:"Average"}),e.jsx("span",{children:"+50%"})]})]})]})]})]}),o.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:o.description})]}),ne&&G.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(es,{className:"h-5 w-5 mr-2 text-amber-600"}),"Sale History"]}),ye!==null&&e.jsxs("div",{className:"mb-3 p-3 rounded bg-amber-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-amber-800 text-sm mr-2",children:"Total Price Growth:"}),e.jsxs("span",{className:`font-bold ${ye>=0?"text-emerald-600":"text-red-600"}`,children:[ye>=0?"+":"",ye.toFixed(1),"%"]})]}),G.length>=2&&e.jsxs("div",{className:"text-xs text-amber-700 mt-1",children:["Over ",Math.round((new Date(G[G.length-1].date).getTime()-new Date(G[0].date).getTime())/(1e3*60*60*24*365))," years (",new Date(G[0].date).getFullYear()," to ",new Date(G[G.length-1].date).getFullYear(),")"]})]}),G.length>=2&&e.jsxs("div",{className:"mb-4 bg-white p-3 rounded border border-gray-100",children:[e.jsx("div",{className:"h-32 relative",children:e.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex items-end h-full",children:G.map((ee,ge)=>{const Fs=Math.max(...G.map(rs=>rs.price)),Os=ee.price/Fs*100,fs=`${100/G.length}%`,js=ge>0?"0 0 0 1px":"0";return e.jsx("div",{className:"bg-emerald-500 hover:bg-emerald-600 transition-colors relative group",style:{height:`${Os}%`,width:fs,margin:js},children:e.jsxs("div",{className:"hidden group-hover:block absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-black text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[e.jsx("div",{children:B(ee.price)}),e.jsx("div",{children:new Date(ee.date).toLocaleDateString()})]})},ge)})})}),e.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:G.map((ee,ge)=>e.jsx("div",{children:new Date(ee.date).getFullYear()},ge))})]}),e.jsx("div",{className:"space-y-2",children:G.map((ee,ge)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{children:new Date(ee.date).toLocaleDateString()})]}),e.jsx("span",{className:"font-medium",children:typeof ee.price=="number"&&!isNaN(ee.price)?B(ee.price):"Price not available"})]},ge))})]}),o.nearby_stations&&o.nearby_stations.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Nearby Transport"}),e.jsx("div",{className:"space-y-2",children:o.nearby_stations.map((ee,ge)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{children:ee.name}),e.jsxs("span",{className:"text-gray-600",children:[ee.distance," miles"]})]},ge))})]}),o.nearby_schools&&o.nearby_schools.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Nearby Schools"}),e.jsx("div",{className:"space-y-2",children:o.nearby_schools.map((ee,ge)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{children:ee.name}),e.jsxs("span",{className:"text-gray-600",children:[ee.distance," miles"]})]},ge))})]})]})]})]})]})};return e.jsxs(xe,{children:[e.jsx("div",{className:"bg-background",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500 to-cyan-500 mix-blend-multiply"})}),e.jsxs("div",{className:"relative px-4 py-24 sm:px-6 sm:py-32 lg:py-40 lg:px-8",children:[e.jsx("h1",{className:"text-center text-4xl font-extrabold tracking-tight text-white sm:text-5xl lg:text-6xl",children:"Property Search"}),e.jsx("p",{className:"mx-auto mt-6 max-w-lg text-center text-xl text-white sm:max-w-3xl",children:"Search through thousands of properties, compare market prices, and make informed decisions with our comprehensive property data."})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 -mt-16 relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Find Properties"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:x==="listed"?"default":"outline",onClick:()=>p("listed"),className:"min-w-[120px]",children:"Listed Properties"}),e.jsx(P,{variant:x==="sold"?"default":"outline",onClick:()=>p("sold"),className:"min-w-[120px]",children:"Sold Properties"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(Ce,{value:u.propertyType,onValueChange:Se,children:[e.jsx(_e,{className:"w-full",children:e.jsx(Ie,{placeholder:"Property Type"})}),e.jsxs(ke,{children:[x==="listed"&&e.jsx(Q,{value:"any",children:"Any Type"}),e.jsx(Q,{value:"flat",children:"Flat"}),e.jsx(Q,{value:"terraced",children:"Terraced"}),e.jsx(Q,{value:"semi-detached",children:"Semi-Detached"}),e.jsx(Q,{value:"detached",children:"Detached"}),e.jsx(Q,{value:"bungalow",children:"Bungalow"})]})]}),e.jsxs(Ce,{value:u.tenure,onValueChange:be,children:[e.jsx(_e,{className:"w-full",children:e.jsx(Ie,{placeholder:"Tenure"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"any",children:"Any Tenure"}),e.jsx(Q,{value:"freehold",children:"Freehold"}),e.jsx(Q,{value:"leasehold",children:"Leasehold"})]})]}),e.jsxs(Ce,{value:u.minBeds,onValueChange:Ee,children:[e.jsx(_e,{className:"w-full",children:e.jsx(Ie,{placeholder:"Min Bedrooms"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"0",children:"Any"}),[1,2,3,4,5].map(m=>e.jsxs(Q,{value:m.toString(),children:[m,"+ beds"]},m))]})]}),e.jsxs(Ce,{value:u.radius.toString(),onValueChange:T,children:[e.jsx(_e,{className:"w-full",children:e.jsx(Ie,{placeholder:"Search Radius"})}),e.jsx(ke,{children:[.25,.5,1,2,5,10].map(m=>e.jsxs(Q,{value:m.toString(),children:[m," miles"]},m))})]}),x==="listed"&&e.jsxs(Ce,{value:u.sortBy,onValueChange:_,children:[e.jsx(_e,{className:"w-full",children:e.jsx(Ie,{placeholder:"Sort By"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"most_recent_sale_date",children:"Most Recent Sale"}),e.jsx(Q,{value:"distance",children:"Distance"})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx(q,{type:"text",placeholder:"Enter location (postcode, city, street, etc.)",value:s,onChange:m=>a(m.target.value),className:"flex-1 h-12"}),e.jsx(P,{onClick:le,className:"h-12 px-8 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white hover:from-emerald-600 hover:to-cyan-600",disabled:t,children:t?e.jsx(et,{size:"sm"}):"Search"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:m=>E(m.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show price per sq.ft"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:m=>A(m.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show stamp duty"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:M,onChange:m=>F(m.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show planning applications"]})]})]})]}),t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(et,{size:"lg"})}):W.length>0?e.jsxs(e.Fragment,{children:[((as=h.askingPrices)==null?void 0:as.data)&&e.jsxs("div",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Area Insights for ",s]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-emerald-800 text-sm font-medium mb-2",children:"Average Asking Price"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:B(h.askingPrices.data.mean||0)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-800 text-sm font-medium mb-2",children:"Median Asking Price"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:B(h.askingPrices.data.median||0)})]}),((xs=(us=h.priceHistory)==null?void 0:us.data)==null?void 0:xs.trend_percentage)!==void 0&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-800 text-sm font-medium mb-2",children:"Price Trend (12 months)"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[h.priceHistory.data.trend_percentage.toFixed(1),"%"]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg text-gray-600",children:["Found ",g," ",x==="listed"?"listed":"sold"," properties"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map((m,C)=>e.jsx(O,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>V(m),children:x==="listed"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"aspect-video relative bg-gray-100",children:[m.image_url?e.jsx("img",{src:m.image_url,alt:m.address||"Property",className:"w-full h-full object-cover",loading:"lazy"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[e.jsx(Ke,{className:"h-12 w-12 text-gray-300"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No image available"})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("span",{className:"bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium",children:m.property_type}),m.new_build&&e.jsx("span",{className:"bg-emerald-500/90 text-white px-3 py-1 rounded-full text-sm font-medium",children:"New Build"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2 mb-2",children:m.address}),e.jsx("p",{className:"text-2xl font-bold mb-3 text-emerald-600",children:B(m.price||m.asking_price||m.last_sold_price||m.price_paid||m.latest_price||0)}),v&&m.price_per_sqft&&e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[B(m.price_per_sqft),"/sq.ft",m.size_sq_feet&&` · ${m.size_sq_feet} sq.ft`,m.size_sq_meters&&` · ${m.size_sq_meters} m²`]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{children:m.bedrooms||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:m.postcode})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:m.tenure||"N/A"})]})]}),L&&m.stamp_duty!==void 0&&e.jsx("div",{className:"mt-2 mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stamp Duty:"}),e.jsx("span",{className:"font-medium",children:B(m.stamp_duty)})]})}),(m.estimated_rent||m.rental_yield||m.roi||m.estimated_growth)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Investment Potential"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[m.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"Est. Rent"}),e.jsxs("p",{className:"text-blue-600 font-bold",children:[B(m.estimated_rent),"/mo"]})]}),m.rental_yield&&e.jsxs("div",{className:"bg-emerald-50 p-2 rounded",children:[e.jsx("p",{className:"text-emerald-800 font-medium",children:"Yield"}),e.jsxs("p",{className:"text-emerald-600 font-bold",children:[m.rental_yield.toFixed(1),"%"]})]}),m.roi&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"5yr ROI"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[m.roi.toFixed(1),"%"]})]}),m.estimated_growth&&e.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"Growth"}),e.jsxs("p",{className:"text-amber-600 font-bold",children:[m.estimated_growth.toFixed(1),"%"]})]})]})]})]})]}):e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2 mb-2",children:m.address}),e.jsx("p",{className:"text-2xl font-bold mb-3 text-emerald-600",children:B(m.sale_price||m.price||m.price_paid||0)}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:m.postcode})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:m.property_type})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsxs("span",{children:["Sold: ",new Date(m.date_of_transfer).toLocaleDateString()]})]}),m.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsxs("span",{children:[m.bedrooms," beds"]})]})]}),L&&m.stamp_duty!==void 0&&e.jsx("div",{className:"mt-2 mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stamp Duty:"}),e.jsx("span",{className:"font-medium",children:B(m.stamp_duty)})]})}),(m.estimated_rent||m.rental_yield||m.roi||m.estimated_growth)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Investment Potential"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[m.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"Est. Rent"}),e.jsxs("p",{className:"text-blue-600 font-bold",children:[B(m.estimated_rent),"/mo"]})]}),m.rental_yield&&e.jsxs("div",{className:"bg-emerald-50 p-2 rounded",children:[e.jsx("p",{className:"text-emerald-800 font-medium",children:"Yield"}),e.jsxs("p",{className:"text-emerald-600 font-bold",children:[m.rental_yield.toFixed(1),"%"]})]}),m.roi&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"5yr ROI"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[m.roi.toFixed(1),"%"]})]}),m.estimated_growth&&e.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"Growth"}),e.jsxs("p",{className:"text-amber-600 font-bold",children:[m.estimated_growth.toFixed(1),"%"]})]})]})]})]})},`${m.address}-${C}`))}),j>1&&e.jsxs("div",{className:"mt-8 flex justify-center gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>d(m=>({...m,page:Math.max(1,m.page-1)})),disabled:u.page===1,children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4",children:["Page ",u.page," of ",j]}),e.jsx(P,{variant:"outline",onClick:()=>d(m=>({...m,page:Math.min(j,m.page+1)})),disabled:u.page===j,children:"Next"})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-600",children:["No ",x," properties found. Try adjusting your search criteria."]})})]}),e.jsx(re,{})]})}const eo=()=>{const[s,a]=c.useState(25e4),[t,r]=c.useState(5e4),[n,l]=c.useState(4.5),[i,f]=c.useState(25),[h,N]=c.useState(null),[x,p]=c.useState(null),[g,y]=c.useState(null),j=()=>{const w=s-t,u=n/100/12,d=i*12,v=Math.pow(1+u,d),E=w*v*u/(v-1),L=E*d,A=L-w;N(E),p(L),y(A)},D=(s-t)/s*100;return e.jsxs(O,{className:"w-full",children:[e.jsx(Y,{children:e.jsxs(ue,{className:"flex items-center text-xl font-semibold",children:[e.jsx(qa,{className:"mr-2 h-5 w-5"}),"Mortgage Payment Calculator"]})}),e.jsx(z,{className:"grid gap-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"property-value",children:"Property Value"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",s.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"property-value",min:5e4,max:2e6,step:5e3,defaultValue:[s],onValueChange:w=>a(w[0])})]}),e.jsx(q,{type:"number",value:s,onChange:w=>a(Number(w.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"deposit",children:"Deposit"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",t.toLocaleString()," (",D.toFixed(1),"% LTV)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"deposit",min:0,max:s,step:5e3,defaultValue:[t],onValueChange:w=>r(w[0])})]}),e.jsx(q,{type:"number",value:t,onChange:w=>r(Number(w.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"interest-rate",children:"Interest Rate"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[n,"%"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(In,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"interest-rate",min:.1,max:15,step:.1,defaultValue:[n],onValueChange:w=>l(w[0])})]}),e.jsx(q,{type:"number",value:n,onChange:w=>l(Number(w.target.value)),className:"mt-2",step:.1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"mortgage-term",children:"Mortgage Term"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i," years"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(De,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"mortgage-term",min:5,max:40,step:1,defaultValue:[i],onValueChange:w=>f(w[0])})]}),e.jsx(q,{type:"number",value:i,onChange:w=>f(Number(w.target.value)),className:"mt-2"})]}),e.jsx(P,{onClick:j,className:"w-full mt-4",children:"Calculate"})]}),e.jsxs("div",{className:"space-y-6",children:[h!==null&&e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Mortgage Summary"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Loan Amount:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",(s-t).toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Monthly Payment:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",h.toFixed(2)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Repayment:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",x==null?void 0:x.toFixed(2)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Interest:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",g==null?void 0:g.toFixed(2)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-4 border-t",children:[e.jsx("div",{className:"text-muted-foreground",children:"Loan to Value (LTV):"}),e.jsxs("div",{className:"text-right font-medium",children:[D.toFixed(1),"%"]})]})]})]}),e.jsx(O,{children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground list-disc pl-5",children:[e.jsx("li",{children:"A higher deposit lowers your monthly payments and improves rates."}),e.jsx("li",{children:"Shorter mortgage terms have higher monthly payments but less total interest."}),e.jsx("li",{children:"Most lenders offer better rates for LTV under 75%."}),e.jsx("li",{children:"Consider fees and early repayment charges when comparing mortgages."})]})]})})]})]})})]})},Is=c.forwardRef(({className:s,...a},t)=>e.jsx(Ba,{ref:t,className:I("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(An,{className:I("flex items-center justify-center text-current"),children:e.jsx(oa,{className:"h-4 w-4"})})}));Is.displayName=Ba.displayName;const so=()=>{const[s,a]=c.useState(3e5),[t,r]=c.useState(!1),[n,l]=c.useState(!1),[i,f]=c.useState(!1),[h,N]=c.useState(null),[x,p]=c.useState([]),g=()=>{let y=[],j=0,D=[];t?y=[{start:0,end:425e3,rate:0},{start:425e3,end:625e3,rate:.05},{start:625e3,end:null,rate:.05}]:y=[{start:0,end:25e4,rate:0},{start:25e4,end:925e3,rate:.05},{start:925e3,end:15e5,rate:.1},{start:15e5,end:null,rate:.12}];const w=n?.03:0,u=i?.02:0;let d=s;y.forEach(v=>{if(d>0){const E=v.end?v.end-v.start:d,L=Math.min(d,E),A=v.rate+w+u,M=L*A;if(M>0){const F=v.end?`£${v.start.toLocaleString()} - £${v.end.toLocaleString()}`:`Over £${v.start.toLocaleString()}`;D.push({band:`${F} @ ${(A*100).toFixed(1)}%`,tax:M})}j+=M,d-=L}}),N(j),p(D)};return e.jsxs(O,{className:"w-full",children:[e.jsx(Y,{children:e.jsxs(ue,{className:"flex items-center text-xl font-semibold",children:[e.jsx(qa,{className:"mr-2 h-5 w-5"}),"Stamp Duty Land Tax Calculator"]})}),e.jsx(z,{className:"grid gap-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"property-value",children:"Property Value"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",s.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"property-value",min:4e4,max:2e6,step:5e3,defaultValue:[s],onValueChange:y=>a(y[0])})]}),e.jsx(q,{type:"number",value:s,onChange:y=>a(Number(y.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{id:"first-time-buyer",checked:t,onCheckedChange:y=>{r(y===!0),y&&l(!1)}}),e.jsx(U,{htmlFor:"first-time-buyer",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"First-time buyer"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{id:"additional-property",checked:n,onCheckedChange:y=>{l(y===!0),y&&r(!1)},disabled:t}),e.jsx(U,{htmlFor:"additional-property",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Additional property (3% surcharge)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{id:"non-uk-resident",checked:i,onCheckedChange:y=>f(y===!0)}),e.jsx(U,{htmlFor:"non-uk-resident",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Non-UK resident (2% surcharge)"})]})]}),e.jsx(P,{onClick:g,className:"w-full mt-4",children:"Calculate Stamp Duty"})]}),e.jsxs("div",{className:"space-y-6",children:[h!==null&&e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Stamp Duty Summary"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsxs("div",{className:"text-lg font-semibold text-center",children:["Total Stamp Duty: £",h.toFixed(2)]})}),x.length>0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Breakdown:"}),x.map((y,j)=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-muted-foreground",children:y.band}),e.jsxs("div",{className:"text-right",children:["£",y.tax.toFixed(2)]})]},j))]})]})]}),e.jsx(O,{children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Notes"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground list-disc pl-5",children:[e.jsx("li",{children:"First-time buyers get relief on properties up to £625,000."}),e.jsx("li",{children:"Additional properties incur a 3% surcharge on all bands."}),e.jsx("li",{children:"Non-UK residents pay an additional 2% on all bands."}),e.jsx("li",{children:"This is for standard residential property in England and Northern Ireland."}),e.jsx("li",{children:"Different rates apply in Scotland and Wales."})]})]})})]})]})})]})},to=()=>{const[s,a]=c.useState(25e4),[t,r]=c.useState(1200),[n,l]=c.useState(2e3),[i,f]=c.useState(null),[h,N]=c.useState(null),x=()=>{const p=t*12,g=p/s*100,y=(p-n)/s*100;f(g),N(y)};return e.jsxs(O,{className:"w-full",children:[e.jsx(Y,{children:e.jsxs(ue,{className:"flex items-center text-xl font-semibold",children:[e.jsx(Rn,{className:"mr-2 h-5 w-5"}),"Rental Yield Calculator"]})}),e.jsx(z,{className:"grid gap-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"property-value",children:"Property Value"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",s.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"property-value",min:5e4,max:1e6,step:5e3,defaultValue:[s],onValueChange:p=>a(p[0])})]}),e.jsx(q,{type:"number",value:s,onChange:p=>a(Number(p.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"monthly-rent",children:"Monthly Rent"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",t]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"monthly-rent",min:200,max:5e3,step:50,defaultValue:[t],onValueChange:p=>r(p[0])})]}),e.jsx(q,{type:"number",value:t,onChange:p=>r(Number(p.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"annual-expenses",children:"Annual Expenses"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",n]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"annual-expenses",min:0,max:1e4,step:100,defaultValue:[n],onValueChange:p=>l(p[0])})]}),e.jsx(q,{type:"number",value:n,onChange:p=>l(Number(p.target.value)),className:"mt-2"})]}),e.jsx(P,{onClick:x,className:"w-full mt-4",children:"Calculate Yield"})]}),e.jsxs("div",{className:"space-y-6",children:[i!==null&&e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Yield Results"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Annual Rental Income:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",(t*12).toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Annual Expenses:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",n.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-4 border-t",children:[e.jsx("div",{className:"text-muted-foreground",children:"Gross Yield:"}),e.jsxs("div",{className:"text-right font-medium",children:[i.toFixed(2),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Net Yield:"}),e.jsxs("div",{className:"text-right font-medium",children:[h.toFixed(2),"%"]})]})]})]}),e.jsx(O,{children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"What Makes a Good Yield?"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground list-disc pl-5",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Below 3%:"})," Generally considered low yield"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"3-5%:"})," Average yield in expensive areas like London"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"5-7%:"})," Good yield for most UK locations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Above 7%:"})," Excellent yield, but check location quality"]})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[e.jsx("p",{children:"Remember to include all expenses when calculating net yield:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-2",children:[e.jsx("li",{children:"Management fees"}),e.jsx("li",{children:"Maintenance costs"}),e.jsx("li",{children:"Insurance"}),e.jsx("li",{children:"Service charges"}),e.jsx("li",{children:"Void periods"})]})]})]})})]})]})})]})},ao=()=>{const[s,a]=c.useState(25e4),[t,r]=c.useState(25e3),[n,l]=c.useState(2500),[i,f]=c.useState(3e3),[h,N]=c.useState(1200),[x,p]=c.useState(2400),[g,y]=c.useState(5),[j,D]=c.useState(3),[w,u]=c.useState("cash"),[d,v]=c.useState(62500),[E,L]=c.useState(4.5),[A,M]=c.useState(25),[F,o]=c.useState(null),b=()=>{const k=w==="cash"?s+t+n+i:d+t+n+i,$=h*12;let W=0;if(w==="mortgage"){const T=s-d,_=E/100/12,V=A*12,X=Math.pow(1+_,V);W=T*X*_/(X-1)*12}const Z=$-x-W,oe=Z/k*100,le=s*Math.pow(1+j/100,g);let K=0;if(w==="mortgage"){const T=s-d,_=E/100/12,V=A*12,X=T*Math.pow(1+_,V)*_/(Math.pow(1+_,V)-1);let re=T;for(let as=0;as<g*12;as++){const us=re*_,xs=X-us;re-=xs}K=Math.max(0,re)}const me=Z*g,pe=le-s-K,Se=me+pe,be=Se/k*100,Ee=Math.pow(1+be/100,1/g)-1;o({totalInvestment:k,cashFlow:Z,cashOnCashReturn:oe,estimatedSalePrice:le,totalProfit:Se,totalROI:be,annualizedROI:Ee*100})};return e.jsxs(O,{className:"w-full",children:[e.jsx(Y,{children:e.jsxs(ue,{className:"flex items-center text-xl font-semibold",children:[e.jsx(es,{className:"mr-2 h-5 w-5"}),"Return on Investment (ROI) Calculator"]})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Property Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"purchase-price",children:"Purchase Price"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"purchase-price",type:"number",value:s,onChange:k=>a(Number(k.target.value)),className:"rounded-l-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"renovation-cost",children:"Renovation Cost"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"renovation-cost",type:"number",value:t,onChange:k=>r(Number(k.target.value)),className:"rounded-l-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"stamp-duty",children:"Stamp Duty"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"stamp-duty",type:"number",value:n,onChange:k=>l(Number(k.target.value)),className:"rounded-l-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"other-costs",children:"Other Costs (Legal, Survey, etc.)"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"other-costs",type:"number",value:i,onChange:k=>f(Number(k.target.value)),className:"rounded-l-none"})]})]}),e.jsx("h3",{className:"text-lg font-medium pt-4",children:"Rental Income & Expenses"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"monthly-rent",children:"Monthly Rent"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"monthly-rent",type:"number",value:h,onChange:k=>N(Number(k.target.value)),className:"rounded-l-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"annual-expenses",children:"Annual Expenses"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"annual-expenses",type:"number",value:x,onChange:k=>p(Number(k.target.value)),className:"rounded-l-none"})]})]}),e.jsx("h3",{className:"text-lg font-medium pt-4",children:"Investment Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"financing-method",children:"Financing Method"}),e.jsxs(Ce,{defaultValue:w,onValueChange:k=>u(k),children:[e.jsx(_e,{id:"financing-method",children:e.jsx(Ie,{placeholder:"Select financing method"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"cash",children:"Cash Purchase"}),e.jsx(Q,{value:"mortgage",children:"Mortgage"})]})]})]}),w==="mortgage"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"mortgage-deposit",children:"Mortgage Deposit"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"mortgage-deposit",type:"number",value:d,onChange:k=>v(Number(k.target.value)),className:"rounded-l-none"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[(d/s*100).toFixed(1),"% of purchase price"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"interest-rate",children:"Interest Rate (%)"}),e.jsx(q,{id:"interest-rate",type:"number",value:E,onChange:k=>L(Number(k.target.value)),step:.1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"mortgage-term",children:"Mortgage Term (years)"}),e.jsx(q,{id:"mortgage-term",type:"number",value:A,onChange:k=>M(Number(k.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"holding-period",children:"Investment Holding Period (years)"}),e.jsx(q,{id:"holding-period",type:"number",value:g,onChange:k=>y(Number(k.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"annual-appreciation",children:"Annual Property Appreciation (%)"}),e.jsx(q,{id:"annual-appreciation",type:"number",value:j,onChange:k=>D(Number(k.target.value)),step:.1})]}),e.jsx(P,{onClick:b,className:"w-full mt-4",children:"Calculate ROI"})]}),e.jsxs("div",{className:"space-y-6",children:[F&&e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium",children:"ROI Summary"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Investment:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",F.totalInvestment.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Annual Cash Flow:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",F.cashFlow.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Cash-on-Cash Return:"}),e.jsxs("div",{className:"text-right font-medium",children:[F.cashOnCashReturn.toFixed(2),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-4 border-t",children:[e.jsx("div",{className:"text-muted-foreground",children:"Estimated Sale Price:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",F.estimatedSalePrice.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Profit:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",F.totalProfit.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-4 border-t font-bold",children:[e.jsx("div",{children:"Total ROI:"}),e.jsxs("div",{className:"text-right",children:[F.totalROI.toFixed(2),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 font-bold",children:[e.jsx("div",{children:"Annualized ROI:"}),e.jsxs("div",{className:"text-right",children:[F.annualizedROI.toFixed(2),"%"]})]})]})]}),e.jsx(O,{children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"ROI Explained"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground list-disc pl-5",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Cash-on-Cash Return:"})," Annual cash flow divided by your initial investment."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Total ROI:"})," Total profit (cash flow + equity gain) as a percentage of your investment."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Annualized ROI:"})," The yearly rate of return that would give you the total ROI over the holding period."]})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[e.jsx("p",{children:"For buy-to-let investments, aim for:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-2",children:[e.jsx("li",{children:"Cash-on-Cash Return: 5-8%"}),e.jsx("li",{children:"Total ROI: 40%+ over 5 years"}),e.jsx("li",{children:"Annualized ROI: 7%+"})]})]})]})})]})]})})]})},ro=()=>{const[s,a]=c.useState(6e4),[t,r]=c.useState(0),[n,l]=c.useState(4e4),[i,f]=c.useState(500),[h,N]=c.useState(4.5),[x,p]=c.useState(25),[g,y]=c.useState(4.5),[j,D]=c.useState(null),w=()=>{const u=s+t,d=u*g,v=d+n,E=h/100/12,L=x*12,A=Math.pow(1+E,L),M=d*A*E/(A-1),F=u/12,o=M/F*100,b=(h+3)/100/12,k=Math.pow(1+b,L),$=d*k*b/(k-1);D({maxMortgage:d,maxPropertyPrice:v,monthlyPayment:M,affordabilityRatio:o,stressTestedPayment:$})};return e.jsxs(O,{className:"w-full",children:[e.jsx(Y,{children:e.jsxs(ue,{className:"flex items-center text-xl font-semibold",children:[e.jsx(Mn,{className:"mr-2 h-5 w-5"}),"Mortgage Affordability Calculator"]})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Income Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"annual-income",children:"Your Annual Income"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",s.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"annual-income",min:1e4,max:2e5,step:1e3,defaultValue:[s],onValueChange:u=>a(u[0])})]}),e.jsx(q,{type:"number",value:s,onChange:u=>a(Number(u.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"additional-income",children:"Additional Annual Income (e.g., partner)"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"additional-income",type:"number",value:t,onChange:u=>r(Number(u.target.value)),className:"rounded-l-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"deposit",children:"Deposit Available"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["£",n.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(je,{id:"deposit",min:0,max:2e5,step:5e3,defaultValue:[n],onValueChange:u=>l(u[0])})]}),e.jsx(q,{type:"number",value:n,onChange:u=>l(Number(u.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"monthly-debts",children:"Monthly Debt Payments"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"flex items-center bg-muted px-3 rounded-l-md",children:"£"}),e.jsx(q,{id:"monthly-debts",type:"number",value:i,onChange:u=>f(Number(u.target.value)),className:"rounded-l-none"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Include credit cards, loans, car finance, etc."})]}),e.jsx("h3",{className:"text-lg font-medium pt-4",children:"Mortgage Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"interest-rate",children:"Interest Rate (%)"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h,"%"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(je,{id:"interest-rate",min:1,max:10,step:.1,defaultValue:[h],onValueChange:u=>N(u[0])})}),e.jsx(q,{type:"number",value:h,onChange:u=>N(Number(u.target.value)),className:"mt-2",step:.1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{htmlFor:"mortgage-term",children:"Mortgage Term (years)"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x," years"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(je,{id:"mortgage-term",min:5,max:40,step:1,defaultValue:[x],onValueChange:u=>p(u[0])})}),e.jsx(q,{type:"number",value:x,onChange:u=>p(Number(u.target.value)),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"loan-to-income",children:"Loan to Income Multiple"}),e.jsxs(Ce,{defaultValue:g.toString(),onValueChange:u=>y(Number(u)),children:[e.jsx(_e,{id:"loan-to-income",children:e.jsx(Ie,{placeholder:"Select loan to income multiple"})}),e.jsxs(ke,{children:[e.jsx(Q,{value:"4",children:"4.0x income"}),e.jsx(Q,{value:"4.5",children:"4.5x income"}),e.jsx(Q,{value:"5",children:"5.0x income"}),e.jsx(Q,{value:"5.5",children:"5.5x income"}),e.jsx(Q,{value:"6",children:"6.0x income"})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Lenders typically offer between 4-6x your annual income"})]}),e.jsx(P,{onClick:w,className:"w-full mt-4",children:"Calculate Affordability"})]}),e.jsxs("div",{className:"space-y-6",children:[j&&e.jsxs("div",{className:"rounded-lg border p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Affordability Results"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center py-4 border-b",children:[e.jsx("div",{className:"text-muted-foreground text-sm",children:"Maximum Property Price"}),e.jsxs("div",{className:"text-3xl font-bold mt-1",children:["£",j.maxPropertyPrice.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Maximum Mortgage:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",j.maxMortgage.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Monthly Payment:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",j.monthlyPayment.toFixed(2)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-muted-foreground",children:"Affordability Ratio:"}),e.jsxs("div",{className:"text-right font-medium",children:[j.affordabilityRatio.toFixed(1),"%",e.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${j.affordabilityRatio<=35?"bg-green-100 text-green-800":j.affordabilityRatio<=45?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j.affordabilityRatio<=35?"Good":j.affordabilityRatio<=45?"Moderate":"High"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-4 border-t",children:[e.jsx("div",{className:"text-muted-foreground",children:"Stress Tested Payment:"}),e.jsxs("div",{className:"text-right font-medium",children:["£",j.stressTestedPayment.toFixed(2)]}),e.jsx("div",{className:"col-span-2 text-xs text-muted-foreground",children:"(Monthly payment if rates increase by 3%)"})]})]})]}),e.jsx(O,{children:e.jsxs(z,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Lender Requirements"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground list-disc pl-5",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Affordability Ratio:"})," Most lenders prefer this to be below 35% of your gross monthly income."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Debt-to-Income Ratio:"})," Your total debt payments (including mortgage) should ideally be below 45% of income."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Stress Testing:"})," Lenders will check if you can afford payments if interest rates rise by 3%."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Deposit:"})," Higher deposits (15%+) typically secure better interest rates."]})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium",children:"Additional costs to consider:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-2",children:[e.jsx("li",{children:"Stamp Duty Land Tax"}),e.jsx("li",{children:"Legal fees (typically £1,000-£1,500)"}),e.jsx("li",{children:"Surveyor fees (£400-£1,500)"}),e.jsx("li",{children:"Mortgage arrangement fees (£0-£2,000)"}),e.jsx("li",{children:"Moving costs"})]})]})]})})]})]})})]})},no=()=>(c.useEffect(()=>{console.log("Calculators page mounted - HeroSection should render")},[]),e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("div",{className:"w-full",children:e.jsx(Ne,{title:"Property Investment Calculators",subtitle:"Powerful tools to analyze investments, calculate mortgage payments, and estimate potential returns",showSearch:!1,showStats:!1,height:"h-[400px]"})}),e.jsx("div",{className:"container mx-auto px-4 py-12 mt-6",children:e.jsxs(Ge,{defaultValue:"mortgage",className:"w-full",children:[e.jsx(Ve,{className:"w-full mb-8",children:e.jsxs("div",{className:"grid w-full grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-2",children:[e.jsx(ie,{value:"mortgage",className:"w-full",children:"Mortgage"}),e.jsx(ie,{value:"stampduty",className:"w-full",children:"Stamp Duty"}),e.jsx(ie,{value:"yield",className:"w-full",children:"Rental Yield"}),e.jsx(ie,{value:"roi",className:"w-full",children:"ROI"}),e.jsx(ie,{value:"affordability",className:"w-full",children:"Affordability"})]})}),e.jsx(se,{value:"mortgage",className:"mt-6",children:e.jsx(eo,{})}),e.jsx(se,{value:"stampduty",className:"mt-6",children:e.jsx(so,{})}),e.jsx(se,{value:"yield",className:"mt-6",children:e.jsx(to,{})}),e.jsx(se,{value:"roi",className:"mt-6",children:e.jsx(ao,{})}),e.jsx(se,{value:"affordability",className:"mt-6",children:e.jsx(ro,{})})]})})]}));function io(){const[s,a]=c.useState(!0),t=En(),{user:r,profile:n,signOut:l,refreshSession:i}=te();return c.useEffect(()=>{console.log("Auth state in App:",{user:r,profile:n}),i()},[]),c.useEffect(()=>{const f=()=>a(!0),h=()=>a(!1);f();const N=setTimeout(h,100);return()=>clearTimeout(N)},[t.pathname]),c.useEffect(()=>{document.documentElement.classList.remove("dark")},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(hs,{isAuthenticated:!!r,userProfile:n||void 0,onSignIn:()=>{},onSignUp:()=>{},onSignOut:l}),e.jsx("main",{children:e.jsxs(Tn,{children:[e.jsx(ae,{path:"/",element:e.jsx(Li,{})}),e.jsx(ae,{path:"/listings",element:e.jsx(Ql,{})}),e.jsx(ae,{path:"/deals",element:e.jsx(Vl,{})}),e.jsx(ae,{path:"/trends",element:e.jsx(jl,{})}),e.jsx(ae,{path:"/insights",element:e.jsx(cl,{})}),e.jsx(ae,{path:"/calculators",element:e.jsx(no,{})}),e.jsx(ae,{path:"/profile",element:e.jsx(At,{})}),e.jsx(ae,{path:"/login",element:e.jsx(Dn,{to:"/",replace:!0})}),e.jsx(ae,{path:"/dashboard",element:e.jsx(Gi,{})}),e.jsx(ae,{path:"/pricing",element:e.jsx(Hi,{})}),e.jsx(ae,{path:"/subscription/success",element:e.jsx(Ki,{})}),e.jsx(ae,{path:"/subscription/cancel",element:e.jsx(Yi,{})}),e.jsx(ae,{path:"/account",element:e.jsx(At,{})}),e.jsx(ae,{path:"/research",element:e.jsx(kl,{})}),e.jsx(ae,{path:"/blog",element:e.jsx(Cl,{})}),e.jsx(ae,{path:"/article/:title",element:e.jsx(Lt,{})}),e.jsx(ae,{path:"/blog/:slug",element:e.jsx(Lt,{})}),e.jsx(ae,{path:"/help",element:e.jsx(Il,{})}),e.jsx(ae,{path:"/auth/callback",element:e.jsx(Tl,{})}),e.jsx(ae,{path:"/property-management",element:e.jsx(Fl,{})}),e.jsx(ae,{path:"/investment-opportunities",element:e.jsx(ql,{})}),e.jsx(ae,{path:"/about-us",element:e.jsx(Bl,{})}),e.jsx(ae,{path:"/messages",element:e.jsx(Kl,{})}),!1,e.jsx(ae,{path:"*",element:e.jsx(Xi,{})})]})}),e.jsx(El,{}),e.jsx(Jn,{}),e.jsx(ei,{isAnimating:s})]})}function lo(){return e.jsx(Ja,{children:e.jsx(c.Suspense,{fallback:e.jsx(Qn,{}),children:e.jsx(io,{})})})}Ln.TempoDevtools.init();Fn.init("phc_Pg1VGdZoazG7KyDNxnUXNZZz6zPVrGNSRtFlDnlZCcA",{api_host:"https://eu.i.posthog.com",person_profiles:"identified_only"});const oo=new On;$n.createRoot(document.getElementById("root")).render(e.jsx(S.StrictMode,{children:e.jsx(zn,{client:oo,children:e.jsx(qn,{children:e.jsx(Ja,{children:e.jsx(lo,{})})})})}));
//# sourceMappingURL=index-BK-ukUH6.js.map
