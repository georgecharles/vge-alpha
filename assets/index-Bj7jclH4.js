import{t as Ka,c as Ja,r as d,j as e,S as Za,a as Ge,R as j,L as Ms,A as us,b as ft,V as gt,d as jt,e as vt,C as yt,f as bt,T as Nt,D as wt,P as Xa,g as _t,h as Qa,i as er,k as St,l as sr,m as tr,n as ds,X as Ts,o as kt,p as Pt,q as Ct,s as Ls,u as It,v as At,I as Et,w as ar,x as rr,y as Rt,z as Mt,F as Tt,B as Lt,E as nr,G as Dt,H as ir,J as Ft,K as Ot,M as $t,N as Ut,O as zt,Q as qt,U as or,W as Bt,Y as Gt,Z as lr,_ as cr,$ as be,a0 as dr,a1 as Vt,a2 as ks,a3 as Ps,a4 as Qs,a5 as et,a6 as Ke,a7 as st,a8 as mr,a9 as ur,aa as Wt,ab as Yt,ac as tt,ad as Ht,ae as Kt,af as Jt,ag as Zt,ah as Xt,ai as Qt,aj as hr,ak as at,al as pr,am as rt,an as nt,ao as it,ap as ot,aq as xr,ar as fr,as as lt,at as vs,au as Ds,av as Ie,aw as Te,ax as ea,ay as gr,az as sa,aA as jr,aB as ta,aC as aa,aD as vr,aE as yr,aF as ra,aG as br,aH as na,aI as Nr,aJ as wr,aK as _r,aL as Sr,aM as kr,aN as ia,aO as oa,aP as Pr,aQ as ze,aR as is,aS as Cr,aT as Cs,aU as la,aV as Ir,aW as Ar,aX as Er,aY as Rr,aZ as Ye,a_ as ca,a$ as Mr,b0 as da,b1 as Tr,b2 as ma,b3 as Lr,b4 as Dr,b5 as Fr,b6 as Or,b7 as $r,b8 as Ur,b9 as os,ba as ua,bb as ha,bc as zr,bd as qr,be as pa,bf as Br,bg as xa,bh as Gr,bi as fa,bj as Vr,bk as ga,bl as Wr,bm as ja,bn as va,bo as Yr,bp as Hr,bq as ya,br as Kr,bs as Jr,bt as ba,bu as Zr,bv as Xr,bw as Qr,bx as en,by as sn,bz as tn,bA as an,bB as rn,bC as nn,bD as on,bE as ln,bF as cn,bG as dn,bH as mn,bI as ee,bJ as un,bK as hn,bL as pn,bM as xn,bN as fn,bO as gn}from"./vendor-B2Hn3sqI.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();function C(...s){return Ka(Ja(s))}function V(s){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}const q=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:C("rounded-xl border bg-card text-card-foreground shadow",s),...a}));q.displayName="Card";const K=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:C("flex flex-col space-y-1.5 p-6",s),...a}));K.displayName="CardHeader";const Se=d.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:C("font-semibold leading-none tracking-tight",s),...a}));Se.displayName="CardTitle";const jn=d.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:C("text-sm text-muted-foreground",s),...a}));jn.displayName="CardDescription";const G=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:C("p-6 pt-0",s),...a}));G.displayName="CardContent";const Na=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:C("flex items-center p-6 pt-0",s),...a}));Na.displayName="CardFooter";const B=d.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:C("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));B.displayName="Input";const vn=Ge("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=d.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...n},o)=>{const i=r?Za:"button";return e.jsx(i,{className:C(vn({variant:a,size:t,className:s})),ref:o,...n})});E.displayName="Button";function yn({onSuccess:s}){const[a,t]=j.useState(""),[r,n]=j.useState(!1),o=i=>{i.preventDefault(),a==="pestOnaPENTERpy123!"?(localStorage.setItem("password-protected","true"),s()):n(!0)};return e.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-background p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(45deg,transparent_25%,rgba(173,216,230,0.1)_25%,rgba(173,216,230,0.1)_50%,transparent_50%,transparent_75%,rgba(173,216,230,0.1)_75%)] bg-[length:20px_20px]"}),e.jsxs("div",{className:"relative z-10 max-w-lg w-full text-center mb-8",children:[e.jsx("img",{src:"https://i.postimg.cc/GpdY6N74/my-1920-x-1080-px-1.png",alt:"MyVGE",className:"h-16 mx-auto mb-4 invert-[0.4] sepia-[.75] saturate-[.6] hue-rotate-[130deg] brightness-[0.8] contrast-[.8]"}),e.jsx("p",{className:"text-xl text-muted-foreground font-light mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-muted-foreground",children:"An exclusive platform for property investment analysis and portfolio management"})]}),e.jsxs(q,{className:"w-full max-w-md relative z-10 bg-background/80 backdrop-blur-sm border-primary/20",children:[e.jsxs(K,{className:"text-center space-y-2 pb-4",children:[e.jsx(Ms,{className:"w-10 h-10 mx-auto text-primary"}),e.jsx("h2",{className:"text-2xl font-semibold",children:"Developer Preview"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Access restricted to invited developers and investors"})]}),e.jsx(G,{children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{type:"password",placeholder:"Enter access code",value:a,onChange:i=>{t(i.target.value),n(!1)},className:`bg-background/50 border-primary/20 ${r?"border-destructive":""}`}),r&&e.jsx("p",{className:"text-sm text-destructive",children:"Invalid access code"})]}),e.jsxs(E,{type:"submit",className:"w-full group",children:["Access Platform",e.jsx(us,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})})]}),e.jsxs("div",{className:"relative z-10 mt-8 text-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"Â© 2024 MyVGE. All rights reserved."}),e.jsx("p",{className:"mt-1",children:"Currently in private alpha testing"})]})]})}function bn({className:s}){return e.jsx("div",{className:C("flex items-center justify-center",s),children:e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})})}function Nn(){return null}const wn="https://zcuapuvvygahkzljuhyg.supabase.co",wa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdWFwdXZ2eWdhaGt6bGp1aHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MTQwMzcsImV4cCI6MjA1MzQ5MDAzN30.GIhphzkznmDXgrUApGW479uHHluqDWqy_9cfG5sU5Xc";console.log("Supabase Anon Key:",wa);const F=ft(wn,wa,{auth:{persistSession:!0,storage:window.localStorage,storageKey:"supabase.auth.token",autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"}}),_a=d.createContext(void 0),ct="https://myvge.com/auth/callback";function Sa({children:s}){const[a,t]=d.useState(null),[r,n]=d.useState(null),[o,i]=d.useState(!0),g=`
    *,
    subscription_tier,
    subscription_status,
    avatar_url
  `;async function m(v){try{console.log("Fetching profile for user:",v),console.log("Using Supabase URL:","https://zcuapuvvygahkzljuhyg.supabase.co");const{data:y,error:p}=await F.from("profiles").select(g).eq("id",v).single();if(p){console.error("Error fetching profile:",p),console.error("Supabase config:",{url:"https://zcuapuvvygahkzljuhyg.supabase.co",hasAnonKey:!0}),n(null);return}console.log("Fetched profile data:",y),n(y)}catch(y){console.error("Error fetching profile:",y),n(null)}}d.useEffect(()=>{let v=!0;(async()=>{try{const{data:{session:p},error:h}=await F.auth.getSession();if(h)throw h;if(v){if(p!=null&&p.user){t(p.user);const{data:A}=await F.from("profiles").select(g).eq("id",p.user.id).single();console.log("Initial profile load:",A),n(A)}i(!1)}const{data:{subscription:P}}=F.auth.onAuthStateChange(async(A,D)=>{if(console.log("Auth state change:",A,D),v){if(D!=null&&D.user){t(D.user);const{data:T}=await F.from("profiles").select(g).eq("id",D.user.id).single();console.log("Profile after auth change:",T),n(T)}else t(null),n(null);i(!1)}});return()=>{v=!1,P.unsubscribe()}}catch(p){console.error("Error initializing auth:",p),v&&i(!1)}})()},[]),d.useEffect(()=>{const v=async()=>{const{data:{session:y},error:p}=await F.auth.getSession();if(p&&console.error("Error getting session:",p),y!=null&&y.user){const{data:h}=await F.from("profiles").select(g).eq("id",y.user.id).single();console.log("Profile after Google redirect:",h),n(h)}};window.location.hash.includes("access_token")&&v()},[]),d.useEffect(()=>{(async()=>{if(!a){const{data:{session:y}}=await F.auth.getSession();y!=null&&y.user&&(t(y.user),await m(y.user.id))}})()},[a]);async function N(v,y,p,h){try{const{data:P,error:A}=await F.auth.signUp({email:v,password:y,options:{data:{first_name:p,last_name:h},emailRedirectTo:ct}});if(A)throw A;if(P.user){const{error:D}=await F.from("profiles").insert({id:P.user.id,email:v,full_name:`${p} ${h}`,role:"user",subscription_tier:"free",subscription_status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(D)throw console.error("Profile creation error:",D),D}}catch(P){throw console.error("Sign up error:",P),P}}async function u(v,y){try{const{data:p,error:h}=await F.auth.signInWithPassword({email:v,password:y});if(h)throw console.error("Sign in error details:",h),h.message.includes("Email not confirmed")?new Error("Please confirm your email address before signing in."):h;return p.user&&await m(p.user.id),p.user}catch(p){throw console.error("Sign in error:",p),p}}async function f(){try{const{error:v}=await F.auth.signInWithOAuth({provider:"google",options:{redirectTo:ct}});if(v)throw v}catch(v){throw console.error("Google sign-in error:",v),v}}async function x(){try{await F.auth.signOut(),t(null),n(null),window.localStorage.clear(),window.location.href="/"}catch(v){throw console.error("Sign out error:",v),v}}const S={user:a,profile:r,isLoading:o,signIn:u,signUp:N,signInWithGoogle:f,signOut:x,refreshProfile:async()=>{a&&await m(a.id)}};return e.jsx(_a.Provider,{value:S,children:s})}function Z(){const s=d.useContext(_a);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}const _n=Xa,ka=d.forwardRef(({className:s,...a},t)=>e.jsx(gt,{ref:t,className:C("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));ka.displayName=gt.displayName;const Sn=Ge("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Pa=d.forwardRef(({className:s,variant:a,...t},r)=>e.jsx(jt,{ref:r,className:C(Sn({variant:a}),s),...t}));Pa.displayName=jt.displayName;const kn=d.forwardRef(({className:s,...a},t)=>e.jsx(vt,{ref:t,className:C("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a}));kn.displayName=vt.displayName;const Ca=d.forwardRef(({className:s,...a},t)=>e.jsx(yt,{ref:t,className:C("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:e.jsx(bt,{className:"h-4 w-4"})}));Ca.displayName=yt.displayName;const Ia=d.forwardRef(({className:s,...a},t)=>e.jsx(Nt,{ref:t,className:C("text-sm font-semibold [&+div]:text-xs",s),...a}));Ia.displayName=Nt.displayName;const Aa=d.forwardRef(({className:s,...a},t)=>e.jsx(wt,{ref:t,className:C("text-sm opacity-90",s),...a}));Aa.displayName=wt.displayName;const Pn=1,Cn=1e6;let ys=0;function In(){return ys=(ys+1)%Number.MAX_SAFE_INTEGER,ys.toString()}const bs=new Map,dt=s=>{if(bs.has(s))return;const a=setTimeout(()=>{bs.delete(s),He({type:"REMOVE_TOAST",toastId:s})},Cn);bs.set(s,a)},An=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,Pn)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?dt(t):s.toasts.forEach(r=>{dt(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},ls=[];let cs={toasts:[]};function He(s){cs=An(cs,s),ls.forEach(a=>{a(cs)})}function En({...s}){const a=In(),t=n=>He({type:"UPDATE_TOAST",toast:{...n,id:a}}),r=()=>He({type:"DISMISS_TOAST",toastId:a});return He({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:n=>{n||r()}}}),{id:a,dismiss:r,update:t}}function he(){const[s,a]=d.useState(cs);return d.useEffect(()=>(ls.push(a),()=>{const t=ls.indexOf(a);t>-1&&ls.splice(t,1)}),[s]),{...s,toast:En,dismiss:t=>He({type:"DISMISS_TOAST",toastId:t})}}function Rn(){const{toasts:s}=he();return e.jsxs(_n,{children:[s.map(function({id:a,title:t,description:r,action:n,...o}){return e.jsxs(Pa,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(Ia,{children:t}),r&&e.jsx(Aa,{children:r})]}),n,e.jsx(Ca,{})]},a)}),e.jsx(ka,{})]})}const qe=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(_t,{ref:r,className:C("relative overflow-hidden",s),...t,children:[e.jsx(Qa,{className:"h-full w-full rounded-[inherit]",children:a}),e.jsx(Ea,{}),e.jsx(er,{})]}));qe.displayName=_t.displayName;const Ea=d.forwardRef(({className:s,orientation:a="vertical",...t},r)=>e.jsx(St,{ref:r,orientation:a,className:C("flex touch-none select-none transition-colors",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...t,children:e.jsx(sr,{className:"relative flex-1 rounded-full bg-border"})}));Ea.displayName=St.displayName;function Mn({isOpen:s,onClose:a,children:t}){return e.jsx(tr,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(ds.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm lg:hidden",onClick:a,style:{width:"100vw"}}),e.jsxs(ds.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:20,stiffness:300},className:C("fixed inset-y-0 right-0 z-50 w-full max-w-xs bg-white shadow-2xl lg:hidden","flex flex-col"),children:[e.jsxs("div",{className:"flex h-16 items-center justify-between border-b px-6",children:[e.jsx("a",{href:"/",className:"hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://i.postimg.cc/GpdY6N74/my-1920-x-1080-px-1.png",alt:"MyVGE",className:"h-8"})}),e.jsx(E,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full hover:bg-muted",onClick:r=>{r.stopPropagation(),a()},children:e.jsx(Ts,{className:"h-5 w-5"})})]}),e.jsx(qe,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col p-6 pb-16",children:[e.jsx("div",{className:"flex-1",children:t}),e.jsx("div",{className:"mt-auto pt-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Â© ",new Date().getFullYear()," MyVGE. All rights reserved."]})})]})})]})]})})}const Ra=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(kt,{ref:r,className:C("relative z-10 flex max-w-max flex-1 items-center justify-center",s),...t,children:[a,e.jsx(Ta,{})]}));Ra.displayName=kt.displayName;const Ma=d.forwardRef(({className:s,...a},t)=>e.jsx(Pt,{ref:t,className:C("group flex flex-1 list-none items-center justify-center space-x-1",s),...a}));Ma.displayName=Pt.displayName;const We=rr,Tn=Ge("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),Is=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ct,{ref:r,className:C(Tn(),"group",s),...t,children:[a," ",e.jsx(Ls,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));Is.displayName=Ct.displayName;const As=d.forwardRef(({className:s,...a},t)=>e.jsx(It,{ref:t,className:C("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",s),...a}));As.displayName=It.displayName;const as=ar,Ta=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{className:C("absolute left-0 top-full flex justify-center"),children:e.jsx(At,{className:C("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",s),ref:t,...a})}));Ta.displayName=At.displayName;const Ln=d.forwardRef(({className:s,...a},t)=>e.jsx(Et,{ref:t,className:C("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",s),...a,children:e.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));Ln.displayName=Et.displayName;const Le=d.forwardRef(({className:s,...a},t)=>e.jsx(Rt,{ref:t,className:C("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));Le.displayName=Rt.displayName;const De=d.forwardRef(({className:s,...a},t)=>e.jsx(Mt,{ref:t,className:C("aspect-square h-full w-full",s),...a}));De.displayName=Mt.displayName;const Fe=d.forwardRef(({className:s,...a},t)=>e.jsx(Tt,{ref:t,className:C("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a}));Fe.displayName=Tt.displayName;const Dn=lr,Fn=cr,On=d.forwardRef(({className:s,inset:a,children:t,...r},n)=>e.jsxs(Lt,{ref:n,className:C("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...r,children:[t,e.jsx(nr,{className:"ml-auto h-4 w-4"})]}));On.displayName=Lt.displayName;const $n=d.forwardRef(({className:s,...a},t)=>e.jsx(Dt,{ref:t,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));$n.displayName=Dt.displayName;const La=d.forwardRef(({className:s,sideOffset:a=4,...t},r)=>e.jsx(ir,{children:e.jsx(Ft,{ref:r,sideOffset:a,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t})}));La.displayName=Ft.displayName;const Oe=d.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(Ot,{ref:r,className:C("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...t}));Oe.displayName=Ot.displayName;const Un=d.forwardRef(({className:s,children:a,checked:t,...r},n)=>e.jsxs($t,{ref:n,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ut,{children:e.jsx(zt,{className:"h-4 w-4"})})}),a]}));Un.displayName=$t.displayName;const zn=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(qt,{ref:r,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ut,{children:e.jsx(or,{className:"h-4 w-4 fill-current"})})}),a]}));zn.displayName=qt.displayName;const qn=d.forwardRef(({className:s,inset:a,...t},r)=>e.jsx(Bt,{ref:r,className:C("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...t}));qn.displayName=Bt.displayName;const Es=d.forwardRef(({className:s,...a},t)=>e.jsx(Gt,{ref:t,className:C("-mx-1 my-1 h-px bg-muted",s),...a}));Es.displayName=Gt.displayName;const Bn=[{title:"Investment Deals",href:"/deals",icon:"ðŸ’¼",requiresAuth:!0},{title:"Listings",href:"/listings",icon:"ðŸ ",requiresAuth:!1},{title:"Market",items:[{title:"Market Trends",href:"/trends",description:"Stay updated with the latest real estate market trends",requiresAuth:!0},{title:"Market Insights",href:"/insights",description:"Deep dive into property market analytics",requiresAuth:!0},{title:"Research & Reports",href:"/research",description:"Access expert analysis and reports",requiresAuth:!1}],icon:"ðŸ“Š"},{title:"Services",items:[{title:"Property Management",href:"/property-management",description:"Let us take care of your property",requiresAuth:!0},{title:"Investment Opportunities",href:"/investment-opportunities",description:"Discover tailored investment strategies",requiresAuth:!0},{title:"Calculators",href:"/calculators",description:"Calculate your property investment",requiresAuth:!1}],icon:"ðŸ "},{title:"Messages",href:"/messages",icon:"ðŸ’¬",requiresAuth:!0},{title:"Pricing",href:"/pricing",icon:"ðŸ’Ž",requiresAuth:!1},{title:"Support",href:"/help",icon:"â“",requiresAuth:!1},{title:"About Us",href:"/about-us",icon:"â„¹ï¸",requiresAuth:!1}];function Je({isAuthenticated:s=!1,onSignIn:a,onSignUp:t,userProfile:r={}}){var k,S;const[n,o]=j.useState(!1),[i,g]=j.useState(!1),m=be(),{signOut:N,isLoading:u}=Z();j.useEffect(()=>{const v=()=>{g(window.scrollY>20)};return window.addEventListener("scroll",v),()=>window.removeEventListener("scroll",v)},[]);const f=async()=>{console.log("Sign out button clicked");try{await N(),m("/")}catch(v){console.error("Error signing out:",v)}},x=j.forwardRef(({className:v,title:y,children:p,...h},P)=>e.jsx("li",{children:e.jsx(as,{asChild:!0,children:e.jsxs("a",{ref:P,className:C("block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",v??""),...h,children:[e.jsx("div",{className:"text-sm font-medium leading-none",children:y}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:p})]})})}));return x.displayName="ListItem",u?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("header",{className:C("fixed top-0 left-0 right-0 z-50 transition-all duration-300",i?"py-2":"py-4"),children:e.jsx("div",{className:"px-4 mx-auto max-w-7xl",children:e.jsx("div",{className:C("rounded-full bg-white border transition-all duration-300",i?"shadow-md border-gray-200/50 backdrop-blur-md bg-white/90":"shadow-sm border-transparent"),children:e.jsxs("div",{className:"h-16 px-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("a",{href:"/",className:"hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://i.postimg.cc/GpdY6N74/my-1920-x-1080-px-1.png",alt:"MyVGE",className:"h-8"})}),e.jsx(Ra,{className:"hidden lg:flex",children:e.jsxs(Ma,{className:"gap-2",children:[e.jsxs(We,{children:[e.jsx(Is,{className:C("text-sm font-medium rounded-full px-4","bg-transparent hover:bg-gray-100 transition-colors","data-[state=open]:bg-gray-100"),children:"Market"}),e.jsx(As,{children:e.jsxs("ul",{className:"w-[400px] gap-3 p-4 rounded-2xl",children:[s?e.jsxs(e.Fragment,{children:[e.jsx(x,{href:"/trends",title:"Market Trends",children:"Stay updated with the latest real estate market trends."}),e.jsx(x,{href:"/insights",title:"Market Insights",children:"Deep dive into property market analytics and forecasts."})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{href:"#",onClick:v=>{v.preventDefault(),a==null||a()},title:"Market Trends",children:"Sign in to access market trends."}),e.jsx(x,{href:"#",onClick:v=>{v.preventDefault(),a==null||a()},title:"Market Insights",children:"Sign in to access market insights."})]}),e.jsx(x,{href:"/research",title:"Research & Reports",children:"Access expert analysis and reports."})]})})]}),e.jsx(We,{children:e.jsx(as,{className:C("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/deals",children:"Deals"})}),e.jsx(We,{children:e.jsx(as,{className:C("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/listings",children:"Listings"})}),e.jsxs(We,{children:[e.jsx(Is,{className:C("text-sm font-medium rounded-full px-4","bg-transparent hover:bg-gray-100 transition-colors","data-[state=open]:bg-gray-100"),children:"Services"}),e.jsx(As,{children:e.jsxs("ul",{className:"w-[400px] gap-3 p-4 rounded-2xl",children:[e.jsx(x,{href:"/property-management",title:"Property Management",children:"Let us take care of your property."}),e.jsx(x,{href:"/investment-opportunities",title:"Investment Opportunities",children:"Discover tailored investment strategies."}),e.jsx(x,{href:"/calculators",title:"Calculators",children:"Calculate different aspects of your property investment."})]})})]}),e.jsx(We,{children:e.jsx(as,{className:C("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),href:"/pricing",children:"Pricing"})})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{variant:"ghost",className:"lg:hidden p-2",onClick:()=>o(!0),children:e.jsx(dr,{className:"h-6 w-6"})}),e.jsxs("nav",{className:"hidden lg:flex items-center gap-2 mr-4",children:[e.jsx("a",{href:"/help",className:C("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),children:"Support"}),e.jsx("a",{href:"/about-us",className:C("text-sm font-medium rounded-full px-4 py-2","hover:bg-gray-100 transition-colors"),children:"About Us"})]}),e.jsxs(E,{variant:"ghost",className:"hidden md:flex bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500 rounded-full border border-emerald-500/20 shadow-lg hover:shadow-emerald-500/20 transition-all duration-300",onClick:()=>m("/pricing"),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Upgrade"]}),s?e.jsxs(Dn,{children:[e.jsx(Fn,{asChild:!0,children:e.jsx(E,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:e.jsxs(Le,{className:"h-10 w-10",children:[e.jsx(De,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent((r==null?void 0:r.full_name)||"")}&background=random`,alt:(r==null?void 0:r.full_name)||"User avatar"}),e.jsx(Fe,{className:"bg-primary/10",children:((k=r==null?void 0:r.full_name)==null?void 0:k.split(" ").filter(Boolean).map(v=>v[0]).slice(0,2).join("").toUpperCase())||"U"})]})})}),e.jsxs(La,{className:"w-56 mt-2 bg-white border border-gray-200 rounded-2xl shadow-lg",align:"end",forceMount:!0,children:[e.jsxs(Oe,{className:"flex-col items-start",children:[e.jsx("div",{className:"font-medium",children:r==null?void 0:r.full_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r==null?void 0:r.email})]}),e.jsx(Es,{}),e.jsxs(Oe,{onClick:()=>m("/dashboard"),children:[e.jsx(Qs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(Oe,{onClick:()=>m("/account"),children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Account Settings"})]}),e.jsxs(Oe,{onClick:()=>m("/messages"),children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Messages"})]}),e.jsx(Es,{}),e.jsxs(Oe,{className:"text-red-500 focus:text-red-500",onClick:f,children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log Out"})]})]})]}):e.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[e.jsxs(E,{variant:"ghost",onClick:()=>a==null?void 0:a(),className:"rounded-full hover:bg-gray-100",children:[e.jsx(ks,{className:"mr-2 h-4 w-4"}),"Sign In"]}),e.jsxs(E,{onClick:()=>t==null?void 0:t(),className:"rounded-full bg-black text-white hover:bg-gray-800",children:[e.jsx(Ps,{className:"mr-2 h-4 w-4"}),"Sign Up"]})]})]})]})})})}),e.jsx(Mn,{isOpen:n,onClose:()=>o(!1),children:e.jsxs("nav",{className:"space-y-6",children:[s&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 px-2",children:[e.jsxs(Le,{className:"h-10 w-10",children:[e.jsx(De,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent((r==null?void 0:r.full_name)||"")}&background=random`,alt:(r==null?void 0:r.full_name)||"User avatar"}),e.jsx(Fe,{className:"bg-primary/10",children:((S=r==null?void 0:r.full_name)==null?void 0:S.split(" ").filter(Boolean).map(v=>v[0]).slice(0,2).join("").toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm font-medium leading-none truncate",children:r==null?void 0:r.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:r==null?void 0:r.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(E,{variant:"outline",className:"justify-center rounded-full",onClick:()=>{m("/dashboard"),o(!1)},children:[e.jsx(Qs,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs(E,{variant:"outline",className:"justify-center rounded-full",onClick:()=>{m("/account"),o(!1)},children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),"Account"]})]}),e.jsx("div",{className:"border-b border-border"})]}),Bn.map((v,y)=>{var p;return e.jsx("div",{className:"space-y-3",children:v.href?e.jsxs("a",{href:!v.requiresAuth||s?v.href:"#",className:"flex items-center space-x-3 text-lg font-medium hover:text-primary transition-colors",onClick:h=>{v.requiresAuth&&!s&&(h.preventDefault(),a==null||a()),o(!1)},children:[e.jsx("span",{className:"text-xl",children:v.icon}),e.jsx("span",{children:v.title})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-3 text-lg font-medium",children:[e.jsx("span",{className:"text-xl",children:v.icon}),e.jsx("span",{children:v.title})]}),e.jsx("div",{className:"space-y-3 pl-9",children:(p=v.items)==null?void 0:p.map((h,P)=>e.jsxs("a",{href:h.href,className:"block text-base text-muted-foreground hover:text-primary transition-colors",onClick:A=>{h.requiresAuth&&!s&&(A.preventDefault(),a==null||a()),o(!1)},children:[h.title,h.requiresAuth&&!s&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Sign in required)"})]},P))})]})},y)}),s?e.jsx("div",{className:"pt-6",children:e.jsxs(E,{variant:"outline",className:"w-full justify-center rounded-full text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>{f(),o(!1)},children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Log Out"]})}):e.jsxs("div",{className:"space-y-4 pt-6",children:[e.jsxs(E,{variant:"outline",className:"w-full justify-center rounded-full",onClick:()=>{a==null||a(),o(!1)},children:[e.jsx(ks,{className:"mr-2 h-4 w-4"}),"Sign In"]}),e.jsxs(E,{className:"w-full justify-center rounded-full bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500",onClick:()=>{t==null||t(),o(!1)},children:[e.jsx(Ps,{className:"mr-2 h-4 w-4"}),"Sign Up"]})]})]})})]})}const Gn=({text:s="",className:a="",delay:t=100,animationFrom:r={opacity:0,transform:"translate3d(0,40px,0)"},animationTo:n={opacity:1,transform:"translate3d(0,0,0)"},easing:o=u=>u,threshold:i=.1,rootMargin:g="-100px",textAlign:m="center",onLetterAnimationComplete:N})=>{const u=s.split(" ").map(p=>p.split("")),f=u.flat(),[x,k]=d.useState(!1),S=d.useRef(null),v=d.useRef(0);d.useEffect(()=>{const p=new IntersectionObserver(([h])=>{h.isIntersecting&&(k(!0),S.current&&p.unobserve(S.current))},{threshold:i,rootMargin:g});return S.current&&p.observe(S.current),()=>p.disconnect()},[i,g]);const y=mr(f.length,f.map((p,h)=>({from:r,to:x?async P=>{await P(n),v.current+=1,v.current===f.length&&N&&N()}:r,delay:h*t,config:{easing:o}})));return e.jsx("p",{ref:S,className:`split-parent overflow-hidden inline ${a}`,style:{textAlign:m,whiteSpace:"normal",wordWrap:"break-word"},children:u.map((p,h)=>e.jsxs("span",{style:{display:"inline-block",whiteSpace:"nowrap"},children:[p.map((P,A)=>{const D=u.slice(0,h).reduce((T,O)=>T+O.length,0)+A;return e.jsx(ur.span,{style:y[D],className:"inline-block transform transition-opacity will-change-transform",children:P},D)}),e.jsx("span",{style:{display:"inline-block",width:"0.3em"},children:"Â "})]},h))})},Vn=`#version 300 es
in vec2 position;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}
`,Wn=`#version 300 es
precision highp float;

uniform float uTime;
uniform float uAmplitude;
uniform vec3 uColorStops[3];
uniform vec2 uResolution;
uniform float uBlend;

out vec4 fragColor;

vec3 permute(vec3 x) {
  return mod(((x * 34.0) + 1.0) * x, 289.0);
}

float snoise(vec2 v){
  const vec4 C = vec4(
      0.211324865405187, 0.366025403784439,
      -0.577350269189626, 0.024390243902439
  );
  vec2 i  = floor(v + dot(v, C.yy));
  vec2 x0 = v - i + dot(i, C.xx);
  vec2 i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;
  i = mod(i, 289.0);

  vec3 p = permute(
      permute(i.y + vec3(0.0, i1.y, 1.0))
    + i.x + vec3(0.0, i1.x, 1.0)
  );

  vec3 m = max(
      0.5 - vec3(
          dot(x0, x0),
          dot(x12.xy, x12.xy),
          dot(x12.zw, x12.zw)
      ), 
      0.0
  );
  m = m * m;
  m = m * m;

  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;
  m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);

  vec3 g;
  g.x  = a0.x  * x0.x  + h.x  * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

struct ColorStop {
  vec3 color;
  float position;
};

#define COLOR_RAMP(colors, factor, finalColor) {                int index = 0;                                              for (int i = 0; i < 2; i++) {                                    ColorStop currentColor = colors[i];                         bool isInBetween = currentColor.position <= factor;         index = int(mix(float(index), float(i), float(isInBetween)));   }                                                           ColorStop currentColor = colors[index];                     ColorStop nextColor = colors[index + 1];                    float range = nextColor.position - currentColor.position;   float lerpFactor = (factor - currentColor.position) / range;   finalColor = mix(currentColor.color, nextColor.color, lerpFactor); }

void main() {
  vec2 uv = gl_FragCoord.xy / uResolution;
  
  ColorStop colors[3];
  colors[0] = ColorStop(uColorStops[0], 0.0);
  colors[1] = ColorStop(uColorStops[1], 0.5);
  colors[2] = ColorStop(uColorStops[2], 1.0);
  
  vec3 rampColor;
  COLOR_RAMP(colors, uv.x, rampColor);
  
  float height = snoise(vec2(uv.x * 2.0 + uTime * 0.1, uTime * 0.25)) * 0.5 * uAmplitude;
  height = exp(height);
  height = (uv.y * 2.0 - height + 0.2);
  float intensity = 0.6 * height;
  
  float midPoint = 0.20;
  float auroraAlpha = smoothstep(midPoint - uBlend * 0.5, midPoint + uBlend * 0.5, intensity);
  
  vec3 auroraColor = intensity * rampColor;
  
  fragColor = vec4(auroraColor * auroraAlpha, auroraAlpha);
}
`,Yn=s=>{const{colorStops:a=["#00d8ff","#7cff67","#00d8ff"],amplitude:t=1,blend:r=.5}=s,n=d.useRef(s);n.current=s;const o=d.useRef(null);return d.useEffect(()=>{const i=o.current;if(!i)return;const g=new Wt({alpha:!0,premultipliedAlpha:!0,antialias:!0}),m=g.gl;m.clearColor(0,0,0,0),m.enable(m.BLEND),m.blendFunc(m.ONE,m.ONE_MINUS_SRC_ALPHA),m.canvas.style.backgroundColor="transparent";let N;function u(){if(!i)return;const y=i.offsetWidth,p=i.offsetHeight;g.setSize(y,p),N&&(N.uniforms.uResolution.value=[y,p])}window.addEventListener("resize",u);const f=new Yt(m);f.attributes.uv&&delete f.attributes.uv;const x=a.map(y=>{const p=new tt(y);return[p.r,p.g,p.b]});N=new Ht(m,{vertex:Vn,fragment:Wn,uniforms:{uTime:{value:0},uAmplitude:{value:t},uColorStops:{value:x},uResolution:{value:[i.offsetWidth,i.offsetHeight]},uBlend:{value:r}}});const k=new Kt(m,{geometry:f,program:N});i.appendChild(m.canvas);let S=0;const v=y=>{S=requestAnimationFrame(v);const{time:p=y*.01,speed:h=1}=n.current;if(N){N.uniforms.uTime.value=p*h*.1,N.uniforms.uAmplitude.value=n.current.amplitude??1,N.uniforms.uBlend.value=n.current.blend??r;const P=n.current.colorStops??a;N.uniforms.uColorStops.value=P.map(A=>{const D=new tt(A);return[D.r,D.g,D.b]}),g.render({scene:k})}};return S=requestAnimationFrame(v),u(),()=>{var y;cancelAnimationFrame(S),window.removeEventListener("resize",u),i&&m.canvas.parentNode===i&&i.removeChild(m.canvas),(y=m.getExtension("WEBGL_lose_context"))==null||y.loseContext()}},[t]),e.jsx("div",{ref:o,className:"w-full h-full"})},fe=({onSearch:s=()=>{},title:a="Find Your Next Investment Property",subtitle:t="Search through our curated selection of properties",showSearch:r=!0,showStats:n=!0,height:o="h-[500px]",image:i})=>{const[g,m]=j.useState(""),N=f=>{f.preventDefault(),s(g)},u=()=>{console.log("Hero text animation completed!")};return e.jsxs("div",{className:`relative w-full ${o} bg-gray-900 overflow-hidden`,children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx(Yn,{colorStops:["#004F39","#FEFACA","#151513"],blend:.6,amplitude:1.2,speed:.3}),e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-[2px]"})]}),e.jsxs("div",{className:"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center text-center py-16 pt-24 animate-fade-in-up",children:[e.jsx(Gn,{text:a,className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4",delay:50,animationFrom:{opacity:0,transform:"translate3d(0,50px,0)"},animationTo:{opacity:1,transform:"translate3d(0,0,0)"},easing:f=>1-Math.pow(1-f,3),threshold:.2,rootMargin:"-50px",onLetterAnimationComplete:u}),e.jsx("p",{className:"text-lg sm:text-xl text-gray-200 mb-6 sm:mb-8 max-w-3xl mx-auto",children:t}),r&&e.jsx("form",{onSubmit:N,className:"w-full max-w-2xl animate-fade-in-up",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{type:"text",placeholder:"Enter an address, neighbourhood, city, or postcode",value:g,onChange:f=>m(f.target.value),className:"w-full h-12 sm:h-14 pl-5 pr-14 text-base sm:text-lg bg-white/90 backdrop-blur-sm text-black border-2 border-transparent focus:border-primary"}),e.jsx(E,{type:"submit",size:"sm",variant:"ghost",className:"absolute right-2 top-1/2 -translate-y-1/2 hover:bg-transparent",children:e.jsx(Jt,{className:"w-6 h-6 text-gray-500 hover:text-primary transition-colors"})})]})})]})]})},Hn=s=>{const[a,t]=d.useState(null),[r,n]=d.useState(null),[o,i]=d.useState(null),[g,m]=d.useState(!0),N=async()=>{try{m(!0),i(null);const u=await fetch("https://api.binance.com/api/v3/ticker/price?symbol=BTCGBP");if(!u.ok)throw new Error("Binance API failed");const f=await u.json(),x=Number(f.price);t(x),s&&x&&n(s/x)}catch(u){console.error("Error fetching BTC price:",u),i("Failed to fetch Bitcoin price"),t(null),n(null)}finally{m(!1)}};return d.useEffect(()=>{let u=!0,f=0;const x=3,k=async()=>{if(!(!u||f>=x))try{await N(),f=0}catch{f++,u&&f<x&&setTimeout(k,Math.pow(2,f)*1e3)}};k();const S=setInterval(k,6e4);return()=>{u=!1,clearInterval(S)}},[s]),{btcPrice:a,btcEquivalent:r,error:o,isLoading:g}},Kn=["https://images.unsplash.com/photo-1518780664697-55e3ad937233?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600","https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600","https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600","https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600"],Jn=["https://images.unsplash.com/photo-1464938050520-ef2270bb8ce8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600","https://images.unsplash.com/photo-1497366811353-6870744d04b2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600","https://images.unsplash.com/photo-1497366754035-f200968a6e72?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600","https://images.unsplash.com/photo-1497366216548-37526070297c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600","https://images.unsplash.com/photo-1497366858526-0766cadbe8fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600"],ms=({id:s="",address:a="Location not available",price:t=0,squareFootage:r=0,bedrooms:n=0,bathrooms:o=0,isPremium:i=!1,author:g,type:m="property",potential_profit:N,roi_percentage:u,investment_term:f,deal_type:x,isDeal:k=!1,images:S=[],onMessageAuthor:v,onClick:y,description:p="",propertyType:h="residential",createdAt:P})=>{const{profile:A}=Z(),[D,T]=j.useState(!0),{btcEquivalent:O,error:L,isLoading:l}=Hn(t);console.log("Profile in PropertyCard:",A),console.log("Subscription tier:",A==null?void 0:A.subscription_tier);const w=(A==null?void 0:A.subscription_tier)==="premium"||!1,b=j.useMemo(()=>{const $=m==="deal"?Jn:Kn;return $[Math.floor(Math.random()*$.length)]},[m]);return e.jsxs(q,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:y,children:[e.jsxs("div",{className:"relative h-48 bg-muted",children:[D&&e.jsx("div",{className:"absolute inset-0 animate-pulse bg-muted"}),e.jsx("img",{src:S&&Array.isArray(S)&&S.length>0&&S[0]||b,alt:"Property",className:`w-full h-full object-cover transition-opacity duration-200 ${D?"opacity-0":"opacity-100"}`,onLoad:()=>T(!1)}),i&&!w&&e.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-[2px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(Ms,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subscribe to view premium properties"})]})})]}),e.jsxs(G,{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold mb-1 line-clamp-1",children:a}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-2xl font-bold",children:[V(t),O&&!l&&!L&&e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["â‰ˆ ",O.toFixed(2)," BTC"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-muted-foreground",children:"Beds"}),e.jsx("span",{className:"font-medium",children:n})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-muted-foreground",children:"Baths"}),e.jsx("span",{className:"font-medium",children:o})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-muted-foreground",children:"Sq Ft"}),e.jsx("span",{className:"font-medium",children:r})]})]}),k&&e.jsxs("div",{className:"space-y-2 mb-4",children:[u&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"ROI:"}),e.jsxs("span",{className:"font-medium text-emerald-500",children:[u,"%"]})]}),f&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Investment Term:"}),e.jsx("span",{className:"font-medium",children:f})]}),x&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Deal Type:"}),e.jsx("span",{className:"font-medium",children:x})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx("span",{children:h}),e.jsxs("span",{children:[n," beds"]}),e.jsxs("span",{children:[o," baths"]}),e.jsxs("span",{children:[r," sq ft"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:p}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Listed ",new Date(P).toLocaleDateString()]}),g&&v&&e.jsxs(E,{variant:"outline",size:"sm",className:"w-full",onClick:()=>v(g.id),children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Contact Agent"]})]})]})},Fs=hr,Os=d.forwardRef(({className:s,...a},t)=>e.jsx(Zt,{ref:t,className:C("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a}));Os.displayName=Zt.displayName;const _e=d.forwardRef(({className:s,...a},t)=>e.jsx(Xt,{ref:t,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a}));_e.displayName=Xt.displayName;const xe=d.forwardRef(({className:s,...a},t)=>e.jsx(Qt,{ref:t,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));xe.displayName=Qt.displayName;const $s="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",Us="https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent",Zn=["Calculate stamp duty for a Â£400,000 property","What are typical legal fees for property purchase?","Explain all costs involved in buying a property","How much should I budget for property maintenance?","What surveys do I need when buying a property?","Calculate monthly mortgage payments for Â£300,000"];async function Xn(s){var a,t,r,n,o;try{const i=await fetch(`${Us}?key=${$s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}]})});if(!i.ok)throw new Error(`API error: ${i.status} - ${await i.text()}`);const g=await i.json();if(!((o=(n=(r=(t=(a=g==null?void 0:g.candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])!=null&&o.text))throw new Error("Invalid response structure from API");return g.candidates[0].content.parts[0].text}catch(i){return console.error("Error getting chat response:",i),`
      Current UK Property Market Analysis:
      
      Market Overview:
      - Property prices showing stability with regional variations
      - Interest rates impacting buyer behavior
      - Strong rental market in major cities
      
      Regional Trends:
      - London: Moderate price growth, strong rental demand
      - Manchester: Continued growth in property values
      - Birmingham: Infrastructure developments driving market
      
      Investment Opportunities:
      - Student accommodation in university cities
      - Build-to-rent in major employment hubs
      - Regeneration areas showing potential
      
      Key Factors:
      - Remote working influencing location preferences
      - Sustainability becoming a major consideration
      - Government policies affecting market dynamics
    `}}const Qn=s=>{if(s.success)return`<span class="block text-red-500">${s.message}</span>`;let t=(typeof s=="string"?s:s.message).replace(/\*\*(.*?)\*\*/g,'<span class="font-bold">$1</span>');return t=t.replace(/\*(.*?)\*/g,'<span class="italic">$1</span>'),t=t.replace(/^- (.+)$/gm,'<span class="block ml-2">â€¢ $1</span>'),t=t.replace(/^\d+\. (.+)$/gm,'<span class="block ml-2">$&</span>'),t.split(`
`).map((r,n)=>r?`<span class="block">${r}</span>`:'<span class="block h-2"></span>').join("")};async function ei(){try{if(!(await fetch(`${Us}?key=${$s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Analyze and predict the UK property market trends for major regions."}]}]})})).ok)throw new Error("API response was not ok");return{regions:[{region:"London",currentValue:5e5,predictedValue:525e3,confidence:85,growthFactors:["Strong employment market","Infrastructure developments","High rental demand"]},{region:"South East",currentValue:375e3,predictedValue:393750,confidence:82,growthFactors:["London commuter belt","Tech industry growth","Quality of life appeal"]},{region:"North West",currentValue:2e5,predictedValue:216e3,confidence:88,growthFactors:["Affordable entry prices","Strong rental yields","Economic regeneration"]},{region:"Scotland",currentValue:18e4,predictedValue:192600,confidence:80,growthFactors:["Growing tech sector","University cities","Tourism industry"]},{region:"Wales",currentValue:17e4,predictedValue:180200,confidence:78,growthFactors:["Remote working trend","Natural beauty appeal","Infrastructure investment"]}]}}catch(s){return console.error("Error fetching predictive analytics:",s),{regions:[]}}}const si=async()=>{try{if(!(await fetch(`${Us}?key=${$s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Provide current UK property investment hotspots data in JSON format with scores and factors."}]}]})})).ok)throw new Error("API response was not ok");return{hotspots:[{area:"Manchester",score:85,factors:["Strong rental demand","Growing job market","Infrastructure development"],predictedGrowth:7.5,investmentType:"Residential"},{area:"Birmingham",score:82,factors:["HS2 development","Young population","Business relocation"],predictedGrowth:6.8,investmentType:"Mixed"},{area:"Leeds",score:80,factors:["University presence","Tech sector growth","Affordable prices"],predictedGrowth:6.5,investmentType:"Residential"}]}}catch(s){return console.error("Failed to fetch hotspots:",s),{hotspots:[]}}},Da=({trends:s=[{title:"Average Home Price",value:"Â£450,000",change:"+5.2%",isPositive:!0},{title:"Days on Market",value:"28",change:"-12%",isPositive:!0},{title:"Available Listings",value:"1,234",change:"-3.1%",isPositive:!1}],articles:a=[{title:"Understanding the Current Real Estate Market",excerpt:"Get insights into the latest trends and what they mean for buyers and sellers.",date:"2024-03-15"},{title:"Top 5 Investment Opportunities in Real Estate",excerpt:"Discover the most promising areas for property investment in the current market.",date:"2024-03-10"},{title:"Real Estate Market Forecast 2024",excerpt:"Expert predictions and analysis for the upcoming year in real estate.",date:"2024-03-05"}]})=>{const t=[{month:"Jan",price:45e4},{month:"Feb",price:455e3},{month:"Mar",price:458e3},{month:"Apr",price:462e3},{month:"May",price:47e4},{month:"Jun",price:475e3}],r=[{region:"London",price:5e5,growth:5.2},{region:"Manchester",price:25e4,growth:7.8},{region:"Birmingham",price:22e4,growth:6.5},{region:"Leeds",price:2e5,growth:8.1},{region:"Liverpool",price:18e4,growth:9.2}],n=[{name:"London",priceGrowth:5.2,averagePrice:5e5,transactions:1200},{name:"South East",priceGrowth:4.8,averagePrice:375e3,transactions:950},{name:"South West",priceGrowth:4.5,averagePrice:31e4,transactions:780},{name:"East of England",priceGrowth:4.2,averagePrice:325e3,transactions:820},{name:"West Midlands",priceGrowth:6.1,averagePrice:24e4,transactions:680},{name:"East Midlands",priceGrowth:5.8,averagePrice:225e3,transactions:650},{name:"Yorkshire",priceGrowth:7.2,averagePrice:195e3,transactions:720},{name:"North West",priceGrowth:8.1,averagePrice:205e3,transactions:850},{name:"North East",priceGrowth:6.5,averagePrice:155e3,transactions:480},{name:"Wales",priceGrowth:5.9,averagePrice:185e3,transactions:520},{name:"Scotland",priceGrowth:5.4,averagePrice:175e3,transactions:680}],o=({data:M})=>e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("svg",{viewBox:"0 0 500 800",className:"w-full h-full max-h-[400px]",style:{maxWidth:"300px"},children:[{path:"M250,600 L300,550 L350,600 L300,650 Z",name:"London"},{path:"M200,500 L300,450 L350,500 L250,550 Z",name:"South East"},{path:"M150,450 L250,400 L300,450 L200,500 Z",name:"South West"},{path:"M300,450 L400,400 L450,450 L350,500 Z",name:"East of England"},{path:"M200,350 L300,300 L350,350 L250,400 Z",name:"West Midlands"},{path:"M300,350 L400,300 L450,350 L350,400 Z",name:"East Midlands"},{path:"M200,250 L300,200 L350,250 L250,300 Z",name:"Yorkshire"},{path:"M150,200 L250,150 L300,200 L200,250 Z",name:"North West"},{path:"M250,150 L350,100 L400,150 L300,200 Z",name:"North East"},{path:"M100,350 L200,300 L250,350 L150,400 Z",name:"Wales"},{path:"M150,100 L300,50 L350,100 L200,150 Z",name:"Scotland"}].map(J=>{const R=M.find(pe=>pe.name===J.name),se=(R==null?void 0:R.priceGrowth)||0;return e.jsxs("g",{children:[e.jsx("path",{d:J.path,fill:`hsl(${120*(se/10)}, 70%, 50%)`,stroke:"white",strokeWidth:"2",className:"transition-colors duration-300 hover:brightness-110 cursor-pointer"}),e.jsx("title",{children:`${J.name}: +${se}%`})]},J.name)})})}),[i,g]=d.useState(""),[m,N]=d.useState(!1),[u,f]=d.useState(!1),x=async()=>{N(!0);try{const M=await Xn("Provide a brief market analysis of the current UK property market trends, focusing on price changes, regional variations, and investment opportunities. Format the response with proper headings and bullet points.");g(M)}catch(M){console.error("Error fetching market insights:",M)}finally{N(!1)}},[k,S]=d.useState([]),[v,y]=d.useState([]);d.useState("");const[p,h]=d.useState(!1),[P,A]=d.useState(!1),[D,T]=d.useState(!1),[O,L]=d.useState(!1),l=async()=>{h(!0);try{const M=await ei();S(M.regions||[])}catch(M){console.error("Error fetching predictive analytics:",M)}finally{h(!1)}},w=async()=>{A(!0);try{const J=(await si()).hotspots.map(R=>({...R,investmentType:R.investmentType==="Residential"||R.investmentType==="Commercial"||R.investmentType==="Mixed"?R.investmentType:"Mixed"}));y(J)}catch(M){console.error("Error fetching hotspots:",M)}finally{A(!1)}},b=async()=>{f(!0),await x(),f(!1)},$=async()=>{T(!0),await l(),T(!1)},W=async()=>{L(!0),await w(),L(!1)},[te,re]=d.useState(null),[oe,X]=d.useState(null),[me,le]=d.useState(!0),Ne=async()=>{try{le(!0);const M=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=gbp");if(!M.ok)throw new Error("Failed to fetch Bitcoin price");const J=await M.json();re(J.bitcoin.gbp),X(null)}catch(M){console.error("Error fetching Bitcoin price:",M),X("Failed to load Bitcoin price"),re(null)}finally{le(!1)}};return d.useEffect(()=>{x(),l(),w(),Ne();const M=setInterval(Ne,6e4);return()=>clearInterval(M)},[]),e.jsxs("section",{className:"w-full py-8 sm:py-16 bg-background relative overflow-hidden",children:[e.jsx("div",{className:"container mx-auto px-4 mb-16",children:e.jsxs(q,{className:"bg-card border-border",children:[e.jsx(K,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Real Estate Trends Visualization"})}),e.jsx(G,{children:e.jsxs(Fs,{defaultValue:"overview",className:"w-full",children:[e.jsx(Os,{className:"w-full mb-8",children:e.jsxs("div",{className:"grid w-full grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx(_e,{value:"overview",className:"w-full",children:"Price Evolution"}),e.jsx(_e,{value:"regional",className:"w-full",children:"Regional Comparison"}),e.jsx(_e,{value:"heatmap",className:"w-full",children:"Growth Heatmap"})]})}),e.jsx(xe,{value:"overview",className:"h-[400px]",children:e.jsx(at,{width:"100%",height:"100%",children:e.jsxs(pr,{data:t,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(rt,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"month"}),e.jsx(it,{}),e.jsx(ot,{}),e.jsx(xr,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorPrice)"})]})})}),e.jsx(xe,{value:"regional",className:"h-[400px]",children:e.jsx(at,{width:"100%",height:"100%",children:e.jsxs(fr,{data:r,children:[e.jsx(rt,{strokeDasharray:"3 3"}),e.jsx(nt,{dataKey:"region"}),e.jsx(it,{}),e.jsx(ot,{}),e.jsx(lt,{type:"monotone",dataKey:"price",stroke:"hsl(var(--primary))"}),e.jsx(lt,{type:"monotone",dataKey:"growth",stroke:"hsl(var(--chart-1))"})]})})}),e.jsx(xe,{value:"heatmap",className:"h-[400px] overflow-y-auto",children:e.jsxs("div",{className:"h-full grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 min-h-[300px]",children:[e.jsx("h3",{className:"font-semibold text-lg sticky top-0 bg-background border-b py-2 px-2 rounded-t-lg",children:"Regional Price Growth"}),e.jsx("div",{className:"space-y-2 overflow-y-auto px-2",children:n.sort((M,J)=>J.priceGrowth-M.priceGrowth).map(M=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-8 rounded-full",style:{backgroundColor:`hsl(${120*(M.priceGrowth/10)}, 70%, 50%)`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:M.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Â£",M.averagePrice.toLocaleString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-emerald-500",children:["+",M.priceGrowth,"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[M.transactions," sales"]})]})]},M.name))})]}),e.jsx("div",{className:"relative hidden lg:flex items-center justify-center bg-muted/30 rounded-xl min-h-[300px]",children:e.jsx(o,{data:n})})]})})]})})]})}),e.jsx("div",{className:"container mx-auto px-4 mb-16",children:e.jsxs(q,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(K,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"AI Market Analysis"}),e.jsx(E,{variant:"ghost",size:"icon",onClick:b,className:`h-8 w-8 ${u?"animate-spin":""}`,disabled:u||m,children:e.jsx(vs,{className:"h-4 w-4"})})]}),e.jsx(G,{children:m?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:Qn(i)}})})]})}),e.jsxs("div",{className:"container mx-auto px-4 mb-16 grid gap-6 md:grid-cols-2",children:[e.jsxs(q,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(K,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Predictive Market Analytics"}),e.jsx(E,{variant:"ghost",size:"icon",onClick:$,className:`h-8 w-8 ${D?"animate-spin":""}`,disabled:D||p,children:e.jsx(vs,{className:"h-4 w-4"})})]}),e.jsx(G,{children:p?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"space-y-4",children:k.map((M,J)=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:M.region}),e.jsxs("div",{className:"text-sm font-medium text-emerald-500",children:["+",((M.predictedValue-M.currentValue)/M.currentValue*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full bg-background rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:`${M.confidence}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Confidence: ",M.confidence,"%"]})]})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:M.growthFactors[0]})]},J))})})]}),e.jsxs(q,{className:"bg-card border-border relative ai-border-animation",children:[e.jsxs(K,{className:"flex flex-row items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Emerging Investment Hotspots"}),e.jsx(E,{variant:"ghost",size:"icon",onClick:W,className:`h-8 w-8 ${O?"animate-spin":""}`,disabled:O||P,children:e.jsx(vs,{className:"h-4 w-4"})})]}),e.jsx(G,{children:P?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"space-y-4",children:v.map((M,J)=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:M.area}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${M.investmentType==="Residential"?"bg-blue-100 text-blue-700":M.investmentType==="Commercial"?"bg-purple-100 text-purple-700":"bg-emerald-100 text-emerald-700"}`,children:M.investmentType})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full bg-background rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${M.score}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Investment Score: ",M.score,"%"]})]}),e.jsxs("div",{className:"text-sm font-medium text-emerald-500",children:["+",M.predictedGrowth,"%"]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:M.factors[0]})]},J))})})]})]}),e.jsxs("div",{className:"container mx-auto px-4 max-w-7xl",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Market Trends & Insights"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stay informed with the latest real estate market trends and expert insights to make better property decisions."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:s.map((M,J)=>e.jsx(q,{className:`bg-card border-border hover:scale-[1.02] transition-all duration-300 ${J===0?"bg-gradient-to-r from-emerald-400/10 to-cyan-400/10":""}`,children:e.jsxs(G,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground/80",children:M.title}),J===0?e.jsx(Ds,{className:"w-5 h-5 text-emerald-500"}):J===1?e.jsx(Ie,{className:"w-5 h-5 text-emerald-500"}):e.jsx(Te,{className:"w-5 h-5 text-emerald-500"})]}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground",children:M.value}),e.jsx("span",{className:`flex items-center ${M.isPositive?"text-emerald-500":"text-red-500"}`,children:M.change})]})]})},J))}),e.jsx("div",{className:"container mx-auto px-4 mb-16 grid gap-6 md:grid-cols-3",children:a.map((M,J)=>e.jsxs(q,{className:"bg-card border-border hover:scale-[1.02] transition-all duration-300",children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:M.title}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(M.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})}),e.jsxs(G,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:M.excerpt}),e.jsxs(E,{variant:"ghost",className:"group hover:text-emerald-500",onClick:()=>{window.location.href=`/article/${encodeURIComponent(M.title)}`},children:["Read More",e.jsx(us,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]},J))}),e.jsx("div",{className:"w-full bg-muted/50 py-12",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Market Trends"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(q,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bitcoin Price (GBP)"}),me?e.jsx("div",{className:"animate-pulse h-8 bg-muted rounded"}):oe?e.jsx("p",{className:"text-red-500",children:oe}):te?e.jsx("p",{className:"text-2xl font-bold",children:V(te)}):e.jsx("p",{className:"text-muted-foreground",children:"Price unavailable"})]})})]})})]})]})},Pe=vr,ti=yr,ai=gr,Fa=d.forwardRef(({className:s,...a},t)=>e.jsx(ea,{ref:t,className:C("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));Fa.displayName=ea.displayName;const je=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(ai,{children:[e.jsx(Fa,{}),e.jsxs(sa,{ref:r,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(jr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));je.displayName=sa.displayName;const ve=({className:s,...a})=>e.jsx("div",{className:C("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});ve.displayName="DialogHeader";const ye=d.forwardRef(({className:s,...a},t)=>e.jsx(ta,{ref:t,className:C("text-lg font-semibold leading-none tracking-tight",s),...a}));ye.displayName=ta.displayName;const Be=d.forwardRef(({className:s,...a},t)=>e.jsx(aa,{ref:t,className:C("text-sm text-muted-foreground",s),...a}));Be.displayName=aa.displayName;const ri=Ge("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=d.forwardRef(({className:s,...a},t)=>e.jsx(ra,{ref:t,className:C(ri(),s),...a}));Y.displayName=ra.displayName;const ni={BASIC:{name:"Basic",price:"Â£9.99",priceId:"price_1QnikACOhalwhG2QDocCWbQj",features:["Basic property search","Save up to 5 properties","Basic market trends","Email support"]},PRO:{name:"Pro",price:"Â£19.99",priceId:"price_1QnikPCOhalwhG2QVYfxwG5D",features:["Advanced property search","Save unlimited properties","Detailed market analysis","Premium property insights","Priority support"]},PREMIUM:{name:"Premium",price:"Â£49.99",priceId:"price_1QnikjCOhalwhG2QUgRtMAco",features:["All Pro features","AI-powered market predictions","Portfolio analytics","Investment ROI calculator","Dedicated account manager","24/7 phone support"]}};async function Oa(s,a){try{const t=await fetch("https://clever-chaplygin6-vbfae.dev.tempolabs.ai/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:s,userId:a})}),{sessionId:r}=await t.json(),n=await br(void 0);n&&await n.redirectToCheckout({sessionId:r})}catch(t){throw console.error("Error creating checkout session:",t),t}}function zs({isOpen:s,onClose:a,defaultMode:t="signin"}){const[r,n]=j.useState(t);j.useEffect(()=>{n(t)},[t]);const[o,i]=j.useState(!1),[g,m]=j.useState(!1),{signIn:N,signUp:u,signInWithGoogle:f}=Z(),{toast:x}=he(),[k,S]=j.useState({email:"",password:"",firstName:"",lastName:""}),v=async y=>{y.preventDefault(),i(!0);try{if(r==="signin")await N(k.email,k.password)&&(x({title:"Welcome back!",description:"You have successfully signed in."}),setTimeout(()=>a(),500));else{const p=await u(k.email,k.password,k.firstName,k.lastName),h=localStorage.getItem("pending_subscription_price_id");h&&p&&"id"in p?(localStorage.removeItem("pending_subscription_price_id"),await Oa(h,p.id)):(m(!0),x({title:"Welcome to MyVGE Alpha!",description:"Thank you for joining us during our alpha testing phase."}))}}catch(p){x({title:"Error",description:p.message||"An error occurred",variant:"destructive"})}finally{i(!1)}};return g?e.jsx(Pe,{open:s,onOpenChange:a,children:e.jsxs(je,{className:"sm:max-w-[425px]",children:[e.jsxs(ve,{children:[e.jsx(ye,{children:"Welcome to MyVGE Alpha!"}),e.jsxs(Be,{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-primary",children:"Thank you for joining MyVGE during our alpha testing phase!"}),e.jsx("p",{children:"We've sent a confirmation email to your inbox. Please click the verification link to activate your account and start exploring MyVGE."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Note: You must confirm your email before signing in. Please check your spam folder if you don't see the email."}),e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"As an alpha tester, your feedback is invaluable to us. We're excited to have you on board and look forward to your insights as we continue to improve the platform."})})]})]}),e.jsx("div",{className:"flex flex-col space-y-4 pt-4",children:e.jsx(E,{onClick:()=>{m(!1),a()},children:"Close"})})]})}):e.jsx(Pe,{open:s,onOpenChange:a,children:e.jsxs(je,{className:"sm:max-w-[425px]",children:[e.jsxs(ve,{children:[e.jsx(ye,{children:r==="signin"?"Sign In":"Create Account"}),e.jsx(Be,{children:r==="signin"?"Welcome back! Please sign in to continue.":"Join MyVGE and start exploring properties."})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4 pt-4",children:[r==="signup"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"firstName",children:"First Name"}),e.jsx(B,{id:"firstName",value:k.firstName,onChange:y=>S(p=>({...p,firstName:y.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"lastName",children:"Last Name"}),e.jsx(B,{id:"lastName",value:k.lastName,onChange:y=>S(p=>({...p,lastName:y.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"email",children:"Email"}),e.jsx(B,{id:"email",type:"email",value:k.email,onChange:y=>S(p=>({...p,email:y.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"password",children:"Password"}),e.jsx(B,{id:"password",type:"password",value:k.password,onChange:y=>S(p=>({...p,password:y.target.value})),required:!0})]}),e.jsxs("div",{className:"flex flex-col space-y-4 pt-4",children:[e.jsx(E,{type:"submit",disabled:o,children:o?"Loading...":r==="signin"?"Sign In":"Create Account"}),e.jsx(E,{type:"button",variant:"link",onClick:()=>f(),disabled:o,children:"Sign In with Google"}),e.jsx(E,{type:"button",variant:"link",onClick:()=>n(r==="signin"?"signup":"signin"),children:r==="signin"?"Don't have an account? Sign up":"Already have an account? Sign in"})]})]})]})})}function $a({onSubscribe:s}){const{profile:a}=Z(),t=(a==null?void 0:a.subscription_tier)||"free";return e.jsx("div",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Choose Your Plan"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Select the perfect plan for your property investment journey"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:Object.entries(ni).map(([r,n])=>e.jsxs(q,{className:`relative ${r==="PRO"?"border-primary shadow-lg scale-105 bg-gradient-to-r from-emerald-400/10 to-cyan-400/10":""}`,children:[r==="PRO"&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-emerald-400 to-cyan-400 text-white px-4 py-1 rounded-full text-sm font-medium border border-emerald-500/20 shadow-lg",children:"Most Popular"}),e.jsxs(K,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold",children:n.name}),r==="PREMIUM"&&e.jsx(Vt,{className:"h-6 w-6 text-yellow-500"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-4xl font-bold",children:n.price}),e.jsx("span",{className:"text-gray-600 ml-2",children:"/month"})]})]}),e.jsx(G,{children:e.jsx("ul",{className:"space-y-3",children:n.features.map((o,i)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(na,{className:"h-5 w-5 text-green-500 mt-0.5"}),e.jsx("span",{children:o})]},i))})}),e.jsx(Na,{children:e.jsx(E,{className:"w-full",variant:r==="PRO"?"default":"outline",onClick:()=>s(n.priceId),disabled:t===r.toLowerCase(),children:t===r.toLowerCase()?"Current Plan":"Subscribe"})})]},r))})]})})}function Ua({isOpen:s,onClose:a}){const{user:t}=Z(),{toast:r}=he(),n=async o=>{setIsLoading(!0);try{const{data:i,error:g}=await F.from("profiles").upsert({id:t==null?void 0:t.id,subscription_tier:o,updated_at:new Date().toISOString()}).select().single();if(g)throw new Error(`Failed to create profile: ${g.message}`);setShowCompleteProfile(!0),a(),r({title:"Subscription Updated",description:`Your subscription has been updated to ${o}.`})}catch(i){console.error("Error in subscription:",i),r({title:"Error",description:i instanceof Error?i.message:"Failed to update subscription",variant:"destructive"})}finally{setIsLoading(!1)}};return e.jsx(Pe,{open:s,onOpenChange:a,children:e.jsxs(je,{className:"sm:max-w-[900px]",children:[e.jsxs(ve,{children:[e.jsx(ye,{children:"Upgrade Your Plan"}),e.jsx(Be,{children:"Choose the plan that best suits your needs and unlock premium features."})]}),e.jsx($a,{onSubscribe:n})]})})}async function ii(s,a,t){try{const{data:r,error:n}=await F.auth.getUser();if(n||!r.user)throw console.error("Authentication error:",n),new Error("User not authenticated");console.log("Sending message:",{sender_id:r.user.id,receiver_id:s,deal_id:t,content:a.substring(0,20)+"..."});const{data:o,error:i}=await F.from("messages").insert({sender_id:r.user.id,receiver_id:s,content:a,deal_id:t,is_read:!1}).select(`
        *,
        sender:profiles!sender_id(id, full_name, avatar_url),
        receiver:profiles!receiver_id(id, full_name, avatar_url),
        deal:deals(*)
      `).single();if(i)throw console.error("Database error:",i),i;if(!o)throw console.error("No data returned from insert"),new Error("Failed to send message");return console.log("Message sent successfully:",{messageId:o.id}),o}catch(r){return console.error("Error sending message:",r),null}}async function oi(s){try{const{data:a,error:t}=await F.auth.getUser();if(t||!a.user)throw console.error("Authentication error:",t),new Error("User not authenticated");console.log("Fetching messages with user:",s);const{data:r,error:n}=await F.from("messages").select(`
        *,
        sender:profiles!sender_id(id, full_name, avatar_url),
        receiver:profiles!receiver_id(id, full_name, avatar_url),
        deal:deals(*)
      `).or(`and(sender_id.eq.${a.user.id},receiver_id.eq.${s}),and(sender_id.eq.${s},receiver_id.eq.${a.user.id})`).order("created_at",{ascending:!0});if(n)throw console.error("Database error:",n),n;console.log(`Found ${(r==null?void 0:r.length)||0} messages`);const o=(r==null?void 0:r.filter(i=>i.receiver_id===a.user.id&&!i.is_read))||[];if(o.length>0){console.log(`Marking ${o.length} messages as read`);const{error:i}=await F.from("messages").update({is_read:!0}).in("id",o.map(g=>g.id));i&&console.error("Error marking messages as read:",i)}return r||[]}catch(a){return console.error("Error getting messages:",a),[]}}function li(s){try{return F.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async t=>{const{data:r,error:n}=await F.from("messages").select(`
              *,
              sender:profiles!sender_id(*),
              receiver:profiles!receiver_id(*),
              deal:deals(*)
            `).eq("id",t.new.id).single();!n&&r&&s(r)}).subscribe()}catch(a){return console.error("Error subscribing to messages:",a),null}}function ke({size:s="md",className:a}){const t={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return e.jsx("div",{className:C("animate-spin rounded-full border-2 border-current border-t-transparent",t[s],a)})}const ci=Ge("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),qs=d.forwardRef(({className:s,variant:a,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:C(ci({variant:a}),s),...t}));qs.displayName="Alert";const di=d.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:C("mb-1 font-medium leading-none tracking-tight",s),...a}));di.displayName="AlertTitle";const Bs=d.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:C("text-sm [&_p]:leading-relaxed",s),...a}));Bs.displayName="AlertDescription";function za({isOpen:s,onClose:a,receiverId:t,dealId:r,deal:n}){const{user:o}=Z(),{toast:i}=he(),[g,m]=d.useState([]),[N,u]=d.useState(""),[f,x]=d.useState(!0),[k,S]=d.useState(!1),[v,y]=d.useState(null),p=d.useRef(null),h=d.useRef(null),P=()=>{var T;(T=p.current)==null||T.scrollIntoView({behavior:"smooth"})};d.useEffect(()=>{if(s&&t){A();const T=li(O=>{(O.sender_id===t&&O.receiver_id===(o==null?void 0:o.id)||O.sender_id===(o==null?void 0:o.id)&&O.receiver_id===t)&&(m(L=>[...L,O]),P())});return()=>{T==null||T.unsubscribe()}}},[s,t,o==null?void 0:o.id]),d.useEffect(()=>{var T;s&&(P(),(T=h.current)==null||T.focus())},[s,g]);const A=async()=>{if(t)try{x(!0),y(null);const T=await oi(t);m(T)}catch{y("Failed to load messages. Please try again."),i({variant:"destructive",title:"Error",description:"Failed to load messages. Please try again."})}finally{x(!1)}},D=async T=>{if(T.preventDefault(),!(!t||!N.trim()||k))try{S(!0),y(null);const O=await ii(t,N,r);if(O)m(L=>[...L,O]),u(""),P();else throw new Error("Failed to send message")}catch{y("Failed to send message. Please try again."),i({variant:"destructive",title:"Error",description:"Failed to send message. Please try again."})}finally{S(!1)}};return t?e.jsx(Pe,{open:s,onOpenChange:a,children:e.jsxs(je,{className:"max-w-md max-h-[80vh] flex flex-col",children:[e.jsx(ve,{children:e.jsx(ye,{children:"Messages"})}),n&&e.jsx(q,{className:"p-4 mb-4 bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded overflow-hidden",children:e.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:n.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.location}),e.jsx("p",{className:"text-sm font-medium mt-1",children:V(n.price)})]})]})}),v&&e.jsx(qs,{variant:"destructive",className:"mb-4",children:e.jsx(Bs,{children:v})}),e.jsx(qe,{className:"flex-1 p-4",children:f?e.jsx("div",{className:"flex justify-center items-center h-[300px]",children:e.jsx(ke,{})}):g.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet. Start the conversation!"}):e.jsxs("div",{className:"space-y-4",children:[g.map(T=>e.jsx("div",{className:`flex ${T.sender_id===(o==null?void 0:o.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${T.sender_id===(o==null?void 0:o.id)?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:T.content}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:Nr(new Date(T.created_at),{addSuffix:!0})})]})},T.id)),e.jsx("div",{ref:p})]})}),e.jsxs("form",{onSubmit:D,className:"flex gap-2 p-4 border-t",children:[e.jsx(B,{ref:h,value:N,onChange:T=>u(T.target.value),placeholder:"Type your message...",disabled:k}),e.jsx(E,{type:"submit",disabled:k||!N.trim(),children:k?e.jsx(ke,{}):"Send"})]})]})}):null}function mi(){const[s,a]=j.useState("");return j.useEffect(()=>{fetch("https://uselessfacts.jsph.pl/api/v2/facts/random?language=en").then(t=>t.json()).then(t=>a(t.text)).catch(t=>console.error("Error fetching random fact:",t))},[]),s?e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[e.jsx(wr,{className:"w-4 h-4"}),e.jsx("p",{children:s})]}):null}function hs(){return e.jsx("footer",{className:"bg-gray-900 text-white py-8 sm:py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Us"}),e.jsx("p",{className:"text-gray-400",children:"Your trusted source for property search and market analysis."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"/terms",className:"hover:text-white",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"/privacy",className:"hover:text-white",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"/disclaimer",className:"hover:text-white",children:"Legal Disclaimer"})}),e.jsx("li",{children:e.jsx("a",{href:"/gdpr",className:"hover:text-white",children:"GDPR Compliance"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:"info@myvge.com"}),e.jsx("li",{children:"Lytchett House, 13 Freeland Park, Poole, Dorset, England, BH16 6FA"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Compliance"}),e.jsx("ul",{className:"space-y-2 text-gray-400",children:e.jsx("li",{children:"Company No: 15271126"})})]})]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-800 space-y-4",children:[e.jsx(mi,{}),e.jsxs("div",{className:"text-center text-gray-400 space-y-2",children:[e.jsx("p",{className:"text-xs",children:"MyVGE is registered in England and Wales. Registered office: Lytchett House, 13 Freeland Park, Poole, Dorset, England, BH16 6FA. Company No: 15271126"}),e.jsx("p",{className:"text-xs",children:"The information on this website is for general information purposes only and does not constitute financial advice."}),e.jsxs("p",{children:["Â© ",new Date().getFullYear()," MyVGE. All rights reserved."]})]})]})]})})}function qa(){return e.jsxs(qs,{className:"bg-muted/50 border-muted-foreground/20",children:[e.jsx(_r,{className:"h-4 w-4"}),e.jsx(Bs,{className:"text-xs text-muted-foreground",children:"The information provided on this website is for general informational purposes only and should not be considered as financial or investment advice. Property investments carry risks and values can go down as well as up. Always seek professional advice before making investment decisions."})]})}const Ns="https://zcuapuvvygahkzljuhyg.supabase.co",ui="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdWFwdXZ2eWdhaGt6bGp1aHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MTQwMzcsImV4cCI6MjA1MzQ5MDAzN30.GIhphzkznmDXgrUApGW479uHHluqDWqy_9cfG5sU5Xc",hi=Ns.startsWith("http")?Ns:`https://${Ns}`,Ze=ft(hi,ui);async function mt(s,a){try{const t=(s-1)*a;console.log("Production URL:","https://zcuapuvvygahkzljuhyg.supabase.co"),console.log("Fetching properties with params:",{page:s,perPage:a,start:t});const{data:r,error:n}=await Ze.from("properties").select(`
        id,
        title,
        description,
        location,
        price,
        beds,
        baths,
        sqft,
        image_url,
        is_featured,
        created_at,
        updated_at
      `).eq("is_featured",!0).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase response:",{data:r,error:n}),n)throw console.error("Supabase error:",n),n;if(!r||r.length===0)return console.log("No properties found"),[];const o=r.map(i=>({id:i.id||"",title:i.title||"",description:i.description||"",location:i.location||"",price:Number(i.price)||0,beds:Number(i.beds)||0,baths:Number(i.baths)||0,sqft:Number(i.sqft)||0,image_url:i.image_url||"",is_featured:!!i.is_featured,created_at:i.created_at||new Date().toISOString(),updated_at:i.updated_at||new Date().toISOString()}));return console.log("Mapped properties:",o),o}catch(t){return console.error("Error in getFeaturedProperties:",t),[]}}async function pi(s){try{const{data:a,error:t}=await Ze.from("properties").select(`
        id,
        title,
        location,
        price,
        sqft,
        beds,
        baths,
        description,
        image_url,
        is_featured,
        created_at,
        updated_at
      `).or(`
        location.ilike.%${s}%,
        description.ilike.%${s}%,
        title.ilike.%${s}%
      `).order("created_at",{ascending:!1});if(t)throw t;return a||[]}catch(a){return console.error("Error searching properties:",a),[]}}async function xi(s){const{data:a,error:t}=await Ze.from("saved_properties").select(`
      *,
      property:properties(*)
    `).eq("user_id",s);if(t)throw t;return a}async function fi(s,a){try{const t=(s-1)*a;console.log("Fetching deals with params:",{page:s,perPage:a,start:t});const{data:r,error:n}=await Ze.from("deals").select(`
        id,
        title,
        description,
        location,
        price,
        roi_percentage,
        investment_term,
        property_type,
        deal_type,
        image_url,
        created_at,
        updated_at
      `).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase deals response:",{data:r,error:n}),n)throw console.error("Supabase error:",n),n;if(!r||r.length===0)return console.log("No deals found"),[];const o=r.map(i=>({id:i.id||"",title:i.title||"",description:i.description||"",location:i.location||"",price:Number(i.price)||0,roi_percentage:Number(i.roi_percentage)||0,investment_term:i.investment_term||"",property_type:i.property_type||"",deal_type:i.deal_type||"",image_url:i.image_url||"",created_at:i.created_at||new Date().toISOString(),updated_at:i.updated_at||new Date().toISOString()}));return console.log("Mapped deals:",o),o}catch(t){return console.error("Error in getDeals:",t),[]}}const gi=(s=6)=>Sr({queryKey:["deals"],queryFn:({pageParam:a=1})=>fi(a,s),getNextPageParam:(a,t)=>a.length===s?t.length+1:void 0,staleTime:5*60*1e3,cacheTime:30*60*1e3}),rs=({children:s,direction:a="left",pauseOnHover:t=!1,reverse:r=!1,fade:n=!1,className:o,vertical:i=!1})=>e.jsxs("div",{className:C("group flex gap-4 overflow-hidden",i?"flex-col":"flex-row",o),children:[e.jsx("div",{className:C("flex min-w-full shrink-0 animate-marquee items-center justify-around gap-4",i?"flex-col":"flex-row",t&&"group-hover:[animation-play-state:paused]",r&&"animate-marquee-reverse"),children:s}),e.jsx("div",{className:C("flex min-w-full shrink-0 animate-marquee items-center justify-around gap-4",i?"flex-col":"flex-row",t&&"group-hover:[animation-play-state:paused]",r&&"animate-marquee-reverse"),children:s})]}),ji=({baseColor:s=[.1,.1,.1],speed:a=.2,amplitude:t=.5,frequencyX:r=3,frequencyY:n=2,interactive:o=!0,...i})=>{const g=d.useRef(null);return d.useEffect(()=>{if(!g.current)return;const m=g.current,N=new Wt({antialias:!0}),u=N.gl;u.clearColor(1,1,1,1);const f=`
      attribute vec2 position;
      attribute vec2 uv;
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = vec4(position, 0.0, 1.0);
      }
    `,x=`
      precision highp float;
      uniform float uTime;
      uniform vec3 uResolution;
      uniform vec3 uBaseColor;
      uniform float uAmplitude;
      uniform float uFrequencyX;
      uniform float uFrequencyY;
      uniform vec2 uMouse;
      varying vec2 vUv;

      vec4 renderImage(vec2 uvCoord) {
          vec2 fragCoord = uvCoord * uResolution.xy;
          vec2 uv = (2.0 * fragCoord - uResolution.xy) / min(uResolution.x, uResolution.y);

          for (float i = 1.0; i < 10.0; i++){
              uv.x += uAmplitude / i * cos(i * uFrequencyX * uv.y + uTime + uMouse.x * 3.14159);
              uv.y += uAmplitude / i * cos(i * uFrequencyY * uv.x + uTime + uMouse.y * 3.14159);
          }

          vec2 diff = (uvCoord - uMouse);
          float dist = length(diff);
          float falloff = exp(-dist * 20.0);
          float ripple = sin(10.0 * dist - uTime * 2.0) * 0.03;
          uv += (diff / (dist + 0.0001)) * ripple * falloff;

          vec3 color = uBaseColor / abs(sin(uTime - uv.y - uv.x));
          return vec4(color, 1.0);
      }

      void main() {
          vec4 col = vec4(0.0);
          int samples = 0;
          for (int i = -1; i <= 1; i++){
              for (int j = -1; j <= 1; j++){
                  vec2 offset = vec2(float(i), float(j)) * (1.0 / min(uResolution.x, uResolution.y));
                  col += renderImage(vUv + offset);
                  samples++;
              }
          }
          gl_FragColor = col / float(samples);
      }
    `,k=new Yt(u),S=new Ht(u,{vertex:f,fragment:x,uniforms:{uTime:{value:0},uResolution:{value:new Float32Array([u.canvas.width,u.canvas.height,u.canvas.width/u.canvas.height])},uBaseColor:{value:new Float32Array(s)},uAmplitude:{value:t},uFrequencyX:{value:r},uFrequencyY:{value:n},uMouse:{value:new Float32Array([0,0])}}}),v=new Kt(u,{geometry:k,program:S});function y(){N.setSize(m.offsetWidth*1,m.offsetHeight*1);const T=S.uniforms.uResolution.value;T[0]=u.canvas.width,T[1]=u.canvas.height,T[2]=u.canvas.width/u.canvas.height}window.addEventListener("resize",y),y();function p(D){const T=m.getBoundingClientRect(),O=(D.clientX-T.left)/T.width,L=1-(D.clientY-T.top)/T.height,l=S.uniforms.uMouse.value;l[0]=O,l[1]=L}function h(D){if(D.touches.length>0){const T=D.touches[0],O=m.getBoundingClientRect(),L=(T.clientX-O.left)/O.width,l=1-(T.clientY-O.top)/O.height,w=S.uniforms.uMouse.value;w[0]=L,w[1]=l}}o&&(m.addEventListener("mousemove",p),m.addEventListener("touchmove",h));let P;function A(D){P=requestAnimationFrame(A),S.uniforms.uTime.value=D*.001*a,N.render({scene:v})}return P=requestAnimationFrame(A),m.appendChild(u.canvas),()=>{var D;cancelAnimationFrame(P),window.removeEventListener("resize",y),o&&(m.removeEventListener("mousemove",p),m.removeEventListener("touchmove",h)),u.canvas.parentElement&&u.canvas.parentElement.removeChild(u.canvas),(D=u.getExtension("WEBGL_lose_context"))==null||D.loseContext()}},[s,a,t,r,n,o]),e.jsx("div",{ref:g,className:"w-full h-full",...i})};async function vi(s){const a="roi_percentage"in s;return[{title:"Investment Overview",content:a?`This ${s.deal_type} opportunity in ${s.location} offers an expected ROI of ${s.roi_percentage}% over ${s.investment_term}.`:`This ${s.sqft} sq ft property in ${s.location} is listed at ${s.price}.`},{title:"Market Analysis",content:`The ${s.location} market has shown strong growth potential...`},{title:"Risk Assessment",content:a?`Given the ${s.investment_term} investment term, key risks include...`:"For this residential property, key considerations include..."},{title:"Recommendations",content:"Based on the current market conditions and property characteristics..."}]}function yi(s){return kr({queryKey:["propertyAnalysis",s==null?void 0:s.id],queryFn:()=>vi(s),enabled:!!s,staleTime:24*60*60*1e3})}function bi({isOpen:s,onClose:a,property:t}){const r="roi_percentage"in(t||{}),{data:n,isLoading:o}=yi(t);return t?e.jsx(Pe,{open:s,onOpenChange:a,children:e.jsxs(je,{className:"max-w-3xl",children:[e.jsx(ve,{children:e.jsx(ye,{children:t.title})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"relative h-[300px] rounded-lg overflow-hidden",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Location"}),e.jsx("p",{children:t.location})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Price"}),e.jsx("p",{className:"text-2xl font-bold",children:V(t.price)})]}),!r&&"beds"in t&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-muted-foreground",children:"Beds"}),e.jsx("p",{className:"font-medium",children:t.beds})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-muted-foreground",children:"Baths"}),e.jsx("p",{className:"font-medium",children:t.baths})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-muted-foreground",children:"Sq Ft"}),e.jsx("p",{className:"font-medium",children:t.sqft})]})]}),r&&"roi_percentage"in t&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-muted-foreground",children:"ROI"}),e.jsxs("p",{className:"font-medium text-emerald-500",children:[t.roi_percentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-muted-foreground",children:"Investment Term"}),e.jsx("p",{className:"font-medium",children:t.investment_term})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-muted-foreground",children:"Deal Type"}),e.jsx("p",{className:"font-medium",children:t.deal_type})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-muted-foreground",children:"Property Type"}),e.jsx("p",{className:"font-medium",children:t.property_type})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]})]})]}),e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AI Investment Analysis"}),o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ke,{})}):e.jsx("div",{className:"space-y-4",children:n==null?void 0:n.map((i,g)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:i.title}),e.jsx("p",{className:"text-muted-foreground",children:i.content})]},g))})]})]})}):null}const Ee=[{name:"Savills",username:"@savills",body:"Leading the way in property investment and market analysis.",img:"https://avatar.vercel.sh/savills"},{name:"Knight Frank",username:"@knightfrank",body:"Exceptional platform for property investment insights.",img:"https://avatar.vercel.sh/knightfrank"},{name:"JLL",username:"@jll",body:"Revolutionary approach to property investment analytics.",img:"https://avatar.vercel.sh/jll"}],Ni=Ee.slice(0,Ee.length/2),wi=Ee.slice(Ee.length/2),_i=Ee.slice(0,Ee.length/2),Si=Ee.slice(Ee.length/2),ns=({img:s,name:a,username:t,body:r})=>e.jsxs("figure",{className:C("relative h-full w-36 cursor-pointer overflow-hidden rounded-xl border p-4","border-gray-950/[.1] bg-gray-950/[.01] hover:bg-gray-950/[.05]","dark:border-gray-50/[.1] dark:bg-gray-50/[.10] dark:hover:bg-gray-50/[.15]"),children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx("img",{className:"rounded-full",width:"32",height:"32",alt:"",src:s}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("figcaption",{className:"text-sm font-medium dark:text-white",children:a}),e.jsx("p",{className:"text-xs font-medium dark:text-white/40",children:t})]})]}),e.jsx("blockquote",{className:"mt-2 text-sm",children:r})]}),ki=()=>{const{user:s,profile:a,signOut:t}=Z(),[r,n]=j.useState(!0),[o,i]=j.useState([]),[g,m]=j.useState(!1),[N,u]=j.useState(!1),[f,x]=j.useState(!1),[k,S]=j.useState("signin"),[v,y]=j.useState(!1),[p]=j.useState(),[h,P]=j.useState(1),[A,D]=j.useState(!0),T=6,[O,L]=j.useState(!0),[l,w]=j.useState(!1),[b,$]=j.useState(null),[W,te]=j.useState(!1),re=j.useRef(null),oe=j.useRef(!1),{data:X,isLoading:me}=gi(),le=async(R=1,se=!1)=>{if(!oe.current){oe.current=!0;try{se?w(!0):L(!0),console.log("Fetching page:",R);const pe=await mt(R,T);console.log("Received properties:",pe),i(R===1?pe:ne=>[...ne,...pe]),D(pe.length===T),P(R),n(!1)}catch(pe){console.error("Error loading properties:",pe)}finally{L(!1),w(!1),oe.current=!1}}};j.useEffect(()=>{r&&le(1,!1)},[r]),j.useEffect(()=>{if(!re.current||r||g)return;const R=new IntersectionObserver(se=>{se[0].isIntersecting&&A&&!oe.current&&le(h+1,!0)},{rootMargin:"200px",threshold:.1});return R.observe(re.current),()=>R.disconnect()},[A,h,r,g]);const Ne=async R=>{if(!R.trim()){i([]),m(!1),P(1),D(!0),L(!0);try{const se=await mt(1,T);i(se),D(se.length===T)}catch(se){console.error("Error loading properties:",se)}finally{L(!1)}return}m(!0),i([]);try{const pe=(await pi(R)).map(ne=>({id:ne.id,title:ne.title,location:ne.location,price:ne.price,sqft:ne.sqft,beds:ne.beds,baths:ne.baths,description:ne.description,image_url:ne.image_url,is_featured:ne.is_featured,created_at:ne.created_at,updated_at:ne.updated_at}));i(pe),D(!1),P(1)}catch(se){console.error("Error searching properties:",se),i([])}finally{m(!1)}},M=O,J=o&&o.length>0;return console.log("Render state:",{isLoading:O,searchResultsLength:o==null?void 0:o.length,showLoading:M,showProperties:J}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Je,{isAuthenticated:!!s,userProfile:a||void 0,onSignIn:()=>{S("signin"),u(!0)},onSignUp:()=>{S("signup"),u(!0)},onSignOut:async()=>{try{await t(),window.location.href="/"}catch(R){console.error("Error signing out:",R)}}}),e.jsxs("main",{children:[e.jsx(fe,{onSearch:Ne}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:g?"Search Results":"Featured Properties"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:M?Array(3).fill(0).map((R,se)=>e.jsx("div",{className:"w-full h-[420px] bg-muted rounded-lg animate-pulse"},se)):J?o.map(R=>e.jsx("div",{onClick:()=>{$(R),te(!0)},className:"cursor-pointer hover:opacity-90 transition-opacity",children:e.jsx(ms,{id:R.id,address:R.location||"Location not available",price:Number(R.price)||0,squareFootage:Number(R.sqft)||0,bedrooms:Number(R.beds)||0,bathrooms:Number(R.baths)||0,isPremium:!!R.is_featured,propertyType:"residential",description:R.description||"",createdAt:R.created_at||new Date().toISOString(),images:R.image_url?[R.image_url]:[]})},R.id||Math.random().toString())):e.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:"No properties found"})}),A&&!O&&!g&&e.jsx("div",{ref:re,className:"h-24 flex items-center justify-center my-8",children:l?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading more properties..."})]}):e.jsx("div",{className:"h-8"})})]})}),e.jsx(Da,{}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Investment Deals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:me?Array(3).fill(0).map((R,se)=>e.jsx("div",{className:"w-full h-[420px] bg-muted rounded-lg animate-pulse"},se)):X==null?void 0:X.pages[0].map(R=>e.jsx(ms,{id:R.id,address:R.location,price:R.price,description:R.description,propertyType:R.property_type,createdAt:R.created_at,images:[R.image_url],isDeal:!0,roi_percentage:R.roi_percentage,investment_term:R.investment_term,deal_type:R.deal_type,isPremium:!0},R.id))})]})}),e.jsxs("section",{className:"w-full py-12 bg-background",children:[e.jsx("div",{className:"container mx-auto text-center mb-8",children:e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Trusted by Industry Leaders"})}),e.jsxs("div",{className:"relative flex h-96 w-full flex-row items-center justify-center gap-4 overflow-hidden [perspective:300px]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-4",style:{transform:"translateX(-100px) translateY(0px) translateZ(-100px) rotateX(20deg) rotateY(-10deg) rotateZ(20deg)"},children:[e.jsx(rs,{pauseOnHover:!0,vertical:!0,className:"[--duration:20s]",children:Ni.map(R=>e.jsx(ns,{...R},R.username))}),e.jsx(rs,{reverse:!0,pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:wi.map(R=>e.jsx(ns,{...R},R.username))}),e.jsx(rs,{reverse:!0,pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:_i.map(R=>e.jsx(ns,{...R},R.username))}),e.jsx(rs,{pauseOnHover:!0,className:"[--duration:20s]",vertical:!0,children:Si.map(R=>e.jsx(ns,{...R},R.username))})]}),e.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-1/4 bg-gradient-to-b from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-1/4 bg-gradient-to-t from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 w-1/4 bg-gradient-to-r from-background"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/4 bg-gradient-to-l from-background"})]})]}),e.jsx("div",{className:"w-full bg-background py-8",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:e.jsx("div",{className:"mb-8",children:e.jsx(qa,{})})})}),(!a||a.subscription_tier==="free")&&e.jsx("div",{className:"w-full bg-background py-16",children:e.jsx("div",{className:"max-w-[1200px] mx-auto px-4 sm:px-8",children:e.jsxs("div",{className:"relative w-full rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx(ji,{baseColor:[.1,.1,.1],speed:1,amplitude:.6,interactive:!0})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[8px]"}),e.jsxs("div",{className:"relative z-10 text-center py-12 px-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"Unlock Premium Property Insights"}),e.jsx("p",{className:"text-lg text-gray-300 mb-8 max-w-2xl mx-auto",children:"Get access to detailed property analysis, market comparisons, and investment metrics to make informed decisions."}),e.jsx("button",{onClick:()=>x(!0),className:"px-8 py-3 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Upgrade Now"})]})]})})})]}),e.jsx(hs,{}),e.jsx(zs,{isOpen:N,onClose:()=>u(!1),defaultMode:k}),e.jsx(Ua,{isOpen:f,onClose:()=>x(!1)}),e.jsx(za,{isOpen:v,onClose:()=>y(!1),receiverId:p}),e.jsx(bi,{isOpen:W,onClose:()=>te(!1),property:b})]})};function de({children:s}){const{user:a,profile:t}=Z(),[r,n]=j.useState(!1),[o,i]=j.useState("signin");return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Je,{isAuthenticated:!!a,userProfile:t||void 0}),e.jsx("div",{className:"flex-1",children:s}),e.jsx(hs,{}),e.jsx(zs,{isOpen:r,onClose:()=>n(!1),defaultMode:o})]})}function Pi(){const[s,a]=d.useState(null),[t,r]=d.useState(!0);return d.useEffect(()=>{const o=async()=>{try{const N=(await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"What is the current Bitcoin price in GBP? Return ONLY the number, no text or currency symbols."}]}]})})).json()).candidates[0].content.parts[0].text,u=parseFloat(N.replace(/[^0-9.]/g,""));isNaN(u)||(a(u),r(!1))}catch(g){console.error("Error fetching Bitcoin price:",g)}};o();const i=setInterval(o,6e4);return()=>clearInterval(i)},[]),{btcPrice:s,loading:t,convertGBPtoBTC:o=>s?o/s:null}}function Ci({amount:s}){const{loading:a,convertGBPtoBTC:t}=Pi(),r=t(s);return a?e.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):r?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(ia,{className:"h-4 w-4 text-[#F7931A]"}),r.toFixed(2)]}):null}async function Ii(s,a){var t;try{console.log("Starting profile update for user:",s),console.log("Updates to apply:",a);const{data:r,error:n}=await F.from("profiles").select("role").eq("id",(t=(await F.auth.getUser()).data.user)==null?void 0:t.id);if(n)throw console.error("Admin check error:",n),n;if(!(r!=null&&r.length)||r[0].role!=="admin")throw new Error("Unauthorized: Only admins can update user profiles");const{data:o,error:i}=await F.from("profiles").select("*").eq("id",s);if(i)throw console.error("User verification error:",i),i;if(!(o!=null&&o.length))throw new Error("User not found");console.log("Existing user:",o[0]);const g={...a,updated_at:new Date().toISOString()};console.log("Applying updates:",g);const{data:m,error:N}=await F.from("profiles").update(g).eq("id",s).select();if(N)throw console.error("Profile update error:",N),N;if(!(m!=null&&m.length))throw console.error("No data returned from update"),new Error("Update failed - no data returned");if(console.log("Profile updated successfully:",m[0]),a.role)try{await F.auth.admin.updateUserById(s,{user_metadata:{role:a.role}}),console.log("Auth metadata updated for role change")}catch(u){console.warn("Failed to update auth metadata (non-critical):",u)}return m[0]}catch(r){throw console.error("Error in updateUserProfile:",r),r}}async function ut(){try{const{data:s,error:a}=await F.from("profiles").select(`
        *,
        subscription_tier,
        subscription_status,
        role
      `).order("created_at",{ascending:!1});if(a)throw console.error("Profiles fetch error:",a),a;return s?s.map(t=>({...t,role:t.role||"user",subscription_tier:t.subscription_tier||"free",subscription_status:t.subscription_status||"active"})):[]}catch(s){throw console.error("Error fetching users:",s),s}}const Ba=d.forwardRef(({className:s,...a},t)=>e.jsx(oa,{ref:t,className:C("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:e.jsx(Pr,{className:C("flex items-center justify-center text-current"),children:e.jsx(zt,{className:"h-4 w-4"})})}));Ba.displayName=oa.displayName;const ht="https://api.myvge.com";async function Ai(s,a=1){try{console.log("Searching properties:",{location:s,page:a,apiUrl:ht});const t=await fetch(`${ht}/api/scrape-properties`,{method:"POST",headers:{"Content-Type":"application/json",Origin:"https://myvge.com"},body:JSON.stringify({location:s,page:a})});if(!t.ok){const n=await t.json();throw console.error("Server error:",n),new Error(n.message||"Failed to fetch properties")}const r=await t.json();return console.log("Search results:",r),r}catch(t){throw console.error("Error searching properties:",t),t}}async function Ei(s,a){try{console.log("Importing properties:",{count:s.length,userId:a});const{data:t,error:r}=await F.from("properties").insert(s.map(n=>({...n,added_by_user_id:a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})));if(r)throw console.error("Supabase error:",r),r;return console.log("Import successful:",t),t}catch(t){throw console.error("Error importing properties:",t),t}}const Ri=Ge("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"bg-green-500/10 text-green-500 hover:bg-green-500/20",warning:"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20",premium:"bg-gradient-to-r from-amber-500 to-amber-600 text-white hover:from-amber-600 hover:to-amber-700"}},defaultVariants:{variant:"default"}});function Ae({className:s,variant:a,...t}){return e.jsx("div",{className:C(Ri({variant:a}),s),...t})}function Mi(){const[s,a]=d.useState(!1),[t,r]=d.useState(""),[n,o]=d.useState(!1),[i,g]=d.useState(!1),[m,N]=d.useState([]),[u,f]=d.useState(new Set),[x,k]=d.useState(1),[S,v]=d.useState(1),[y,p]=d.useState(0),{user:h}=Z(),{toast:P}=he();d.useEffect(()=>{s||(N([]),f(new Set),k(1),v(1),p(0),r(""))},[s]);const A=async()=>{if(t.trim())try{o(!0);const L=await Ai(t,x);N(L.properties),v(L.totalPages),p(L.totalResults),P({title:"Properties Found",description:`Found ${L.totalResults.toLocaleString()} properties in ${t}`})}catch{P({variant:"destructive",title:"Error",description:"Failed to search properties. Please try again."})}finally{o(!1)}},D=async()=>{if(!(!(h!=null&&h.id)||u.size===0))try{g(!0);const L=m.filter(l=>u.has(l.id));await Ei(L,h.id),P({title:"Success",description:`Imported ${u.size} properties successfully`}),a(!1)}catch{P({variant:"destructive",title:"Error",description:"Failed to import properties. Please try again."})}finally{g(!1)}},T=L=>{const l=new Set(u);l.has(L)?l.delete(L):l.add(L),f(l)},O=async L=>{k(L),await A()};return e.jsxs(e.Fragment,{children:[e.jsx(E,{onClick:()=>a(!0),className:"bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500",children:"Import Properties"}),e.jsx(Pe,{open:s,onOpenChange:a,children:e.jsxs(je,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs(ve,{children:[e.jsx(ye,{children:"Import Properties"}),e.jsx(Be,{children:"Search for properties by location and select the ones you want to import."})]}),e.jsxs("div",{className:"flex gap-2 my-4",children:[e.jsx(B,{placeholder:"Enter city or postcode (e.g., London or SW1A 1AA)",value:t,onChange:L=>r(L.target.value),onKeyDown:L=>L.key==="Enter"&&A(),className:"flex-1"}),e.jsx(E,{onClick:A,disabled:n,children:n?e.jsx(ke,{}):"Search"})]}),y>0&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Found ",y.toLocaleString()," properties in ",t]}),e.jsx("div",{className:"flex-1 overflow-auto min-h-[400px]",children:n?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(ke,{})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(L=>e.jsxs(q,{className:"overflow-hidden",children:[e.jsxs("div",{className:"aspect-video relative",children:[e.jsx("img",{src:L.image_url,alt:L.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Ba,{checked:u.has(L.id),onCheckedChange:()=>T(L.id),className:"h-6 w-6 bg-white/90"})}),e.jsx(Ae,{className:"absolute bottom-2 left-2 bg-white/90 text-black",variant:"secondary",children:L.property_type})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium line-clamp-2 mb-2",children:L.title}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm line-clamp-1",children:L.location})]}),e.jsxs("p",{className:"text-lg font-semibold mb-3",children:["Â£",L.price.toLocaleString()]}),e.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{children:L.bedrooms})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cr,{className:"h-4 w-4"}),e.jsx("span",{children:L.bathrooms})]}),L.sqft>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsxs("span",{children:[L.sqft," sq ft"]})]})]})]})]},L.id))})}),m.length>0&&e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",disabled:x===1||n,onClick:()=>O(x-1),children:"Previous"}),e.jsx(E,{variant:"outline",disabled:x===S||n,onClick:()=>O(x+1),children:"Next"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",x," of ",S]})]}),e.jsx(E,{disabled:u.size===0||i,onClick:D,className:"bg-gradient-to-r from-emerald-400 to-cyan-400 text-white hover:from-emerald-500 hover:to-cyan-500",children:i?e.jsx(ke,{}):`Import ${u.size} Properties`})]})]})})]})}function Ti(){const{user:s,profile:a}=Z(),t=be(),[r,n]=j.useState([]),[o,i]=j.useState([]),[g,m]=j.useState([]),[N,u]=j.useState({totalProperties:0,totalValue:0,averagePrice:0,totalProfit:0,monthlyIncome:0}),[f,x]=j.useState(!0),[k,S]=j.useState(null),v=j.useCallback(async()=>{if(!(!s||(a==null?void 0:a.role)!=="admin"))try{const h=await ut();m(h)}catch(h){console.error("Error loading users:",h),S("Failed to load users")}finally{x(!1)}},[s,a]),y=async(h,P)=>{try{x(!0),console.log("Attempting to update user:",h),console.log("Updates:",P);const A=await Ii(h,P);console.log("Update successful:",A);const D=await ut();m(D),alert("User updated successfully")}catch(A){console.error("Error updating user:",A),alert(A.message||"Failed to update user. Please check console for details.")}finally{x(!1)}},p=j.useCallback(async()=>{if(s)try{const[h,{data:P}]=await Promise.all([xi(s.id),F.from("properties").select(`*,
            assigned_user:profiles!properties_assigned_user_id_fkey(full_name, email),
            author:profiles!properties_created_by_fkey(full_name, email)`).eq("created_by",s.id)]);i(P||[]),n(h);const A=(P||[]).length+h.length,D=[...P||[],...h].reduce((l,w)=>l+(w.price||0),0),T=D/(A||1),O=[...P||[],...h].reduce((l,w)=>l+(w.potential_profit||0),0),L=[...P||[],...h].reduce((l,w)=>l+(w.monthly_income||0),0);u({totalProperties:A,totalValue:D,averagePrice:T,totalProfit:O,monthlyIncome:L})}catch(h){console.error("Error loading properties:",h)}},[s]);return j.useEffect(()=>{if(!s){t("/");return}p(),v()},[s,t,p,v]),s?e.jsx(de,{children:e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx(Mi,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(q,{children:e.jsxs(G,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portfolio Value"}),e.jsx(Ds,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["Â£",N.totalValue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[N.totalProperties," properties"]})]})}),e.jsx(q,{children:e.jsxs(G,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Average Price"}),e.jsx(Cs,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["Â£",N.averagePrice.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Per property"})]})}),e.jsx(q,{children:e.jsxs(G,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Total Profit"}),e.jsx(Te,{className:"w-5 h-5 text-primary"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["Â£",N.totalProfit.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Estimated profit"})]})}),e.jsx(q,{children:e.jsxs(G,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"BTC Value"}),e.jsx(ia,{className:"w-5 h-5 text-[#F7931A]"})]}),e.jsx(Ci,{amount:N.totalValue}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Portfolio in BTC"})]})})]}),(a==null?void 0:a.role)==="admin"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(la,{className:"w-5 h-5"})," User Management"]})}),k&&e.jsx("div",{className:"text-red-500 mb-4",children:k}),f?e.jsx("div",{children:"Loading..."}):e.jsx("div",{className:"grid gap-4",children:g.map(h=>e.jsx("div",{className:"border p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:h.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:h.role,onChange:P=>y(h.id,{role:P.target.value}),className:"border rounded p-1",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("select",{value:h.subscription_tier,onChange:P=>y(h.id,{subscription_tier:P.target.value}),className:"border rounded p-1",children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"premium",children:"Premium"})]})]})]})},h.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Ir,{className:"w-5 h-5"})," Saved Properties"]}),e.jsx("div",{className:"space-y-4",children:r.map(h=>e.jsx(ms,{...h.property,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},h.property.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(Cs,{className:"w-5 h-5"})," Added Properties"]}),e.jsx("div",{className:"space-y-4",children:o.map(h=>e.jsx(ms,{...h,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},h.id))})]})]})]})})}):(t("/"),null)}function Li(){const{user:s,profile:a,signOut:t}=Z(),{toast:r}=he(),[n,o]=j.useState(!1),[i,g]=j.useState("signin"),m=async N=>{if(!s){localStorage.setItem("pending_subscription_price_id",N),g("signup"),o(!0);return}try{await Oa(N,s.id)}catch{r({title:"Error",description:"Failed to start subscription process. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Je,{isAuthenticated:!!s,userProfile:a||void 0,onSignIn:()=>{g("signin"),o(!0)},onSignUp:()=>{g("signup"),o(!0)},onSignOut:async()=>{try{await t(),window.location.href="/"}catch(N){console.error("Error signing out:",N)}}}),e.jsx(fe,{title:"Choose Your Perfect Plan",subtitle:"Select the perfect subscription plan to unlock premium features and detailed property insights",backgroundImage:"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsxs("main",{children:[e.jsx($a,{onSubscribe:m}),e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"max-w-4xl mx-auto prose dark:prose-invert mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Investment Plans for Every Property Investor"}),e.jsx("p",{children:"Choose from our range of subscription plans designed to meet the needs of property investors at every level. From market analysis to detailed property insights, our plans provide the tools you need to make informed investment decisions."}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Plan Benefits"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Access to comprehensive property market data and analytics"}),e.jsx("li",{children:"Real-time market insights and trend analysis"}),e.jsx("li",{children:"Advanced property search and filtering capabilities"}),e.jsx("li",{children:"Investment calculators and ROI projections"}),e.jsx("li",{children:"Portfolio tracking and management tools"})]}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Why Subscribe?"}),e.jsx("p",{children:"Our subscription plans give you access to premium features and insights that help you stay ahead in the property market. From basic market analysis to advanced AI-powered predictions, we provide the tools you need to make successful property investments."}),e.jsx("h3",{className:"text-2xl font-semibold mt-8 mb-4",children:"Money-Back Guarantee"}),e.jsx("p",{children:"We're confident in the value our platform provides. If you're not satisfied with your subscription within the first 30 days, we'll provide a full refund, no questions asked."})]}),e.jsx(qa,{})]})]}),e.jsx(hs,{}),e.jsx(zs,{isOpen:n,onClose:()=>o(!1),defaultMode:i})]})}function Di(s){const[a,t]=j.useState(0),[r,n]=j.useState(!1),{user:o}=Z(),{toast:i}=he(),[g,m]=j.useState({profileImage:"",bannerImage:"",selectedWidgets:[]}),N=async()=>{if(o){n(!0);try{const{error:f}=await F.from("profiles").update({avatar_url:g.profileImage||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.email}`,banner_url:g.bannerImage||"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab",dashboard_widgets:g.selectedWidgets,onboarding_completed:!0}).eq("id",o.id);if(f)throw f;i({title:"Setup Complete!",description:"Your profile has been updated successfully."}),s.onClose()}catch{i({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{n(!1)}}},u=[{title:"Profile Image",description:"Add a profile image to personalize your account",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Profile Image URL"}),e.jsx(B,{placeholder:"Enter image URL or leave blank for default avatar",value:g.profileImage,onChange:f=>m(x=>({...x,profileImage:f.target.value}))})]}),g.profileImage&&e.jsx("img",{src:g.profileImage,alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover mx-auto"})]})},{title:"Dashboard Banner",description:"Choose a banner image for your dashboard",component:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Banner Image URL"}),e.jsx(B,{placeholder:"Enter banner image URL or leave blank for default",value:g.bannerImage,onChange:f=>m(x=>({...x,bannerImage:f.target.value}))})]}),g.bannerImage&&e.jsx("img",{src:g.bannerImage,alt:"Banner Preview",className:"w-full h-32 object-cover rounded-md"})]})},{title:"Dashboard Widgets",description:"Select the widgets you want to see on your dashboard",component:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["market_trends","property_news","saved_properties","price_alerts","market_insights","investment_calculator"].map(f=>e.jsx(E,{variant:g.selectedWidgets.includes(f)?"default":"outline",onClick:()=>m(x=>({...x,selectedWidgets:x.selectedWidgets.includes(f)?x.selectedWidgets.filter(k=>k!==f):[...x.selectedWidgets,f]})),className:"h-auto py-4 px-6 text-left flex flex-col items-start space-y-2",children:e.jsx("span",{className:"font-medium capitalize",children:f.replace("_"," ")})},f))})})}];return e.jsx(Pe,{open:s.isOpen,onOpenChange:s.onClose,children:e.jsxs(je,{className:"sm:max-w-[600px]",children:[e.jsxs(ve,{children:[e.jsx(ye,{children:u[a].title}),e.jsx(Be,{children:u[a].description})]}),e.jsx("div",{className:"py-6",children:u[a].component}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(E,{variant:"outline",onClick:()=>t(f=>Math.max(0,f-1)),disabled:a===0,children:"Previous"}),e.jsx(E,{onClick:()=>{a===u.length-1?N():t(f=>Math.min(u.length-1,f+1))},disabled:r,children:a===u.length-1?"Complete Setup":"Next"})]})]})})}function Fi(){const s=be(),[a]=Ar(),{toast:t}=he(),{user:r}=Z(),[n,o]=d.useState(!0);return d.useEffect(()=>{a.get("session_id")&&t({title:"Subscription Successful!",description:"Thank you for subscribing. Your premium features are now available."}),n||s("/dashboard")},[n,s,a,t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full mx-auto p-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Thank you for subscribing. Your premium features are now available."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Setting up your preferences..."})]})})}),e.jsx(Di,{isOpen:n,onClose:()=>{o(!1),s("/dashboard")}})]})}function Oi(){const s=be(),{toast:a}=he();return d.useEffect(()=>{a({title:"Subscription Cancelled",description:"Your subscription process was cancelled. Please try again if this was a mistake.",variant:"destructive"});const t=setTimeout(()=>{s("/")},3e3);return()=>clearTimeout(t)},[]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full mx-auto p-8",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription Cancelled"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your subscription process was cancelled. Please try again if this was a mistake."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you to the homepage..."})]})})})}const $i=5*1024*1024,pt=["image/jpeg","image/png","image/webp"];function Ui({currentAvatarUrl:s,onUpload:a,userInitials:t}){const[r,n]=d.useState(!1),{toast:o}=he(),i=j.useRef(null),g=async m=>{var u;const N=(u=m.target.files)==null?void 0:u[0];if(N){if(N.size>$i){o({title:"File too large",description:"Please select an image under 5MB",variant:"destructive"});return}if(!pt.includes(N.type)){o({title:"Invalid file type",description:"Please select a JPEG, PNG or WebP image",variant:"destructive"});return}try{n(!0),await a(N),o({title:"Success",description:"Profile picture updated successfully"})}catch(f){console.error("Error uploading avatar:",f),o({title:"Upload failed",description:"Failed to update profile picture. Please try again.",variant:"destructive"})}finally{n(!1)}}};return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(Le,{className:"h-24 w-24",children:[e.jsx(De,{src:s}),e.jsx(Fe,{children:t})]}),e.jsx("input",{type:"file",ref:i,className:"hidden",accept:pt.join(","),onChange:g}),e.jsx(E,{variant:"outline",onClick:()=>{var m;return(m=i.current)==null?void 0:m.click()},disabled:r,children:r?"Uploading...":"Change Profile Picture"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum file size: 5MB. Supported formats: JPEG, PNG, WebP"})]})}function zi(){var u;const{user:s,profile:a}=Z(),{toast:t}=he(),[r,n]=d.useState(!1),[o,i]=d.useState({fullName:(a==null?void 0:a.full_name)||"",currentPassword:"",newPassword:"",confirmPassword:""}),g=async f=>{if(s)try{const x=f.name.split(".").pop(),k=`${s.id}-${Date.now()}.${x}`,S=`${s.id}/${k}`,{error:v,data:y}=await F.storage.from("avatars").upload(S,f,{cacheControl:"3600",upsert:!0});if(v)throw console.error("Upload error:",v),v;const{data:{publicUrl:p}}=F.storage.from("avatars").getPublicUrl(S);console.log("File uploaded, public URL:",p);const{error:h}=await F.from("profiles").update({avatar_url:p,updated_at:new Date().toISOString()}).eq("id",s.id);if(h)throw console.error("Profile update error:",h),h;const{data:P,error:A}=await F.from("profiles").select("avatar_url").eq("id",s.id).single();if(A)throw console.error("Verification error:",A),A;console.log("Profile updated with new avatar:",P),window.location.reload()}catch(x){throw console.error("Error in handleAvatarUpload:",x),x}},m=async f=>{if(f.preventDefault(),!!s)try{if(n(!0),o.fullName!==(a==null?void 0:a.full_name)){const{error:x}=await F.from("profiles").update({full_name:o.fullName}).eq("id",s.id);if(x)throw x}if(o.newPassword){if(o.newPassword!==o.confirmPassword)throw new Error("New passwords do not match");const{error:x}=await F.auth.updateUser({password:o.newPassword});if(x)throw x}t({title:"Success",description:"Profile updated successfully"}),i(x=>({...x,currentPassword:"",newPassword:"",confirmPassword:""}))}catch(x){console.error("Error updating profile:",x),t({title:"Update failed",description:x.message||"Failed to update profile",variant:"destructive"})}finally{n(!1)}},N=((u=a==null?void 0:a.full_name)==null?void 0:u.split(" ").map(f=>f[0]).join("").toUpperCase())||"??";return e.jsx(de,{children:e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Account Settings"}),e.jsxs(q,{children:[e.jsx(K,{children:e.jsx(Se,{children:"Profile Picture"})}),e.jsx(G,{children:e.jsx(Ui,{currentAvatarUrl:a==null?void 0:a.avatar_url,onUpload:g,userInitials:N})})]}),e.jsxs(q,{children:[e.jsx(K,{children:e.jsx(Se,{children:"Profile Information"})}),e.jsx(G,{children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"fullName",children:"Full Name"}),e.jsx(B,{id:"fullName",value:o.fullName,onChange:f=>i(x=>({...x,fullName:f.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"email",children:"Email"}),e.jsx(B,{id:"email",value:(s==null?void 0:s.email)||"",disabled:!0})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(B,{id:"currentPassword",type:"password",value:o.currentPassword,onChange:f=>i(x=>({...x,currentPassword:f.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"newPassword",children:"New Password"}),e.jsx(B,{id:"newPassword",type:"password",value:o.newPassword,onChange:f=>i(x=>({...x,newPassword:f.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(B,{id:"confirmPassword",type:"password",value:o.confirmPassword,onChange:f=>i(x=>({...x,confirmPassword:f.target.value}))})]})]})]}),e.jsx(E,{type:"submit",disabled:r,children:r?"Saving...":"Save Changes"})]})})]})]})})})}function ws({children:s}){const{user:a,profile:t,isLoading:r,fetchProfile:n}=Z(),o=be();return d.useEffect(()=>{(async()=>{if(!r&&!a){o("/");return}a&&!t&&await n(a.id)})()},[a,t,r,o,n]),r?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:"Loading..."}):a?e.jsx(e.Fragment,{children:s}):null}function Ce({children:s}){return e.jsx(ds.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},children:s})}async function qi(){return[{title:"UK Housing Market Shows Signs of Recovery",description:"Recent data indicates a steady increase in property transactions...",url:"#",publishedAt:new Date().toISOString()},{title:"Interest Rates Impact on Property Market",description:"Bank of England's latest decision affects mortgage rates...",url:"#",publishedAt:new Date().toISOString()},{title:"Regional Property Markets Outperform London",description:"Northern cities show strong growth in property values...",url:"#",publishedAt:new Date().toISOString()}]}async function Bi(s){var a,t,r,n,o;try{const i=`${s}

Provide a detailed analysis using EXACTLY this format (do not include numbers or asterisks at the start of sections):

## Latest Tax Law Changes
- The current stamp duty rates and thresholds
- Recent changes to capital gains tax
- Upcoming tax proposals

## Landlord Regulations
- Latest HMO licensing requirements
- Recent changes to tenant rights
- Current safety regulations

## Government Policies
- New housing policies
- Regional development initiatives
- Planning permission changes

## Market Impact Analysis
- Effect on property values
- Changes to rental yields
- Investment recommendations

Use ONLY ## for section headers and - for bullet points. Do not use any other formatting, numbers, or special characters. Each bullet point should be a complete sentence with specific dates and numbers where possible.`,g=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i}]}]})});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const m=await g.json();if(!((o=(n=(r=(t=(a=m.candidates)==null?void 0:a[0])==null?void 0:t.content)==null?void 0:r.parts)==null?void 0:n[0])!=null&&o.text))throw new Error("Invalid response format from Gemini API");let N=m.candidates[0].content.parts[0].text;return N=N.replace(/\*\*/g,"").replace(/\*\s/g,"- ").replace(/\d+\.\s/g,"- ").replace(/^[0-9]\./gm,"-").replace(/\n\n+/g,`

`).replace(/\n\s*\n/g,`

`).trim(),N}catch(i){throw console.error("Error generating insights:",i),i}}async function Gi(s){const{error:a}=await F.from("market_insights").insert([{content:s,generated_at:new Date().toISOString()}]);if(a)throw a}async function Vi(){try{const{data:s,error:a}=await F.from("market_insights").select("*").order("generated_at",{ascending:!1}).limit(1).maybeSingle();if(a)throw a;return s}catch(s){return console.error("Error fetching market insights:",s),null}}function Wi(){const{user:s,profile:a}=Z(),[t,r]=j.useState([]),[n,o]=j.useState(""),[i,g]=j.useState(!0),[m,N]=j.useState(null);return j.useEffect(()=>{(async()=>{try{const f=`Analyze the current UK property regulatory landscape and provide insights on:

1. Latest Tax Law Changes
- Recent changes to property-related taxes
- Impact on investors and landlords
- Upcoming tax proposals

2. Landlord Regulations
- Current licensing requirements
- Tenant rights updates
- Property safety regulations

3. Government Policies
- Recent policy changes affecting property
- Proposed legislation
- Regional variations

4. Market Impact Analysis
- How these changes affect property values
- Impact on rental yields
- Investment strategy adjustments

Provide specific dates, numbers, and practical implications where possible.`,[x,k]=await Promise.all([qi(),Vi()]);r(x.slice(0,8));try{if(k&&new Date(k.generated_at).getTime()>Date.now()-864e5)o(k.content);else{const S=await Bi(f);o(S),await Gi(S)}}catch(S){console.error("Error generating market insights:",S),o("Unable to load market insights at this time. Please try again later.")}}catch(f){console.error("Error loading market data:",f)}finally{g(!1)}})()},[]),e.jsx(Ce,{children:e.jsxs(de,{children:[e.jsx(fe,{title:"Regulatory Updates & Market Insights",subtitle:"Stay informed about the latest property regulations and policy changes",backgroundImage:"https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(q,{children:[e.jsxs(K,{className:"flex flex-row items-center gap-2",children:[e.jsx(Er,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Regulatory Updates"}),e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]})]}),e.jsx(G,{children:i?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6"})]}):e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:n.split(`
`).map((u,f)=>u.startsWith("## ")?e.jsx("h2",{className:"text-xl font-semibold mt-6 mb-3",children:u.replace("## ","")},f):u.startsWith("### ")?e.jsx("h3",{className:"text-lg font-medium mt-4 mb-2",children:u.replace("### ","")},f):u.startsWith("- ")?e.jsx("li",{className:"ml-4",children:u.replace("- ","")},f):u.trim()!==""?e.jsx("p",{className:"mb-3",children:u},f):null)})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(q,{children:[e.jsxs(K,{className:"flex flex-row items-center gap-2",children:[e.jsx(Rr,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Latest Updates"})]}),e.jsx(G,{children:i?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(u=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},u))}):e.jsx("div",{className:"space-y-6",children:t.map((u,f)=>e.jsxs("div",{className:"border-b last:border-0 pb-4 last:pb-0",children:[e.jsx("h3",{className:"font-medium mb-1 line-clamp-2",children:u.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:u.description}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:[e.jsx("span",{children:new Date(u.publishedAt).toLocaleDateString()}),e.jsx(E,{variant:"ghost",className:"group hover:text-primary",children:"Read More"})]})]},f))})})]})})]})})})]})})}function Yi(){const{user:s,profile:a}=Z(),[t,r]=j.useState(!0);return j.useEffect(()=>{setTimeout(()=>r(!1),1e3)},[]),e.jsx(Ce,{children:e.jsxs(de,{children:[e.jsx(fe,{title:"Market Trends & Statistics",subtitle:"Track key market indicators and stay ahead of property market movements",backgroundImage:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx(Da,{})]})})}function xt({title:s="Understanding the Current Real Estate Market",content:a="Default content",date:t=new Date().toISOString(),readTime:r="5 min read"}){const{user:n,profile:o}=Z();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Je,{isAuthenticated:!!n,userProfile:o||void 0}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(q,{children:e.jsxs(G,{className:"p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:s}),e.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(t).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ca,{className:"w-4 h-4"}),e.jsx("span",{children:r})]})]}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:a.split(`

`).map((i,g)=>e.jsx("p",{className:"mb-4",children:i},g))})]})})})})]})}function Hi({isPro:s=!1}){const a=[{title:"UK Property Market Analysis Q1 2024",excerpt:"Comprehensive analysis of the UK property market performance in Q1 2024, including price trends, regional variations, and future projections.",category:"Market Analysis",date:"2024-03-20",readTime:"10 min read"},{title:"Investment Opportunities in Northern Cities",excerpt:"Detailed research on emerging property investment opportunities in northern UK cities, with focus on yield potential and growth areas.",category:"Investment Research",date:"2024-03-18",readTime:"8 min read"},{title:"Impact of Interest Rates on Property Market",excerpt:"Analysis of how recent interest rate changes are affecting the property market, mortgage rates, and buyer behavior.",category:"Economic Analysis",date:"2024-03-15",readTime:"12 min read"},{title:"Rental Market Trends 2024",excerpt:"Latest trends in the UK rental market, including demand patterns, yield analysis, and regulatory changes.",category:"Market Analysis",date:"2024-03-12",readTime:"7 min read"},{title:"Sustainable Property Investment Guide",excerpt:"Comprehensive guide to sustainable property investment, including EPC regulations, green mortgages, and future-proofing investments.",category:"Investment Research",date:"2024-03-10",readTime:"15 min read"},{title:"Regional Property Price Forecast",excerpt:"Detailed forecast of property prices across UK regions, with analysis of key growth drivers and market indicators.",category:"Market Analysis",date:"2024-03-08",readTime:"9 min read"}];return e.jsx("div",{className:"py-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((t,r)=>e.jsxs(q,{className:"hover:shadow-lg transition-shadow relative overflow-hidden",children:[e.jsxs(K,{className:"flex flex-row items-center gap-2 pb-2",children:[t.category==="Market Analysis"?e.jsx(Te,{className:"w-5 h-5 text-blue-500"}):t.category==="Investment Research"?e.jsx(Mr,{className:"w-5 h-5 text-green-500"}):e.jsx(da,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.category})]}),e.jsxs(G,{className:"relative",children:[e.jsxs("div",{className:s?"":"blur-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(t.date).toLocaleDateString()," Â·"," ",t.readTime]}),e.jsxs(E,{variant:"ghost",className:"group hover:text-primary",onClick:()=>{window.location.href=`/article/${encodeURIComponent(t.title)}`},children:["Read More",e.jsx(us,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]}),!s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 backdrop-blur-[2px]",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx(Ms,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upgrade to Pro to access research reports"})]})})]})]},r))})})}const Ga=async(s=1,a=6)=>{try{const t=(s-1)*a;console.log("Fetching deals with params:",{page:s,limit:a,start:t});const{data:r,error:n}=await Ze.from("deals").select(`
        id,
        title,
        description,
        location,
        price,
        roi_percentage,
        investment_term,
        property_type,
        deal_type,
        image_url,
        created_at,
        updated_at
      `).range(t,t+a-1).order("created_at",{ascending:!1});if(console.log("Raw Supabase response:",{data:r,error:n}),n)throw console.error("Supabase query error:",n.message,n),new Error(`Failed to fetch deals: ${n.message}`);if(!r||r.length===0)return console.log("No deals found in database"),[];const o=r.map(i=>({id:i.id,title:i.title,description:i.description,location:i.location,price:Number(i.price),roi_percentage:Number(i.roi_percentage),investment_term:i.investment_term,property_type:i.property_type,deal_type:i.deal_type,image_url:i.image_url,created_at:i.created_at,updated_at:i.updated_at}));return console.log("Transformed deals:",o),o}catch(t){throw console.error("Error in getDeals:",t instanceof Error?t.message:t),t}};function we({className:s,...a}){return e.jsx("div",{className:C("animate-pulse rounded-md bg-muted",s),...a})}function Ki(){return e.jsxs("div",{className:"overflow-hidden rounded-lg border bg-card",children:[e.jsx(we,{className:"aspect-video w-full"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(we,{className:"h-6 w-3/4"}),e.jsx(we,{className:"h-4 w-1/2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{className:"h-4 w-full"}),e.jsx(we,{className:"h-4 w-5/6"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(we,{className:"h-4 w-20 mb-1"}),e.jsx(we,{className:"h-6 w-24"})]}),e.jsxs("div",{children:[e.jsx(we,{className:"h-4 w-20 mb-1"}),e.jsx(we,{className:"h-6 w-24"})]})]})]})]})}function Rs({deal:s,isSubscriber:a,onClick:t,isLoading:r}){const{user:n}=Z(),o=be(),[i,g]=d.useState(!1);if(r)return e.jsx(Ki,{});const m=N=>{if(N.stopPropagation(),!n){o("/login");return}g(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(q,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:n?t:()=>o("/login"),children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden bg-muted",children:[e.jsx("img",{src:s.image_url,alt:s.title,className:"object-cover w-full h-full",loading:"lazy"}),!n&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(Ae,{variant:"secondary",children:"Sign in to View"})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx(Ae,{variant:"secondary",className:"bg-white/90 text-black hover:bg-white/75",children:s.property_type}),e.jsx(Ae,{variant:"secondary",className:"bg-primary/90 text-white hover:bg-primary/75",children:s.deal_type})]})]}),e.jsx(K,{children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold line-clamp-2 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"line-clamp-1",children:s.location})]})]})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("p",{className:"text-lg font-semibold",children:V(s.price)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ROI"}),e.jsxs("p",{className:"text-lg font-semibold text-emerald-500",children:[s.roi_percentage,"%"]})]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Investment Term"}),e.jsx("p",{className:"font-medium",children:s.investment_term})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected Returns"}),e.jsx("p",{className:"font-medium text-emerald-500",children:"High Yield"})]})]})}),n&&e.jsxs(E,{variant:"outline",className:"w-full",onClick:m,children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Enquire About This Deal"]})]})})]}),e.jsx(za,{isOpen:i,onClose:()=>g(!1),receiverId:"admin",dealId:s.id,deal:s})]})}function Ji(){const{user:s,profile:a,isLoading:t}=Z(),r=be(),[n,o]=d.useState([]),[i,g]=d.useState(!0),[m,N]=j.useState(!1),u=!0;return d.useEffect(()=>{let f=!0;async function x(){try{const k=await Ga();f&&(o(k),g(!1))}catch(k){console.error("Error loading deals:",k),f&&g(!1)}}return s&&!t?x():!t&&!s&&r("/login"),()=>{f=!1}},[s,t,r]),t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{children:"Loading..."})}):s?e.jsx(de,{children:e.jsx(Ce,{children:e.jsxs("div",{className:"min-h-screen bg-neutral",children:[e.jsx(fe,{title:"Research & Analysis",subtitle:"Discover in-depth market insights and property analysis",showSearch:!1,showStats:!1,height:"h-[400px]",image:"/research-hero.jpg"}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-primary",children:"Latest Research"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Stay informed with our comprehensive research reports and expert analysis"})]}),e.jsx(Hi,{isPro:u})]}),i?e.jsx("div",{className:"text-center py-8",children:"Loading deals..."}):e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Latest Deals"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(f=>e.jsx(Rs,{deal:f,isSubscriber:(a==null?void 0:a.subscription_tier)!=="free"},f.id))})]})]}),e.jsx(Ua,{isOpen:m,onClose:()=>N(!1)})]})})}):null}function Zi(){const{user:s,profile:a}=Z(),t=[{title:"Understanding Property Market Cycles",excerpt:"A comprehensive guide to property market cycles and how to identify market phases for optimal investment timing.",category:"Market Analysis",date:"2024-03-20",readTime:"8 min read",image:"https://images.unsplash.com/photo-1460472178825-e5240623afd5?ixlib=rb-4.0.3"},{title:"Buy-to-Let Investment Strategy Guide",excerpt:"Expert insights into creating a successful buy-to-let investment strategy in today's market conditions.",category:"Investment",date:"2024-03-18",readTime:"10 min read",image:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3"},{title:"Property Tax Changes in 2024",excerpt:"Stay updated with the latest property tax regulations and how they affect property investors and homeowners.",category:"Legal",date:"2024-03-15",readTime:"6 min read",image:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?ixlib=rb-4.0.3"}];return e.jsx(Ce,{children:e.jsxs(de,{children:[e.jsx(fe,{title:"Property Investment Blog",subtitle:"Expert insights and analysis on the UK property market",backgroundImage:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24 sm:pt-8",children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((r,n)=>e.jsxs(q,{className:"flex flex-col h-full hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"relative h-48 w-full overflow-hidden rounded-t-lg",children:e.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"})}),e.jsxs(K,{className:"flex flex-row items-center gap-2",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r.category})]}),e.jsxs(G,{className:"flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),e.jsx("p",{className:"text-muted-foreground mb-4 flex-1",children:r.excerpt}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(r.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ca,{className:"w-4 h-4"}),e.jsx("span",{children:r.readTime})]})]}),e.jsxs(E,{variant:"ghost",className:"group hover:text-primary",onClick:()=>{window.location.href=`/blog/${r.title.toLowerCase().replace(/ /g,"-")}`},children:["Read More",e.jsx(us,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})]},n))})})})]})})}function Xi(){const{user:s,profile:a}=Z(),[t,r]=j.useState(null),[n,o]=j.useState(null),[i,g]=j.useState(null),[m,N]=j.useState(null),[u,f]=j.useState(null),[x,k]=j.useState({propertyPrice:"",deposit:"",interestRate:"",term:""}),[S,v]=j.useState({propertyPrice:"",deposit:"",interestRate:"",rentalIncome:""}),[y,p]=j.useState({purchasePrice:"",renovationCost:"",expectedSalePrice:"",otherCosts:""}),[h,P]=j.useState({propertyPrice:"",annualRent:""}),[A,D]=j.useState({totalInvestment:"",annualReturn:""}),T=()=>{const b=parseFloat(x.propertyPrice)-parseFloat(x.deposit),$=parseFloat(x.interestRate)/100/12,W=parseFloat(x.term)*12,te=b*$*Math.pow(1+$,W)/(Math.pow(1+$,W)-1);r(te)},O=()=>{const $=(parseFloat(S.propertyPrice)-parseFloat(S.deposit))*(parseFloat(S.interestRate)/100)/12,te=parseFloat(S.rentalIncome)-$;o(te)},L=()=>{const b=parseFloat(y.purchasePrice)+parseFloat(y.renovationCost)+parseFloat(y.otherCosts),$=parseFloat(y.expectedSalePrice)-b;g($)},l=()=>{const b=parseFloat(h.annualRent)/parseFloat(h.propertyPrice)*100;N(b)},w=()=>{const b=parseFloat(A.annualReturn)/parseFloat(A.totalInvestment)*100;f(b)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Je,{isAuthenticated:!!s,userProfile:a||void 0}),e.jsx(fe,{title:"Property Investment Calculators",subtitle:"Make informed decisions with our comprehensive suite of property investment calculators",backgroundImage:"https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Investment Calculators"}),e.jsx("p",{className:"text-muted-foreground",children:"Calculate different aspects of your property investment"})]}),e.jsxs(Fs,{defaultValue:"mortgage",className:"w-full",children:[e.jsxs(Os,{className:"grid w-full grid-cols-5",children:[e.jsxs(_e,{value:"mortgage",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"})," Mortgage"]}),e.jsxs(_e,{value:"buytolet",className:"flex items-center gap-2",children:[e.jsx(ma,{className:"w-4 h-4"})," Buy to Let"]}),e.jsxs(_e,{value:"development",className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"w-4 h-4"})," Development"]}),e.jsxs(_e,{value:"rentalyield",className:"flex items-center gap-2",children:[e.jsx(Dr,{className:"w-4 h-4"})," Rental Yield"]}),e.jsxs(_e,{value:"roi",className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"})," ROI"]})]}),e.jsx(xe,{value:"mortgage",children:e.jsxs(q,{children:[e.jsx(K,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Mortgage Calculator"})}),e.jsxs(G,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Property Price (Â£)"}),e.jsx(B,{type:"number",value:x.propertyPrice,onChange:b=>k({...x,propertyPrice:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Deposit (Â£)"}),e.jsx(B,{type:"number",value:x.deposit,onChange:b=>k({...x,deposit:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Interest Rate (%)"}),e.jsx(B,{type:"number",value:x.interestRate,onChange:b=>k({...x,interestRate:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Term (Years)"}),e.jsx(B,{type:"number",value:x.term,onChange:b=>k({...x,term:b.target.value})})]})]}),e.jsx(E,{onClick:T,className:"w-full",children:"Calculate"}),t!==null&&e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsxs("p",{className:"text-lg font-semibold",children:["Monthly Payment: Â£",t.toFixed(2)]})})]})]})}),e.jsx(xe,{value:"buytolet",children:e.jsxs(q,{children:[e.jsx(K,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Buy to Let Calculator"})}),e.jsxs(G,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Property Price (Â£)"}),e.jsx(B,{type:"number",value:S.propertyPrice,onChange:b=>v({...S,propertyPrice:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Deposit (Â£)"}),e.jsx(B,{type:"number",value:S.deposit,onChange:b=>v({...S,deposit:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Interest Rate (%)"}),e.jsx(B,{type:"number",value:S.interestRate,onChange:b=>v({...S,interestRate:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Monthly Rental Income (Â£)"}),e.jsx(B,{type:"number",value:S.rentalIncome,onChange:b=>v({...S,rentalIncome:b.target.value})})]})]}),e.jsx(E,{onClick:O,className:"w-full",children:"Calculate"}),n!==null&&e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsxs("p",{className:"text-lg font-semibold",children:["Monthly Cashflow: Â£",n.toFixed(2)]})})]})]})}),e.jsx(xe,{value:"development",children:e.jsxs(q,{children:[e.jsx(K,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Development Calculator"})}),e.jsxs(G,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Purchase Price (Â£)"}),e.jsx(B,{type:"number",value:y.purchasePrice,onChange:b=>p({...y,purchasePrice:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Renovation Cost (Â£)"}),e.jsx(B,{type:"number",value:y.renovationCost,onChange:b=>p({...y,renovationCost:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Expected Sale Price (Â£)"}),e.jsx(B,{type:"number",value:y.expectedSalePrice,onChange:b=>p({...y,expectedSalePrice:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Other Costs (Â£)"}),e.jsx(B,{type:"number",value:y.otherCosts,onChange:b=>p({...y,otherCosts:b.target.value})})]})]}),e.jsx(E,{onClick:L,className:"w-full",children:"Calculate"}),i!==null&&e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsxs("p",{className:"text-lg font-semibold",children:["Expected Profit: Â£",i.toFixed(2)]})})]})]})}),e.jsx(xe,{value:"rentalyield",children:e.jsxs(q,{children:[e.jsx(K,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Rental Yield Calculator"})}),e.jsxs(G,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Property Price (Â£)"}),e.jsx(B,{type:"number",value:h.propertyPrice,onChange:b=>P({...h,propertyPrice:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Annual Rental Income (Â£)"}),e.jsx(B,{type:"number",value:h.annualRent,onChange:b=>P({...h,annualRent:b.target.value})})]})]}),e.jsx(E,{onClick:l,className:"w-full",children:"Calculate"}),m!==null&&e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsxs("p",{className:"text-lg font-semibold",children:["Rental Yield: ",m.toFixed(2),"%"]})})]})]})}),e.jsx(xe,{value:"roi",children:e.jsxs(q,{children:[e.jsx(K,{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"ROI Calculator"})}),e.jsxs(G,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Total Investment (Â£)"}),e.jsx(B,{type:"number",value:A.totalInvestment,onChange:b=>D({...A,totalInvestment:b.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Annual Return (Â£)"}),e.jsx(B,{type:"number",value:A.annualReturn,onChange:b=>D({...A,annualReturn:b.target.value})})]})]}),e.jsx(E,{onClick:w,className:"w-full",children:"Calculate"}),u!==null&&e.jsx("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:e.jsxs("p",{className:"text-lg font-semibold",children:["ROI: ",u.toFixed(2),"%"]})})]})]})})]})]})}),e.jsx(hs,{})]})}function Qi(){const s=[{title:"Getting Started",icon:e.jsx(Fr,{className:"w-5 h-5"}),description:"Learn the basics of using our platform",content:["How to search for properties","Understanding market insights","Setting up your account","Subscription plans overview"]},{title:"Account & Billing",icon:e.jsx(da,{className:"w-5 h-5"}),description:"Manage your account and subscription",content:["Updating account details","Subscription management","Billing history","Payment methods"]},{title:"Technical Support",icon:e.jsx(Or,{className:"w-5 h-5"}),description:"Get help with technical issues",content:["Troubleshooting guide","System requirements","Known issues","Browser compatibility"]}],a=[{icon:e.jsx($r,{className:"w-5 h-5"}),title:"Email Support",description:"Get help via email",action:"support@myvge.co.uk",buttonText:"Send Email",onClick:()=>window.location.href="mailto:support@myvge.co.uk"},{icon:e.jsx(Ur,{className:"w-5 h-5"}),title:"Phone Support",description:"Speak to our team",action:"0800 123 4567",buttonText:"Call Now",onClick:()=>window.location.href="tel:08001234567"},{icon:e.jsx(Ke,{className:"w-5 h-5"}),title:"Live Chat",description:"Chat with our support team",action:"Available 24/7",buttonText:"Start Chat",onClick:()=>{const t=new CustomEvent("open-messages",{detail:{receiverId:"support"}});window.dispatchEvent(t)}}];return e.jsx(Ce,{children:e.jsxs(de,{children:[e.jsx(fe,{title:"Help & Support Center",subtitle:"Get the assistance you need with our comprehensive support resources",backgroundImage:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map((t,r)=>e.jsxs(q,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(K,{className:"flex flex-row items-center gap-2",children:[t.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e.jsx(G,{children:e.jsx("ul",{className:"space-y-2",children:t.content.map((n,o)=>e.jsxs("li",{className:"text-sm",children:["â€¢ ",n]},o))})})]},r))}),e.jsxs("div",{className:"bg-card shadow rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Contact Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose your preferred method of contact"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map((t,r)=>e.jsx(q,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(G,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:t.icon}),e.jsx("h3",{className:"font-semibold mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),e.jsx("p",{className:"text-sm font-medium mb-4",children:t.action}),e.jsx(E,{onClick:t.onClick,className:"w-full",children:t.buttonText})]})},r))})]})]})})]})})}const eo=s=>{let a=s.replace(/\*\*(.*?)\*\*/g,'<span class="font-bold">$1</span>');return a=a.replace(/\*(.*?)\*/g,'<span class="italic">$1</span>'),a=a.replace(/^- (.+)$/gm,'<span class="block ml-2">â€¢ $1</span>'),a=a.replace(/^\d+\. (.+)$/gm,'<span class="block ml-2">$&</span>'),a.split(`
`).map(t=>t?`<span class="block">${t}</span>`:'<span class="block h-2"></span>').join("")},so="AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo",to="https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent";function ao(){const{user:s,profile:a}=Z(),[t,r]=j.useState(!1),[n,o]=j.useState("ai"),[i,g]=j.useState([]),[m,N]=j.useState([]),[u,f]=j.useState([]),[x,k]=j.useState(""),[S,v]=j.useState(!1),[y,p]=j.useState([]),[h,P]=j.useState(null),A=j.useRef(null),D=be();j.useEffect(()=>{if(s){T();const l=w=>{r(!0),o("messages");const b=w.detail.receiverId,$=y.find(W=>W.id===b);$&&P($)};return window.addEventListener("open-messages",l),()=>window.removeEventListener("open-messages",l)}},[s,y]);const T=async()=>{try{const{data:l}=await F.from("messages").select(`
          *,
          sender:profiles!messages_sender_id_fkey(id, full_name, email),
          receiver:profiles!messages_receiver_id_fkey(id, full_name, email)
        `).or(`sender_id.eq.${s==null?void 0:s.id},receiver_id.eq.${s==null?void 0:s.id}`).order("created_at",{ascending:!1});if(!l)return;const w=new Map;l.forEach(b=>{const $=b.sender.id===(s==null?void 0:s.id)?b.receiver:b.sender;w.has($.id)||w.set($.id,{id:$.id,full_name:$.full_name,email:$.email,last_message:b.content,unread_count:b.receiver_id===(s==null?void 0:s.id)&&!b.is_read?1:0})}),p(Array.from(w.values()))}catch(l){console.error("Error loading contacts:",l)}},O=async l=>{if(l.trim())if(n==="ai"){g(w=>[...w,{text:l,isUser:!0}]),k(""),v(!0);try{const w=await fetch(`${to}?key=${so}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:l}]}]})});if(!w.ok)throw new Error(`AI API error: ${w.status}`);const $=(await w.json()).candidates[0].content.parts[0].text;if(s){const W=`ai_${s.id}_${Date.now()}`;await F.from("messages").insert([{sender_id:s.id,receiver_id:s.id,content:l,is_support:!1,conversation_id:W},{sender_id:null,receiver_id:s.id,content:$,is_support:!0,conversation_id:W}])}g(W=>[...W,{text:$,isUser:!1}])}catch(w){console.error("Error in AI chat:",w),g(b=>[...b,{text:"Sorry, I encountered an error. Please try again.",isUser:!1}])}finally{v(!1)}}else if(s)if(n==="support"){N(w=>[...w,{text:l,isUser:!0}]),k("");try{const w=`support_${s.id}_${Date.now()}`,{error:b}=await F.from("messages").insert({sender_id:s.id,receiver_id:"support",content:l,is_support:!0,conversation_id:w});if(b)throw b;const $="Thank you for your message. Our support team will get back to you soon.",{error:W}=await F.from("messages").insert({sender_id:null,receiver_id:s.id,content:$,is_support:!0,conversation_id:w});if(W)throw W;N(te=>[...te,{text:$,isUser:!1}])}catch(w){console.error("Error handling support message:",w),N(b=>[...b,{text:"Sorry, there was an error sending your message. Please try again.",isUser:!1}])}}else{if(!s||!h)return;try{console.log("Sending message to Supabase:",{sender_id:s.id,receiver_id:h.id,content:l,is_support:n==="support"});const{data:w,error:b}=await F.from("messages").insert([{sender_id:s.id,receiver_id:h.id,content:l,is_support:n==="support"}]);if(b)throw console.error("Supabase insert error:",b),b;console.log("Supabase insert success:",w),f($=>[...$,{text:l,isUser:!0,sender:{full_name:(a==null?void 0:a.full_name)||"",email:(a==null?void 0:a.email)||""},timestamp:new Date().toISOString()}]),k("")}catch(w){console.error("Error sending message:",w)}}else{g(w=>[...w,{text:"Please sign in to use support and direct messaging features.",isUser:!1}]);return}},L=()=>{A.current&&(A.current.scrollTop=A.current.scrollHeight)};return j.useEffect(()=>{L()},[i,m,u]),j.useEffect(()=>{L()},[S]),j.useEffect(()=>{if(!s||!h)return;const l=F.channel(`messages:${s.id}:${h.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`or(and(sender_id.eq.${s.id},receiver_id.eq.${h.id}),and(sender_id.eq.${h.id},receiver_id.eq.${s.id}))`},w=>{console.log("Realtime message received:",w);const b=w.new;b.sender_id!==s.id&&f($=>[...$,{text:b.content,isUser:!1,sender:h,timestamp:b.created_at}])}).subscribe();return()=>{l.unsubscribe()}},[s,h]),e.jsx(e.Fragment,{children:e.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${t?"w-96":"w-auto"}`,children:t?e.jsxs("div",{className:"bg-background border rounded-lg shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold",children:"AI Assistant"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>D("/messages"),title:"Chat with Users",children:e.jsx(la,{className:"h-4 w-4"})}),e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>r(!1),children:e.jsx(Ts,{className:"h-4 w-4"})})]})]}),e.jsxs(Fs,{defaultValue:n,onValueChange:o,children:[e.jsxs(xe,{value:"ai",className:"m-0 bg-white",children:[e.jsxs("div",{ref:A,className:"h-96 p-4 space-y-4 overflow-y-auto",children:[i.length===0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hello! I'm your property assistant. Ask me anything about property investment, or try one of these popular questions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Zn.map((l,w)=>e.jsx(E,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>O(l),children:l},w))})]}):i.map((l,w)=>e.jsx("div",{className:`flex ${l.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${l.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:l.isUser?l.text:eo(l.text)}})})},w)),S&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"max-w-[80%] rounded-lg p-3 bg-muted",children:e.jsx("p",{className:"text-sm",children:"Typing..."})})})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{value:x,onChange:l=>k(l.target.value),placeholder:"Ask me anything about property...",onKeyPress:l=>{l.key==="Enter"&&O(x)}}),e.jsx(E,{onClick:()=>O(x),disabled:!x.trim(),children:e.jsx(os,{className:"h-4 w-4"})})]})})]}),e.jsxs(xe,{value:"messages",className:"m-0 bg-white",children:[e.jsx("div",{ref:A,className:"h-96 p-4 space-y-4 overflow-y-auto",children:s?h?e.jsx("div",{className:"space-y-4",children:u.map((l,w)=>e.jsx("div",{className:`flex ${l.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${l.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm",children:l.text})})},w))}):e.jsx("div",{className:"space-y-4",children:y.map(l=>{var w;return e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted rounded-lg cursor-pointer",onClick:()=>P(l),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Le,{className:"h-8 w-8",children:[e.jsx(De,{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(l.full_name)}&background=random`,alt:l.full_name}),e.jsx(Fe,{children:(w=l.full_name)==null?void 0:w.split(" ").map(b=>b[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.last_message})]})]}),l.unread_count&&l.unread_count>0&&e.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:l.unread_count})]},l.id)})}):e.jsx("div",{className:"text-center p-4",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Please sign in to view messages"})})}),h&&e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{value:x,onChange:l=>k(l.target.value),placeholder:"Type a message...",onKeyPress:l=>{l.key==="Enter"&&O(x)}}),e.jsx(E,{onClick:()=>O(x),disabled:!x.trim(),children:e.jsx(os,{className:"h-4 w-4"})})]})})]}),e.jsxs(xe,{value:"support",className:"m-0 bg-white",children:[e.jsx("div",{ref:A,className:"h-96 p-4 space-y-4 overflow-y-auto",children:m.length===0?e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome to support! How can we help you today?"})}):m.map((l,w)=>e.jsx("div",{className:`flex ${l.isUser?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${l.isUser?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm",children:l.text})})},w))}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{value:x,onChange:l=>k(l.target.value),placeholder:"Type your support question...",onKeyPress:l=>{l.key==="Enter"&&O(x)}}),e.jsx(E,{onClick:()=>O(x),disabled:!x.trim(),children:e.jsx(os,{className:"h-4 w-4"})})]})})]})]})]}):e.jsx(E,{onClick:()=>r(!0),className:"rounded-full h-12 w-12 flex items-center justify-center",children:e.jsx(Ke,{className:"h-6 w-6"})})})})}function ro(){const s=be();return d.useEffect(()=>{F.auth.onAuthStateChange((t,r)=>{console.log("Auth state change:",t,r),t==="SIGNED_IN"&&s("/dashboard")}),(async()=>{const{data:{session:t}}=await F.auth.getSession();console.log("Initial session:",t),s(t?"/dashboard":"/")})()},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Authenticating..."}),e.jsx("p",{className:"text-muted-foreground",children:"Please wait while we verify your credentials."})]})})}const no=[{title:"AI Property Analysis",description:"Advanced AI algorithms analyze market trends, rental rates, and property conditions to optimize your investment returns.",icon:ua,badge:"AI-Powered"},{title:"Smart Tenant Matching",description:"AI-driven tenant screening and matching system to find the perfect tenants for your properties.",icon:Ie,badge:"Smart Match"},{title:"Predictive Maintenance",description:"AI predicts maintenance needs before they become issues, saving you time and money.",icon:Cs,badge:"Predictive"},{title:"Automated Reporting",description:"AI-generated insights and reports on property performance, maintenance history, and financial metrics.",icon:ha,badge:"Automated"},{title:"AI Chat Support",description:"24/7 AI-powered chat support for tenants and property owners.",icon:zr,badge:"24/7 Support"},{title:"Smart Security",description:"AI-enhanced security monitoring and access control systems.",icon:qr,badge:"Enhanced"}],io=[{title:"Tenant Screening",description:"Comprehensive tenant screening with AI-powered background checks and risk assessment."},{title:"Rent Collection",description:"Smart rent collection with predictive payment analysis and automated reminders."},{title:"Property Maintenance",description:"AI-driven maintenance scheduling and vendor management."},{title:"Financial Reporting",description:"Advanced financial analytics with AI-powered forecasting and recommendations."}];function oo(){return e.jsx(Ce,{children:e.jsxs(de,{children:[e.jsx(fe,{title:"AI-Powered Property Management",subtitle:"Experience the future of property management with our advanced AI solutions.",backgroundImage:"https://images.unsplash.com/photo-1568605114967-8130f3a36994?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-16",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Next-Generation Property Management"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Leveraging artificial intelligence to revolutionize property management and maximize your investment returns."})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"AI-Powered Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:no.map((s,a)=>e.jsxs(q,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(K,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(s.icon,{className:"h-6 w-6 text-primary"}),e.jsx(Ae,{variant:"secondary",children:s.badge})]}),e.jsx(Se,{className:"text-xl",children:s.title})]}),e.jsx(G,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]},a))})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Core Services Enhanced by AI"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:io.map((s,a)=>e.jsxs(q,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{children:e.jsx(Se,{children:s.title})}),e.jsx(G,{children:e.jsx("p",{className:"text-muted-foreground",children:s.description})})]},a))})]}),e.jsxs("section",{className:"space-y-8 bg-muted p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Why Choose Our AI-Powered Management?"}),e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Reduce operational costs by up to 30% with AI automation"}),e.jsx("li",{children:"Minimize vacancy rates with smart tenant matching"}),e.jsx("li",{children:"Prevent maintenance issues before they occur"}),e.jsx("li",{children:"Get real-time insights and predictive analytics"}),e.jsx("li",{children:"24/7 automated support for tenants"}),e.jsx("li",{children:"Enhanced security and risk management"})]})})]}),e.jsxs("section",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Ready to Transform Your Property Management?"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Experience the power of AI-driven property management. Contact us to learn how we can help optimize your property portfolio."}),e.jsx(E,{size:"lg",className:"px-8",children:"Schedule a Demo"})]})]})})]})})}const $e=Kr,Ue=Jr,Re=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(pa,{ref:r,className:C("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[a,e.jsx(Br,{asChild:!0,children:e.jsx(Ls,{className:"h-4 w-4 opacity-50"})})]}));Re.displayName=pa.displayName;const Va=d.forwardRef(({className:s,...a},t)=>e.jsx(xa,{ref:t,className:C("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Gr,{className:"h-4 w-4"})}));Va.displayName=xa.displayName;const Wa=d.forwardRef(({className:s,...a},t)=>e.jsx(fa,{ref:t,className:C("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Ls,{className:"h-4 w-4"})}));Wa.displayName=fa.displayName;const Me=d.forwardRef(({className:s,children:a,position:t="popper",...r},n)=>e.jsx(Vr,{children:e.jsxs(ga,{ref:n,className:C("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx(Va,{}),e.jsx(Wr,{className:C("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(Wa,{})]})}));Me.displayName=ga.displayName;const lo=d.forwardRef(({className:s,...a},t)=>e.jsx(ja,{ref:t,className:C("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a}));lo.displayName=ja.displayName;const ae=d.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(va,{ref:r,className:C("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Yr,{children:e.jsx(na,{className:"h-4 w-4"})})}),e.jsx(Hr,{children:a})]}));ae.displayName=va.displayName;const co=d.forwardRef(({className:s,...a},t)=>e.jsx(ya,{ref:t,className:C("-mx-1 my-1 h-px bg-muted",s),...a}));co.displayName=ya.displayName;const Ya=d.forwardRef(({className:s,...a},t)=>e.jsxs(ba,{ref:t,className:C("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(Zr,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(Xr,{className:"absolute h-full bg-primary"})}),e.jsx(Qr,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Ya.displayName=ba.displayName;let _s;async function Gs(){if(!_s){const{GoogleGenerativeAI:s}=await en(async()=>{const{GoogleGenerativeAI:a}=await import("./vendor-B2Hn3sqI.js").then(t=>t.bP);return{GoogleGenerativeAI:a}},[]);_s=new s("AIzaSyD0MjDEtw7El7GSzOm9F8iIKE2uGDkVBWo")}return _s}function Vs(s){const a=s.indexOf("{"),t=s.lastIndexOf("}")+1;if(a===-1||t===0)throw new Error("Invalid JSON response");return s.slice(a,t)}async function mo(s,a){const r=(await Gs()).getGenerativeModel({model:"gemini-pro"}),n=`
    You are a UK property investment expert. Analyze investment opportunities for ${s} properties with a budget of Â£${a}.
    Respond with a JSON object containing ONLY these exact fields:
    {
      "analysis": "Brief overview of the investment opportunity",
      "roi_range": "Expected ROI range as a percentage",
      "risks": ["Risk 1", "Risk 2", "Risk 3"],
      "opportunities": ["Opportunity 1", "Opportunity 2", "Opportunity 3"],
      "market_trends": ["Trend 1", "Trend 2", "Trend 3"]
    }
    Ensure each array has exactly 3 items and all fields are present.
  `;try{const i=await(await r.generateContent(n)).response,g=Vs(i.text().trim());console.log("Raw Analysis Response:",g);const m=JSON.parse(g);if(!m.analysis||!m.roi_range||!Array.isArray(m.risks)||!Array.isArray(m.opportunities)||!Array.isArray(m.market_trends))throw new Error("Invalid response format");return{analysis:m.analysis,roi_range:m.roi_range,risks:m.risks.slice(0,3),opportunities:m.opportunities.slice(0,3),market_trends:m.market_trends.slice(0,3)}}catch(o){return console.error("Error in getInvestmentAnalysis:",o),{analysis:`Analysis for ${s} properties with Â£${a} budget is currently unavailable`,roi_range:"8-12%",risks:["Market volatility","Economic uncertainty","Property condition risks"],opportunities:["Value appreciation potential","Rental income opportunities","Development possibilities"],market_trends:["Rising demand in key areas","Stable price growth","Infrastructure development"]}}}async function uo(s){const t=(await Gs()).getGenerativeModel({model:"gemini-pro"}),r=`
    You are a UK property market expert. Predict property market trends for ${s} in the next 12 months.
    Respond ONLY with a JSON object in this exact format:
    {
      "price_prediction": "2-3 sentence prediction of price movements",
      "demand_factors": ["3 specific demand factors"],
      "recommendations": ["3 specific investment recommendations"]
    }
  `;try{const o=await(await t.generateContent(r)).response,i=Vs(o.text().trim());return console.log("Raw Predictions Response:",i),JSON.parse(i)}catch(n){return console.error("Error in getMarketPredictions:",n),{price_prediction:"Market prediction currently unavailable",demand_factors:["Population growth","Economic development","Infrastructure improvements"],recommendations:["Research thoroughly","Consider long-term potential","Evaluate local amenities"]}}}async function ho(s){const t=(await Gs()).getGenerativeModel({model:"gemini-pro"}),r=`
    You are a UK property investment advisor. Create a strategy for a ${s.experience} investor with Â£${s.budget} budget and ${s.riskTolerance} risk tolerance.
    Respond ONLY with a JSON object in this exact format:
    {
      "strategy": "2-3 sentence overview of recommended strategy",
      "portfolio_allocation": "Suggested portfolio breakdown percentages",
      "timeline": "Recommended investment timeline",
      "expected_returns": "Projected returns overview"
    }
  `;try{const o=await(await t.generateContent(r)).response,i=Vs(o.text().trim());return console.log("Raw Strategy Response:",i),JSON.parse(i)}catch(n){return console.error("Error in getInvestmentStrategy:",n),{strategy:"Investment strategy currently unavailable",portfolio_allocation:"Residential: 60%, Commercial: 30%, Cash: 10%",timeline:"5-10 years recommended holding period",expected_returns:"8-12% annual return potential"}}}function po(){const[s,a]=j.useState(!1),[t,r]=j.useState(null),[n,o]=j.useState("residential"),[i,g]=j.useState(25e4),[m,N]=j.useState("London"),[u,f]=j.useState(null),[x,k]=j.useState(null),[S,v]=j.useState(null),y={experience:"intermediate",budget:i,riskTolerance:"moderate"},p=async()=>{a(!0),r(null);try{const h=await mo(n,i);if(!h||typeof h!="object")throw new Error("Invalid analysis data received");f(h);const P=await uo(m);if(!P||typeof P!="object")throw new Error("Invalid predictions data received");k(P);const A=await ho(y);if(!A||typeof A!="object")throw new Error("Invalid strategy data received");v(A)}catch(h){console.error("Error in analysis:",h),r(h instanceof Error?h.message:"Failed to generate analysis. Please try again."),f(null),k(null),v(null)}finally{a(!1)}};return e.jsx(Ce,{children:e.jsxs(de,{children:[e.jsx(fe,{title:"AI-Powered Investment Analysis",subtitle:"Make data-driven investment decisions with our advanced AI analytics",showSearch:!1,height:"h-[400px]",onSearch:()=>{}}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsxs("section",{className:"bg-card p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Investment Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property Type"}),e.jsxs($e,{defaultValue:n,onValueChange:h=>o(h),children:[e.jsx(Re,{className:"w-full",children:e.jsx(Ue,{placeholder:"Select property type"})}),e.jsxs(Me,{children:[e.jsx(ae,{value:"residential",children:"Residential"}),e.jsx(ae,{value:"commercial",children:"Commercial"}),e.jsx(ae,{value:"industrial",children:"Industrial"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsx(B,{type:"text",value:m,onChange:h=>N(h.target.value),placeholder:"Enter location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Budget: Â£",i.toLocaleString()]}),e.jsx(Ya,{value:[i],onValueChange:h=>g(h[0]),min:1e5,max:1e6,step:5e4})]})]}),e.jsx(E,{onClick:p,disabled:s,className:"mt-6",size:"lg",children:s?e.jsxs(e.Fragment,{children:[e.jsx(sn,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):"Analyze Investment Opportunity"})]}),t&&e.jsx("div",{className:"bg-destructive/10 text-destructive p-4 rounded-lg",children:t}),u&&x&&S&&!t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(q,{children:[e.jsxs(K,{children:[e.jsx(Te,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(Se,{children:"Market Analysis"})]}),e.jsxs(G,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Analysis"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.analysis||"Analysis not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"ROI Range"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.roi_range||"ROI range not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Risks"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(u.risks)?u.risks.map((h,P)=>e.jsx("li",{children:h},P)):e.jsx("li",{children:"Risks data not available"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Market Trends"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(u.market_trends)?u.market_trends.map((h,P)=>e.jsx("li",{children:h},P)):e.jsx("li",{children:"Market trends not available"})})]})]})]}),e.jsxs(q,{children:[e.jsxs(K,{children:[e.jsx(ua,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(Se,{children:"AI Predictions"})]}),e.jsxs(G,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Price Trend"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.price_prediction||"Price prediction not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Demand Factors"}),e.jsx("ul",{className:"list-disc pl-4 text-sm text-muted-foreground",children:Array.isArray(x.demand_factors)?x.demand_factors.map((h,P)=>e.jsx("li",{children:h},P)):e.jsx("li",{children:"Demand factors not available"})})]})]})]}),e.jsxs(q,{children:[e.jsxs(K,{children:[e.jsx(ha,{className:"h-6 w-6 text-primary mb-2"}),e.jsx(Se,{children:"Recommended Strategy"})]}),e.jsxs(G,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Portfolio Allocation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.portfolio_allocation||"Portfolio allocation not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Expected Returns"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.expected_returns||"Expected returns not available"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.timeline||"Timeline not available"})]})]})]})]})]})})]})})}function xo(){return e.jsx(Ce,{children:e.jsxs(de,{children:[e.jsx(fe,{title:"About MyVGE",subtitle:"Learn more about our mission and our team",backgroundImage:"https://images.unsplash.com/photo-1507585495646-50c2b6dbd483?ixlib=rb-4.0.3",showSearch:!1,showStats:!1,height:"h-[400px]"}),e.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Our Story"}),e.jsx("p",{className:"text-muted-foreground",children:"MyVGE is dedicated to providing property investors with the tools and insights they need to succeed."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Mission"}),e.jsx("p",{children:"To empower property investors with comprehensive data, expert analysis, and innovative tools to make informed decisions and achieve their financial goals. We are committed to ethical practices, diversity, and transparency in all our operations."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Values"}),e.jsxs("ul",{className:"list-disc list-inside",children:[e.jsx("li",{children:"**Ethical Practices:** We adhere to the highest ethical standards in all our dealings, ensuring fairness and integrity."}),e.jsx("li",{children:"**Diversity:** We embrace diversity and inclusion, fostering a welcoming environment for all."}),e.jsx("li",{children:"**Transparency:** We are committed to open and honest communication, providing clear and accurate information to our users."})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Our Team"}),e.jsx("p",{children:"Our team consists of experienced property professionals, data scientists, and technology experts who are passionate about helping investors navigate the complexities of the real estate market. We are a diverse group of individuals with a shared commitment to excellence."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Contact Us"}),e.jsx("p",{children:"We'd love to hear from you! Contact us to learn more about our services or to discuss your investment needs."}),e.jsx(E,{children:"Contact Us"})]})]})})]})})}const fo=({isOpen:s,onClose:a,deal:t,isSubscriber:r})=>t?e.jsx(Pe,{open:s,onOpenChange:a,children:e.jsxs(je,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ve,{children:e.jsxs(ye,{className:"flex items-start justify-between gap-4",children:[e.jsx("span",{className:"text-xl font-bold",children:t.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ae,{children:t.property_type}),e.jsx(Ae,{variant:"secondary",children:t.deal_type})]})]})}),e.jsx("div",{className:"relative aspect-video mb-4 overflow-hidden rounded-lg",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-muted-foreground",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:t.location})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Price"}),e.jsx("p",{className:"text-lg",children:V(t.price)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ROI"}),e.jsxs("p",{className:"text-lg text-emerald-500",children:[t.roi_percentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Investment Term"}),e.jsx("p",{className:"text-lg",children:t.investment_term})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Property Type"}),e.jsx("p",{className:"text-lg",children:t.property_type})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Deal Type"}),e.jsx(Ae,{variant:"outline",children:t.deal_type})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),e.jsx("p",{className:"text-muted-foreground",children:t.location})]})]})]})}):null;function go({onSignIn:s,onSignUp:a}){const{user:t,profile:r,isLoading:n}=Z(),[o,i]=d.useState([]),[g,m]=d.useState(!0),[N,u]=d.useState(null);return d.useEffect(()=>{let f=!0;async function x(){try{const k=await Ga();f&&(i(k),m(!1))}catch(k){console.error("Error loading deals:",k),f&&m(!1)}}return x(),()=>{f=!1}},[]),n?e.jsx(de,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{children:"Loading..."})})}):e.jsx(de,{children:e.jsx(Ce,{children:e.jsxs("div",{className:"min-h-screen bg-neutral",children:[e.jsx(fe,{title:"Property Deals",subtitle:"Discover exclusive property investment opportunities",showSearch:!0,showStats:!1,height:"h-[400px]",image:"/deals-hero.jpg"}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:g?e.jsx("div",{className:"text-center py-8",children:"Loading deals..."}):t?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(f=>e.jsx(Rs,{deal:f,isSubscriber:(r==null?void 0:r.subscription_tier)!=="free",onClick:()=>u(f)},f.id))}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(q,{className:"p-8 text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sign in to View Full Deal Details"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Get access to exclusive property deals and investment opportunities. Create an account or sign in to view all available deals."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(E,{onClick:s,className:"flex items-center gap-2",children:[e.jsx(ks,{className:"w-4 w-4"}),"Sign In"]}),e.jsxs(E,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"w-4 w-4"}),"Create Account"]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(f=>e.jsx(Rs,{deal:f,isSubscriber:!1,onClick:s},f.id))})]})}),e.jsx(fo,{isOpen:!!N,onClose:()=>u(null),deal:N,isSubscriber:(r==null?void 0:r.subscription_tier)!=="free"})]})})})}function jo(s){return s&&typeof s.user_id=="string"&&s.profile&&typeof s.profile.full_name=="string"&&(s.profile.avatar_url===null||typeof s.profile.avatar_url=="string")}const Ss=s=>s.filter(jo).map(a=>({user_id:a.user_id,profile:{full_name:a.profile.full_name,avatar_url:a.profile.avatar_url}}));function vo(){const{user:s}=Z(),{toast:a}=he(),[t,r]=d.useState([]),[n,o]=d.useState(null),[i,g]=d.useState([]),[m,N]=d.useState(""),u=d.useRef(null),[,f]=d.useState(!0),[x,k]=d.useState(""),[S,v]=d.useState([]),[y,p]=d.useState(!1),[h,P]=d.useState(!1);d.useEffect(()=>{if(!s)return;(async()=>{try{console.log("Fetching conversations for user:",s==null?void 0:s.id);const{data:b,error:$}=await F.from("conversation_participants").select("conversation_id").eq("user_id",s==null?void 0:s.id);if($)throw console.error("Error fetching participants:",$),$;if(console.log("Found participant records:",b),!(b!=null&&b.length)){console.log("No conversations found"),r([]),f(!1);return}const W=b.map(X=>X.conversation_id);console.log("Conversation IDs:",W);const{data:te,error:re}=await F.from("conversations").select(`
            id,
            created_at,
            participants:conversation_participants!inner (
              user_id,
              profile:profiles!inner (
                full_name,
                avatar_url
              )
            ),
            messages (
              id,
              content,
              sender_id,
              created_at
            )
          `).in("id",W).order("created_at",{ascending:!1});if(re)throw console.error("Error fetching conversations:",re),re;console.log("Raw conversations data:",te);const oe=(te||[]).map(X=>{const me=X.messages&&X.messages.length>0?X.messages[X.messages.length-1]:void 0;return{id:X.id,participants:Ss(X.participants),last_message:me}});console.log("Transformed conversations:",oe),r(oe)}catch(b){console.error("Error in fetchConversations:",b),a({title:"Error",description:b instanceof Error?b.message:"Failed to load conversations",variant:"destructive"})}finally{f(!1)}})();const w=F.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},b=>{const $=b.new;(n==null?void 0:n.id)===$.conversation_id&&g(W=>[...W,$])}).subscribe();return()=>{w.unsubscribe()}},[s,n==null?void 0:n.id]),d.useEffect(()=>{n&&A(n.id)},[n]),d.useEffect(()=>{D()},[i]);const A=async l=>{const{data:w,error:b}=await F.from("messages").select(`
        *,
        sender:profiles!sender_id(
          full_name,
          avatar_url
        )
      `).eq("conversation_id",l).order("created_at",{ascending:!0});if(b){console.error("Error fetching messages:",b);return}g(w||[])},D=()=>{var l;(l=u.current)==null||l.scrollIntoView({behavior:"smooth"})},T=async l=>{if(l.preventDefault(),!(!n||!m.trim()))try{const{error:w}=await F.from("messages").insert({conversation_id:n.id,sender_id:s==null?void 0:s.id,content:m.trim()});if(w)throw w;N("")}catch(w){console.error("Error sending message:",w),a({title:"Error",description:"Failed to send message",variant:"destructive"})}},O=async l=>{if(!l.trim()){v([]);return}p(!0);try{const{data:w,error:b}=await F.from("profiles").select("id, full_name, avatar_url, email").neq("id",s==null?void 0:s.id).or(`full_name.ilike.%${l}%,email.ilike.%${l}%`).limit(5);if(b)throw b;v(w||[])}catch(w){console.error("Error searching users:",w),a({title:"Error",description:"Failed to search users",variant:"destructive"})}finally{p(!1)}},L=async l=>{try{const{data:w,error:b}=await F.from("conversation_participants").select("conversation_id").eq("user_id",s==null?void 0:s.id);if(b)throw b;if(w!=null&&w.length){const{data:X,error:me}=await F.from("conversation_participants").select("conversation_id").in("conversation_id",w.map(le=>le.conversation_id)).eq("user_id",l.id).single();if(me&&me.code!=="PGRST116")throw me;if(X){const{data:le,error:Ne}=await F.from("conversations").select(`
              id,
              participants:conversation_participants(
                user_id,
                profile:profiles(
                  full_name,
                  avatar_url
                )
              )
            `).eq("id",X.conversation_id).single();if(Ne)throw Ne;if(le){const M={id:le.id,participants:Ss(le.participants)};o(M),P(!1);return}}}const{data:$,error:W}=await F.from("conversations").insert({created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(W)throw W;const{error:te}=await F.from("conversation_participants").insert([{conversation_id:$.id,user_id:s==null?void 0:s.id,created_at:new Date().toISOString()},{conversation_id:$.id,user_id:l.id,created_at:new Date().toISOString()}]);if(te)throw te;const{data:re,error:oe}=await F.from("conversations").select(`
          id,
          participants:conversation_participants(
            user_id,
            profile:profiles(
              full_name,
              avatar_url
            )
          )
        `).eq("id",$.id).single();if(oe)throw oe;if(re){const X={id:re.id,participants:Ss(re.participants)};r(me=>[X,...me]),o(X),P(!1),a({title:"Success",description:"New conversation started"})}}catch(w){console.error("Error starting conversation:",w),a({title:"Error",description:w.message||"Failed to start conversation. Please try again.",variant:"destructive"})}};return s?e.jsx(de,{children:e.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 max-w-6xl mx-auto",children:[e.jsxs(q,{className:"col-span-4",children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(Se,{children:"Messages"}),e.jsxs(Pe,{open:h,onOpenChange:P,children:[e.jsx(ti,{asChild:!0,children:e.jsx(E,{size:"icon",variant:"ghost",children:e.jsx(tn,{className:"h-4 w-4"})})}),e.jsxs(je,{children:[e.jsx(ve,{children:e.jsx(ye,{children:"New Conversation"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{placeholder:"Search users...",value:x,onChange:l=>{k(l.target.value),O(l.target.value)}}),e.jsx(E,{size:"icon",variant:"ghost",disabled:y,children:e.jsx(Jt,{className:"h-4 w-4"})})]}),e.jsxs(qe,{className:"h-[300px]",children:[S.map(l=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-accent rounded-lg cursor-pointer",onClick:()=>L(l),children:[e.jsxs(Le,{children:[e.jsx(De,{src:l.avatar_url||void 0}),e.jsx(Fe,{children:l.full_name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.full_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.email})]})]},l.id)),x&&!y&&S.length===0&&e.jsx("p",{className:"text-center text-muted-foreground p-4",children:"No users found"})]})]})]})]})]}),e.jsx(G,{children:e.jsx(qe,{className:"h-[600px]",children:t.map(l=>e.jsx("div",{className:`p-4 cursor-pointer hover:bg-accent rounded-lg mb-2 ${(n==null?void 0:n.id)===l.id?"bg-accent":""}`,onClick:()=>o(l),children:l.participants.filter(w=>w.user_id!==(s==null?void 0:s.id)).map(w=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Le,{children:[e.jsx(De,{src:w.profile.avatar_url||void 0}),e.jsx(Fe,{children:w.profile.full_name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w.profile.full_name}),l.last_message&&e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:l.last_message.content})]})]},w.user_id))},l.id))})})]}),e.jsx(q,{className:"col-span-8",children:e.jsx(G,{className:"p-0",children:n?e.jsxs("div",{className:"h-[600px] flex flex-col",children:[e.jsxs(qe,{className:"flex-1 p-4",children:[i.map(l=>e.jsx("div",{className:`flex mb-4 ${l.sender_id===(s==null?void 0:s.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${l.sender_id===(s==null?void 0:s.id)?"bg-primary text-primary-foreground":"bg-muted"} rounded-lg p-3`,children:[e.jsx("p",{children:l.content}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:new Date(l.created_at).toLocaleTimeString()})]})},l.id)),e.jsx("div",{ref:u})]}),e.jsx("form",{onSubmit:T,className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{value:m,onChange:l=>N(l.target.value),placeholder:"Type a message..."}),e.jsx(E,{type:"submit",size:"icon",children:e.jsx(os,{className:"h-4 w-4"})})]})})]}):e.jsx("div",{className:"h-[600px] flex items-center justify-center text-muted-foreground",children:"Select a conversation or start a new one"})})})]})})}):null}const ps="3160af39c66686f66e595371584faa9d8087132c",xs="https://app.patma.co.uk",fs="/api/prospector/v1";async function yo(s){try{const a=new URLSearchParams;a.append("postcode",s.postcode),s.lat&&a.append("lat",s.lat.toString()),s.long&&a.append("long",s.long.toString()),s.bedrooms&&a.append("bedrooms",s.bedrooms.toString()),s.property_type&&a.append("property_type",s.property_type),s.min_data_points&&a.append("min_data_points",s.min_data_points.toString());const t=`${xs}${fs}/asking-prices/?${a.toString()}`;console.log("Fetching asking prices from:",t);const r=await fetch(t,{method:"GET",headers:{Authorization:`Token ${ps}`,"Content-Type":"application/json",Accept:"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to fetch asking prices")}return await r.json()}catch(a){throw console.error("Error fetching asking prices:",a),a}}async function bo(s){var a;try{const t=new URLSearchParams;t.append("postcode",s.postcode),s.location&&t.append("location",s.location),s.lat&&t.append("lat",s.lat.toString()),s.long&&t.append("long",s.long.toString()),t.append("property_type",s.property_type),s.tenure&&t.append("tenure",s.tenure),s.new_build&&t.append("new_build",s.new_build),s.max_age_months&&t.append("max_age_months",s.max_age_months.toString()),s.min_data_points&&t.append("min_data_points",s.min_data_points.toString()),s.apply_indexation!==void 0&&t.append("apply_indexation",s.apply_indexation.toString());const r=`${xs}${fs}/sold-prices/?${t.toString()}`;console.log("Fetching sold properties from:",r);const n=await fetch(r,{method:"GET",headers:{Authorization:`Token ${ps}`,"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok){const i=await n.json().catch(()=>({errors:["Unknown error occurred"]}));throw new Error(((a=i.errors)==null?void 0:a[0])||`HTTP error! status: ${n.status}`)}const o=await n.json();if(console.log("Sold properties response:",o),o.status==="error"||o.errors){const i=Array.isArray(o.errors)?o.errors[0]:o.message||"Failed to fetch sold properties";throw new Error(i)}return o&&o.data&&Array.isArray(o.data.available_results)?{properties:o.data.available_results,total:o.data.total_results_count||o.data.available_results.length,totalPages:o.data.number_of_pages||Math.ceil(o.data.total_results_count/(s.page_size||12))}:o&&o.data&&Array.isArray(o.data.properties)?{properties:o.data.properties,total:o.data.total||o.data.properties.length,totalPages:o.data.total_pages||Math.ceil(o.data.properties.length/(s.page_size||10))}:(console.warn("Unexpected API response structure for sold properties:",o),{properties:[],total:0,totalPages:1})}catch(t){throw console.error("Error fetching sold properties:",t),t}}async function No(s){var a,t;try{const r=new URLSearchParams;r.append("postcode",s.postcode),s.location&&r.append("location",s.location),s.lat&&r.append("lat",s.lat.toString()),s.long&&r.append("long",s.long.toString()),s.radius&&r.append("radius",s.radius.toString()),s.polygon&&r.append("polygon",JSON.stringify(s.polygon)),s.property_type&&r.append("property_type",s.property_type),s.bedrooms&&r.append("bedrooms",s.bedrooms.toString()),s.require_sold_price!==void 0&&r.append("require_sold_price",s.require_sold_price.toString()),s.require_size!==void 0&&r.append("require_size",s.require_size.toString()),s.include_sold_history!==void 0&&r.append("include_sold_history",s.include_sold_history.toString()),s.include_indexation_based_value!==void 0&&r.append("include_indexation_based_value",s.include_indexation_based_value.toString()),s.sort_by&&r.append("sort_by",s.sort_by),s.page&&r.append("page",s.page.toString()),s.page_size&&r.append("page_size",s.page_size.toString()),s.records_after&&r.append("records_after",s.records_after);const n=`${xs}${fs}/list-property/?${r.toString()}`;console.log("Fetching listed properties from:",n);const i=await(await fetch(n,{method:"GET",headers:{Authorization:`Token ${ps}`,"Content-Type":"application/json",Accept:"application/json"}})).json();if(console.log("Listed properties response:",i),i.status==="error"||i.errors){const g=Array.isArray(i.errors)?i.errors[0]:i.message||"Failed to fetch listed properties";throw new Error(g)}return i&&i.data&&Array.isArray(i.data.available_results)?{properties:i.data.available_results,total:i.data.total_results_count||i.data.available_results.length,totalPages:i.data.number_of_pages||Math.ceil(i.data.total_results_count/(s.page_size||12))}:i&&i.properties?{properties:i.properties||[],total:i.total||((a=i.properties)==null?void 0:a.length)||0,totalPages:i.total_pages||Math.ceil((((t=i.properties)==null?void 0:t.length)||0)/(s.page_size||10))}:i&&i.data&&i.data.properties?{properties:i.data.properties,total:i.data.total||i.data.properties.length,totalPages:i.data.total_pages||Math.ceil(i.data.properties.length/(s.page_size||10))}:(console.warn("Unexpected API response structure:",i),{properties:[],total:0,totalPages:1})}catch(r){throw console.error("Error fetching listed properties:",r),r}}async function wo(s){try{const a=new URLSearchParams;a.append("postcode",s.postcode),s.property_type&&a.append("property_type",s.property_type);const t=`${xs}${fs}/price-history/?${a.toString()}`;console.log("Fetching price history from:",t);const r=await fetch(t,{method:"GET",headers:{Authorization:`Token ${ps}`,"Content-Type":"application/json",Accept:"application/json"}});if(!r.ok){const o=await r.json();throw new Error(o.message||"Failed to fetch price history")}return await r.json()}catch(a){throw console.error("Error fetching price history:",a),a}}function _o(){var Ws,Ys,Hs;const[s,a]=j.useState(""),[t,r]=j.useState(!1),[n,o]=j.useState([]),[i,g]=j.useState([]),[m,N]=j.useState({}),[u,f]=j.useState("listed"),[x,k]=j.useState(0),[S,v]=j.useState(1),{toast:y}=he(),[p,h]=j.useState({propertyType:"any",tenure:"any",minBeds:"0",radius:1,page:1,limit:12,newBuild:!1,maxAgeMonths:18,sortBy:"most_recent_sale_date"}),[P,A]=j.useState(!0),[D,T]=j.useState(!0),[O,L]=j.useState(!1),[l,w]=j.useState(null),[b,$]=j.useState(!1),W=j.useMemo(()=>u==="listed"?n:i,[u,n,i]),te=async c=>{try{const[_,I]=await Promise.all([yo({postcode:c,property_type:p.propertyType==="any"?void 0:p.propertyType,bedrooms:p.minBeds==="0"?void 0:parseInt(p.minBeds),radius:p.radius}),wo({postcode:c,property_type:p.propertyType==="any"?void 0:p.propertyType,max_age_months:p.maxAgeMonths})]);N({askingPrices:_,priceHistory:I})}catch(_){console.error("Error fetching area insights:",_)}},re=c=>{if(c.image_url&&typeof c.image_url=="string"&&c.image_url.trim()!=="")return console.log("Using direct image URL from API"),c.image_url;const _=["main_image","photo_url","thumbnail","image"];for(const I of _)if(c[I]&&typeof c[I]=="string"&&c[I].trim()!=="")return console.log(`Found image in property.${I}`),c[I];for(const I in c)if(typeof c[I]=="string"&&c[I].includes("property-software.uk")&&(c[I].endsWith(".jpg")||c[I].endsWith(".jpeg")||c[I].endsWith(".png")))return console.log(`Found PaTMa image URL in property.${I}`),c[I];if(c.images&&Array.isArray(c.images)&&c.images.length>0){const I=c.images.find(z=>typeof z=="string"&&z.includes("property-software.uk"));if(I)return console.log("Found PaTMa image URL in images array"),I;if(typeof c.images[0]=="string")return console.log("Using first image from images array"),c.images[0];if(c.images[0]&&typeof c.images[0]=="object"&&c.images[0].url)return console.log("Using URL from first image object in images array"),c.images[0].url}if(c.photos&&Array.isArray(c.photos)&&c.photos.length>0){const I=c.photos.find(z=>typeof z=="string"&&z.includes("property-software.uk"));if(I)return console.log("Found PaTMa image URL in photos array"),I;if(typeof c.photos[0]=="string")return console.log("Using first image from photos array"),c.photos[0];if(c.photos[0]&&typeof c.photos[0]=="object"&&c.photos[0].url)return console.log("Using URL from first image object in photos array"),c.photos[0].url}if(c.sold_history&&Array.isArray(c.sold_history)&&c.sold_history.length>0){for(const I of c.sold_history)if(I){for(const z of _)if(I[z]&&typeof I[z]=="string"&&I[z].trim()!=="")return console.log(`Found image in sold_history item.${z}`),I[z];for(const z in I)if(typeof I[z]=="string"&&I[z].includes("property-software.uk")&&(I[z].endsWith(".jpg")||I[z].endsWith(".jpeg")||I[z].endsWith(".png")))return console.log(`Found PaTMa image URL in sold_history item.${z}`),I[z];if(I.images&&Array.isArray(I.images)&&I.images.length>0){const z=I.images.find(Q=>typeof Q=="string"&&Q.includes("property-software.uk"));if(z)return console.log("Found PaTMa image URL in sold_history images array"),z;if(typeof I.images[0]=="string")return console.log("Using first image from sold_history images array"),I.images[0]}}}return console.log("No image found for property"),null},oe=async()=>{if(!s){y({variant:"destructive",title:"Error",description:"Please enter a location or postcode"});return}try{r(!0);const c=/^[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}$/i.test(s.trim());if(te(s).catch(_=>{console.error("Error fetching area insights:",_),y({variant:"destructive",title:"Warning",description:"Could not fetch area insights. Some information may be missing."})}),u==="listed")try{const _=await No({postcode:s.trim(),location:c?void 0:s.trim(),radius:p.radius,property_type:p.propertyType==="any"?void 0:p.propertyType,tenure:p.tenure==="any"?void 0:p.tenure,bedrooms:p.minBeds==="0"?void 0:parseInt(p.minBeds),new_build:p.newBuild||void 0,page:p.page,page_size:p.limit,sort_by:p.sortBy,include_sold_history:!0,require_sold_price:!0,require_size:!0});console.log("COMPLETE API RESPONSE STRUCTURE:",JSON.stringify(_,null,2));const I=_.properties[0];I&&(console.log("COMPLETE SAMPLE PROPERTY STRUCTURE:",JSON.stringify(I,null,2)),console.log("KEY PROPERTY FIELDS FOR IMAGE LOOKUP:",{listing_url:I.listing_url,property_url:I.property_url,url:I.url,id:I.id,rightmove_id:I.rightmove_id,zoopla_id:I.zoopla_id,uprn:I.uprn,listing_detail_url:I.listing_detail_url}));const Q=_.properties.map((U,ue)=>{let ie=JSON.parse(JSON.stringify(U));return U.uprn&&(ie.uprn=String(U.uprn)),U.last_sold_price&&(ie.price=U.last_sold_price),ie.image_url=re(U),!ie.property_type&&U.built_form?ie.property_type=U.built_form:ie.property_type||(ie.property_type="House"),ie}).map(U=>X(U));o(Q),k(_.total),v(_.totalPages),_.properties.length===0&&y({variant:"default",title:"No Results",description:"No listed properties found for this search criteria. Try adjusting your filters."})}catch(_){console.error("Error fetching listed properties:",_),y({variant:"destructive",title:"Error",description:_ instanceof Error?_.message:"Could not fetch listed properties. Please check your search criteria and try again."}),o([]),k(0),v(1)}else try{const _=await bo({postcode:s.trim(),location:c?void 0:s.trim(),radius:p.radius,property_type:p.propertyType==="any"?"flat":p.propertyType,tenure:p.tenure==="any"?void 0:p.tenure,max_age_months:p.maxAgeMonths,min_data_points:20,apply_indexation:!0,page:p.page,page_size:p.limit});console.log("Sold properties API response structure:",JSON.stringify(_,null,2).substring(0,500)+"..."),_.properties&&_.properties.length>0&&console.log("First sold property full object:",_.properties[0]);const z=_.properties.map(Q=>{var ue;let U=JSON.parse(JSON.stringify(Q));if(!U.price&&!U.sale_price){if((ue=Q.details)!=null&&ue.price)U.price=Q.details.price;else if(Q.price_paid)U.sale_price=Q.price_paid;else if(Q.sale_price)U.sale_price=Q.sale_price;else if(Q.latest_sold_price)U.sale_price=Q.latest_sold_price;else if(typeof Q.price=="string"){const ie=Q.price.match(/[\d,]+/);ie&&(U.price=parseInt(ie[0].replace(/,/g,"")))}}if(U.sale_price&&typeof U.sale_price=="string"){const ie=U.sale_price.match(/[\d,]+/);ie&&(U.sale_price=parseInt(ie[0].replace(/,/g,"")))}return U.image_url=re(Q),U}).map(Q=>X(Q));g(z),k(_.total),v(_.totalPages),_.properties.length===0&&y({variant:"default",title:"No Results",description:"No sold properties found for this search criteria. Try adjusting your filters."})}catch(_){console.error("Error fetching sold properties:",_),y({variant:"destructive",title:"Error",description:_ instanceof Error?_.message:"Could not fetch sold properties. Please check your search criteria and try again."}),g([]),k(0),v(1)}}catch(c){console.error("Search error:",c),y({variant:"destructive",title:"Error",description:c instanceof Error?c.message:"An unexpected error occurred. Please try again."})}finally{r(!1)}},X=c=>{const _={...c},I=_.price||_.asking_price||_.sale_price||_.price_paid||_.latest_price||0;if(I>0&&(_.stamp_duty||(_.stamp_duty=me(I)),_.size_sq_meters&&!_.price_per_sqft?_.price_per_sqft=le(I,_.size_sq_meters,!0):_.size_sq_feet&&!_.price_per_sqft&&(_.price_per_sqft=le(I,_.size_sq_feet,!1)),!_.estimated_rent)){let z=0;if(z=I*.04/12,_.bedrooms){const ue=1+(_.bedrooms-2)*.1;z*=Math.max(.8,Math.min(ue,1.5))}if(_.estimated_rent=Math.round(z),!_.rental_yield){const ue=_.estimated_rent*12;_.rental_yield=ue/I*100}if(!_.roi){const ge=I*Math.pow(1.03,5),Xe=_.estimated_rent*12*5,Qe=ge-I+Xe;_.roi=Qe/I*100}_.estimated_growth||(_.estimated_growth=3.5)}return _},me=(c,_=!1,I=!1)=>{if(c<=0)return 0;let z=0;return I&&(c<=425e3?z=0:c<=625e3?z=(c-425e3)*.05:I=!1),I||(c<=25e4?z=0:c<=925e3?z=(c-25e4)*.05:c<=15e5?z=(c-925e3)*.1+675e3*.05:z=(c-15e5)*.12+575e3*.1+675e3*.05),_&&(z+=c*.03),Math.round(z)},le=(c,_,I=!1)=>{if(!c||!_||_<=0)return null;if(I)return Math.round(c/_);{const z=I?_*10.764:_;return Math.round(c/z)}};j.useEffect(()=>{s&&oe()},[u,p.page]),j.useEffect(()=>{u==="sold"&&p.propertyType==="any"&&h(c=>({...c,propertyType:"flat"}))},[u,p.propertyType]);const Ne=c=>{h(_=>({..._,propertyType:c,page:1}))},M=c=>{h(_=>({..._,tenure:c,page:1}))},J=c=>{h(_=>({..._,minBeds:c,page:1}))},R=c=>{h(_=>({..._,radius:parseFloat(c),page:1}))},se=c=>{h(_=>({..._,sortBy:c,page:1}))},pe=c=>{w(c),$(!0)},ne=()=>{$(!1),setTimeout(()=>w(null),300)},Ha=()=>{var Xe,Qe,Ks,Js,Zs;if(!l)return null;const c=l.price||l.asking_price||l.sale_price||l.price_paid||l.latest_price||0,_="date_of_transfer"in l,I=l.image_url,z=l.postcode||l.address&&((Xe=l.address.match(/[A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}/i))==null?void 0:Xe[0])||"Not Available",Q=l.sold_history&&l.sold_history.length>0,U=Q?l.sold_history.filter(H=>H&&H.date&&!isNaN(new Date(H.date).getTime())&&H.price&&!isNaN(parseFloat(String(H.price)))).sort((H,ce)=>new Date(H.date).getTime()-new Date(ce.date).getTime()):[],ue=U.length>=2?(U[U.length-1].price-U[0].price)/U[0].price*100:null,ie=(H,ce=25,gs=4.5,js=25)=>{const es=H*(ce/100),ss=H-es,Ve=gs/100/12,ts=js*12,Xs=ss*(Ve*Math.pow(1+Ve,ts))/(Math.pow(1+Ve,ts)-1);return{downPayment:es,loanAmount:ss,monthlyPayment:Xs,totalPayments:ts,totalRepayment:Xs*ts}},ge=c>0?ie(c):null;return e.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 ${b?"opacity-100":"opacity-0 pointer-events-none"} transition-opacity duration-300`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:ne}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("button",{onClick:ne,className:"absolute top-4 right-4 z-10 bg-white/80 p-1 rounded-full hover:bg-white transition-colors",children:e.jsx(Ts,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex flex-col md:flex-row h-full overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-2/5 h-64 md:h-auto relative bg-gray-100",children:[I?e.jsx("img",{src:I,alt:l.address||"Property",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[e.jsx(Ie,{className:"h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No image available"})]}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium",children:l.property_type})}),l.listing_url&&e.jsxs("a",{href:l.listing_url,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-4 left-4 bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 hover:bg-white transition-colors",children:[e.jsx(an,{className:"h-4 w-4"}),"View Listing"]})]}),e.jsxs("div",{className:"w-full md:w-3/5 p-6 overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:l.address}),e.jsx("p",{className:"text-3xl font-bold mb-4 text-emerald-600",children:V(c)}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Property Type"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ma,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:l.property_type||"N/A"})]})]}),l.bedrooms&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bedrooms"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(is,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:l.bedrooms})]})]}),l.bathrooms&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Bathrooms"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"h-4 w-4 text-gray-600 flex items-center justify-center",children:"ðŸ›"}),e.jsx("span",{className:"font-medium",children:l.bathrooms})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Postcode"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ze,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:z})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Tenure"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(rn,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:l.tenure||"N/A"})]})]}),_&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Sold Date"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:new Date(l.date_of_transfer).toLocaleDateString()})]})]}),(l.size_sq_feet||l.size_sq_meters)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Size"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(nn,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"font-medium",children:[l.size_sq_feet?`${l.size_sq_feet} sq.ft`:"",l.size_sq_meters?`${l.size_sq_meters} mÂ²`:""]})]})]}),l.price_per_sqft&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Price per sq.ft"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ds,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:V(l.price_per_sqft)})]})]})]}),e.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Te,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Investment Dashboard"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[l.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Estimated Monthly Rent"}),e.jsxs("p",{className:"text-blue-600 text-lg font-bold mt-1",children:[V(l.estimated_rent),"/month"]}),l.rental_yield&&e.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:[l.rental_yield.toFixed(1),"% yield"]})]}),l.roi&&e.jsxs("div",{className:"bg-purple-50 p-3 rounded",children:[e.jsx("p",{className:"text-purple-800 text-sm font-medium",children:"5-Year ROI Estimate"}),e.jsxs("p",{className:"text-purple-600 text-lg font-bold mt-1",children:[l.roi.toFixed(1),"%"]}),l.estimated_growth&&e.jsxs("p",{className:"text-purple-600 text-sm mt-1",children:[l.estimated_growth.toFixed(1),"% annual growth"]})]})]}),ge&&e.jsxs("div",{className:"bg-emerald-50 p-3 rounded",children:[e.jsx("p",{className:"text-emerald-800 text-sm font-medium",children:"Mortgage Estimate (25% deposit)"}),e.jsxs("p",{className:"text-emerald-600 text-lg font-bold mt-1",children:[V(ge.monthlyPayment),"/month"]}),e.jsxs("div",{className:"mt-2 text-sm text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Deposit (25%):"}),e.jsx("span",{children:V(ge.downPayment)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Loan amount:"}),e.jsx("span",{children:V(ge.loanAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Term:"}),e.jsx("span",{children:"25 years at 4.5%"})]})]})]})]}),l.estimated_rent&&ge&&e.jsxs("div",{className:"mt-4 bg-white p-3 rounded border border-gray-100",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium",children:"Monthly Cash Flow Analysis"}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rental Income:"}),e.jsxs("span",{className:"text-emerald-600",children:["+",V(l.estimated_rent)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mortgage Payment:"}),e.jsxs("span",{className:"text-red-600",children:["-",V(ge.monthlyPayment)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Management (10%):"}),e.jsxs("span",{className:"text-red-600",children:["-",V(l.estimated_rent*.1)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Maintenance (5%):"}),e.jsxs("span",{className:"text-red-600",children:["-",V(l.estimated_rent*.05)]})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-gray-100 mt-2",children:[e.jsx("span",{children:"Net Cash Flow:"}),e.jsx("span",{className:`${l.estimated_rent-ge.monthlyPayment-l.estimated_rent*.15>0?"text-emerald-600":"text-red-600"}`,children:V(l.estimated_rent-ge.monthlyPayment-l.estimated_rent*.15)})]})]})]})]}),l.stamp_duty!==void 0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Purchase Costs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 p-3 rounded",children:[e.jsx("p",{className:"text-amber-800 text-sm font-medium",children:"Stamp Duty"}),e.jsx("p",{className:"text-amber-600 text-lg font-bold mt-1",children:V(l.stamp_duty)}),e.jsx("p",{className:"text-amber-700 text-xs mt-2",children:"First-time buyer? You may qualify for lower rates."})]}),e.jsxs("div",{className:"bg-emerald-50 p-3 rounded",children:[e.jsx("p",{className:"text-emerald-800 text-sm font-medium",children:"Total Purchase Cost"}),e.jsx("p",{className:"text-emerald-600 text-lg font-bold mt-1",children:V(c+(l.stamp_duty||0))}),e.jsxs("div",{className:"mt-2 text-sm text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property price:"}),e.jsx("span",{children:V(c)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stamp duty:"}),e.jsx("span",{children:V(l.stamp_duty||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Legal fees (est.):"}),e.jsx("span",{children:V(1500)})]})]})]})]})]}),((Ks=(Qe=m.priceHistory)==null?void 0:Qe.data)==null?void 0:Ks.trend_percentage)!==void 0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(on,{className:"h-5 w-5 mr-2 text-blue-600"}),"Area Insights"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-cyan-50 p-3 rounded",children:[e.jsx("p",{className:"text-cyan-800 text-sm font-medium",children:"Area Price Trend"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[m.priceHistory.data.trend_percentage>0?e.jsx(ln,{className:"h-5 w-5 text-emerald-600"}):e.jsx(cn,{className:"h-5 w-5 text-red-600"}),e.jsxs("p",{className:`text-lg font-bold ${m.priceHistory.data.trend_percentage>0?"text-emerald-600":"text-red-600"}`,children:[m.priceHistory.data.trend_percentage.toFixed(1),"%"]})]}),e.jsx("p",{className:"text-cyan-600 text-sm mt-1",children:"Last 12 months"}),e.jsx("div",{className:"mt-3 h-10 bg-white rounded overflow-hidden",children:e.jsx("div",{className:`h-full ${m.priceHistory.data.trend_percentage>0?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Math.min(Math.abs(m.priceHistory.data.trend_percentage)*3,100)}%`}})})]}),((Zs=(Js=m.askingPrices)==null?void 0:Js.data)==null?void 0:Zs.mean)&&e.jsxs("div",{className:"bg-teal-50 p-3 rounded",children:[e.jsx("p",{className:"text-teal-800 text-sm font-medium",children:"Average Area Price"}),e.jsx("p",{className:"text-teal-600 text-lg font-bold mt-1",children:V(m.askingPrices.data.mean)}),c>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-teal-600 text-sm mt-1",children:["This property is ",e.jsx("strong",{children:c<m.askingPrices.data.mean?"below":"above"})," average"]}),e.jsxs("div",{className:"mt-3 relative h-10 bg-gray-100 rounded overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"h-full bg-teal-200",style:{width:"50%"}}),e.jsx("div",{className:"h-full bg-teal-300",style:{width:"50%"}})]}),e.jsx("div",{className:"absolute top-0 h-full w-1 bg-black",style:{left:"50%",transform:"translateX(-50%)"}}),e.jsx("div",{className:"absolute top-0 h-full w-2 bg-emerald-600 rounded",style:{left:`${Math.min(Math.max(c/m.askingPrices.data.mean*50,10),90)}%`,transform:"translateX(-50%)"}})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1 text-gray-600",children:[e.jsx("span",{children:"-50%"}),e.jsx("span",{children:"Average"}),e.jsx("span",{children:"+50%"})]})]})]})]})]}),l.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:l.description})]}),Q&&U.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[e.jsx(Te,{className:"h-5 w-5 mr-2 text-amber-600"}),"Sale History"]}),ue!==null&&e.jsxs("div",{className:"mb-3 p-3 rounded bg-amber-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-amber-800 text-sm mr-2",children:"Total Price Growth:"}),e.jsxs("span",{className:`font-bold ${ue>=0?"text-emerald-600":"text-red-600"}`,children:[ue>=0?"+":"",ue.toFixed(1),"%"]})]}),U.length>=2&&e.jsxs("div",{className:"text-xs text-amber-700 mt-1",children:["Over ",Math.round((new Date(U[U.length-1].date).getTime()-new Date(U[0].date).getTime())/(1e3*60*60*24*365))," years (",new Date(U[0].date).getFullYear()," to ",new Date(U[U.length-1].date).getFullYear(),")"]})]}),U.length>=2&&e.jsxs("div",{className:"mb-4 bg-white p-3 rounded border border-gray-100",children:[e.jsx("div",{className:"h-32 relative",children:e.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex items-end h-full",children:U.map((H,ce)=>{const gs=Math.max(...U.map(Ve=>Ve.price)),js=H.price/gs*100,es=`${100/U.length}%`,ss=ce>0?"0 0 0 1px":"0";return e.jsx("div",{className:"bg-emerald-500 hover:bg-emerald-600 transition-colors relative group",style:{height:`${js}%`,width:es,margin:ss},children:e.jsxs("div",{className:"hidden group-hover:block absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-black text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[e.jsx("div",{children:V(H.price)}),e.jsx("div",{children:new Date(H.date).toLocaleDateString()})]})},ce)})})}),e.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:U.map((H,ce)=>e.jsx("div",{children:new Date(H.date).getFullYear()},ce))})]}),e.jsx("div",{className:"space-y-2",children:U.map((H,ce)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{children:new Date(H.date).toLocaleDateString()})]}),e.jsx("span",{className:"font-medium",children:typeof H.price=="number"&&!isNaN(H.price)?V(H.price):"Price not available"})]},ce))})]}),l.nearby_stations&&l.nearby_stations.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Nearby Transport"}),e.jsx("div",{className:"space-y-2",children:l.nearby_stations.map((H,ce)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{children:H.name}),e.jsxs("span",{className:"text-gray-600",children:[H.distance," miles"]})]},ce))})]}),l.nearby_schools&&l.nearby_schools.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Nearby Schools"}),e.jsx("div",{className:"space-y-2",children:l.nearby_schools.map((H,ce)=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsx("span",{children:H.name}),e.jsxs("span",{className:"text-gray-600",children:[H.distance," miles"]})]},ce))})]})]})]})]})]})};return e.jsxs(de,{children:[e.jsx("div",{className:"bg-background",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500 to-cyan-500 mix-blend-multiply"})}),e.jsxs("div",{className:"relative px-4 py-24 sm:px-6 sm:py-32 lg:py-40 lg:px-8",children:[e.jsx("h1",{className:"text-center text-4xl font-extrabold tracking-tight text-white sm:text-5xl lg:text-6xl",children:"Property Search"}),e.jsx("p",{className:"mx-auto mt-6 max-w-lg text-center text-xl text-white sm:max-w-3xl",children:"Search through thousands of properties, compare market prices, and make informed decisions with our comprehensive property data."})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 -mt-16 relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Find Properties"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:u==="listed"?"default":"outline",onClick:()=>f("listed"),className:"min-w-[120px]",children:"Listed Properties"}),e.jsx(E,{variant:u==="sold"?"default":"outline",onClick:()=>f("sold"),className:"min-w-[120px]",children:"Sold Properties"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs($e,{value:p.propertyType,onValueChange:Ne,children:[e.jsx(Re,{className:"w-full",children:e.jsx(Ue,{placeholder:"Property Type"})}),e.jsxs(Me,{children:[u==="listed"&&e.jsx(ae,{value:"any",children:"Any Type"}),e.jsx(ae,{value:"flat",children:"Flat"}),e.jsx(ae,{value:"terraced",children:"Terraced"}),e.jsx(ae,{value:"semi-detached",children:"Semi-Detached"}),e.jsx(ae,{value:"detached",children:"Detached"}),e.jsx(ae,{value:"bungalow",children:"Bungalow"})]})]}),e.jsxs($e,{value:p.tenure,onValueChange:M,children:[e.jsx(Re,{className:"w-full",children:e.jsx(Ue,{placeholder:"Tenure"})}),e.jsxs(Me,{children:[e.jsx(ae,{value:"any",children:"Any Tenure"}),e.jsx(ae,{value:"freehold",children:"Freehold"}),e.jsx(ae,{value:"leasehold",children:"Leasehold"})]})]}),e.jsxs($e,{value:p.minBeds,onValueChange:J,children:[e.jsx(Re,{className:"w-full",children:e.jsx(Ue,{placeholder:"Min Bedrooms"})}),e.jsxs(Me,{children:[e.jsx(ae,{value:"0",children:"Any"}),[1,2,3,4,5].map(c=>e.jsxs(ae,{value:c.toString(),children:[c,"+ beds"]},c))]})]}),e.jsxs($e,{value:p.radius.toString(),onValueChange:R,children:[e.jsx(Re,{className:"w-full",children:e.jsx(Ue,{placeholder:"Search Radius"})}),e.jsx(Me,{children:[.25,.5,1,2,5,10].map(c=>e.jsxs(ae,{value:c.toString(),children:[c," miles"]},c))})]}),u==="listed"&&e.jsxs($e,{value:p.sortBy,onValueChange:se,children:[e.jsx(Re,{className:"w-full",children:e.jsx(Ue,{placeholder:"Sort By"})}),e.jsxs(Me,{children:[e.jsx(ae,{value:"most_recent_sale_date",children:"Most Recent Sale"}),e.jsx(ae,{value:"distance",children:"Distance"})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx(B,{type:"text",placeholder:"Enter location (postcode, city, street, etc.)",value:s,onChange:c=>a(c.target.value),className:"flex-1 h-12"}),e.jsx(E,{onClick:oe,className:"h-12 px-8 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white hover:from-emerald-600 hover:to-cyan-600",disabled:t,children:t?e.jsx(ke,{size:"sm"}):"Search"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:c=>A(c.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show price per sq.ft"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:c=>T(c.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show stamp duty"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:c=>L(c.target.checked),className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),"Show planning applications"]})]})]})]}),t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(ke,{size:"lg"})}):W.length>0?e.jsxs(e.Fragment,{children:[((Ws=m.askingPrices)==null?void 0:Ws.data)&&e.jsxs("div",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Area Insights for ",s]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-emerald-800 text-sm font-medium mb-2",children:"Average Asking Price"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:V(m.askingPrices.data.mean||0)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-800 text-sm font-medium mb-2",children:"Median Asking Price"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:V(m.askingPrices.data.median||0)})]}),((Hs=(Ys=m.priceHistory)==null?void 0:Ys.data)==null?void 0:Hs.trend_percentage)!==void 0&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-800 text-sm font-medium mb-2",children:"Price Trend (12 months)"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[m.priceHistory.data.trend_percentage.toFixed(1),"%"]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg text-gray-600",children:["Found ",x," ",u==="listed"?"listed":"sold"," properties"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map((c,_)=>e.jsx(q,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-200 cursor-pointer",onClick:()=>pe(c),children:u==="listed"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"aspect-video relative bg-gray-100",children:[c.image_url?e.jsx("img",{src:c.image_url,alt:c.address||"Property",className:"w-full h-full object-cover",loading:"lazy"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[e.jsx(Ie,{className:"h-12 w-12 text-gray-300"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"No image available"})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("span",{className:"bg-white/90 text-black px-3 py-1 rounded-full text-sm font-medium",children:c.property_type}),c.new_build&&e.jsx("span",{className:"bg-emerald-500/90 text-white px-3 py-1 rounded-full text-sm font-medium",children:"New Build"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2 mb-2",children:c.address}),e.jsx("p",{className:"text-2xl font-bold mb-3 text-emerald-600",children:V(c.price||c.asking_price||c.last_sold_price||c.price_paid||c.latest_price||0)}),P&&c.price_per_sqft&&e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[V(c.price_per_sqft),"/sq.ft",c.size_sq_feet&&` Â· ${c.size_sq_feet} sq.ft`,c.size_sq_meters&&` Â· ${c.size_sq_meters} mÂ²`]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsx("span",{children:c.bedrooms||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:c.postcode})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:c.tenure||"N/A"})]})]}),D&&c.stamp_duty!==void 0&&e.jsx("div",{className:"mt-2 mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stamp Duty:"}),e.jsx("span",{className:"font-medium",children:V(c.stamp_duty)})]})}),(c.estimated_rent||c.rental_yield||c.roi||c.estimated_growth)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Investment Potential"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[c.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"Est. Rent"}),e.jsxs("p",{className:"text-blue-600 font-bold",children:[V(c.estimated_rent),"/mo"]})]}),c.rental_yield&&e.jsxs("div",{className:"bg-emerald-50 p-2 rounded",children:[e.jsx("p",{className:"text-emerald-800 font-medium",children:"Yield"}),e.jsxs("p",{className:"text-emerald-600 font-bold",children:[c.rental_yield.toFixed(1),"%"]})]}),c.roi&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"5yr ROI"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[c.roi.toFixed(1),"%"]})]}),c.estimated_growth&&e.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"Growth"}),e.jsxs("p",{className:"text-amber-600 font-bold",children:[c.estimated_growth.toFixed(1),"%"]})]})]})]})]})]}):e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2 mb-2",children:c.address}),e.jsx("p",{className:"text-2xl font-bold mb-3 text-emerald-600",children:V(c.sale_price||c.price||c.price_paid||0)}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:c.postcode})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:c.property_type})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsxs("span",{children:["Sold: ",new Date(c.date_of_transfer).toLocaleDateString()]})]}),c.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.bedrooms," beds"]})]})]}),D&&c.stamp_duty!==void 0&&e.jsx("div",{className:"mt-2 mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stamp Duty:"}),e.jsx("span",{className:"font-medium",children:V(c.stamp_duty)})]})}),(c.estimated_rent||c.rental_yield||c.roi||c.estimated_growth)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Investment Potential"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[c.estimated_rent&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"Est. Rent"}),e.jsxs("p",{className:"text-blue-600 font-bold",children:[V(c.estimated_rent),"/mo"]})]}),c.rental_yield&&e.jsxs("div",{className:"bg-emerald-50 p-2 rounded",children:[e.jsx("p",{className:"text-emerald-800 font-medium",children:"Yield"}),e.jsxs("p",{className:"text-emerald-600 font-bold",children:[c.rental_yield.toFixed(1),"%"]})]}),c.roi&&e.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"5yr ROI"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[c.roi.toFixed(1),"%"]})]}),c.estimated_growth&&e.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"Growth"}),e.jsxs("p",{className:"text-amber-600 font-bold",children:[c.estimated_growth.toFixed(1),"%"]})]})]})]})]})},`${c.address}-${_}`))}),S>1&&e.jsxs("div",{className:"mt-8 flex justify-center gap-2",children:[e.jsx(E,{variant:"outline",onClick:()=>h(c=>({...c,page:Math.max(1,c.page-1)})),disabled:p.page===1,children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4",children:["Page ",p.page," of ",S]}),e.jsx(E,{variant:"outline",onClick:()=>h(c=>({...c,page:Math.min(S,c.page+1)})),disabled:p.page===S,children:"Next"})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-600",children:["No ",u," properties found. Try adjusting your search criteria."]})})]}),e.jsx(Ha,{})]})}function So(){const[s,a]=d.useState(!0);be();const t=dn();return d.useEffect(()=>{const r=()=>a(!0),n=()=>a(!1);r();const o=setTimeout(n,100);return()=>clearTimeout(o)},[t.pathname]),d.useEffect(()=>{document.documentElement.classList.remove("dark")},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[s&&e.jsx(Nn,{}),e.jsx(ds.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e.jsx(d.Suspense,{fallback:e.jsx(bn,{}),children:e.jsxs(mn,{location:t,children:[e.jsx(ee,{path:"/",element:e.jsx(ki,{})}),e.jsx(ee,{path:"/deals",element:e.jsx(go,{})}),e.jsx(ee,{path:"/dashboard",element:e.jsx(ws,{children:e.jsx(Ti,{})})}),e.jsx(ee,{path:"/pricing",element:e.jsx(Li,{})}),e.jsx(ee,{path:"/subscription/success",element:e.jsx(Fi,{})}),e.jsx(ee,{path:"/subscription/cancel",element:e.jsx(Oi,{})}),e.jsx(ee,{path:"/account",element:e.jsx(ws,{children:e.jsx(zi,{})})}),e.jsx(ee,{path:"/insights",element:e.jsx(Wi,{})}),e.jsx(ee,{path:"/trends",element:e.jsx(Yi,{})}),e.jsx(ee,{path:"/research",element:e.jsx(Ji,{})}),e.jsx(ee,{path:"/blog",element:e.jsx(Zi,{})}),e.jsx(ee,{path:"/article/:title",element:e.jsx(xt,{})}),e.jsx(ee,{path:"/blog/:slug",element:e.jsx(xt,{})}),e.jsx(ee,{path:"/calculators",element:e.jsx(Xi,{})}),e.jsx(ee,{path:"/help",element:e.jsx(Qi,{})}),e.jsx(ee,{path:"/auth/callback",element:e.jsx(ro,{})}),e.jsx(ee,{path:"/property-management",element:e.jsx(oo,{})}),e.jsx(ee,{path:"/investment-opportunities",element:e.jsx(po,{})}),e.jsx(ee,{path:"/about-us",element:e.jsx(xo,{})}),e.jsx(ee,{path:"/messages",element:e.jsx(ws,{children:e.jsx(vo,{})})}),e.jsx(ee,{path:"/listings",element:e.jsx(_o,{})}),!1]})})},t.pathname),!1,e.jsx(Rn,{}),e.jsx(ao,{})]})}function ko(){const[s,a]=j.useState(()=>localStorage.getItem("password-protected")==="true");return s?e.jsx(Sa,{children:e.jsx(So,{})}):e.jsx(yn,{onSuccess:()=>a(!0)})}un.TempoDevtools.init();hn.init("phc_Pg1VGdZoazG7KyDNxnUXNZZz6zPVrGNSRtFlDnlZCcA",{api_host:"https://eu.i.posthog.com",person_profiles:"identified_only"});const Po=new pn;xn.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(fn,{client:Po,children:e.jsx(gn,{children:e.jsx(Sa,{children:e.jsx(ko,{})})})})}));
//# sourceMappingURL=index-Bj7jclH4.js.map
